(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,761911,e=>{"use strict";let a=(0,e.i(475254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>a],761911)},687130,e=>{"use strict";let a=(0,e.i(475254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>a],687130)},595468,e=>{"use strict";let a=(0,e.i(475254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],595468)},503116,e=>{"use strict";let a=(0,e.i(475254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>a],503116)},431343,e=>{"use strict";let a=(0,e.i(475254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>a],431343)},373884,e=>{"use strict";let a=(0,e.i(475254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],373884)},313252,e=>{"use strict";var a=e.i(843476),t=e.i(271645),s=e.i(95187);let r=(0,s.createServerReference)("40e294f0f9e4303d3615ddc6a66cada537036c1b97",s.callServer,void 0,s.findSourceMapURL,"getClassroomLiveTracking"),l=(0,s.createServerReference)("60034d10a668ce8353cc35e9db8784a8a275d2b2e0",s.callServer,void 0,s.findSourceMapURL,"toggleClassroomTracking");var i=e.i(846696),d=e.i(431343);let n=(0,e.i(475254).default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var c=e.i(531278),o=e.i(503116),x=e.i(595468),g=e.i(373884),m=e.i(463059),h=e.i(21218),u=e.i(687130),b=e.i(555436),p=e.i(761911),k=e.i(846932),v=e.i(88653),y=e.i(657688);function f({classroomId:e}){let[s,f]=(0,t.useState)(null),[j,w]=(0,t.useState)(!0),[N,S]=(0,t.useState)(!1),[A,C]=(0,t.useState)(null),[T,E]=(0,t.useState)(""),[M,L]=(0,t.useState)(0),P=(0,t.useCallback)(async()=>{let a=await r(e);a.success&&f(a),w(!1)},[e]);(0,t.useEffect)(()=>{P();let e=setInterval(P,2e3);return()=>clearInterval(e)},[P]);let R=async a=>{S(!0);let t=await l(e,a);t.success?(i.toast.success(a?"Tracking session started":"Tracking session ended"),P()):i.toast.error(t.error||"Operation failed"),S(!1)},{stats:D,filteredStudents:$}=(0,t.useMemo)(()=>{if(!s?.students)return{stats:null,filteredStudents:[]};let e=0,a=0,t=0,r=s.students;r.forEach(s=>{s.submissions.length>0&&(e++,a+=s.submissions.length,t+=s.submissions.filter(e=>"ACCEPTED"===e.status).length)});let l=a>0?Math.round(t/a*100):0,i=r.filter(e=>{let a=e.name.toLowerCase().includes(T.toLowerCase()),t=e.submissions.length>=M;return a&&t});return{stats:{activeStudents:e,totalSubmissions:a,acceptanceRate:l,totalStudents:r.length},filteredStudents:i}},[s,T,M]);return j&&!s?(0,a.jsx)("div",{className:"flex items-center justify-center p-20",children:(0,a.jsx)(c.Loader2,{className:"w-8 h-8 text-orange-600 animate-spin"})}):(0,a.jsxs)("div",{className:"space-y-8 max-w-[1600px] mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-[#141414] border border-gray-100 dark:border-[#262626] rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg ${s?.isTrackingActive?"bg-orange-100 dark:bg-orange-900/20":"bg-gray-100 dark:bg-[#1a1a1a]"}`,children:(0,a.jsx)(h.Activity,{className:`w-4 h-4 ${s?.isTrackingActive?"text-orange-600 animate-pulse":"text-gray-400"}`})}),(0,a.jsx)("span",{className:"text-[10px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:"Live Session Hub"})]}),(0,a.jsx)("h2",{className:"text-2xl font-black text-gray-900 dark:text-white uppercase tracking-tight",children:"Real-Time Monitor"}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-500 dark:text-gray-400 font-medium",children:s?.isTrackingActive?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Monitoring activity since ",new Date(s.trackingStartedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-gray-300 rounded-full"}),"Session inactive. Start tracking to collect data."]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[s?.isTrackingActive&&D&&(0,a.jsxs)("div",{className:"hidden md:flex bg-gray-50 dark:bg-[#1a1a1a] rounded-xl p-1 gap-1",children:[(0,a.jsxs)("div",{className:"px-4 py-2 bg-white dark:bg-[#262626] rounded-lg shadow-sm border border-gray-100 dark:border-transparent",children:[(0,a.jsx)("div",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider mb-0.5",children:"Active"}),(0,a.jsxs)("div",{className:"text-lg font-black text-gray-900 dark:text-white leading-none",children:[D.activeStudents,(0,a.jsxs)("span",{className:"text-gray-300 text-xs font-normal",children:["/",D.totalStudents]})]})]}),(0,a.jsxs)("div",{className:"px-4 py-2 bg-white dark:bg-[#262626] rounded-lg shadow-sm border border-gray-100 dark:border-transparent",children:[(0,a.jsx)("div",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider mb-0.5",children:"Submitted"}),(0,a.jsx)("div",{className:"text-lg font-black text-gray-900 dark:text-white leading-none",children:D.totalSubmissions})]}),(0,a.jsxs)("div",{className:"px-4 py-2 bg-white dark:bg-[#262626] rounded-lg shadow-sm border border-gray-100 dark:border-transparent",children:[(0,a.jsx)("div",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider mb-0.5",children:"Success Rate"}),(0,a.jsxs)("div",{className:"text-lg font-black text-emerald-500 leading-none",children:[D.acceptanceRate,"%"]})]})]}),(0,a.jsxs)("button",{onClick:()=>R(!s?.isTrackingActive),disabled:N,className:`h-14 px-8 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-3 shadow-lg ${s?.isTrackingActive?"bg-white text-red-600 border-2 border-red-50 hover:bg-red-50 hover:border-red-100 shadow-red-100/50":"bg-orange-600 text-white hover:bg-orange-500 shadow-orange-200 dark:shadow-none border-2 border-transparent"}`,children:[N?(0,a.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}):s?.isTrackingActive?(0,a.jsx)(n,{className:"w-4 h-4 fill-current"}):(0,a.jsx)(d.Play,{className:"w-4 h-4 fill-current"}),s?.isTrackingActive?"Stop Session":"Start Session"]})]})]}),s?.isTrackingActive&&(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-[#262626] flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(b.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by student name...",value:T,onChange:e=>E(e.target.value),className:"w-full h-12 pl-11 pr-4 bg-gray-50 dark:bg-[#1a1a1a] border-none rounded-xl text-sm font-medium focus:ring-2 focus:ring-orange-500/20 outline-none transition-all placeholder:text-gray-400 dark:text-white"})]}),(0,a.jsx)("div",{className:"flex gap-4",children:(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:(0,a.jsx)(u.Filter,{className:"w-4 h-4 text-gray-400"})}),(0,a.jsxs)("select",{value:M,onChange:e=>L(Number(e.target.value)),className:"h-12 pl-11 pr-8 bg-gray-50 dark:bg-[#1a1a1a] hover:bg-gray-100 dark:hover:bg-[#262626] rounded-xl text-sm font-bold text-gray-700 dark:text-gray-200 border-none outline-none appearance-none cursor-pointer transition-all min-w-[200px]",children:[(0,a.jsx)("option",{value:0,children:"All Submissions"}),(0,a.jsx)("option",{value:1,children:"At least 1 submission"}),(0,a.jsx)("option",{value:3,children:"At least 3 submissions"}),(0,a.jsx)("option",{value:5,children:"More than 5 submissions"}),(0,a.jsx)("option",{value:10,children:"More than 10 submissions"})]}),(0,a.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:(0,a.jsx)(m.ChevronRight,{className:"w-3 h-3 text-gray-400 rotate-90"})})]})})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-6",children:$.length>0?$.map(e=>{let t=e.submissions.length,s=e.submissions.filter(e=>"ACCEPTED"===e.status).length,r=t>0?Math.round(s/t*100):0;return(0,a.jsxs)("div",{className:"bg-white dark:bg-[#141414] border border-gray-100 dark:border-[#262626] rounded-2xl overflow-hidden hover:shadow-lg dark:hover:shadow-non hover:border-orange-100 dark:hover:border-orange-900/30 transition-all duration-300 group",children:[(0,a.jsxs)("div",{className:"p-6 pb-4 flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gray-50 dark:bg-[#1a1a1a] rounded-xl border border-gray-100 dark:border-[#333] relative overflow-hidden",children:e.image?(0,a.jsx)(y.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-orange-600 dark:text-orange-500 font-black text-xl bg-orange-50 dark:bg-orange-900/10",children:e.name?.charAt(0)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white mb-1 line-clamp-1",children:e.name}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest bg-gray-100 dark:bg-[#1a1a1a] px-2 py-0.5 rounded-full",children:["#",e.id.slice(-4)]})})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-black text-gray-900 dark:text-white leading-none mb-1",children:t}),(0,a.jsx)("div",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Total Subs"})]})]}),t>0&&(0,a.jsxs)("div",{className:"px-6 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-[10px] font-bold text-gray-500 mb-1.5 uppercase tracking-wide",children:[(0,a.jsxs)("span",{className:"text-emerald-600",children:[s," Accepted"]}),(0,a.jsxs)("span",{className:"text-red-500",children:[t-s," Errors"]})]}),(0,a.jsxs)("div",{className:"h-1.5 w-full bg-gray-100 dark:bg-[#1a1a1a] rounded-full overflow-hidden flex",children:[(0,a.jsx)("div",{className:"h-full bg-emerald-500",style:{width:`${r}%`}}),(0,a.jsx)("div",{className:"h-full bg-red-400",style:{width:`${100-r}%`}})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-100 dark:border-[#262626] bg-gray-50/30 dark:bg-black/20",children:(0,a.jsx)("div",{className:"max-h-[220px] overflow-y-auto custom-scrollbar p-2",children:e.submissions.length>0?e.submissions.map(t=>(0,a.jsxs)("button",{onClick:()=>C({...t,student:e}),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-white dark:hover:bg-[#1a1a1a] hover:shadow-sm transition-all group/item text-left mb-1",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 min-w-0",children:[(0,a.jsx)("div",{className:`mt-0.5 ${"ACCEPTED"===t.status?"text-emerald-500":"PENDING"===t.status?"text-orange-500":"text-red-500"}`,children:"ACCEPTED"===t.status?(0,a.jsx)(x.CheckCircle2,{className:"w-4 h-4"}):"PENDING"===t.status?(0,a.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(g.XCircle,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"font-bold text-xs text-gray-700 dark:text-gray-300 truncate group-hover/item:text-orange-600 transition-colors",children:t.problemTitle}),(0,a.jsx)("div",{className:"text-[9px] font-medium text-gray-400 mt-0.5",children:new Date(t.createdAt).toLocaleTimeString()})]})]}),(0,a.jsx)(m.ChevronRight,{className:"w-3 h-3 text-gray-300 opacity-0 group-hover/item:opacity-100 -translate-x-2 group-hover/item:translate-x-0 transition-all"})]},t.id)):(0,a.jsxs)("div",{className:"py-8 text-center",children:[(0,a.jsx)(o.Clock,{className:"w-5 h-5 text-gray-300 dark:text-gray-700 mx-auto mb-2"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-600 uppercase tracking-widest",children:"No Activity Yet"})]})})})]},e.id)}):(0,a.jsxs)("div",{className:"col-span-full py-20 text-center bg-gray-50/50 dark:bg-[#141414] border-2 border-dashed border-gray-200 dark:border-[#262626] rounded-3xl",children:[(0,a.jsx)(p.Users,{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"No Students Found"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Adjust filters or search criteria to see results."})]})}),(0,a.jsx)(v.AnimatePresence,{children:A&&(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,a.jsx)(k.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(null),className:"absolute inset-0 bg-white/80 dark:bg-black/80 backdrop-blur-sm"}),(0,a.jsxs)(k.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-4xl bg-white dark:bg-[#141414] rounded-2xl shadow-2xl overflow-hidden flex flex-col h-[80vh] border border-gray-100 dark:border-[#333]",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-100 dark:border-[#262626] flex items-center justify-between bg-white dark:bg-[#141414]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-orange-50 dark:bg-orange-500/10 text-orange-600 dark:text-orange-500 rounded-lg flex items-center justify-center font-black text-lg",children:A.student.name?.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h3",{className:"text-lg font-black text-gray-900 dark:text-white uppercase tracking-tight",children:A.student.name}),(0,a.jsx)("span",{className:`px-2.5 py-1 text-[9px] font-black uppercase tracking-widest rounded-md ${"ACCEPTED"===A.status?"bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-500":"bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-500"}`,children:A.status})]}),(0,a.jsxs)("div",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mt-0.5",children:[A.problemTitle," â€¢ ",new Date(A.createdAt).toLocaleString()]})]})]}),(0,a.jsx)("button",{onClick:()=>C(null),className:"h-8 px-4 bg-gray-900 dark:bg-white text-white dark:text-black hover:bg-orange-600 dark:hover:bg-gray-200 transition-colors uppercase text-[9px] font-black tracking-widest rounded-lg",children:"Close"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto bg-gray-50 dark:bg-[#0c0c0c] p-0",children:(0,a.jsx)("div",{className:"p-8",children:(0,a.jsx)("pre",{className:"font-mono text-sm leading-relaxed whitespace-pre-wrap text-gray-800 dark:text-gray-200 bg-white dark:bg-[#141414] p-6 rounded-xl border border-gray-100 dark:border-[#262626]",children:(0,a.jsx)("code",{children:A.code})})})})]})]})})]})}e.s(["LiveTracking",()=>f],313252)},119011,e=>{e.n(e.i(313252))}]);