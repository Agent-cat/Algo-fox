(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,643531,e=>{"use strict";let a=(0,e.i(475254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>a],643531)},531278,e=>{"use strict";let a=(0,e.i(475254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],531278)},107233,e=>{"use strict";let a=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],107233)},664030,e=>{"use strict";let a=(0,e.i(475254).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>a],664030)},810980,e=>{"use strict";let a=(0,e.i(475254).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>a],810980)},263488,e=>{"use strict";let a=(0,e.i(475254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>a],263488)},607486,e=>{"use strict";let a=(0,e.i(475254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>a],607486)},581418,e=>{"use strict";let a=(0,e.i(475254).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["ShieldCheck",()=>a],581418)},656488,e=>{"use strict";var a=e.i(271645);function r(e,t=300){let[s,d]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let a=setTimeout(()=>{d(e)},t);return()=>{clearTimeout(a)}},[e,t]),s}e.s(["useDebounce",()=>r])},893210,e=>{"use strict";var a=e.i(95187);let r=(0,a.createServerReference)("405e04aceede4e9292ab1f13da65c7c83541f66504",a.callServer,void 0,a.findSourceMapURL,"searchUsersByEmail");e.s(["searchUsersByEmail",()=>r])},560206,e=>{"use strict";var a=e.i(95187);let r=(0,a.createServerReference)("4013a4d902d2a4a7f58cf6a44f5223e4d3eef11604",a.callServer,void 0,a.findSourceMapURL,"addStaffMember");e.s(["addStaffMember",()=>r])},768510,e=>{"use strict";var a=e.i(95187);let r=(0,a.createServerReference)("40746d22ebe5805b14354bb221ceb84b19512bc8c4",a.callServer,void 0,a.findSourceMapURL,"getInstitutionStaff");e.s(["getInstitutionStaff",()=>r])},32095,e=>{"use strict";let a=(0,e.i(475254).default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);e.s(["GraduationCap",()=>a],32095)},882293,e=>{"use strict";let a=(0,e.i(475254).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["UserCheck",()=>a],882293)},388542,e=>{"use strict";var a=e.i(843476),r=e.i(271645),t=e.i(560206),s=e.i(768510),d=e.i(893210),l=e.i(761911),i=e.i(32095),o=e.i(607486),n=e.i(263488),c=e.i(107233),g=e.i(531278),x=e.i(643531),h=e.i(664030),b=e.i(810980),u=e.i(882293),m=e.i(581418),p=e.i(846696),f=e.i(656488),k=e.i(618566);function y({initialStats:e,initialStaff:y,institutionId:j,institutionName:w}){let N=(0,k.useRouter)(),[M]=(0,r.useState)(e),[S,C]=(0,r.useState)(y),[A,T]=(0,r.useState)(""),[E,R]=(0,r.useState)("TEACHER"),[U,H]=(0,r.useState)(!1),[z,B]=(0,r.useState)([]),[L,I]=(0,r.useState)(!1),O=(0,f.useDebounce)(A,300);(0,r.useEffect)(()=>{O&&O.length>2?(0,d.searchUsersByEmail)(O).then(e=>{e.success&&e.users&&(B(e.users),I(!0))}):(B([]),I(!1))},[O]);let V=(0,r.useCallback)(async()=>{if(A&&j){H(!0);try{let e=await (0,t.addStaffMember)({email:A,role:E,institutionId:j});if(e.success){p.toast.success(`${"TEACHER"===E?"Teacher":"Contest Manager"} added successfully`),T(""),I(!1);let e=await (0,s.getInstitutionStaff)(j);e.success&&e.staff&&C(e.staff),N.refresh()}else p.toast.error(e.error||"Failed to add staff member")}catch(e){console.error("Add staff error:",e),p.toast.error("Failed to add staff member")}finally{H(!1)}}},[A,j,E,N]);return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50/50 dark:bg-[#0a0a0a] transition-colors duration-300 pt-24 pb-12 px-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-orange-600 dark:text-orange-500 uppercase tracking-widest mb-2",children:[(0,a.jsx)(o.Building2,{className:"w-4 h-4"}),"Institution Admin"]}),(0,a.jsx)("h1",{className:"text-4xl font-black text-gray-900 dark:text-white tracking-tight",children:"Dashboard"})]}),w&&(0,a.jsxs)("div",{className:"flex items-center gap-3 px-5 py-2.5 bg-white dark:bg-[#141414] border border-gray-200 dark:border-[#262626] rounded-full shadow-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),(0,a.jsx)("span",{className:"font-bold text-sm text-gray-700 dark:text-gray-200",children:w})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(v,{title:"Total Students",value:M?.students||0,icon:l.Users,trend:"+12% this month",color:"blue"}),(0,a.jsx)(v,{title:"Active Teachers",value:M?.teachers||0,icon:i.GraduationCap,trend:"Full Staff",color:"orange"}),(0,a.jsx)(v,{title:"Classrooms",value:M?.classrooms||0,icon:b.BookOpen,trend:"Active Batches",color:"purple"}),(0,a.jsx)(v,{title:"Managers",value:M?.contestManagers||0,icon:h.Trophy,trend:"Contest Control",color:"green"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[(0,a.jsxs)("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,a.jsx)(u.UserCheck,{className:"w-5 h-5 text-gray-400"}),"Staff Directory"]}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-gray-200 dark:bg-[#262626] text-gray-700 dark:text-gray-300 text-xs font-bold rounded-full",children:[S.length," Members"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.length>0?S.map(e=>(0,a.jsxs)("div",{className:"group flex flex-col p-5 bg-white dark:bg-[#141414] border border-gray-100 dark:border-[#262626] rounded-2xl hover:border-orange-200 dark:hover:border-orange-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-orange-500/5 dark:hover:shadow-none relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-500"})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gray-50 dark:bg-[#1a1a1a] border border-gray-100 dark:border-[#262626] flex items-center justify-center text-gray-900 dark:text-white font-black text-lg overflow-hidden shadow-sm",children:e.image?(0,a.jsx)("img",{src:e.image,alt:e.name||"",className:"w-full h-full object-cover",referrerPolicy:"no-referrer"}):e.name?.[0]||e.email[0]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-gray-900 dark:text-white text-base leading-tight",children:e.name||"Unnamed User"}),(0,a.jsx)("div",{className:"text-xs font-medium text-gray-400 dark:text-gray-500 mt-1",children:e.email})]})]}),(0,a.jsxs)("div",{className:"mt-auto pt-4 border-t border-gray-50 dark:border-[#1a1a1a] flex items-center justify-between",children:[(0,a.jsx)("div",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-[10px] font-black uppercase tracking-wider border ${"TEACHER"===e.role?"bg-orange-50 dark:bg-orange-500/10 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-500/20":"bg-green-50 dark:bg-green-500/10 text-green-600 dark:text-green-400 border-green-100 dark:border-green-500/20"}`,children:e.role.replace("_"," ")}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-gray-300 dark:text-gray-600 uppercase tracking-widest",children:"Active"})]})]},e.id)):(0,a.jsxs)("div",{className:"col-span-full py-16 text-center bg-white dark:bg-[#141414] border border-dashed border-gray-200 dark:border-[#262626] rounded-2xl",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-50 dark:bg-[#1a1a1a] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.Users,{className:"w-6 h-6 text-gray-300 dark:text-gray-600"})}),(0,a.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"No staff members found"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Add your first team member to get started"})]})})]}),(0,a.jsxs)("div",{className:"lg:col-span-4 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-[#141414] border border-gray-100 dark:border-[#262626] rounded-2xl p-6 md:p-8 shadow-2xl shadow-gray-200/20 dark:shadow-none sticky top-24",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"p-2.5 bg-gray-900 dark:bg-white rounded-lg text-white dark:text-black",children:(0,a.jsx)(c.Plus,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white leading-none",children:"Add Staff"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 font-medium",children:"Invite new members"})]})]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-3 block",children:"Role Assignment"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)("button",{onClick:()=>R("TEACHER"),className:`py-3 px-4 rounded-xl text-xs font-bold transition-all duration-200 border ${"TEACHER"===E?"bg-orange-50 dark:bg-orange-500/20 border-orange-200 dark:border-orange-500/50 text-orange-700 dark:text-orange-400 shadow-sm":"bg-gray-50 dark:bg-[#1a1a1a] border-transparent text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-[#262626]"}`,children:"Teacher"}),(0,a.jsx)("button",{onClick:()=>R("CONTEST_MANAGER"),className:`py-3 px-4 rounded-xl text-xs font-bold transition-all duration-200 border ${"CONTEST_MANAGER"===E?"bg-green-50 dark:bg-green-500/20 border-green-200 dark:border-green-500/50 text-green-700 dark:text-green-400 shadow-sm":"bg-gray-50 dark:bg-[#1a1a1a] border-transparent text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-[#262626]"}`,children:"Manager"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-3 block",children:"Email Address"}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(n.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500 transition-colors group-focus-within:text-orange-500"}),(0,a.jsx)("input",{type:"email",value:A,onChange:e=>T(e.target.value),onFocus:()=>A.length>2&&I(!0),placeholder:"colleague@institution.edu",className:"w-full pl-11 pr-4 py-3.5 bg-gray-50 dark:bg-[#1a1a1a] border border-gray-200 dark:border-[#333] rounded-xl text-sm font-medium focus:bg-white dark:focus:bg-[#0a0a0a] focus:ring-4 focus:ring-orange-500/10 focus:border-orange-500 outline-none transition-all text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-600",autoComplete:"off"})]}),L&&z.length>0&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-[#1a1a1a] border border-gray-100 dark:border-[#262626] rounded-xl shadow-xl z-50 overflow-hidden divide-y divide-gray-50 dark:divide-[#262626]",children:z.map(e=>(0,a.jsxs)("button",{onClick:()=>{T(e.email),I(!1)},className:"w-full flex items-center justify-between px-4 py-3 hover:bg-orange-50 dark:hover:bg-orange-500/10 transition-colors text-left group",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-bold text-gray-900 dark:text-white",children:e.name||"User"}),(0,a.jsx)("div",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:e.email})]}),(0,a.jsx)(x.Check,{className:"w-3 h-3 text-orange-500 opacity-0 group-hover:opacity-100 transition-opacity"})]},e.id))})]}),(0,a.jsx)("button",{onClick:V,disabled:U||!A,className:"w-full py-4 bg-gray-900 dark:bg-white hover:bg-black dark:hover:bg-gray-200 text-white dark:text-black text-sm font-black uppercase tracking-widest rounded-xl transition-all shadow-xl shadow-gray-200 dark:shadow-none hover:shadow-2xl disabled:opacity-50 disabled:shadow-none translate-y-0 hover:-translate-y-0.5 active:translate-y-0",children:U?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(g.Loader2,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):"Add Member"})]})]}),(0,a.jsxs)("div",{className:"bg-linear-to-br from-blue-600 to-indigo-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mb-4 backdrop-blur-sm",children:(0,a.jsx)(m.ShieldCheck,{className:"w-5 h-5"})}),(0,a.jsx)("h3",{className:"font-bold mb-1",children:"Secure Access"}),(0,a.jsx)("p",{className:"text-xs text-blue-100 leading-relaxed opacity-90",children:"Members receive immediate access. Institution admins have full revocation rights."})]}),(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-2xl -mr-10 -mt-10"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-black/10 rounded-full blur-xl -ml-10 -mb-10"})]})]})]})]})})}function v({title:e,value:r,icon:t,trend:s,color:d}){return(0,a.jsxs)("div",{className:"bg-white dark:bg-[#141414] border border-gray-100 dark:border-[#262626] rounded-2xl p-6 shadow-sm hover:shadow-md dark:shadow-none transition-all duration-300 group",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:`w-12 h-12 rounded-2xl ${{blue:"bg-blue-50 dark:bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-100 dark:border-blue-500/20",orange:"bg-orange-50 dark:bg-orange-500/10 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-500/20",purple:"bg-purple-50 dark:bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-100 dark:border-purple-500/20",green:"bg-green-50 dark:bg-green-500/10 text-green-600 dark:text-green-400 border-green-100 dark:border-green-500/20"}[d]} flex items-center justify-center transition-colors border`,children:(0,a.jsx)(t,{className:"w-6 h-6"})}),s&&(0,a.jsx)("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 bg-gray-50 dark:bg-[#1a1a1a] px-2 py-1 rounded-full uppercase tracking-wide",children:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:e}),(0,a.jsx)("div",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-tight group-hover:translate-x-1 transition-transform",children:r})]})]})}e.s(["InstitutionDashboardContent",()=>y])}]);