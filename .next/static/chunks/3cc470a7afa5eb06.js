(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,270756,e=>{"use strict";let t=(0,e.i(475254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],270756)},595468,e=>{"use strict";let t=(0,e.i(475254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],595468)},503116,e=>{"use strict";let t=(0,e.i(475254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],503116)},223622,e=>{"use strict";let t=(0,e.i(475254).default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Ban",()=>t],223622)},878894,e=>{"use strict";let t=(0,e.i(475254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],878894)},751737,e=>{"use strict";var t=e.i(774690);e.s(["ShieldAlert",()=>t.default])},951445,e=>{"use strict";let t=(0,e.i(475254).default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);e.s(["Monitor",()=>t],951445)},588092,e=>{"use strict";let t=(0,e.i(475254).default)("shield-x",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);e.s(["ShieldX",()=>t],588092)},105610,532437,51991,269204,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(878894),s=e.i(588092),n=e.i(951445),l=e.i(270756),d=e.i(223622),o=e.i(503116),i=e.i(95187);let c=(0,i.createServerReference)("78c1cd378517a292ad03dee9242ae6d4c6eb499f21",i.callServer,void 0,i.findSourceMapURL,"logContestViolation"),m=(0,i.createServerReference)("4050b6d7261e7a6fa97816d9dd7891742fa5be61cf",i.callServer,void 0,i.findSourceMapURL,"getParticipationStatus");e.s(["getParticipationStatus",()=>m],532437);let x=[{key:"c",ctrl:!0,shift:!1},{key:"v",ctrl:!0,shift:!1},{key:"x",ctrl:!0,shift:!1},{key:"u",ctrl:!0,shift:!1},{key:"s",ctrl:!0,shift:!1},{key:"p",ctrl:!0,shift:!1},{key:"i",ctrl:!0,shift:!0},{key:"j",ctrl:!0,shift:!0},{key:"c",ctrl:!0,shift:!0},{key:"F12",ctrl:!1,shift:!1}];function u({contestId:e,sessionId:i,onAutoSubmit:u,onBlocked:g,paused:h=!1}){let[p,f]=(0,r.useState)({total:0,isFlagged:!1,isBlocked:!1,tempBlockedUntil:null,permanentlyBlocked:!1}),[b,y]=(0,r.useState)(!1),[k,w]=(0,r.useState)(!1),[v,j]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1),[C,E]=(0,r.useState)(0),L=(0,r.useRef)(!1),M=(0,r.useRef)(null),T=(0,r.useRef)(0),R=(0,r.useRef)(!1),A=(0,r.useRef)(!1),B=(0,r.useRef)(!1),I=(0,r.useRef)(!1);(0,r.useEffect)(()=>{I.current=k},[k]);let D=(0,r.useCallback)(()=>{let e=Date.now();return!h&&!R.current&&!N&&!(e-T.current<2e3)},[N,h]),U=(0,r.useCallback)(async(t,r)=>{if(L.current&&!A.current&&!B.current){if((j(r),y(!0),!["KEYBOARD_SHORTCUT","COPY_PASTE"].includes(t))&&D()){R.current=!0,T.current=Date.now();try{let a=await c(e,t,r);if(a.success){let e={total:a.totalViolations||0,isFlagged:a.isFlagged||!1,isBlocked:a.isBlocked||!1,tempBlockedUntil:a.tempBlockedUntil||null,permanentlyBlocked:a.permanentlyBlocked||!1};if(f(e),a.permanentlyBlocked)S(!0),g?.();else if(a.tempBlockedUntil){S(!0);let e=new Date(a.tempBlockedUntil).getTime()-Date.now();E(Math.max(0,Math.floor(e/1e3)))}}}catch(e){console.error("Failed to log violation:",e)}finally{R.current=!1}}}},[e,D,u,g]);return(0,r.useEffect)(()=>{e&&(async()=>{let t=await m(e);if(t.success&&t.participation){let e=t.participation,r={total:e.totalViolations||0,isFlagged:e.isFlagged||!1,isBlocked:!1,tempBlockedUntil:null,permanentlyBlocked:!1};if(e.permanentlyBlocked)r.isBlocked=!0,r.permanentlyBlocked=!0,S(!0),g?.();else if(e.tempBlockedUntil){let t=new Date(e.tempBlockedUntil);t>new Date&&(r.isBlocked=!0,r.tempBlockedUntil=e.tempBlockedUntil,S(!0),E(Math.max(0,Math.floor((t.getTime()-Date.now())/1e3))))}else e.isBlocked&&(r.isBlocked=!0,S(!0));f(r)}})()},[e,g]),(0,r.useEffect)(()=>{if(C<=0)return;let e=setInterval(()=>{E(e=>e<=1?(S(!1),f(e=>({...e,isBlocked:!1,tempBlockedUntil:null})),0):e-1)},1e3);return()=>clearInterval(e)},[C>0]),(0,r.useEffect)(()=>{let t;if(!e||!i)return;let r=setTimeout(()=>{L.current=!0,document.fullscreenElement||A.current||(w(!0),I.current=!0)},3e3);try{M.current=new BroadcastChannel(`contest-${e}`),M.current.postMessage({type:"ping",sessionId:i}),M.current.onmessage=e=>{"ping"===e.data.type&&e.data.sessionId!==i&&(U("MULTI_TAB","Contest opened in multiple tabs"),M.current?.postMessage({type:"conflict",sessionId:i})),"conflict"===e.data.type&&e.data.sessionId!==i&&U("MULTI_TAB","Contest opened in multiple tabs")}}catch(e){console.warn("BroadcastChannel not supported")}let a=()=>{L.current&&(document.fullscreenElement||U("FULLSCREEN_EXIT","You exited fullscreen mode"))};document.addEventListener("fullscreenchange",a);let s=e=>{if(L.current)return e.preventDefault(),U("COPY_PASTE",`${e.type.charAt(0).toUpperCase()+e.type.slice(1)} is not allowed`),!1};document.addEventListener("copy",s),document.addEventListener("cut",s),document.addEventListener("paste",s);let n=e=>{if(L.current){if(x.some(t=>{let r=e.key.toLowerCase()===t.key.toLowerCase(),a=e.ctrlKey===t.ctrl||e.metaKey===t.ctrl,s=e.shiftKey===t.shift;return r&&a&&s}))return e.preventDefault(),e.stopPropagation(),U("KEYBOARD_SHORTCUT",`Blocked shortcut: ${e.ctrlKey?"Ctrl+":""}${e.shiftKey?"Shift+":""}${e.key}`),!1;("F5"===e.key||"r"===e.key.toLowerCase()&&(e.ctrlKey||e.metaKey))&&(A.current=!0)}};document.addEventListener("keydown",n,!0);let l=()=>{L.current&&document.hidden&&U("TAB_SWITCH","You switched away from the contest tab")},d=()=>{L.current&&U("TAB_SWITCH","Window lost focus")};document.addEventListener("visibilitychange",l),window.addEventListener("blur",d);let o=0,c=()=>{let e=Date.now();if(!(e-o<2e3)){if((o=e,L.current)&&!h&&!R.current&&!N&&!b&&!I.current&&!document.fullscreenElement&&!A.current)return void U("FULLSCREEN_EXIT","You must stay in fullscreen mode")}};document.addEventListener("mousedown",c),document.addEventListener("keydown",c),document.addEventListener("touchstart",c);let m=()=>{if(!L.current)return;let e=window.outerWidth-window.innerWidth,t=window.outerHeight-window.innerHeight;(e>160||t>160)&&U("DEVTOOLS_OPEN","Developer tools detected")},u=()=>{clearTimeout(t),t=setTimeout(m,500)};window.addEventListener("resize",u);let g=e=>(e.preventDefault(),!1);document.addEventListener("contextmenu",g);let p=e=>{let t=e.target.closest("a");if(t){let e=t.getAttribute("href");e&&(e.startsWith("/")||e.startsWith(window.location.origin))&&(B.current=!0,setTimeout(()=>{B.current=!1},2e3))}};document.addEventListener("click",p,!0);let f=e=>{A.current=!0};window.addEventListener("beforeunload",f);let y=e=>(e.preventDefault(),!1);return document.addEventListener("dragover",y),document.addEventListener("drop",y),()=>{clearTimeout(r),clearTimeout(t),M.current?.close(),document.removeEventListener("fullscreenchange",a),document.removeEventListener("copy",s),document.removeEventListener("cut",s),document.removeEventListener("paste",s),document.removeEventListener("keydown",n,!0),document.removeEventListener("visibilitychange",l),window.removeEventListener("blur",d),window.removeEventListener("resize",u),document.removeEventListener("mousedown",c),document.removeEventListener("keydown",c),document.removeEventListener("touchstart",c),document.removeEventListener("contextmenu",g),document.removeEventListener("click",p,!0),window.removeEventListener("beforeunload",f),document.removeEventListener("dragover",y),document.removeEventListener("drop",y)}},[e,i,U]),p.total,(0,t.jsxs)(t.Fragment,{children:[(N||b)&&(0,t.jsx)("div",{className:"fixed inset-0 z-9999 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-[#141414] rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden border border-orange-100 dark:border-orange-500/20 transform transition-all scale-100",children:[(0,t.jsx)("div",{className:`h-2 w-full ${p.permanentlyBlocked?"bg-red-500":"bg-orange-500"}`}),(0,t.jsxs)("div",{className:"p-6 md:p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-start md:items-center",children:[(0,t.jsx)("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center shrink-0 shadow-sm ${p.permanentlyBlocked?"bg-red-50 dark:bg-red-500/10 text-red-500":"bg-orange-50 dark:bg-orange-500/10 text-orange-500"}`,children:p.permanentlyBlocked?(0,t.jsx)(d.Ban,{className:"w-8 h-8"}):C>0?(0,t.jsx)(o.Clock,{className:"w-8 h-8 animate-pulse"}):N?(0,t.jsx)(l.Lock,{className:"w-8 h-8"}):(0,t.jsx)(a.AlertTriangle,{className:"w-8 h-8"})}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white leading-tight",children:p.permanentlyBlocked?"Contest Session Terminated":C>0?"Temporary Suspension":"Violation Detected"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 font-medium text-sm",children:p.permanentlyBlocked?"Multiple violations detected. Your session has been permanently blocked.":C>0?"Please wait for the timer to expire before continuing.":v||"This action is prohibited during the contest."})]})]}),C>0&&(0,t.jsxs)("div",{className:"mt-8 p-6 bg-orange-50 dark:bg-orange-500/10 rounded-xl border border-orange-100 dark:border-orange-500/20 flex flex-col items-center justify-center",children:[(0,t.jsx)("span",{className:"text-xs font-bold text-orange-400 uppercase tracking-widest mb-2",children:"Access Resumes In"}),(0,t.jsxs)("div",{className:"text-5xl font-black text-orange-500 font-mono tracking-tighter tabular-nums",children:[Math.floor(C/60),":",String(C%60).padStart(2,"0")]})]}),!p.permanentlyBlocked&&C<=0&&(0,t.jsxs)("div",{className:"mt-8 space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Warning Level"}),(0,t.jsxs)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[p.total," ",(0,t.jsxs)("span",{className:"text-gray-400 font-normal",children:["/ ",6]})]})]}),(0,t.jsx)("div",{className:"h-3 bg-gray-100 dark:bg-[#1a1a1a] rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full transition-all duration-500 ease-out ${p.total>=4?"bg-red-500":"bg-orange-500"}`,style:{width:`${Math.min(p.total/6*100,100)}%`}})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Low Risk"}),p.total>=4?(0,t.jsx)("span",{className:"text-red-500 font-medium",children:"Critical Risk"}):(0,t.jsx)("span",{className:"text-orange-500 font-medium",children:"Caution"})]})]}),(0,t.jsx)("div",{className:"mt-8",children:!p.permanentlyBlocked&&C<=0?(0,t.jsx)("button",{onClick:()=>{(async()=>{try{document.fullscreenElement||await document.documentElement.requestFullscreen(),y(!1)}catch(e){}})()},className:"w-full py-4 bg-gray-900 dark:bg-white text-white dark:text-black rounded-xl font-bold hover:bg-gray-800 dark:hover:bg-gray-200 transition-all transform active:scale-[0.98] shadow-lg shadow-gray-200 dark:shadow-none",children:"Acknowledge & Continue"}):C>0?(0,t.jsx)("button",{disabled:!0,className:"w-full py-4 bg-gray-100 dark:bg-[#1a1a1a] text-gray-400 dark:text-gray-600 rounded-xl font-bold cursor-not-allowed",children:"Suspended"}):(0,t.jsx)("button",{className:"w-full py-4 bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-500 rounded-xl font-bold border border-red-100 dark:border-red-500/20 cursor-not-allowed",children:"Contact Administrator"})})]})]})}),k&&!N&&!b&&(0,t.jsx)("div",{className:"fixed inset-0 z-10000 flex items-center justify-center bg-black/60 backdrop-blur-md",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden border-2 border-orange-500 animate-in fade-in zoom-in duration-300",children:[(0,t.jsxs)("div",{className:"bg-orange-600 px-6 py-4 flex items-center gap-3",children:[(0,t.jsx)(n.Monitor,{className:"w-6 h-6 text-white"}),(0,t.jsx)("h2",{className:"text-lg font-bold text-white uppercase tracking-wider",children:"Fullscreen Required"})]}),(0,t.jsxs)("div",{className:"p-6 text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-orange-50 dark:bg-orange-500/10 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(s.ShieldX,{className:"w-10 h-10 text-orange-500"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Re-activate Proctoring"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8 text-sm",children:"To continue your contest session, you must re-enter fullscreen mode. This is required for proctoring accuracy."}),(0,t.jsxs)("button",{onClick:()=>{document.documentElement.requestFullscreen().then(()=>w(!1)).catch(()=>{})},className:"w-full py-4 bg-orange-600 text-white rounded-xl font-black uppercase tracking-widest hover:bg-orange-700 transition-all shadow-lg shadow-orange-200 flex items-center justify-center gap-3 group",children:[(0,t.jsx)(n.Monitor,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),"Go Full Screen"]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-400 mt-4 font-medium uppercase tracking-tighter",children:"Do not attempt to stay in windowed mode"})]})]})}),(0,t.jsxs)("div",{className:"fixed top-4 right-4 z-100 flex items-center gap-2 px-3 py-2 bg-white dark:bg-[#141414] border border-gray-200 dark:border-[#262626] rounded-lg shadow-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:"Proctored"}),p.total>0&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-orange-100 dark:bg-orange-500/10 text-orange-700 dark:text-orange-400 rounded text-xs font-semibold",children:p.total})]})]})}e.s(["default",()=>u],105610);var g=e.i(618566);function h({contestId:e,allowedPaths:t}){let a=(0,g.useRouter)(),s=(0,g.usePathname)(),n=(0,r.useRef)(s);return(0,r.useEffect)(()=>{if(!e)return;let r=()=>{window.history.pushState(null,"",window.location.href)};r();let l=t=>{t.preventDefault(),r(),c(e,"NAVIGATION_ATTEMPT","Attempted to use browser back/forward")};window.addEventListener("popstate",l);let d=r=>{let a=r.target.closest("a");if(a){let s=a.getAttribute("href");if(s&&"#"!==s&&""!==s.trim()&&!s.startsWith("javascript:")&&!t.some(e=>s.startsWith(e)))return r.preventDefault(),r.stopPropagation(),c(e,"NAVIGATION_ATTEMPT",`Attempted to navigate to: ${s}`),!1}};return document.addEventListener("click",d,!0),s!==n.current&&(t.some(e=>s?.startsWith(e))||(c(e,"NAVIGATION_ATTEMPT",`Unexpected navigation to: ${s}`),a.replace(n.current||"/"))),()=>{window.removeEventListener("popstate",l),document.removeEventListener("click",d,!0)}},[e,s,t,a]),null}e.s(["default",()=>h],51991);let p=(0,i.createServerReference)("40f1b84b507cbed77bbd694a76ce511a8893db67cb",i.callServer,void 0,i.findSourceMapURL,"finishContestAction");e.s(["finishContestAction",()=>p],269204)},499970,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(463059),s=e.i(270756),n=e.i(373375),l=e.i(595468),d=e.i(751737),o=e.i(846696),i=e.i(522016),c=e.i(618566),m=e.i(98919),x=e.i(951445),u=e.i(286536);let g=(0,e.i(475254).default)("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);var h=e.i(972520),p=e.i(643531),f=e.i(37727),b=e.i(95187);let y=(0,b.createServerReference)("60d3252bd45f48968dec686bb41d7abb72b2b3fa40",b.callServer,void 0,b.findSourceMapURL,"startContestSession"),k=(0,b.createServerReference)("60e4bb3f837a3366538a85855a444a9a4c1f3ce841",b.callServer,void 0,b.findSourceMapURL,"verifyContestPassword");var w=e.i(647163);let v=[{icon:x.Monitor,title:"Fullscreen Enforced",description:"The contest runs in fullscreen. Exiting may be flagged."},{icon:u.Eye,title:"Focus Tracking",description:"Tab switching and window blurring are monitored."},{icon:g,title:"Input Restricted",description:"Copy-paste and developer tools are disabled."},{icon:m.Shield,title:"Proctored Environment",description:"suspicious activity is logged for review."}];function j({contestId:e,contestTitle:a,requiresPassword:l,isOpen:d,onClose:i,onStart:c}){let[x,u]=(0,r.useState)(!1),[g,b]=(0,r.useState)("RULES"),[j,N]=(0,r.useState)(""),[S,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d&&(l?b("PASSWORD"):b("RULES"),C(!1),N(""),u(!1))},[d,l]);let E=async()=>{if(!j)return void o.toast.error("Enter the contest password");u(!0);try{let t=await k(e,j);t.success?(b("RULES"),o.toast.success("Access granted")):o.toast.error(t.error||"Incorrect password")}catch{o.toast.error("Verification failed")}finally{u(!1)}},L=async()=>{if(S){u(!0);try{let t=await y(e,j);if(!t.success){o.toast.error(t.error||"Could not start session"),u(!1);return}try{await document.documentElement.requestFullscreen()}catch(e){console.warn("Fullscreen failed",e)}o.toast.success("Good luck!"),c(t.sessionId)}catch{o.toast.error("Failed to initialize contest"),u(!1)}}};return d?(0,t.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/80 backdrop-blur-md transition-opacity",onClick:i}),(0,t.jsxs)("div",{className:"relative bg-white dark:bg-[#0a0a0a] w-full max-w-md rounded-3xl shadow-2xl border border-gray-100 dark:border-[#262626] overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"px-8 pt-8 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex gap-2",children:[1,2,3].map(e=>{if(e>(l?3:2))return null;let r=!1;l?(1===e&&"PASSWORD"===g&&(r=!0),2===e&&"RULES"===g&&(r=!0),3===e&&"CONFIRM"===g&&(r=!0)):(1===e&&"RULES"===g&&(r=!0),2===e&&"CONFIRM"===g&&(r=!0));let a=l?1===e&&"PASSWORD"!==g||2===e&&"CONFIRM"===g:1===e&&"CONFIRM"===g;return(0,t.jsx)("div",{className:(0,w.cn)("h-1 rounded-full transition-all duration-300",r?"w-8 bg-orange-600":a?"w-2 bg-orange-200 dark:bg-orange-900":"w-2 bg-gray-100 dark:bg-[#262626]")},e)})}),(0,t.jsx)("button",{onClick:i,className:"p-2 -mr-2 text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:(0,t.jsx)(f.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"p-8 min-h-[400px] flex flex-col",children:["PASSWORD"===g&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col animate-in slide-in-from-right-8 duration-300",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gray-50 dark:bg-[#1a1a1a] rounded-2xl flex items-center justify-center mb-6",children:(0,t.jsx)(s.Lock,{className:"w-6 h-6 text-gray-900 dark:text-white"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Private Contest"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter the access code to join."})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)("input",{type:"password",value:j,onChange:e=>N(e.target.value),onKeyDown:e=>"Enter"===e.key&&E(),placeholder:"Password",autoFocus:!0,className:"w-full bg-gray-50 dark:bg-[#141414] border-gray-200 dark:border-[#262626] rounded-xl px-4 py-4 text-center text-2xl font-bold tracking-widest focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all placeholder:text-gray-300 dark:text-white dark:placeholder:text-gray-700"})}),(0,t.jsx)("div",{className:"mt-auto pt-8",children:(0,t.jsxs)("button",{onClick:E,disabled:!j||x,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-black py-4 rounded-xl font-bold text-sm tracking-wide hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",children:[x?"Verifying...":"Continue",!x&&(0,t.jsx)(h.ArrowRight,{className:"w-4 h-4"})]})})]}),"RULES"===g&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col animate-in slide-in-from-right-8 duration-300",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Contest Rules"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Strict proctoring is active."})]}),(0,t.jsx)("div",{className:"space-y-6",children:v.map((e,r)=>{let a=e.icon;return(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 shrink-0 rounded-full bg-gray-50 dark:bg-[#1a1a1a] flex items-center justify-center",children:(0,t.jsx)(a,{className:"w-5 h-5 text-gray-900 dark:text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed mt-0.5",children:e.description})]})]},r)})}),(0,t.jsx)("div",{className:"mt-auto pt-8",children:(0,t.jsxs)("button",{onClick:()=>b("CONFIRM"),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-black py-4 rounded-xl font-bold text-sm tracking-wide hover:opacity-90 transition-opacity flex items-center justify-center gap-2",children:["I Understand",(0,t.jsx)(h.ArrowRight,{className:"w-4 h-4"})]})})]}),"CONFIRM"===g&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col animate-in slide-in-from-right-8 duration-300",children:[(0,t.jsxs)("button",{onClick:()=>b("RULES"),className:"mb-6 flex items-center gap-2 text-sm text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors w-fit",children:[(0,t.jsx)(n.ChevronLeft,{className:"w-4 h-4"}),"Back"]}),(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-500/20 mx-auto rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,t.jsx)(m.Shield,{className:"w-8 h-8 text-orange-600 dark:text-orange-500"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Ready to Start?"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm max-w-[260px] mx-auto",children:"Once you begin, your screen will be monitored. Violations may lead to disqualification."})]}),(0,t.jsx)("div",{className:"bg-gray-50 dark:bg-[#141414] border border-gray-100 dark:border-[#262626] rounded-xl p-4 mb-6",children:(0,t.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,t.jsxs)("div",{className:"relative flex items-center mt-0.5",children:[(0,t.jsx)("input",{type:"checkbox",checked:S,onChange:e=>C(e.target.checked),className:"peer h-5 w-5 appearance-none rounded-md border-2 border-gray-300 dark:border-gray-600 checked:border-orange-500 checked:bg-orange-500 transition-all"}),(0,t.jsx)(p.Check,{className:"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100"})]}),(0,t.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 select-none leading-relaxed",children:"I verify that I am the registered participant and I agree to follow all contest rules honestly."})]})}),(0,t.jsx)("div",{className:"mt-auto",children:(0,t.jsx)("button",{onClick:L,disabled:!S||x,className:"w-full bg-linear-to-r from-orange-600 to-orange-500 text-white py-4 rounded-xl font-bold text-sm tracking-wide hover:shadow-lg hover:shadow-orange-500/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,t.jsxs)(t.Fragment,{children:["Enter Contest",(0,t.jsx)(h.ArrowRight,{className:"w-4 h-4"})]})})})]})]})]})]}):null}var N=e.i(105610),S=e.i(51991),C=e.i(269204);function E({contest:e,user:m}){let x=(0,c.useRouter)(),[u,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(1),[f,b]=(0,r.useState)(!1),[y,k]=(0,r.useState)(e.hasAcceptedRules||!1),[w,v]=(0,r.useState)(!1),E=e.isFinished||!1,[L,M]=(0,r.useState)(e.sessionId||null);(0,r.useEffect)(()=>{console.log("[ContestProtection Debug]",{hasAcceptedRules:y,sessionId:L,isFinished:E,willRenderProtection:y&&L&&!E})},[y,L,E,e.canManage]);let T=new Date,R=new Date(e.startTime),A=new Date(e.endTime),B=T>=R,I=T>A,[D,U]=(0,r.useState)(!1),[P,F]=(0,r.useState)(""),$=async()=>{if("end"!==P.toLowerCase())return void o.toast.error("Please type 'end' to confirm");v(!0);try{(await (0,C.finishContestAction)(e.id)).success?(o.toast.success("Contest submitted successfully!"),x.push("/")):(o.toast.error("Failed to submit contest"),v(!1))}catch(e){console.error(e),o.toast.error("Something went wrong"),v(!1)}U(!1)};(0,r.useEffect)(()=>{E||(localStorage.getItem(`contest-rules-${e.id}`),y||B&&!I&&b(!0))},[e.id,B,I,y,E]),(0,r.useEffect)(()=>{let e=setInterval(()=>{let t=new Date,r=(B?A:R).getTime()-t.getTime();if(r<=0){g(B?"Contest Ended":"Starting Now"),clearInterval(e);return}let a=Math.floor(r/864e5),s=Math.floor(r%864e5/36e5),n=Math.floor(r%36e5/6e4),l=Math.floor(r%6e4/1e3);g(`${a>0?`${a}d `:""}${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`)},1e3);return()=>clearInterval(e)},[B,R,A]);let O=Math.ceil(e.problems.length/20),z=(h-1)*20,W=e.problems.slice(z,z+20);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{contestId:e.id,contestTitle:e.title,requiresPassword:e.requiresPassword,isOpen:f,onClose:()=>b(!1),onStart:t=>{localStorage.setItem(`contest-rules-${e.id}`,"true"),k(!0),b(!1),M(t),window.location.reload()}}),y&&L&&!E&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.default,{contestId:e.id,sessionId:L,paused:w||D}),(0,t.jsx)(S.default,{contestId:e.id,allowedPaths:["/problems/",`/contest/${e.id}`]})]}),(0,t.jsx)("div",{className:"min-h-screen bg-white dark:bg-[#0a0a0a] py-8",children:(0,t.jsxs)("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-[#262626] text-gray-700 dark:text-gray-300",children:e.visibility}),E?(0,t.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400",children:"Completed"}):I?(0,t.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-500/20 text-gray-700 dark:text-gray-400",children:"Ended"}):B?(0,t.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-400",children:"Live"}):(0,t.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400",children:"Upcoming"})]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:e.description||"Test your skills in this competitive programming arena."})]}),E&&(0,t.jsxs)("div",{className:"mb-8 p-6 bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-100 dark:border-emerald-500/20 rounded-2xl flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-emerald-100 dark:bg-emerald-500/20 rounded-xl flex items-center justify-center shrink-0",children:(0,t.jsx)(l.CheckCircle2,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-emerald-900 dark:text-emerald-400",children:"Contest Session Completed"}),(0,t.jsx)("p",{className:"text-emerald-700 dark:text-emerald-500 text-sm",children:"You have successfully ended your session. Your submissions have been recorded and you can view the final standings once the contest ends."})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-6 mb-6 pb-6 border-b border-gray-200 dark:border-[#262626] text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Start:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:R.toLocaleString()})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"End:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:A.toLocaleString()})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Problems:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:e._count.problems})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Time:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium font-mono",children:u})]}),(0,t.jsxs)("div",{className:"ml-auto flex gap-2",children:[y&&B&&!I&&!E&&(0,t.jsxs)("button",{onClick:()=>{U(!0)},className:"px-4 py-2 bg-red-600 text-white rounded text-sm font-medium hover:bg-red-700 transition-colors flex items-center gap-2 shadow-lg shadow-red-500/20",children:[(0,t.jsx)(l.CheckCircle2,{className:"w-4 h-4"}),"End Contest"]}),I&&(0,t.jsx)(i.default,{href:`/contest/${e.id}/standings`,className:"px-4 py-2 bg-orange-600 text-white rounded text-sm font-medium hover:bg-orange-700 transition-colors shadow-lg shadow-orange-500/20",children:"Leaderboard"})]})]}),B||e.canManage?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-6 py-4 border-b border-gray-100 dark:border-[#262626] text-[11px] font-bold text-gray-400 uppercase tracking-widest",children:[(0,t.jsx)("div",{className:"col-span-1",children:"#"}),(0,t.jsx)("div",{className:"col-span-6 md:col-span-7",children:"Title"}),(0,t.jsx)("div",{className:"col-span-3 md:col-span-2",children:"Difficulty"}),(0,t.jsx)("div",{className:"col-span-2 md:col-span-2",children:"Status"})]}),(0,t.jsx)("div",{className:"mt-2",children:W.map((r,n)=>{let d=z+n,c=(y||e.canManage||!B||I)&&(!E||e.canManage),m=r.isSolved;return(0,t.jsxs)(i.default,{href:c&&(B||e.canManage)&&!m?`/problems/${r.problem.slug}?contestId=${e.id}`:"#",onClick:t=>{if(E&&!e.canManage){t.preventDefault(),o.toast.error("Contest session ended",{description:"You have already completed this contest."});return}if(m){t.preventDefault(),o.toast.success("Problem Solved!",{description:"You have already completed this challenge. Great job!"});return}c||!B||I||(t.preventDefault(),b(!0))},className:`grid grid-cols-12 gap-4 px-6 py-4 rounded-xl items-center transition-all duration-200 ${c&&(B||e.canManage)&&!m?"hover:bg-gray-50/50 dark:hover:bg-[#1a1a1a] cursor-pointer":m?"opacity-75 bg-emerald-50/30 dark:bg-emerald-500/5 cursor-not-allowed":"opacity-50 cursor-not-allowed"}`,children:[(0,t.jsx)("div",{className:"col-span-1 text-sm text-gray-500 dark:text-gray-400 font-medium",children:d+1}),(0,t.jsxs)("div",{className:"col-span-6 md:col-span-7 font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[(0,t.jsx)("span",{className:`truncate ${c&&!m?"hover:text-orange-600 transition-colors":""}`,children:r.problem.title}),m&&(0,t.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 text-[10px] font-bold uppercase tracking-wider flex items-center gap-1",children:[(0,t.jsx)(l.CheckCircle2,{className:"w-3 h-3"}),"Solved"]})]}),(0,t.jsx)("div",{className:"col-span-3 md:col-span-2",children:(0,t.jsx)("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e){case"EASY":return"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400";case"MEDIUM":return"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-400";case"HARD":return"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400";default:return"bg-gray-100 dark:bg-gray-500/20 text-gray-700 dark:text-gray-400"}})(r.problem.difficulty)}`,children:"MEDIUM"===r.problem.difficulty?"Med.":r.problem.difficulty.charAt(0)+r.problem.difficulty.slice(1).toLowerCase()})}),(0,t.jsx)("div",{className:"col-span-2 md:col-span-2 text-sm text-gray-500 dark:text-gray-400",children:m?(0,t.jsx)(l.CheckCircle2,{className:"w-5 h-5 text-emerald-500"}):c&&(B||e.canManage)?(0,t.jsx)(a.ChevronRight,{className:"w-5 h-5 text-gray-400"}):(0,t.jsx)(s.Lock,{className:"w-4 h-4 text-gray-400"})})]},r.problem.id)})}),O>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-12 mb-8",children:[(0,t.jsx)("button",{onClick:()=>p(e=>Math.max(1,e-1)),disabled:1===h,className:`p-2 border border-gray-200 dark:border-[#262626] rounded transition-colors ${1===h?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a]"}`,children:(0,t.jsx)(n.ChevronLeft,{className:"w-4 h-4"})}),Array.from({length:O},(e,t)=>t+1).map(e=>(0,t.jsx)("button",{onClick:()=>p(e),className:`w-9 h-9 rounded text-sm font-medium transition-colors ${h===e?"bg-orange-600 text-white":"border border-gray-200 dark:border-[#262626] text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a]"}`,children:e},e)),(0,t.jsx)("button",{onClick:()=>p(e=>Math.min(O,e+1)),disabled:h===O,className:`p-2 border border-gray-200 dark:border-[#262626] rounded transition-colors ${h===O?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a]"}`,children:(0,t.jsx)(a.ChevronRight,{className:"w-4 h-4"})})]})]}):(0,t.jsxs)("div",{className:"text-center py-20 border border-gray-200 dark:border-[#262626] rounded-lg bg-white dark:bg-[#141414]",children:[(0,t.jsx)(s.Lock,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Problems Locked"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Problems will be revealed when the contest starts."})]})]})}),D&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-[#141414] rounded-xl shadow-2xl w-full max-w-md p-6 border border-gray-100 dark:border-[#262626] transform scale-100 transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4 text-red-600 dark:text-red-400",children:[(0,t.jsx)(d.ShieldAlert,{className:"w-8 h-8"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"End Contest Session?"})]}),(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to end your session? You will ",(0,t.jsx)("strong",{children:"NOT"})," be able to re-enter or solve more problems after this.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"Type ",(0,t.jsx)("span",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:"end"})," below to confirm."]}),(0,t.jsx)("input",{type:"text",placeholder:"Type 'end' to confirm",value:P,onChange:e=>F(e.target.value),className:"w-full px-4 py-3 border border-gray-200 dark:border-[#262626] rounded-lg mb-6 bg-gray-50 dark:bg-[#1a1a1a] focus:bg-white dark:focus:bg-[#0a0a0a] focus:ring-2 focus:ring-red-500/20 focus:border-red-500 outline-none transition-all font-mono text-center uppercase tracking-widest placeholder:normal-case placeholder:tracking-normal text-gray-900 dark:text-gray-100",autoFocus:!0}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>{U(!1),F("")},className:"flex-1 px-4 py-3 border border-gray-200 dark:border-[#262626] rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:$,disabled:"end"!==P.toLowerCase()||w,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-red-500/20",children:w?"Ending...":"End Contest"})]})]})})]})}e.s(["default",()=>E],499970)}]);