(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,180127,e=>{"use strict";let r=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["default",()=>r])},871689,e=>{"use strict";var r=e.i(180127);e.s(["ArrowLeft",()=>r.default])},727612,e=>{"use strict";let r=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>r],727612)},555436,e=>{"use strict";let r=(0,e.i(475254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>r],555436)},107233,e=>{"use strict";let r=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],107233)},979447,e=>{"use strict";var r=e.i(95187);let t=(0,r.createServerReference)("60d2264b1f398652eb46eab2bb3759572857722502",r.callServer,void 0,r.findSourceMapURL,"removeProblemFromCategory");e.s(["removeProblemFromCategory",()=>t])},200952,e=>{"use strict";var r=e.i(95187);let t=(0,r.createServerReference)("f88ea1c2067191c078fad313714852f8fe7db11df1",r.callServer,void 0,r.findSourceMapURL,"getCategoryProblems");e.s(["getCategoryProblems",()=>t])},544295,e=>{"use strict";var r=e.i(95187);let t=(0,r.createServerReference)("ff161ca534fa0477106bff83d2b07e07a7d461630c",r.callServer,void 0,r.findSourceMapURL,"getProblems");e.s(["getProblems",()=>t])},366239,e=>{"use strict";var r=e.i(843476),t=e.i(271645),s=e.i(618566),a=e.i(200952),l=e.i(979447),o=e.i(544295),i=e.i(107233),d=e.i(727612),c=e.i(871689),n=e.i(555436),m=e.i(522016),x=e.i(846696);function h(){let h=(0,s.useParams)();(0,s.useRouter)();let b=h?.id,[g,u]=(0,t.useState)(null),[f,y]=(0,t.useState)([]),[p,v]=(0,t.useState)([]),[j,N]=(0,t.useState)(!0),[w,k]=(0,t.useState)(!1),[P,S]=(0,t.useState)(!1),[C,A]=(0,t.useState)("");(0,t.useEffect)(()=>{b&&(M(),F())},[b]);let M=async()=>{try{let{getCategoryById:r}=await e.A(139557),t=await r(b);t.success?u(t.category):x.toast.error(t.error||"Failed to load category")}catch(e){console.error("Failed to fetch category:",e),x.toast.error("Failed to load category")}},F=async()=>{N(!0);try{let e=await (0,a.getCategoryProblems)(b,1,100);y(e.problems)}catch(e){console.error("Failed to fetch problems:",e),x.toast.error("Failed to load problems")}finally{N(!1)}},R=async()=>{k(!0);try{let e=await (0,o.getProblems)(1,100,"LEARN"),r=new Set(f.map(e=>e.id)),t=e.problems.filter(e=>!r.has(e.id));v(t)}catch(e){console.error("Failed to fetch available problems:",e),x.toast.error("Failed to load available problems")}finally{k(!1)}},L=()=>{S(!0),R()},T=async r=>{let{addProblemToCategory:t}=await e.A(139557),s=await t(b,r);s.success?(x.toast.success("Problem added to category"),F(),R()):x.toast.error(s.error||"Failed to add problem")},E=async e=>{if(!confirm("Are you sure you want to remove this problem from the category?"))return;let r=await (0,l.removeProblemFromCategory)(b,e);r.success?(x.toast.success("Problem removed from category"),F()):x.toast.error(r.error||"Failed to remove problem")},U=p.filter(e=>e.title.toLowerCase().includes(C.toLowerCase()));return j&&!g?(0,r.jsx)("div",{className:"min-h-screen pt-24 pb-12 px-6 bg-white flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}):(0,r.jsxs)("div",{className:"min-h-screen pt-24 pb-12 px-6 bg-white",children:[(0,r.jsxs)("div",{className:"max-w-6xl mx-auto ml-0",children:[(0,r.jsxs)(m.default,{href:"/admin/categories",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[(0,r.jsx)(c.ArrowLeft,{className:"w-4 h-4"}),"Back to Categories"]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:g?.name||"Category Problems"}),(0,r.jsx)("p",{className:"text-gray-500",children:g?.description||"Manage problems in this category"})]}),(0,r.jsxs)("button",{onClick:L,className:"flex items-center gap-2 px-5 py-2.5 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-xl transition-all shadow-lg shadow-orange-200",children:[(0,r.jsx)(i.Plus,{className:"w-5 h-5"}),"Add Problem"]})]}),(0,r.jsx)("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl shadow-gray-200/50 overflow-hidden",children:j?(0,r.jsx)("div",{className:"p-12 flex justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}):0===f.length?(0,r.jsxs)("div",{className:"p-12 text-center text-gray-500",children:[(0,r.jsx)("p",{className:"mb-4",children:"No problems in this category yet."}),(0,r.jsxs)("button",{onClick:L,className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg transition-all",children:[(0,r.jsx)(i.Plus,{className:"w-4 h-4"}),"Add First Problem"]})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100",children:[(0,r.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Title"}),(0,r.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Difficulty"}),(0,r.jsx)("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100",children:f.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900",children:e.title}),(0,r.jsx)("div",{className:"text-xs text-gray-400 font-mono mt-0.5",children:e.slug})]}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border ${(e=>{switch(e){case"EASY":return"text-emerald-700 bg-emerald-50 border-emerald-200";case"MEDIUM":return"text-amber-700 bg-amber-50 border-amber-200";case"HARD":return"text-rose-700 bg-rose-50 border-rose-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}})(e.difficulty)}`,children:e.difficulty})}),(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)(m.default,{href:`/admin/problems/${e.id}/edit`,className:"p-2 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Edit Problem",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>E(e.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove from Category",children:(0,r.jsx)(d.Trash2,{className:"w-4 h-4"})})]})})]},e.id))})]})})})]}),P&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[80vh] flex flex-col",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Problem to Category"}),(0,r.jsx)("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"Ã—"})]}),(0,r.jsxs)("div",{className:"p-6 flex-1 overflow-y-auto",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Search problems...",value:C,onChange:e=>A(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})}),w?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"})}):0===U.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:C?"No problems found matching your search.":"No available problems. Create new problems first."}):(0,r.jsx)("div",{className:"space-y-2",children:U.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900",children:e.title}),(0,r.jsx)("div",{className:"text-xs text-gray-400 font-mono mt-0.5",children:e.slug})]}),(0,r.jsx)("button",{onClick:()=>T(e.id),className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded-lg transition-all",children:"Add"})]},e.id))})]})]})})]})}function b(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen pt-24 pb-12 px-6 bg-white flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}),children:(0,r.jsx)(h,{})})}e.s(["default",()=>b])},139557,e=>{e.v(r=>Promise.all(["static/chunks/517fd37eb9e57337.js"].map(r=>e.l(r))).then(()=>r(974848)))}]);