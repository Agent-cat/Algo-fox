{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/problems/ModeToggle.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion } from \"framer-motion\";\n\ntype Mode = \"practice\" | \"learn\";\n\ninterface ModeToggleProps {\n  mode: Mode;\n  onModeChange: (mode: Mode) => void;\n}\n\nexport default function ModeToggle({ mode, onModeChange }: ModeToggleProps) {\n  return (\n    <div className=\"flex justify-center\">\n      <div className=\"relative inline-flex items-center bg-gray-100 dark:bg-[#1a1a1a] rounded-lg p-1\">\n        <button\n          onClick={() => onModeChange(\"practice\")}\n          className={`relative z-10 px-8 py-2 hover:cursor-pointer rounded-md font-medium text-sm ${mode === \"practice\" ? \"text-gray-900 dark:text-gray-100\" : \"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100\"\n            }`}\n        >\n          {mode === \"practice\" && (\n            <motion.div\n              layoutId=\"active-pill\"\n              className=\"absolute inset-0 bg-white dark:bg-[#262626] rounded-md shadow-sm border border-gray-200 dark:border-[#333333]\"\n              transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n              style={{ zIndex: -1 }}\n            />\n          )}\n          Practice\n        </button>\n        <button\n          onClick={() => onModeChange(\"learn\")}\n          className={`relative z-10 px-8 py-2 hover:cursor-pointer rounded-md font-medium text-sm ${mode === \"learn\" ? \"text-gray-900 dark:text-gray-100\" : \"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100\"\n            }`}\n        >\n          {mode === \"learn\" && (\n            <motion.div\n              layoutId=\"active-pill\"\n              className=\"absolute inset-0 bg-white dark:bg-[#262626] hover:bg-gray-100 dark:hover:bg-[#333333] rounded-md shadow-sm border border-gray-200 dark:border-[#333333]\"\n              transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n              style={{ zIndex: -1 }}\n            />\n          )}\n          Learn\n        </button>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWe,SAAS,WAAW,EAAE,IAAI,EAAE,YAAY,EAAmB;IACxE,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAW,CAAC,4EAA4E,EAAE,SAAS,aAAa,qCAAqC,iFACjJ;;wBAEH,SAAS,4BACR,8OAAC,oMAAM,CAAC,GAAG;4BACT,UAAS;4BACT,WAAU;4BACV,YAAY;gCAAE,MAAM;gCAAU,WAAW;gCAAK,SAAS;4BAAG;4BAC1D,OAAO;gCAAE,QAAQ,CAAC;4BAAE;;;;;;wBAEtB;;;;;;;8BAGJ,8OAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAW,CAAC,4EAA4E,EAAE,SAAS,UAAU,qCAAqC,iFAC9I;;wBAEH,SAAS,yBACR,8OAAC,oMAAM,CAAC,GAAG;4BACT,UAAS;4BACT,WAAU;4BACV,YAAY;gCAAE,MAAM;gCAAU,WAAW;gCAAK,SAAS;4BAAG;4BAC1D,OAAO;gCAAE,QAAQ,CAAC;4BAAE;;;;;;wBAEtB;;;;;;;;;;;;;;;;;;AAMZ"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/actions/problems.ts"],"sourcesContent":["\"use server\";\n\nimport { ProblemService } from \"@/core/services/problem.service\";\nimport { Difficulty, ProblemType, ProblemDomain } from \"@prisma/client\";\nimport { headers } from \"next/headers\";\nimport { auth } from \"@/lib/auth\";\nimport { revalidatePath, updateTag, cacheTag, cacheLife } from \"next/cache\";\n\n// GETTING PUBLIC PROBLEMS\n\nexport async function getProblems(\n    page: number = 1,\n    pageSize: number = 10,\n    type: ProblemType = \"PRACTICE\",\n    domain: ProblemDomain = \"DSA\",\n    difficulty?: Difficulty,\n    tags?: string[],\n    cursor?: string\n) {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n    // CHECKING IF USER IS AUTHENTICATED\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    const userId = session?.user?.id;\n\n    const tagKey = `problems-${domain}-${type}${difficulty ? `-${difficulty}` : ''}${tags && tags.length > 0 ? `-${tags.join('-')}` : ''}${cursor ? `-cursor-${cursor}` : `-page-${page}`}${userId ? `-user-${userId}` : ''}`;\n    cacheTag(tagKey, 'problems-list', `problems-${domain}-${type}`);\n\n    return ProblemService.getProblems(page, pageSize, type, domain, userId, difficulty, tags || [], cursor);\n}\n\n// GETTING ADMIN PROBLEMS\n\nexport async function getAdminProblems(\n    page: number = 1,\n    pageSize: number = 50,\n    domain?: ProblemDomain,\n    excludeDifficulty?: Difficulty,\n    type?: ProblemType\n) {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n    // CHECKING IF USER IS AUTHENTICATED\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || session.user.role !== \"ADMIN\") {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const tagKey = `admin-problems-${domain || 'all'}${excludeDifficulty ? `-exclude-${excludeDifficulty}` : ''}${type ? `-type-${type}` : ''}-page-${page}`;\n    cacheTag(tagKey, 'admin-problems-list');\n\n    return ProblemService.getAdminProblems(page, pageSize, domain, excludeDifficulty, type);\n}\n\n// SEARCHING FOR PROBLEMS\n\nexport async function searchProblems(\n    term: string,\n    type: ProblemType = \"PRACTICE\",\n    domain: ProblemDomain = \"DSA\"\n) {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 300, revalidate: 300 }); // 5 minutes for search results\n\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    const userId = session?.user?.id;\n\n    const tagKey = `search-${domain}-${type}-${term.toLowerCase().slice(0, 20)}${userId ? `-user-${userId}` : ''}`;\n    cacheTag(tagKey, 'problems-search');\n\n    return ProblemService.searchProblems(term, type, domain, userId);\n}\n\n// GETTING A PROBLEM BY SLUG CACHED\n\nexport async function getProblem(slug: string) {\n    \"use cache\";\n    cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n    cacheTag(`problem-${slug}`, 'problems-list');\n\n    return ProblemService.getProblem(slug);\n}\n\n\n// CREATING A PROBLEM --> ADMIN ONLY\n\nexport async function createProblem(data: {\n    title: string;\n    description: string;\n    difficulty: Difficulty;\n    slug: string;\n    hidden: boolean;\n    hiddenQuery?: string | null;\n    domain?: ProblemDomain;\n    testCases: { input: string; output: string; hidden?: boolean }[];\n    tags?: string[];\n    useFunctionTemplate?: boolean;\n    functionTemplates?: { languageId: number; functionTemplate: string; driverCode: string }[];\n    solution?: string | null;\n}) {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || session.user.role !== \"ADMIN\") {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const result = await ProblemService.createProblem(data);\n\n    if (result.success) {\n        revalidatePath(\"/problems\");\n        revalidatePath(\"/problems/dsa\");\n        revalidatePath(\"/problems/sql\");\n        revalidatePath(\"/admin/problems\");\n        revalidatePath(\"/admin/dsa/problems\");\n        revalidatePath(\"/admin/sql/problems\");\n\n        updateTag('admin-problems-list');\n        updateTag('problems-list');\n        updateTag('problems-SQL-PRACTICE');\n        updateTag('problems-DSA-PRACTICE');\n    }\n\n    return result;\n}\n\n\n// GETTING A PROBLEM BY ID\nexport async function getProblemById(id: string) {\n    \"use cache\";\n    cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n    cacheTag(`problem-id-${id}`, 'problems-list');\n\n    return ProblemService.getProblemById(id);\n}\n\n// NAVIGATION ACTIONS\n\nexport async function getNextProblem(currentCreatedAt: Date, domain: ProblemDomain, type: ProblemType) {\n    \"use cache: private\";\n    cacheLife({ stale: 300, revalidate: 300 });\n    return ProblemService.getNextProblem(currentCreatedAt, domain, type);\n}\n\nexport async function getPreviousProblem(currentCreatedAt: Date, domain: ProblemDomain, type: ProblemType) {\n    \"use cache: private\";\n    cacheLife({ stale: 300, revalidate: 300 });\n    return ProblemService.getPreviousProblem(currentCreatedAt, domain, type);\n}\n\nexport async function getRandomProblem(domain: ProblemDomain, type: ProblemType) {\n    // No cache for random\n    return ProblemService.getRandomProblem(domain, type);\n}\n\n\n// UPDATING A PROBLEM --> ADMIN ONLY\nexport async function updateProblem(id: string, data: any) {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n    if (!session || session.user.role !== \"ADMIN\") {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const result = await ProblemService.updateProblem(id, data);\n\n    if (result.success) {\n        revalidatePath(\"/problems\");\n        revalidatePath(\"/problems/dsa\");\n        revalidatePath(\"/problems/sql\");\n        revalidatePath(`/admin/problems`);\n        revalidatePath(\"/admin/dsa/problems\");\n        revalidatePath(\"/admin/sql/problems\");\n\n        updateTag('admin-problems-list');\n        updateTag('problems-list');\n        updateTag(`problems-${result.data?.domain || 'DSA'}-${result.data?.type || 'PRACTICE'}`);\n        updateTag(`problem-${result.data?.slug}`);\n    }\n\n    return result;\n}\n\n\n// DELETING A PROBLEM --> ADMIN ONLY\nexport async function deleteProblem(id: string) {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n    if (!session || session.user.role !== \"ADMIN\") {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const result = await ProblemService.deleteProblem(id);\n\n    if (result.success) {\n        revalidatePath(\"/problems\");\n        revalidatePath(\"/problems/dsa\");\n        revalidatePath(\"/problems/sql\");\n        revalidatePath(`/admin/problems`);\n        revalidatePath(\"/admin/dsa/problems\");\n        revalidatePath(\"/admin/sql/problems\");\n\n        updateTag('admin-problems-list');\n        updateTag('problems-list');\n    }\n\n    return result;\n}\n"],"names":[],"mappings":";;;;;;;IA+DsB,iBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/actions/problems.ts"],"sourcesContent":["\"use server\";\n\nimport { ProblemService } from \"@/core/services/problem.service\";\nimport { Difficulty, ProblemType, ProblemDomain } from \"@prisma/client\";\nimport { headers } from \"next/headers\";\nimport { auth } from \"@/lib/auth\";\nimport { revalidatePath, updateTag, cacheTag, cacheLife } from \"next/cache\";\n\n// GETTING PUBLIC PROBLEMS\n\nexport async function getProblems(\n    page: number = 1,\n    pageSize: number = 10,\n    type: ProblemType = \"PRACTICE\",\n    domain: ProblemDomain = \"DSA\",\n    difficulty?: Difficulty,\n    tags?: string[],\n    cursor?: string\n) {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n    // CHECKING IF USER IS AUTHENTICATED\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    const userId = session?.user?.id;\n\n    const tagKey = `problems-${domain}-${type}${difficulty ? `-${difficulty}` : ''}${tags && tags.length > 0 ? `-${tags.join('-')}` : ''}${cursor ? `-cursor-${cursor}` : `-page-${page}`}${userId ? `-user-${userId}` : ''}`;\n    cacheTag(tagKey, 'problems-list', `problems-${domain}-${type}`);\n\n    return ProblemService.getProblems(page, pageSize, type, domain, userId, difficulty, tags || [], cursor);\n}\n\n// GETTING ADMIN PROBLEMS\n\nexport async function getAdminProblems(\n    page: number = 1,\n    pageSize: number = 50,\n    domain?: ProblemDomain,\n    excludeDifficulty?: Difficulty,\n    type?: ProblemType\n) {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n    // CHECKING IF USER IS AUTHENTICATED\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || session.user.role !== \"ADMIN\") {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const tagKey = `admin-problems-${domain || 'all'}${excludeDifficulty ? `-exclude-${excludeDifficulty}` : ''}${type ? `-type-${type}` : ''}-page-${page}`;\n    cacheTag(tagKey, 'admin-problems-list');\n\n    return ProblemService.getAdminProblems(page, pageSize, domain, excludeDifficulty, type);\n}\n\n// SEARCHING FOR PROBLEMS\n\nexport async function searchProblems(\n    term: string,\n    type: ProblemType = \"PRACTICE\",\n    domain: ProblemDomain = \"DSA\"\n) {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 300, revalidate: 300 }); // 5 minutes for search results\n\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    const userId = session?.user?.id;\n\n    const tagKey = `search-${domain}-${type}-${term.toLowerCase().slice(0, 20)}${userId ? `-user-${userId}` : ''}`;\n    cacheTag(tagKey, 'problems-search');\n\n    return ProblemService.searchProblems(term, type, domain, userId);\n}\n\n// GETTING A PROBLEM BY SLUG CACHED\n\nexport async function getProblem(slug: string) {\n    \"use cache\";\n    cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n    cacheTag(`problem-${slug}`, 'problems-list');\n\n    return ProblemService.getProblem(slug);\n}\n\n\n// CREATING A PROBLEM --> ADMIN ONLY\n\nexport async function createProblem(data: {\n    title: string;\n    description: string;\n    difficulty: Difficulty;\n    slug: string;\n    hidden: boolean;\n    hiddenQuery?: string | null;\n    domain?: ProblemDomain;\n    testCases: { input: string; output: string; hidden?: boolean }[];\n    tags?: string[];\n    useFunctionTemplate?: boolean;\n    functionTemplates?: { languageId: number; functionTemplate: string; driverCode: string }[];\n    solution?: string | null;\n}) {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || session.user.role !== \"ADMIN\") {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const result = await ProblemService.createProblem(data);\n\n    if (result.success) {\n        revalidatePath(\"/problems\");\n        revalidatePath(\"/problems/dsa\");\n        revalidatePath(\"/problems/sql\");\n        revalidatePath(\"/admin/problems\");\n        revalidatePath(\"/admin/dsa/problems\");\n        revalidatePath(\"/admin/sql/problems\");\n\n        updateTag('admin-problems-list');\n        updateTag('problems-list');\n        updateTag('problems-SQL-PRACTICE');\n        updateTag('problems-DSA-PRACTICE');\n    }\n\n    return result;\n}\n\n\n// GETTING A PROBLEM BY ID\nexport async function getProblemById(id: string) {\n    \"use cache\";\n    cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n    cacheTag(`problem-id-${id}`, 'problems-list');\n\n    return ProblemService.getProblemById(id);\n}\n\n// NAVIGATION ACTIONS\n\nexport async function getNextProblem(currentCreatedAt: Date, domain: ProblemDomain, type: ProblemType) {\n    \"use cache: private\";\n    cacheLife({ stale: 300, revalidate: 300 });\n    return ProblemService.getNextProblem(currentCreatedAt, domain, type);\n}\n\nexport async function getPreviousProblem(currentCreatedAt: Date, domain: ProblemDomain, type: ProblemType) {\n    \"use cache: private\";\n    cacheLife({ stale: 300, revalidate: 300 });\n    return ProblemService.getPreviousProblem(currentCreatedAt, domain, type);\n}\n\nexport async function getRandomProblem(domain: ProblemDomain, type: ProblemType) {\n    // No cache for random\n    return ProblemService.getRandomProblem(domain, type);\n}\n\n\n// UPDATING A PROBLEM --> ADMIN ONLY\nexport async function updateProblem(id: string, data: any) {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n    if (!session || session.user.role !== \"ADMIN\") {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const result = await ProblemService.updateProblem(id, data);\n\n    if (result.success) {\n        revalidatePath(\"/problems\");\n        revalidatePath(\"/problems/dsa\");\n        revalidatePath(\"/problems/sql\");\n        revalidatePath(`/admin/problems`);\n        revalidatePath(\"/admin/dsa/problems\");\n        revalidatePath(\"/admin/sql/problems\");\n\n        updateTag('admin-problems-list');\n        updateTag('problems-list');\n        updateTag(`problems-${result.data?.domain || 'DSA'}-${result.data?.type || 'PRACTICE'}`);\n        updateTag(`problem-${result.data?.slug}`);\n    }\n\n    return result;\n}\n\n\n// DELETING A PROBLEM --> ADMIN ONLY\nexport async function deleteProblem(id: string) {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n    if (!session || session.user.role !== \"ADMIN\") {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const result = await ProblemService.deleteProblem(id);\n\n    if (result.success) {\n        revalidatePath(\"/problems\");\n        revalidatePath(\"/problems/dsa\");\n        revalidatePath(\"/problems/sql\");\n        revalidatePath(`/admin/problems`);\n        revalidatePath(\"/admin/dsa/problems\");\n        revalidatePath(\"/admin/sql/problems\");\n\n        updateTag('admin-problems-list');\n        updateTag('problems-list');\n    }\n\n    return result;\n}\n"],"names":[],"mappings":";;;;;;;IAUsB,cAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/app/%28main%29/problems/dsa/_components/shared/constants.ts"],"sourcesContent":["// Shared constants for DSA problems section\nexport const PROBLEMS_PAGE_SIZE = 10;\nexport const SEARCH_DEBOUNCE_DELAY = 300; // ms\nexport const CACHE_TTL = 300; // 5 minutes in seconds\nexport const INTERSECTION_THRESHOLD = 0.1;\n\n// Difficulty colors\nexport const DIFFICULTY_COLORS = {\n    EASY: \"text-emerald-500 bg-emerald-50/50 dark:bg-emerald-500/10\",\n    MEDIUM: \"text-amber-500 bg-amber-50/50 dark:bg-amber-500/10\",\n    HARD: \"text-rose-500 bg-rose-50/50 dark:bg-rose-500/10\",\n    CONCEPT: \"text-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10\",\n} as const;\n\n// Animation configurations\nexport const ANIMATION_CONFIG = {\n    spring: { type: \"spring\", stiffness: 400, damping: 25 },\n    duration: { duration: 0.3 },\n} as const;\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;;;;;;;;;;;AACrC,MAAM,qBAAqB;AAC3B,MAAM,wBAAwB,KAAK,KAAK;AACxC,MAAM,YAAY,KAAK,uBAAuB;AAC9C,MAAM,yBAAyB;AAG/B,MAAM,oBAAoB;IAC7B,MAAM;IACN,QAAQ;IACR,MAAM;IACN,SAAS;AACb;AAGO,MAAM,mBAAmB;IAC5B,QAAQ;QAAE,MAAM;QAAU,WAAW;QAAK,SAAS;IAAG;IACtD,UAAU;QAAE,UAAU;IAAI;AAC9B"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/app/%28main%29/problems/dsa/_components/shared/ProblemRow.tsx"],"sourcesContent":["\"use client\";\n\nimport { memo } from \"react\";\nimport Link from \"next/link\";\nimport { CheckCircle2 } from \"lucide-react\";\nimport { Difficulty } from \"@prisma/client\";\nimport { DIFFICULTY_COLORS } from \"./constants\";\n\ninterface ProblemRowProps {\n    id: string;\n    slug: string;\n    title: string;\n    difficulty: Difficulty;\n    acceptance: number;\n    isSolved?: boolean;\n}\n\nfunction getDifficultyColor(difficulty: Difficulty): string {\n    return DIFFICULTY_COLORS[difficulty] || \"text-gray-500\";\n}\n\nfunction getDifficultyLabel(difficulty: Difficulty): string {\n    if (difficulty === \"MEDIUM\") return \"Med.\";\n    return difficulty.charAt(0) + difficulty.slice(1).toLowerCase();\n}\n\nfunction ProblemRowComponent({\n    slug,\n    title,\n    difficulty,\n    acceptance,\n    isSolved,\n}: ProblemRowProps) {\n    return (\n        <Link\n            href={`/problems/${slug}`}\n            className=\"grid grid-cols-12 gap-4 px-6 py-4 rounded-xl items-center transition-all duration-200 hover:bg-gray-50/50 dark:hover:bg-[#1a1a1a]\"\n        >\n            <div className=\"col-span-8 md:col-span-6 font-medium text-gray-900 dark:text-gray-100 hover:text-orange-600 transition-colors flex items-center gap-2\">\n                {isSolved && <CheckCircle2 className=\"w-4 h-4 text-green-500 flex-shrink-0\" />}\n                <span className=\"truncate\">{title}</span>\n            </div>\n            <div className=\"col-span-2 md:col-span-3\">\n                <span className={`px-2.5 py-0.5 rounded-full text-xs font-medium ${getDifficultyColor(difficulty)}`}>\n                    {getDifficultyLabel(difficulty)}\n                </span>\n            </div>\n            <div className=\"col-span-2 md:col-span-3 text-sm text-gray-500 dark:text-gray-400\">\n                {acceptance.toFixed(1)}%\n            </div>\n        </Link>\n    );\n}\n\nexport const ProblemRow = memo(ProblemRowComponent);\nProblemRow.displayName = \"ProblemRow\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAiBA,SAAS,mBAAmB,UAAsB;IAC9C,OAAO,6LAAiB,CAAC,WAAW,IAAI;AAC5C;AAEA,SAAS,mBAAmB,UAAsB;IAC9C,IAAI,eAAe,UAAU,OAAO;IACpC,OAAO,WAAW,MAAM,CAAC,KAAK,WAAW,KAAK,CAAC,GAAG,WAAW;AACjE;AAEA,SAAS,oBAAoB,EACzB,IAAI,EACJ,KAAK,EACL,UAAU,EACV,UAAU,EACV,QAAQ,EACM;IACd,qBACI,8OAAC,uKAAI;QACD,MAAM,CAAC,UAAU,EAAE,MAAM;QACzB,WAAU;;0BAEV,8OAAC;gBAAI,WAAU;;oBACV,0BAAY,8OAAC,qOAAY;wBAAC,WAAU;;;;;;kCACrC,8OAAC;wBAAK,WAAU;kCAAY;;;;;;;;;;;;0BAEhC,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAK,WAAW,CAAC,+CAA+C,EAAE,mBAAmB,aAAa;8BAC9F,mBAAmB;;;;;;;;;;;0BAG5B,8OAAC;gBAAI,WAAU;;oBACV,WAAW,OAAO,CAAC;oBAAG;;;;;;;;;;;;;AAIvC;AAEO,MAAM,2BAAa,IAAA,6MAAI,EAAC;AAC/B,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/app/%28main%29/problems/dsa/_components/shared/LoadingSpinner.tsx"],"sourcesContent":["\"use client\";\n\nimport { memo } from \"react\";\n\ninterface LoadingSpinnerProps {\n    size?: \"sm\" | \"md\" | \"lg\";\n    message?: string;\n    className?: string;\n}\n\nconst sizeClasses = {\n    sm: \"w-4 h-4\",\n    md: \"w-6 h-6\",\n    lg: \"w-8 h-8\",\n};\n\nfunction LoadingSpinnerComponent({\n    size = \"md\",\n    message,\n    className = \"\"\n}: LoadingSpinnerProps) {\n    return (\n        <div className={`flex items-center justify-center gap-2 ${className}`}>\n            <div\n                className={`${sizeClasses[size]} border-2 border-orange-500 border-t-transparent rounded-full animate-spin`}\n                aria-label=\"Loading\"\n            />\n            {message && <span className=\"text-sm text-gray-500 dark:text-gray-400\">{message}</span>}\n        </div>\n    );\n}\n\nexport const LoadingSpinner = memo(LoadingSpinnerComponent);\nLoadingSpinner.displayName = \"LoadingSpinner\";\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUA,MAAM,cAAc;IAChB,IAAI;IACJ,IAAI;IACJ,IAAI;AACR;AAEA,SAAS,wBAAwB,EAC7B,OAAO,IAAI,EACX,OAAO,EACP,YAAY,EAAE,EACI;IAClB,qBACI,8OAAC;QAAI,WAAW,CAAC,uCAAuC,EAAE,WAAW;;0BACjE,8OAAC;gBACG,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,0EAA0E,CAAC;gBAC3G,cAAW;;;;;;YAEd,yBAAW,8OAAC;gBAAK,WAAU;0BAA4C;;;;;;;;;;;;AAGpF;AAEO,MAAM,+BAAiB,IAAA,6MAAI,EAAC;AACnC,eAAe,WAAW,GAAG"}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/app/%28main%29/problems/dsa/_components/practice/PracticeClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef, useCallback, useMemo } from \"react\";\nimport { searchProblems, getProblems } from \"@/actions/problems\";\nimport { Problem, ProblemType, Difficulty, ProblemDomain } from \"@prisma/client\";\nimport { ProblemRow } from \"../shared/ProblemRow\";\nimport { LoadingSpinner } from \"../shared/LoadingSpinner\";\nimport { PROBLEMS_PAGE_SIZE, INTERSECTION_THRESHOLD } from \"../shared/constants\";\n\ntype ProblemWithStats = {\n    id: string;\n    title: string;\n    slug: string;\n    difficulty: Difficulty;\n    type: ProblemType;\n    acceptance: number;\n    solved?: number | null;\n    isSolved?: boolean;\n    score: number;\n    createdAt: Date;\n    _count: { submissions: number };\n};\n\ninterface PracticeClientProps {\n    initialProblems: ProblemWithStats[];\n    initialTotalPages: number;\n    type?: ProblemType;\n    domain?: ProblemDomain;\n    searchTerm: string;\n}\n\nexport default function PracticeClient({\n    initialProblems,\n    initialTotalPages,\n    type = \"PRACTICE\",\n    domain = \"DSA\",\n    searchTerm\n}: PracticeClientProps) {\n    const [problems, setProblems] = useState<ProblemWithStats[]>(initialProblems);\n\n    // Reset problems when initialProblems changes (e.g. filter change)\n    useEffect(() => {\n        setProblems(initialProblems);\n        setPage(1);\n        setHasMore(page < initialTotalPages);\n    }, [initialProblems, initialTotalPages]);\n\n    const [page, setPage] = useState(1);\n    const [hasMore, setHasMore] = useState(page < initialTotalPages);\n    const [isLoading, setIsLoading] = useState(false);\n    const [localSearchTerm, setLocalSearchTerm] = useState(\"\"); // Internal for debouncing if needed, but here we just rely on parent or direct effect?\n    // Actually parent passes debounced term if SearchBar handles it, or raw term?\n    // SearchBar in parent handles input. DsaProblemsClient state updates.\n    // We should debounce in parent or here? SearchBar has internal debounce. DsaProblemsClient receives value *after* debounce?\n    // Let's check SearchBar.tsx. It calls onSearch with debounced value.\n    // So searchTerm prop here is already debounced.\n\n    const [searchResults, setSearchResults] = useState<ProblemWithStats[]>([]);\n    const [isSearching, setIsSearching] = useState(false);\n    const observerTarget = useRef<HTMLDivElement>(null);\n\n    // Effect to handle search changes from prop\n    useEffect(() => {\n        const performSearch = async () => {\n            if (!searchTerm || searchTerm.length < 2) {\n                setSearchResults([]);\n                return;\n            }\n\n            setIsSearching(true);\n            try {\n                const result = await searchProblems(searchTerm, type, domain);\n                setSearchResults(result.problems);\n            } catch (error) {\n                console.error(\"Search failed:\", error);\n                setSearchResults([]);\n            } finally {\n                setIsSearching(false);\n            }\n        };\n\n        performSearch();\n    }, [searchTerm, type, domain]);\n\n    // Memoize displayed problems\n    const displayedProblems = useMemo(() => {\n        return searchTerm ? searchResults : problems;\n    }, [searchTerm, searchResults, problems]);\n\n    // Load more problems (pagination)\n    const loadMore = useCallback(async () => {\n        if (isLoading || !hasMore || searchTerm || problems.length === 0) return;\n\n        setIsLoading(true);\n        try {\n            const lastProblem = problems[problems.length - 1];\n            const nextPage = page + 1;\n            // Using lastProblem.id as the cursor for the next set of problems\n            const res = await getProblems(nextPage, PROBLEMS_PAGE_SIZE, type, domain, undefined, undefined, lastProblem.id);\n\n            if (res.problems.length > 0) {\n                setProblems((prev) => [...prev, ...res.problems]);\n                setPage(nextPage);\n                setHasMore(nextPage < res.totalPages);\n            } else {\n                setHasMore(false);\n            }\n        } catch (error) {\n            console.error(\"Failed to load more problems\", error);\n        } finally {\n            setIsLoading(false);\n        }\n    }, [isLoading, hasMore, page, type, domain, searchTerm, problems]);\n\n    // Intersection Observer for infinite scroll\n    useEffect(() => {\n        if (searchTerm) return; // Disable infinite scroll during search\n\n        const observer = new IntersectionObserver(\n            (entries) => {\n                if (entries[0]?.isIntersecting && hasMore && !isLoading) {\n                    loadMore();\n                }\n            },\n            { threshold: INTERSECTION_THRESHOLD }\n        );\n\n        const currentTarget = observerTarget.current;\n        if (currentTarget) {\n            observer.observe(currentTarget);\n        }\n\n        return () => {\n            if (currentTarget) {\n                observer.unobserve(currentTarget);\n            }\n        };\n    }, [hasMore, isLoading, searchTerm, loadMore]);\n\n    return (\n        <div className=\"w-full\">\n            {/* List Header */}\n            <div className=\"grid grid-cols-12 gap-4 px-6 py-4 border-b border-gray-100 dark:border-[#262626] text-[11px] font-bold text-gray-400 uppercase tracking-widest\">\n                <div className=\"col-span-8 md:col-span-6\">Title</div>\n                <div className=\"col-span-2 md:col-span-3\">Difficulty</div>\n                <div className=\"col-span-2 md:col-span-3\">Acceptance</div>\n            </div>\n\n            {/* List Items */}\n            <div className=\"mt-2\">\n                {isSearching ? (\n                    <LoadingSpinner size=\"lg\" message=\"Searching...\" className=\"py-20\" />\n                ) : displayedProblems.length > 0 ? (\n                    <>\n                        {displayedProblems.map((problem) => (\n                            <ProblemRow\n                                key={problem.id}\n                                id={problem.id}\n                                slug={problem.slug}\n                                title={problem.title}\n                                difficulty={problem.difficulty}\n                                acceptance={problem.acceptance}\n                                isSolved={problem.isSolved}\n                            />\n                        ))}\n                    </>\n                ) : (\n                    <div className=\"text-center py-20\">\n                        <div className=\"text-gray-400\">No problems found</div>\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">\n                            {searchTerm ? \"Try adjusting your search terms.\" : \"No problems available.\"}\n                        </p>\n                    </div>\n                )}\n            </div>\n\n            {/* Infinite Scroll Trigger */}\n            {hasMore && !searchTerm && (\n                <div ref={observerTarget} className=\"flex justify-center mt-12 mb-8 min-h-[60px]\">\n                    {isLoading && <LoadingSpinner size=\"md\" message=\"Loading more problems...\" />}\n                </div>\n            )}\n\n            {!hasMore && !searchTerm && displayedProblems.length > 0 && (\n                <div className=\"text-center mt-12 text-sm text-gray-400\">\n                    You've reached the end of the list.\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/actions/category.action.ts"],"sourcesContent":["\"use server\";\n\nimport { CategoryService } from \"@/core/services/category.service\";\nimport { ProblemDomain, Difficulty } from \"@prisma/client\";\nimport { headers } from \"next/headers\";\nimport { auth } from \"@/lib/auth\";\nimport { revalidatePath, updateTag, cacheTag, cacheLife } from \"next/cache\";\n\n// GETTING ALL CATEGORIES\n\nexport async function getCategories(domain: ProblemDomain = \"DSA\") {\n  \"use cache: private\"; // Must be at top - allows headers() inside\n  cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n  const userId = session?.user?.id;\n\n  cacheTag(`categories-${domain}${userId ? `-user-${userId}` : ''}`, 'categories-list');\n\n  return CategoryService.getCategories(domain, userId);\n}\n\n// GETTING A CATEGORY BY SLUG\n\nexport async function getCategory(slug: string) {\n  \"use cache\";\n  cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n  cacheTag(`category-${slug}`, 'categories-list');\n\n  return CategoryService.getCategoryBySlug(slug);\n}\n\n// GETTING A CATEGORY BY ID --> NO CACHING\n\nexport async function getCategoryById(id: string) {\n  return CategoryService.getCategoryById(id);\n}\n\n// GETTING CATEGORY PROBLEMS\n\nexport async function getCategoryProblems(\n  categoryId: string,\n  page: number = 1,\n  pageSize: number = 10,\n  cursor?: string\n) {\n  \"use cache: private\"; // Must be at top - allows headers() inside\n  cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n  const userId = session?.user?.id;\n\n  const tagKey = `category-problems-${categoryId}${cursor ? `-cursor-${cursor}` : `-page-${page}`}${userId ? `-user-${userId}` : ''}`;\n  cacheTag(tagKey, `category-${categoryId}`, 'categories-list');\n\n  return CategoryService.getCategoryProblems(categoryId, page, pageSize, userId, cursor);\n}\n\n\n// CREATING A CATEGORY --> ADMIN ONLY\n\nexport async function createCategory(data: {\n  name: string;\n  description?: string;\n  slug: string;\n  order?: number;\n  domain?: ProblemDomain;\n}) {\n\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.createCategory(data);\n\n  if (result.success) {\n    // REVALIDATING THE PATHS\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(\"/admin/categories\");\n    updateTag('categories-list');\n  }\n\n  return result;\n}\n\n// UPDATING A CATEGORY --> ADMIN ONLY\n\nexport async function updateCategory(id: string, data: { name?: string; description?: string; slug?: string; order?: number; }) {\n\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.updateCategory(id, data);\n\n  if (result.success) {\n    // REVALIDATING THE PATHS --> PROBLEMS AND ADMIN CATEGORIES\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(\"/admin/categories\");\n    updateTag('categories-list');\n    if (data.slug) {\n      updateTag(`category-${data.slug}`);\n    }\n  }\n\n  return result;\n}\n\n// DELETING A CATEGORY --> ADMIN ONLY\n\nexport async function deleteCategory(id: string) {\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.deleteCategory(id);\n\n  if (result.success) {\n    // REVALIDATING THE PATHS --> PROBLEMS AND ADMIN CATEGORIES\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(\"/admin/categories\");\n    updateTag('categories-list');\n    if (result.slug) {\n      updateTag(`category-${result.slug}`);\n    }\n  }\n\n  return result;\n}\n\n\n// ADDING A PROBLEM TO A CATEGORY --> ADMIN ONLY\n\nexport async function addProblemToCategory(\n  categoryId: string,\n  problemId: string,\n  order?: number\n) {\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.addProblemToCategory(categoryId, problemId, order);\n\n  if (result.success) {\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(`/admin/categories/${categoryId}`);\n    revalidatePath(`/admin/dsa/categories/${categoryId}`);\n    revalidatePath(`/admin/sql/categories/${categoryId}`);\n    updateTag(`category-${categoryId}`);\n    updateTag('categories-list');\n  }\n\n  return result;\n}\n\n\n// REMOVING A PROBLEM FROM A CATEGORY --> ADMIN ONLY\n\nexport async function removeProblemFromCategory(\n  categoryId: string,\n  problemId: string\n) {\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.removeProblemFromCategory(categoryId, problemId);\n\n  if (result.success) {\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(`/admin/categories/${categoryId}`);\n  }\n\n  return result;\n}\n\n// CREATING A PROBLEM AND ADDING IT TO A CATEGORY --> ADMIN ONLY\n\nexport async function createProblemAndAddToCategory(\n  categoryId: string,\n  data: {\n    title: string;\n    description: string;\n    difficulty: Difficulty;\n    slug: string;\n    hidden: boolean;\n    hiddenQuery?: string | null;\n    testCases?: { input: string; output: string; hidden?: boolean }[];\n  }\n) {\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.createProblemAndAddToCategory(categoryId, data);\n\n  if (result.success) {\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(`/admin/categories/${categoryId}`);\n    revalidatePath(`/admin/dsa/categories/${categoryId}`);\n    revalidatePath(`/admin/sql/categories/${categoryId}`);\n    revalidatePath(\"/admin/problems\");\n    revalidatePath(\"/admin/dsa/problems\");\n    revalidatePath(\"/admin/sql/problems\");\n  }\n\n  return result;\n}\n"],"names":[],"mappings":";;;;;;;IA2CsB,sBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 556, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/app/%28main%29/problems/dsa/_components/learn/CategoryCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { ChevronDown } from \"lucide-react\";\nimport { getCategoryProblems } from \"@/actions/category.action\";\nimport { Difficulty, Problem } from \"@prisma/client\";\nimport Link from \"next/link\";\nimport { CheckCircle2 } from \"lucide-react\";\nimport { LoadingSpinner } from \"../shared/LoadingSpinner\";\nimport { DIFFICULTY_COLORS, INTERSECTION_THRESHOLD } from \"../shared/constants\";\n\ntype ProblemWithStats = Problem & { acceptance: number; isSolved?: boolean };\n\ninterface CategoryCardProps {\n  id: string;\n  name: string;\n  description?: string | null;\n  problemCount: number;\n  solvedCount: number;\n}\n\nexport default function CategoryCard({ id, name, description, problemCount, solvedCount }: CategoryCardProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [problems, setProblems] = useState<ProblemWithStats[]>([]);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isInitialLoad, setIsInitialLoad] = useState(false);\n  const observerTarget = useRef<HTMLDivElement>(null);\n\n  const progressPercentage = problemCount > 0 ? (solvedCount / problemCount) * 100 : 0;\n  const isCompleted = problemCount > 0 && solvedCount === problemCount;\n\n  const loadProblems = useCallback(async (pageNum: number = 1, append: boolean = false) => {\n    if (isLoading) return;\n    setIsLoading(true);\n    try {\n      const cursor = append && problems.length > 0 ? problems[problems.length - 1].id : undefined;\n      const res = await getCategoryProblems(id, pageNum, 10, cursor);\n\n      if (append) {\n        setProblems((prev) => [...prev, ...res.problems]);\n      } else {\n        setProblems(res.problems);\n      }\n      setPage(pageNum);\n      setHasMore(res.problems.length > 0 && pageNum < res.totalPages);\n    } catch (error) {\n      console.error(\"Failed to load category problems:\", error);\n    } finally {\n      setIsLoading(false);\n      setIsInitialLoad(false);\n    }\n  }, [id, isLoading, problems]);\n\n  const handleToggle = () => {\n    if (!isExpanded && problems.length === 0) {\n      setIsInitialLoad(true);\n      loadProblems(1, false);\n    }\n    setIsExpanded(!isExpanded);\n  };\n\n  const loadMore = useCallback(() => {\n    if (isLoading || !hasMore) return;\n    loadProblems(page + 1, true);\n  }, [isLoading, hasMore, page, loadProblems]);\n\n  // Intersection Observer for infinite scroll\n  useEffect(() => {\n    if (!isExpanded || !hasMore) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0]?.isIntersecting && hasMore && !isLoading) {\n          loadMore();\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    const currentTarget = observerTarget.current;\n    if (currentTarget) {\n      observer.observe(currentTarget);\n    }\n\n    return () => {\n      if (currentTarget) {\n        observer.unobserve(currentTarget);\n      }\n    };\n  }, [isExpanded, hasMore, isLoading, loadMore]);\n\n  const getDifficultyColor = (difficulty: Difficulty) => {\n    return DIFFICULTY_COLORS[difficulty] || \"text-gray-500\";\n  };\n\n  return (\n    <motion.div\n      className=\"w-full mb-3\"\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3 }}\n    >\n      <motion.button\n        onClick={handleToggle}\n        className=\"w-full bg-white dark:bg-[#141414] border border-gray-200 dark:border-[#262626] rounded-xl p-4 hover:border-gray-300 dark:hover:border-[#333333] transition-all text-left hover:shadow-md\"\n        whileHover={{ scale: 1.005, y: -1 }}\n        whileTap={{ scale: 0.998 }}\n        transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <h3 className=\"text-base font-semibold text-gray-900 dark:text-gray-100\">{name}</h3>\n              {isCompleted && (\n                <motion.div\n                  initial={{ scale: 0 }}\n                  animate={{ scale: 1 }}\n                  transition={{ type: \"spring\", stiffness: 500, damping: 20 }}\n                >\n                  <CheckCircle2 className=\"w-4 h-4 text-green-500 flex-shrink-0\" />\n                </motion.div>\n              )}\n            </div>\n\n            {/* Progress Bar */}\n            <div className=\"mb-2\">\n              <div className=\"flex items-center gap-2.5 mb-1.5\">\n                <div className=\"flex-1 bg-white/40 dark:bg-[#1a1a1a] backdrop-blur-sm rounded-full h-2 overflow-hidden border border-gray-200/50 dark:border-[#333333] shadow-inner relative\">\n                  <motion.div\n                    className=\"h-full bg-gradient-to-r from-orange-500/90 to-orange-600/90 rounded-full relative overflow-hidden\"\n                    initial={{ width: 0 }}\n                    animate={{ width: `${progressPercentage}%` }}\n                    transition={{ duration: 0.8, ease: \"easeOut\" }}\n                  >\n                    <div className=\"absolute inset-0 bg-gradient-to-b from-white/40 via-transparent to-transparent\" />\n                  </motion.div>\n                </div>\n                <span className=\"text-xs text-gray-600 dark:text-gray-400 font-medium min-w-[40px] text-right\">\n                  {Math.round(progressPercentage)}%\n                </span>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-gray-700 dark:text-gray-300 text-xs font-medium\">{solvedCount}/{problemCount}</span>\n              <span className=\"text-gray-500 dark:text-gray-400 text-xs\">problems solved</span>\n            </div>\n          </div>\n          <motion.div\n            animate={{ rotate: isExpanded ? 180 : 0 }}\n            transition={{ duration: 0.3, ease: \"easeInOut\" }}\n            className=\"ml-4\"\n          >\n            <ChevronDown className=\"w-5 h-5 text-gray-400\" />\n          </motion.div>\n        </div>\n      </motion.button>\n\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{\n              height: { duration: 0.3, ease: \"easeInOut\" },\n              opacity: { duration: 0.2 }\n            }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"mt-3 bg-gradient-to-b from-gray-50 dark:from-[#1a1a1a] to-white dark:to-[#141414] rounded-xl p-4 border border-gray-200 dark:border-[#262626] shadow-sm\">\n              {isInitialLoad ? (\n                <LoadingSpinner size=\"md\" className=\"py-6\" />\n              ) : problems.length === 0 ? (\n                <div className=\"text-center py-6 text-gray-500 dark:text-gray-400 text-sm\">\n                  No problems in this category yet.\n                </div>\n              ) : (\n                <>\n                  <div className=\"space-y-2\">\n                    {problems.map((problem, index) => (\n                      <motion.div\n                        key={problem.id}\n                        initial={{ opacity: 0, x: -10 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        transition={{ delay: index * 0.05, duration: 0.3 }}\n                        className=\"group\"\n                      >\n                        <Link\n                          href={`/problems/${problem.slug}`}\n                          className=\"flex items-center justify-between p-3 bg-white dark:bg-[#141414] rounded-lg hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-all border border-gray-100 dark:border-[#262626] hover:border-gray-200 dark:hover:border-[#333333] hover:shadow-sm\"\n                        >\n                          <div className=\"flex items-center gap-2.5 flex-1\">\n                            {problem.isSolved && (\n                              <CheckCircle2 className=\"w-4 h-4 text-green-500 flex-shrink-0\" />\n                            )}\n                            <span className=\"font-medium text-gray-900 dark:text-gray-100 text-sm group-hover:text-gray-700 dark:group-hover:text-gray-200 transition-colors\">\n                              {problem.title}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center gap-3\">\n                            <span\n                              className={`px-2 py-0.5 rounded-full text-xs font-semibold ${getDifficultyColor(\n                                problem.difficulty\n                              )}`}\n                            >\n                              {problem.difficulty === \"MEDIUM\"\n                                ? \"Med.\"\n                                : problem.difficulty.charAt(0) +\n                                problem.difficulty.slice(1).toLowerCase()}\n                            </span>\n                            <span className=\"text-xs text-gray-500 dark:text-gray-400 min-w-[50px] text-right\">\n                              {problem.acceptance.toFixed(1)}%\n                            </span>\n                          </div>\n                        </Link>\n                      </motion.div>\n                    ))}\n                  </div>\n\n                  {/* Infinite Scroll Trigger */}\n                  {hasMore && (\n                    <div\n                      ref={observerTarget}\n                      className=\"flex justify-center mt-4 min-h-[30px]\"\n                    >\n                      {isLoading && <LoadingSpinner size=\"sm\" message=\"Loading more...\" />}\n                    </div>\n                  )}\n\n                  {/* End of list indicator removed as requested */}\n                </>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1036, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/app/%28main%29/problems/dsa/_components/learn/LearnMode.tsx"],"sourcesContent":["\"use client\";\n\nimport CategoryCard from \"./CategoryCard\";\nimport { LoadingSpinner } from \"../shared/LoadingSpinner\";\n\ninterface Category {\n  id: string;\n  name: string;\n  description: string | null;\n  slug: string;\n  order: number;\n  _count: {\n    categoryProblems: number;\n  };\n  solvedCount: number;\n}\n\ninterface LearnModeProps {\n  searchTerm?: string;\n  categories: any[];\n  isLoading: boolean;\n}\n\nexport default function LearnMode({ searchTerm = \"\", categories, isLoading }: LearnModeProps) {\n  // Internal state removed, using props\n\n  const filteredCategories = categories.filter(category =>\n    category.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    (category.description && category.description.toLowerCase().includes(searchTerm.toLowerCase()))\n  );\n\n  if (isLoading && categories.length === 0) {\n    return <LoadingSpinner size=\"lg\" message=\"Loading categories...\" className=\"min-h-[400px]\" />;\n  }\n\n  if (categories.length === 0 && !isLoading) {\n    return (\n      <div className=\"text-center py-20\">\n        <p className=\"text-gray-500 text-lg\">No categories available yet.</p>\n        <p className=\"text-gray-400 text-sm mt-2\">\n          Categories will appear here once they are created.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"space-y-4\">\n        {filteredCategories.length > 0 ? (\n          filteredCategories.map((category) => (\n            <CategoryCard\n              key={category.id}\n              id={category.id}\n              name={category.name}\n              description={category.description}\n              problemCount={category._count.categoryProblems}\n              solvedCount={category.solvedCount || 0}\n            />\n          ))\n        ) : (\n          <div className=\"text-center py-20\">\n            <div className=\"text-gray-400 mb-2\">No categories found</div>\n            <p className=\"text-sm text-gray-500\">Try adjusting your search terms.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAuBe,SAAS,UAAU,EAAE,aAAa,EAAE,EAAE,UAAU,EAAE,SAAS,EAAkB;IAC1F,sCAAsC;IAEtC,MAAM,qBAAqB,WAAW,MAAM,CAAC,CAAA,WAC3C,SAAS,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OAC1D,SAAS,WAAW,IAAI,SAAS,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;IAG7F,IAAI,aAAa,WAAW,MAAM,KAAK,GAAG;QACxC,qBAAO,8OAAC,gMAAc;YAAC,MAAK;YAAK,SAAQ;YAAwB,WAAU;;;;;;IAC7E;IAEA,IAAI,WAAW,MAAM,KAAK,KAAK,CAAC,WAAW;QACzC,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAAwB;;;;;;8BACrC,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;IAKhD;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACZ,mBAAmB,MAAM,GAAG,IAC3B,mBAAmB,GAAG,CAAC,CAAC,yBACtB,8OAAC,sLAAY;oBAEX,IAAI,SAAS,EAAE;oBACf,MAAM,SAAS,IAAI;oBACnB,aAAa,SAAS,WAAW;oBACjC,cAAc,SAAS,MAAM,CAAC,gBAAgB;oBAC9C,aAAa,SAAS,WAAW,IAAI;mBALhC,SAAS,EAAE;;;;0CASpB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAqB;;;;;;kCACpC,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;;;;;;AAMjD"}},
    {"offset": {"line": 1142, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/hooks/useDebounce.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\nexport function useDebounce<T>(value: T, delay: number = 300): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIO,SAAS,YAAe,KAAQ,EAAE,QAAgB,GAAG;IAC1D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAI;IAExD,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU,WAAW;YACzB,kBAAkB;QACpB,GAAG;QAEH,OAAO;YACL,aAAa;QACf;IACF,GAAG;QAAC;QAAO;KAAM;IAEjB,OAAO;AACT"}},
    {"offset": {"line": 1168, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/app/%28main%29/problems/dsa/_components/shared/SearchBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback, memo, useEffect } from \"react\";\nimport { useDebounce } from \"@/hooks/useDebounce\";\nimport { SEARCH_DEBOUNCE_DELAY } from \"./constants\";\n\ninterface SearchBarProps {\n    onSearch: (searchTerm: string) => void;\n    placeholder?: string;\n    className?: string;\n}\n\nfunction SearchBarComponent({\n    onSearch,\n    placeholder = \"Search problems\",\n    className = \"\"\n}: SearchBarProps) {\n    const [localSearch, setLocalSearch] = useState(\"\");\n    const debouncedSearch = useDebounce(localSearch, SEARCH_DEBOUNCE_DELAY);\n\n    // Call onSearch when debounced value changes\n    useEffect(() => {\n        onSearch(debouncedSearch);\n    }, [debouncedSearch, onSearch]);\n\n    const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n        setLocalSearch(e.target.value);\n    }, []);\n\n    return (\n        <div className={`relative ${className}`}>\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <svg\n                    className=\"h-5 w-5 text-gray-400\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                    aria-hidden=\"true\"\n                >\n                    <path\n                        fillRule=\"evenodd\"\n                        d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"\n                        clipRule=\"evenodd\"\n                    />\n                </svg>\n            </div>\n            <input\n                type=\"text\"\n                placeholder={placeholder}\n                className=\"block w-full pl-10 pr-3 py-2.5 bg-gray-50 dark:bg-[#141414] border border-gray-200 dark:border-[#262626] rounded-xl leading-5 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:bg-white dark:focus:bg-[#1a1a1a] focus:ring-2 focus:ring-orange-100 dark:focus:ring-orange-500/20 focus:border-orange-400 sm:text-sm shadow-sm text-gray-900 dark:text-gray-100\"\n                value={localSearch}\n                onChange={handleChange}\n                autoComplete=\"off\"\n            />\n            {localSearch && localSearch !== debouncedSearch && (\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n                    <div className=\"w-4 h-4 border-2 border-gray-300 dark:border-gray-600 border-t-transparent rounded-full animate-spin\" />\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport const SearchBar = memo(SearchBarComponent);\nSearchBar.displayName = \"SearchBar\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAYA,SAAS,mBAAmB,EACxB,QAAQ,EACR,cAAc,iBAAiB,EAC/B,YAAY,EAAE,EACD;IACb,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,kBAAkB,IAAA,mIAAW,EAAC,aAAa,iMAAqB;IAEtE,6CAA6C;IAC7C,IAAA,kNAAS,EAAC;QACN,SAAS;IACb,GAAG;QAAC;QAAiB;KAAS;IAE9B,MAAM,eAAe,IAAA,oNAAW,EAAC,CAAC;QAC9B,eAAe,EAAE,MAAM,CAAC,KAAK;IACjC,GAAG,EAAE;IAEL,qBACI,8OAAC;QAAI,WAAW,CAAC,SAAS,EAAE,WAAW;;0BACnC,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBACG,WAAU;oBACV,SAAQ;oBACR,MAAK;oBACL,eAAY;8BAEZ,cAAA,8OAAC;wBACG,UAAS;wBACT,GAAE;wBACF,UAAS;;;;;;;;;;;;;;;;0BAIrB,8OAAC;gBACG,MAAK;gBACL,aAAa;gBACb,WAAU;gBACV,OAAO;gBACP,UAAU;gBACV,cAAa;;;;;;YAEhB,eAAe,gBAAgB,iCAC5B,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;;;;;;;;;;;;;;;;;AAKnC;AAEO,MAAM,0BAAY,IAAA,6MAAI,EAAC;AAC9B,UAAU,WAAW,GAAG"}},
    {"offset": {"line": 1262, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/actions/tag.action.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\n\nexport async function searchTags(query: string) {\n    try {\n        const tags = await prisma.tag.findMany({\n            where: {\n                name: {\n                    contains: query,\n                    mode: \"insensitive\",\n                },\n            },\n            take: 10,\n            orderBy: {\n                name: 'asc'\n            }\n        });\n\n        return { success: true, tags };\n    } catch (error) {\n        console.error(\"Failed to search tags:\", error);\n        return { success: false, error: \"Failed to search tags\" };\n    }\n}\n\nexport async function createTag(name: string) {\n    try {\n        const slug = name\n            .toLowerCase()\n            .trim()\n            .replace(/[^\\w\\s-]/g, \"\")\n            .replace(/[\\s_-]+/g, \"-\")\n            .replace(/^-+|-+$/g, \"\");\n\n        const tag = await prisma.tag.upsert({\n            where: { slug },\n            update: {},\n            create: {\n                name,\n                slug,\n            },\n        });\n\n        return { success: true, tag };\n    } catch (error) {\n        console.error(\"Failed to create tag:\", error);\n        return { success: false, error: \"Failed to create tag\" };\n    }\n}\n"],"names":[],"mappings":";;;;;;;IAIsB,aAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 1274, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/problems/FilterBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSearchParams, useRouter, usePathname } from \"next/navigation\";\nimport { X, Check } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { searchTags } from \"@/actions/tag.action\";\nimport { Difficulty } from \"@prisma/client\";\n\nexport function FilterBar() {\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const pathname = usePathname();\n\n    const [tagSuggestions, setTagSuggestions] = useState<{ name: string; slug: string }[]>([]);\n    const [tagInput, setTagInput] = useState(\"\");\n    const [showTagSuggestions, setShowTagSuggestions] = useState(false);\n\n    const difficulty = searchParams.get(\"difficulty\");\n    const tags = searchParams.getAll(\"tags\");\n\n    const updateFilters = (key: string, value: string | null | string[]) => {\n        const params = new URLSearchParams(searchParams.toString());\n\n        if (value === null || (Array.isArray(value) && value.length === 0)) {\n            params.delete(key);\n        } else if (Array.isArray(value)) {\n            params.delete(key);\n            value.forEach(v => params.append(key, v));\n        } else {\n            params.set(key, value);\n        }\n\n        // Reset page on filter change\n        params.set(\"page\", \"1\");\n\n        router.push(`${pathname}?${params.toString()}`);\n    };\n\n    useEffect(() => {\n        if (tagInput.trim()) {\n            const timer = setTimeout(async () => {\n                const res = await searchTags(tagInput);\n                if (res.success && res.tags) {\n                    setTagSuggestions(res.tags);\n                }\n            }, 300);\n            return () => clearTimeout(timer);\n        } else {\n            setTagSuggestions([]);\n        }\n    }, [tagInput]);\n\n    return (\n        <div className=\"flex flex-wrap items-center gap-4 mb-6\">\n            {/* Difficulty Dropdown */}\n            <select\n                value={difficulty || \"\"}\n                onChange={(e) => updateFilters(\"difficulty\", e.target.value || null)}\n                className=\"px-3 py-2 bg-white dark:bg-[#141414] border border-gray-200 dark:border-[#262626] rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500\"\n            >\n                <option value=\"\">All Difficulties</option>\n                <option value=\"EASY\">Easy</option>\n                <option value=\"MEDIUM\">Medium</option>\n                <option value=\"HARD\">Hard</option>\n            </select>\n\n            {/* Tag Input */}\n            <div className=\"relative\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Filter by tags...\"\n                    value={tagInput}\n                    onChange={(e) => {\n                        setTagInput(e.target.value);\n                        setShowTagSuggestions(true);\n                    }}\n                    onFocus={() => setShowTagSuggestions(true)}\n                    onBlur={() => setTimeout(() => setShowTagSuggestions(false), 200)}\n                    className=\"px-3 py-2 bg-white dark:bg-[#141414] border border-gray-200 dark:border-[#262626] rounded-lg text-sm w-48 focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500\"\n                />\n                {showTagSuggestions && tagSuggestions.length > 0 && (\n                    <div className=\"absolute top-full left-0 mt-1 w-full bg-white dark:bg-[#141414] border border-gray-100 dark:border-[#262626] rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto\">\n                        {tagSuggestions.map(tag => (\n                            <button\n                                key={tag.slug}\n                                onClick={() => {\n                                    if (!tags.includes(tag.slug)) {\n                                        updateFilters(\"tags\", [...tags, tag.slug]);\n                                    }\n                                    setTagInput(\"\");\n                                }}\n                                className=\"w-full text-left px-3 py-2 text-sm hover:bg-orange-50 dark:hover:bg-orange-500/10 text-gray-700 dark:text-gray-300 flex items-center justify-between\"\n                            >\n                                {tag.name}\n                                {tags.includes(tag.slug) && <Check className=\"w-3 h-3 text-orange-600\" />}\n                            </button>\n                        ))}\n                    </div>\n                )}\n            </div>\n\n            {/* Selected Tags */}\n            <div className=\"flex flex-wrap gap-2\">\n                {tags.map(slug => (\n                    <span key={slug} className=\"flex items-center gap-1 px-2.5 py-1 bg-orange-50 dark:bg-orange-500/10 text-orange-700 dark:text-orange-400 rounded-full text-xs font-medium border border-orange-100 dark:border-orange-500/30\">\n                        {slug}\n                        <button\n                            onClick={() => updateFilters(\"tags\", tags.filter(t => t !== slug))}\n                            className=\"hover:bg-orange-100 dark:hover:bg-orange-500/20 rounded-full p-0.5\"\n                        >\n                            <X className=\"w-3 h-3\" />\n                        </button>\n                    </span>\n                ))}\n            </div>\n\n            {(difficulty || tags.length > 0) && (\n                <button\n                    onClick={() => {\n                        const params = new URLSearchParams(searchParams.toString());\n                        params.delete(\"difficulty\");\n                        params.delete(\"tags\");\n                        params.set(\"page\", \"1\");\n                        router.push(`${pathname}?${params.toString()}`);\n                    }}\n                    className=\"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 border-b border-gray-300 dark:border-gray-600 hover:border-gray-900 dark:hover:border-gray-100 transition-colors\"\n                >\n                    Clear filters\n                </button>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1490, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/actions/category.action.ts"],"sourcesContent":["\"use server\";\n\nimport { CategoryService } from \"@/core/services/category.service\";\nimport { ProblemDomain, Difficulty } from \"@prisma/client\";\nimport { headers } from \"next/headers\";\nimport { auth } from \"@/lib/auth\";\nimport { revalidatePath, updateTag, cacheTag, cacheLife } from \"next/cache\";\n\n// GETTING ALL CATEGORIES\n\nexport async function getCategories(domain: ProblemDomain = \"DSA\") {\n  \"use cache: private\"; // Must be at top - allows headers() inside\n  cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n  const userId = session?.user?.id;\n\n  cacheTag(`categories-${domain}${userId ? `-user-${userId}` : ''}`, 'categories-list');\n\n  return CategoryService.getCategories(domain, userId);\n}\n\n// GETTING A CATEGORY BY SLUG\n\nexport async function getCategory(slug: string) {\n  \"use cache\";\n  cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n  cacheTag(`category-${slug}`, 'categories-list');\n\n  return CategoryService.getCategoryBySlug(slug);\n}\n\n// GETTING A CATEGORY BY ID --> NO CACHING\n\nexport async function getCategoryById(id: string) {\n  return CategoryService.getCategoryById(id);\n}\n\n// GETTING CATEGORY PROBLEMS\n\nexport async function getCategoryProblems(\n  categoryId: string,\n  page: number = 1,\n  pageSize: number = 10,\n  cursor?: string\n) {\n  \"use cache: private\"; // Must be at top - allows headers() inside\n  cacheLife({ stale: 900, revalidate: 900 }); // 15 minutes default\n\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n  const userId = session?.user?.id;\n\n  const tagKey = `category-problems-${categoryId}${cursor ? `-cursor-${cursor}` : `-page-${page}`}${userId ? `-user-${userId}` : ''}`;\n  cacheTag(tagKey, `category-${categoryId}`, 'categories-list');\n\n  return CategoryService.getCategoryProblems(categoryId, page, pageSize, userId, cursor);\n}\n\n\n// CREATING A CATEGORY --> ADMIN ONLY\n\nexport async function createCategory(data: {\n  name: string;\n  description?: string;\n  slug: string;\n  order?: number;\n  domain?: ProblemDomain;\n}) {\n\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.createCategory(data);\n\n  if (result.success) {\n    // REVALIDATING THE PATHS\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(\"/admin/categories\");\n    updateTag('categories-list');\n  }\n\n  return result;\n}\n\n// UPDATING A CATEGORY --> ADMIN ONLY\n\nexport async function updateCategory(id: string, data: { name?: string; description?: string; slug?: string; order?: number; }) {\n\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.updateCategory(id, data);\n\n  if (result.success) {\n    // REVALIDATING THE PATHS --> PROBLEMS AND ADMIN CATEGORIES\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(\"/admin/categories\");\n    updateTag('categories-list');\n    if (data.slug) {\n      updateTag(`category-${data.slug}`);\n    }\n  }\n\n  return result;\n}\n\n// DELETING A CATEGORY --> ADMIN ONLY\n\nexport async function deleteCategory(id: string) {\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.deleteCategory(id);\n\n  if (result.success) {\n    // REVALIDATING THE PATHS --> PROBLEMS AND ADMIN CATEGORIES\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(\"/admin/categories\");\n    updateTag('categories-list');\n    if (result.slug) {\n      updateTag(`category-${result.slug}`);\n    }\n  }\n\n  return result;\n}\n\n\n// ADDING A PROBLEM TO A CATEGORY --> ADMIN ONLY\n\nexport async function addProblemToCategory(\n  categoryId: string,\n  problemId: string,\n  order?: number\n) {\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.addProblemToCategory(categoryId, problemId, order);\n\n  if (result.success) {\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(`/admin/categories/${categoryId}`);\n    revalidatePath(`/admin/dsa/categories/${categoryId}`);\n    revalidatePath(`/admin/sql/categories/${categoryId}`);\n    updateTag(`category-${categoryId}`);\n    updateTag('categories-list');\n  }\n\n  return result;\n}\n\n\n// REMOVING A PROBLEM FROM A CATEGORY --> ADMIN ONLY\n\nexport async function removeProblemFromCategory(\n  categoryId: string,\n  problemId: string\n) {\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n\n  // CHECKING IF USER IS ADMIN --> THROWING AN ERROR IF NOT ADMIN\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.removeProblemFromCategory(categoryId, problemId);\n\n  if (result.success) {\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(`/admin/categories/${categoryId}`);\n  }\n\n  return result;\n}\n\n// CREATING A PROBLEM AND ADDING IT TO A CATEGORY --> ADMIN ONLY\n\nexport async function createProblemAndAddToCategory(\n  categoryId: string,\n  data: {\n    title: string;\n    description: string;\n    difficulty: Difficulty;\n    slug: string;\n    hidden: boolean;\n    hiddenQuery?: string | null;\n    testCases?: { input: string; output: string; hidden?: boolean }[];\n  }\n) {\n  const session = await auth.api.getSession({\n    headers: await headers()\n  });\n\n  if (!session || session.user.role !== \"ADMIN\") {\n    throw new Error(\"Unauthorized\");\n  }\n\n  const result = await CategoryService.createProblemAndAddToCategory(categoryId, data);\n\n  if (result.success) {\n    revalidatePath(\"/problems/dsa\");\n    revalidatePath(\"/problems/sql\");\n    revalidatePath(`/admin/categories/${categoryId}`);\n    revalidatePath(`/admin/dsa/categories/${categoryId}`);\n    revalidatePath(`/admin/sql/categories/${categoryId}`);\n    revalidatePath(\"/admin/problems\");\n    revalidatePath(\"/admin/dsa/problems\");\n    revalidatePath(\"/admin/sql/problems\");\n  }\n\n  return result;\n}\n"],"names":[],"mappings":";;;;;;;IAUsB,gBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 1502, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/app/%28main%29/problems/sql/_components/SqlProblemsClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useSearchParams, useRouter, usePathname } from \"next/navigation\";\nimport ModeToggle from \"@/components/problems/ModeToggle\";\nimport PracticeClient from \"../../dsa/_components/practice/PracticeClient\";\nimport LearnMode from \"../../dsa/_components/learn/LearnMode\";\nimport { SearchBar } from \"../../dsa/_components/shared/SearchBar\";\nimport { FilterBar } from \"@/components/problems/FilterBar\";\nimport { Category, Difficulty, ProblemType, ProblemDomain } from \"@prisma/client\";\nimport { getCategories } from \"@/actions/category.action\";\n\ntype ProblemWithStats = {\n    id: string;\n    title: string;\n    slug: string;\n    difficulty: Difficulty;\n    type: ProblemType;\n    acceptance: number;\n    solved?: number | null;\n    isSolved?: boolean;\n    score: number;\n    createdAt: Date;\n    _count: { submissions: number };\n};\n\ninterface SqlProblemsClientProps {\n    initialProblems: ProblemWithStats[];\n    initialTotalPages: number;\n    initialCategories?: any[];\n}\n\nexport default function SqlProblemsClient({\n    initialProblems,\n    initialTotalPages,\n    initialCategories = [],\n}: SqlProblemsClientProps) {\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const pathname = usePathname();\n\n    // DERIVED STATE FROM URL, DEFAULT TO 'PRACTICE'\n    const mode = (searchParams.get(\"mode\") as \"practice\" | \"learn\") || \"practice\";\n    const [searchTerm, setSearchTerm] = useState(\"\");\n\n    // LIFTED STATE FOR LEARN MODE CACHING\n    const [categories, setCategories] = useState<Category[]>(initialCategories);\n    const [isCategoriesLoading, setIsCategoriesLoading] = useState(false);\n    const [hasFetchedCategories, setHasFetchedCategories] = useState(initialCategories.length > 0);\n\n    // Sync categories from props (for router.refresh())\n    useEffect(() => {\n        if (initialCategories.length > 0) {\n            setCategories(initialCategories);\n            setHasFetchedCategories(true);\n        }\n    }, [initialCategories]);\n\n    useEffect(() => {\n        if (mode === \"learn\" && !hasFetchedCategories && !isCategoriesLoading) {\n            const fetchCategories = async () => {\n                setIsCategoriesLoading(true);\n                try {\n                    const res = await getCategories(\"SQL\");\n                    setCategories(res.categories);\n                    setHasFetchedCategories(true);\n                } catch (error) {\n                    console.error(\"Failed to fetch categories:\", error);\n                } finally {\n                    setIsCategoriesLoading(false);\n                }\n            };\n            fetchCategories();\n        }\n    }, [mode, hasFetchedCategories, isCategoriesLoading]);\n\n    const setMode = (newMode: \"practice\" | \"learn\") => {\n        const params = new URLSearchParams(searchParams.toString());\n        if (newMode === \"practice\") {\n            params.delete(\"mode\");\n        } else {\n            params.set(\"mode\", newMode);\n        }\n        router.replace(`${pathname}?${params.toString()}`, { scroll: false });\n    };\n\n    const handleSearch = (term: string) => {\n        setSearchTerm(term);\n    };\n\n    return (\n        <div className=\"min-h-screen bg-white dark:bg-[#0a0a0a] py-8\">\n            <div className=\"w-full max-w-7xl mx-auto px-4 md:px-6\">\n                {/* HEADER TOOLS */}\n                <div className=\"flex flex-col md:flex-row items-center justify-between gap-4 mb-8\">\n                    <SearchBar\n                        onSearch={handleSearch}\n                        placeholder={mode === \"practice\" ? \"Search problems\" : \"Search categories\"}\n                        className=\"w-full md:flex-1\"\n                    />\n                    <ModeToggle mode={mode} onModeChange={setMode} />\n                </div>\n\n                {mode === \"practice\" ? (\n                    <>\n                        <FilterBar />\n                        <PracticeClient\n                            initialProblems={initialProblems}\n                            initialTotalPages={initialTotalPages}\n                            searchTerm={searchTerm}\n                            domain=\"SQL\"\n                        />\n                    </>\n                ) : (\n                    <LearnMode\n                        searchTerm={searchTerm}\n                        categories={categories}\n                        isLoading={isCategoriesLoading}\n                    />\n                )}\n            </div>\n        </div>\n    );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAVA;;;;;;;;;;AAgCe,SAAS,kBAAkB,EACtC,eAAe,EACf,iBAAiB,EACjB,oBAAoB,EAAE,EACD;IACrB,MAAM,eAAe,IAAA,qJAAe;IACpC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,gDAAgD;IAChD,MAAM,OAAO,AAAC,aAAa,GAAG,CAAC,WAAoC;IACnE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,sCAAsC;IACtC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAa;IACzD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAC;IAC/D,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,iNAAQ,EAAC,kBAAkB,MAAM,GAAG;IAE5F,oDAAoD;IACpD,IAAA,kNAAS,EAAC;QACN,IAAI,kBAAkB,MAAM,GAAG,GAAG;YAC9B,cAAc;YACd,wBAAwB;QAC5B;IACJ,GAAG;QAAC;KAAkB;IAEtB,IAAA,kNAAS,EAAC;QACN,IAAI,SAAS,WAAW,CAAC,wBAAwB,CAAC,qBAAqB;YACnE,MAAM,kBAAkB;gBACpB,uBAAuB;gBACvB,IAAI;oBACA,MAAM,MAAM,MAAM,IAAA,gKAAa,EAAC;oBAChC,cAAc,IAAI,UAAU;oBAC5B,wBAAwB;gBAC5B,EAAE,OAAO,OAAO;oBACZ,QAAQ,KAAK,CAAC,+BAA+B;gBACjD,SAAU;oBACN,uBAAuB;gBAC3B;YACJ;YACA;QACJ;IACJ,GAAG;QAAC;QAAM;QAAsB;KAAoB;IAEpD,MAAM,UAAU,CAAC;QACb,MAAM,SAAS,IAAI,gBAAgB,aAAa,QAAQ;QACxD,IAAI,YAAY,YAAY;YACxB,OAAO,MAAM,CAAC;QAClB,OAAO;YACH,OAAO,GAAG,CAAC,QAAQ;QACvB;QACA,OAAO,OAAO,CAAC,GAAG,SAAS,CAAC,EAAE,OAAO,QAAQ,IAAI,EAAE;YAAE,QAAQ;QAAM;IACvE;IAEA,MAAM,eAAe,CAAC;QAClB,cAAc;IAClB;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BAEX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC,sLAAS;4BACN,UAAU;4BACV,aAAa,SAAS,aAAa,oBAAoB;4BACvD,WAAU;;;;;;sCAEd,8OAAC,gJAAU;4BAAC,MAAM;4BAAM,cAAc;;;;;;;;;;;;gBAGzC,SAAS,2BACN;;sCACI,8OAAC,iJAAS;;;;;sCACV,8OAAC,2LAAc;4BACX,iBAAiB;4BACjB,mBAAmB;4BACnB,YAAY;4BACZ,QAAO;;;;;;;iDAIf,8OAAC,mLAAS;oBACN,YAAY;oBACZ,YAAY;oBACZ,WAAW;;;;;;;;;;;;;;;;;AAMnC"}}]
}