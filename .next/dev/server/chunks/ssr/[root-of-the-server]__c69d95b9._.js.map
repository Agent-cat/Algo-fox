{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst prismaClientSingleton = () => {\n    return new PrismaClient({\n        log: process.env.NODE_ENV === 'development' ? ['error', 'warn'] : ['error'],\n    }).$extends({\n        query: {\n            $allModels: {\n                async $allOperations({ operation, model, args, query }) {\n                    const start = performance.now();\n                    const result = await query(args);\n                    const end = performance.now();\n\n                    // Warn about slow queries (>1 second)\n                    if (end - start > 1000) {\n                        console.warn(`Slow query: ${model}.${operation} took ${(end - start).toFixed(2)}ms`);\n                    }\n\n                    return result;\n                },\n            },\n        },\n    });\n};\n\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>;\n\ndeclare global {\n    var prisma_fox: PrismaClientSingleton | undefined;\n}\n\nconst prisma = globalThis.prisma_fox ?? prismaClientSingleton();\n\nexport { prisma };\n\nif (process.env.NODE_ENV !== \"production\") globalThis.prisma_fox = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,6IAAY,CAAC;QACpB,KAAK,uCAAyC;YAAC;YAAS;SAAO,GAAG;IACtE,GAAG,QAAQ,CAAC;QACR,OAAO;YACH,YAAY;gBACR,MAAM,gBAAe,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE;oBAClD,MAAM,QAAQ,YAAY,GAAG;oBAC7B,MAAM,SAAS,MAAM,MAAM;oBAC3B,MAAM,MAAM,YAAY,GAAG;oBAE3B,sCAAsC;oBACtC,IAAI,MAAM,QAAQ,MAAM;wBACpB,QAAQ,IAAI,CAAC,CAAC,YAAY,EAAE,MAAM,CAAC,EAAE,UAAU,MAAM,EAAE,CAAC,MAAM,KAAK,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC;oBACvF;oBAEA,OAAO;gBACX;YACJ;QACJ;IACJ;AACJ;AAQA,MAAM,SAAS,WAAW,UAAU,IAAI;;AAIxC,wCAA2C,WAAW,UAAU,GAAG"}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/lib/auth.ts"],"sourcesContent":["import { betterAuth } from \"better-auth\";\nimport { admin } from \"better-auth/plugins\";\nimport { prismaAdapter } from \"better-auth/adapters/prisma\";\nimport { prisma } from \"./prisma\";\n\nexport const auth = betterAuth({\n  database: prismaAdapter(prisma, {\n    provider: \"postgresql\",\n  }),\n  emailAndPassword: {\n    enabled: true,\n    disableSignUp: true,\n  },\n  socialProviders: {\n    google: {\n      enabled: true,\n      clientId: process.env.GOOGLE_CLIENT_ID as string,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET as string,\n    },\n    microsoft: {\n      enabled: true,\n      clientId: process.env.MICROSOFT_CLIENT_ID as string,\n      clientSecret: process.env.MICROSOFT_CLIENT_SECRET as string,\n    },\n  },\n  user: {\n    additionalFields: {\n      role: {\n        type: \"string\",\n        required: false,\n        defaultValue: \"STUDENT\",\n      },\n      institutionId: {\n        type: \"string\",\n        required: false,\n      },\n      onboardingCompleted: {\n        type: \"boolean\",\n        required: false,\n        defaultValue: false,\n        input: false,\n      },\n    },\n  },\n\n  plugins: [\n    admin({\n      adminRoles: [\"ADMIN\"],\n      defaultRole: \"STUDENT\",\n      adminUserIds: [\"jvp0LDpaCm0Y2VpUVP75vCNQnDioEdpm\"], // vishnu\n    }),\n  ],\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;AAEO,MAAM,OAAO,IAAA,qKAAU,EAAC;IAC7B,UAAU,IAAA,8MAAa,EAAC,uHAAM,EAAE;QAC9B,UAAU;IACZ;IACA,kBAAkB;QAChB,SAAS;QACT,eAAe;IACjB;IACA,iBAAiB;QACf,QAAQ;YACN,SAAS;YACT,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAChD;QACA,WAAW;YACT,SAAS;YACT,UAAU,QAAQ,GAAG,CAAC,mBAAmB;YACzC,cAAc,QAAQ,GAAG,CAAC,uBAAuB;QACnD;IACF;IACA,MAAM;QACJ,kBAAkB;YAChB,MAAM;gBACJ,MAAM;gBACN,UAAU;gBACV,cAAc;YAChB;YACA,eAAe;gBACb,MAAM;gBACN,UAAU;YACZ;YACA,qBAAqB;gBACnB,MAAM;gBACN,UAAU;gBACV,cAAc;gBACd,OAAO;YACT;QACF;IACF;IAEA,SAAS;QACP,IAAA,6KAAK,EAAC;YACJ,YAAY;gBAAC;aAAQ;YACrB,aAAa;YACb,cAAc;gBAAC;aAAmC;QACpD;KACD;AACH"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/actions/auth.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/lib/auth\";\nimport { prisma } from \"@/lib/prisma\";\nimport { headers } from \"next/headers\";\n\nexport async function checkSessionConflict() {\n  const session = await auth.api.getSession({\n    headers: await headers(),\n  });\n\n  if (!session) {\n    return { conflict: false };\n  }\n\n  const activeSessions = await prisma.session.findMany({\n    where: {\n      userId: session.user.id,\n    },\n    select: {\n      id: true,\n      expiresAt: true,\n      userAgent: true,\n      ipAddress: true,\n      token: true, // Need token to identify current session\n    },\n  });\n\n  // Filter out expired sessions just in case, though better-auth likely handles cleanup or assumes valid if in DB\n  const validSessions = activeSessions.filter(s => s.expiresAt > new Date());\n\n  if (validSessions.length > 1) {\n    return {\n      conflict: true,\n      currentSessionToken: session.session.token,\n      sessions: validSessions.map(s => ({\n        ...s,\n        isCurrent: s.token === session.session.token\n      }))\n    };\n  }\n\n  return { conflict: false };\n}\n\nexport async function resolveSessionConflict(action: \"LOGOUT_OTHERS\" | \"LOGOUT_CURRENT\") {\n  const session = await auth.api.getSession({\n    headers: await headers(),\n  });\n\n  if (!session) {\n    throw new Error(\"No active session\");\n  }\n\n  if (action === \"LOGOUT_OTHERS\") {\n    // Delete all sessions for this user EXCEPT the current one\n    await prisma.session.deleteMany({\n      where: {\n        userId: session.user.id,\n        token: {\n          not: session.session.token\n        }\n      }\n    });\n    return { success: true, message: \"Other sessions terminated\" };\n  } else if (action === \"LOGOUT_CURRENT\") {\n    // Sign out the current session\n    // We can use auth.api.signOut or just delete the session manually\n    await prisma.session.delete({\n      where: {\n        token: session.session.token\n      }\n    });\n    return { success: true, message: \"Current session terminated\" };\n  }\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;;;;AAEO,eAAe;IACpB,MAAM,UAAU,MAAM,mHAAI,CAAC,GAAG,CAAC,UAAU,CAAC;QACxC,SAAS,MAAM,IAAA,0IAAO;IACxB;IAEA,IAAI,CAAC,SAAS;QACZ,OAAO;YAAE,UAAU;QAAM;IAC3B;IAEA,MAAM,iBAAiB,MAAM,uHAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QACnD,OAAO;YACL,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACzB;QACA,QAAQ;YACN,IAAI;YACJ,WAAW;YACX,WAAW;YACX,WAAW;YACX,OAAO;QACT;IACF;IAEA,gHAAgH;IAChH,MAAM,gBAAgB,eAAe,MAAM,CAAC,CAAA,IAAK,EAAE,SAAS,GAAG,IAAI;IAEnE,IAAI,cAAc,MAAM,GAAG,GAAG;QAC5B,OAAO;YACL,UAAU;YACV,qBAAqB,QAAQ,OAAO,CAAC,KAAK;YAC1C,UAAU,cAAc,GAAG,CAAC,CAAA,IAAK,CAAC;oBAChC,GAAG,CAAC;oBACJ,WAAW,EAAE,KAAK,KAAK,QAAQ,OAAO,CAAC,KAAK;gBAC9C,CAAC;QACH;IACF;IAEA,OAAO;QAAE,UAAU;IAAM;AAC3B;AAEO,eAAe,uBAAuB,MAA0C;IACrF,MAAM,UAAU,MAAM,mHAAI,CAAC,GAAG,CAAC,UAAU,CAAC;QACxC,SAAS,MAAM,IAAA,0IAAO;IACxB;IAEA,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,WAAW,iBAAiB;QAC9B,2DAA2D;QAC3D,MAAM,uHAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAC9B,OAAO;gBACL,QAAQ,QAAQ,IAAI,CAAC,EAAE;gBACvB,OAAO;oBACL,KAAK,QAAQ,OAAO,CAAC,KAAK;gBAC5B;YACF;QACF;QACA,OAAO;YAAE,SAAS;YAAM,SAAS;QAA4B;IAC/D,OAAO,IAAI,WAAW,kBAAkB;QACtC,+BAA+B;QAC/B,kEAAkE;QAClE,MAAM,uHAAM,CAAC,OAAO,CAAC,MAAM,CAAC;YAC1B,OAAO;gBACL,OAAO,QAAQ,OAAO,CAAC,KAAK;YAC9B;QACF;QACA,OAAO;YAAE,SAAS;YAAM,SAAS;QAA6B;IAChE;AACF;;;IArEsB;IAuCA;;AAvCA,+OAAA;AAuCA,+OAAA"}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/lib/languages.ts"],"sourcesContent":["\nexport interface Language {\n    id: number; // Judge0 ID\n    name: string;\n    monacoLanguage: string; // Monaco Editor language identifier\n    boilerplate: string;\n}\n\nexport const LANGUAGES: Language[] = [\n    {\n        id: 63,\n        name: \"JavaScript\",\n        monacoLanguage: \"javascript\",\n        boilerplate: `const fs = require(\"fs\");\n\nconst input = fs.readFileSync(0, \"utf8\").trim().split(/\\\\s+/);\n\n// write your code here\n\nconsole.log();`\n    },\n\n    {\n        id: 62,\n        name: \"Java\",\n        monacoLanguage: \"java\",\n        boilerplate: `import java.util.*;\n\npublic class Main {\n    public static void main(String[] args) {\n\n        // write your code here\n\n        \n    }\n}`\n    },\n\n    {\n        id: 71,\n        name: \"Python\",\n        monacoLanguage: \"python\",\n        boilerplate: `import sys\n\ndata = sys.stdin.read().split()\n\n# write your code here\n\nprint()`\n    },\n\n    {\n        id: 50,\n        name: \"C\",\n        monacoLanguage: \"c\",\n        boilerplate: `#include <stdio.h>\n\nint main() {\n\n    // write your code here\n\n    return 0;\n}`\n    },\n\n    {\n        id: 54,\n        name: \"C++\",\n        monacoLanguage: \"cpp\",\n        boilerplate: `#include <bits/stdc++.h>\nusing namespace std;\n\nint main() {\n\n    // write your code here\n\n    return 0;\n}`\n    },\n\n    {\n        id: 73,\n        name: \"Rust\",\n        monacoLanguage: \"rust\",\n        boilerplate: `use std::io::{self, Read};\n\nfn main() {\n    let mut input = String::new();\n    io::stdin().read_to_string(&mut input).unwrap();\n\n    // write your code here\n}`\n    },\n\n    {\n        id: 60,\n        name: \"Go\",\n        monacoLanguage: \"go\",\n        boilerplate: `package main\n\nimport (\n    \"bufio\"\n    \"os\"\n)\n\nfunc main() {\n    in := bufio.NewReader(os.Stdin)\n\n    // write your code here\n\n}`\n    },\n    {\n        id: 82,\n        name: \"SQL\",\n        monacoLanguage: \"sql\",\n        boilerplate: `` // Empty boilerplate for SQL\n    }\n];\n\nexport function getLanguageById(id: number): Language | undefined {\n    return LANGUAGES.find(lang => lang.id === id);\n}\n\nexport function getLanguageByName(name: string): Language | undefined {\n    return LANGUAGES.find(lang => lang.name === name);\n}\n\nexport const DEFAULT_LANGUAGE_ID = 63;\n\n"],"names":[],"mappings":";;;;;;;;;;AAQO,MAAM,YAAwB;IACjC;QACI,IAAI;QACJ,MAAM;QACN,gBAAgB;QAChB,aAAa,CAAC;;;;;;cAMR,CAAC;IACX;IAEA;QACI,IAAI;QACJ,MAAM;QACN,gBAAgB;QAChB,aAAa,CAAC;;;;;;;;;CASrB,CAAC;IACE;IAEA;QACI,IAAI;QACJ,MAAM;QACN,gBAAgB;QAChB,aAAa,CAAC;;;;;;OAMf,CAAC;IACJ;IAEA;QACI,IAAI;QACJ,MAAM;QACN,gBAAgB;QAChB,aAAa,CAAC;;;;;;;CAOrB,CAAC;IACE;IAEA;QACI,IAAI;QACJ,MAAM;QACN,gBAAgB;QAChB,aAAa,CAAC;;;;;;;;CAQrB,CAAC;IACE;IAEA;QACI,IAAI;QACJ,MAAM;QACN,gBAAgB;QAChB,aAAa,CAAC;;;;;;;CAOrB,CAAC;IACE;IAEA;QACI,IAAI;QACJ,MAAM;QACN,gBAAgB;QAChB,aAAa,CAAC;;;;;;;;;;;;CAYrB,CAAC;IACE;IACA;QACI,IAAI;QACJ,MAAM;QACN,gBAAgB;QAChB,aAAa,EAAE,CAAC,4BAA4B;IAChD;CACH;AAEM,SAAS,gBAAgB,EAAU;IACtC,OAAO,UAAU,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;AAC9C;AAEO,SAAS,kBAAkB,IAAY;IAC1C,OAAO,UAAU,IAAI,CAAC,CAAA,OAAQ,KAAK,IAAI,KAAK;AAChD;AAEO,MAAM,sBAAsB"}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/lib/points.ts"],"sourcesContent":["import { Difficulty } from \"@prisma/client\";\n\nexport function getPointsForDifficulty(difficulty: Difficulty): number {\n    switch (difficulty) {\n        case \"EASY\":\n            return 5;\n        case \"MEDIUM\":\n            return 10;\n        case \"HARD\":\n            return 15;\n        case \"CONCEPT\":\n            return 0;\n        default:\n            return 0;\n    }\n}\n\n\nexport function getPointsLabel(difficulty: Difficulty): string {\n    const points = getPointsForDifficulty(difficulty);\n    return `${points} pts`;\n}\n\n"],"names":[],"mappings":";;;;;;AAEO,SAAS,uBAAuB,UAAsB;IACzD,OAAQ;QACJ,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX;YACI,OAAO;IACf;AACJ;AAGO,SAAS,eAAe,UAAsB;IACjD,MAAM,SAAS,uBAAuB;IACtC,OAAO,GAAG,OAAO,IAAI,CAAC;AAC1B"}},
    {"offset": {"line": 458, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/lib/redis.ts"],"sourcesContent":["import IORedis from \"ioredis\";\n\nconst connection = new IORedis({\n  host: process.env.REDIS_HOST || \"127.0.0.1\",\n  port: parseInt(process.env.REDIS_PORT || \"6379\"),\n  maxRetriesPerRequest: null,\n  enableReadyCheck: false,\n});\n\nconnection.on(\"error\", (error) => {\n  if (process.env.NODE_ENV !== \"production\") {\n    console.warn(\"[Redis] Connection error:\", error);\n  }\n});\n\nexport default connection;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAa,IAAI,oJAAO,CAAC;IAC7B,MAAM,QAAQ,GAAG,CAAC,UAAU,IAAI;IAChC,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU,IAAI;IACzC,sBAAsB;IACtB,kBAAkB;AACpB;AAEA,WAAW,EAAE,CAAC,SAAS,CAAC;IACtB,wCAA2C;QACzC,QAAQ,IAAI,CAAC,6BAA6B;IAC5C;AACF;uCAEe"}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/core/services/submission.service.ts"],"sourcesContent":["import { prisma } from \"@/lib/prisma\";\nimport { SubmissionResult, TestCaseResult, SubmissionMode } from \"@prisma/client\";\nimport { getLanguageById } from \"@/lib/languages\";\nimport { getPointsForDifficulty } from \"@/lib/points\";\nimport { revalidateTag, updateTag } from \"next/cache\";\nimport redis from \"@/lib/redis\";\n\nconst JUDGE0_URL = process.env.JUDGE0_URL || \"http://localhost:2358\";\n\nexport class SubmissionService {\n    private static languageCache = new Map<number, { id: number; name: string; judge0Id: number }>();\n\n    static async createSubmission(userId: string, problemId: string, judge0Id: number, code: string, mode: SubmissionMode = \"SUBMIT\", contestId?: string) {\n        // Get language info from our language mapping\n        const langInfo = getLanguageById(judge0Id);\n        const languageName = langInfo?.name || `Language_${judge0Id}`;\n\n        // Check cache first\n        let language = this.languageCache.get(judge0Id);\n\n        if (!language) {\n            // Try to find existing language by judge0Id first (primary lookup)\n            const dbLanguage = await prisma.language.findUnique({\n                where: { judge0Id: judge0Id }\n            });\n\n            if (dbLanguage) {\n                language = dbLanguage;\n            } else {\n                // If not found, try to create it\n                try {\n                    language = await prisma.language.create({\n                        data: {\n                            name: languageName,\n                            judge0Id: judge0Id\n                        }\n                    });\n                } catch (error: any) {\n                    // If creation fails due to name conflict, try to find by name\n                    // This handles the case where a language with this name exists but different judge0Id\n                    if (error.code === 'P2002') {\n                        const existingByName = await prisma.language.findUnique({\n                            where: { name: languageName }\n                        });\n                        if (existingByName) {\n                            // Use the existing language even if judge0Id doesn't match\n                            // In production, languages should be pre-seeded to avoid this\n                            language = existingByName;\n                        } else {\n                            // If it's a judge0Id conflict, find by judge0Id\n                            const existingByJudge0Id = await prisma.language.findUnique({\n                                where: { judge0Id: judge0Id }\n                            });\n                            if (!existingByJudge0Id) {\n                                throw new Error(`Could not create or find language with judge0Id ${judge0Id}`);\n                            }\n                            language = existingByJudge0Id;\n                        }\n                    } else {\n                        throw error;\n                    }\n                }\n            }\n\n            // Update cache\n            if (language) {\n                this.languageCache.set(judge0Id, language);\n            }\n        }\n\n        return prisma.submission.create({\n            data: {\n                userId,\n                problemId,\n                languageId: language.id, // Use the internal PK\n                code,\n                status: \"PENDING\",\n                mode,\n                contestId,\n            },\n            include: {\n                problem: {\n                    include: {\n                        testCases: true\n                    }\n                },\n                language: true\n            }\n        });\n    }\n\n    static async updateSubmissionStatus(submissionId: string, status: SubmissionResult, time?: number, memory?: number) {\n        await prisma.submission.update({\n            where: { id: submissionId },\n            data: { status, time, memory },\n        });\n\n        try {\n            // Only attempt invalidation, don't crash if it fails (e.g. in worker)\n            revalidateTag(`submission-${submissionId}`,\"max\");\n        } catch (error) {\n            // Silently fail in worker context\n        }\n    }\n\n    static async createTestCases(submissionId: string, testCases: { index: number; judge0TrackingId: string }[]) {\n        // Create DB records for tracking individual test case results\n        await prisma.$transaction(\n            testCases.map(tc => prisma.testCase.create({\n                data: {\n                    submissionId,\n                    index: tc.index,\n                    judge0TrackingId: tc.judge0TrackingId,\n                    status: \"PENDING\"\n                }\n            }))\n        );\n    }\n\n    static async updateTestCaseResult(judge0TrackingId: string, status: TestCaseResult, time: number, memory: number, errorMessage?: string | null, stdout?: string | null) {\n        await prisma.testCase.update({\n            where: { judge0TrackingId },\n            data: {\n                status,\n                time,\n                memory,\n                errorMessage: errorMessage || null,\n                stdout: stdout || null\n            }\n        });\n    }\n\n    static async updateTestCasesBatch(updates: { judge0TrackingId: string, status: TestCaseResult, time: number, memory: number, errorMessage?: string | null, stdout?: string | null }[]) {\n        if (updates.length === 0) return;\n\n        await prisma.$transaction(\n            updates.map(update => prisma.testCase.update({\n                where: { judge0TrackingId: update.judge0TrackingId },\n                data: {\n                    status: update.status,\n                    time: update.time,\n                    memory: update.memory,\n                    errorMessage: update.errorMessage || null,\n                    stdout: update.stdout || null\n                }\n            }))\n        );\n    }\n\n    static async sendToJudge0(languageId: number, code: string, testCases: { input: string; output: string }[]) {\n        // Determine Judge0 Language ID from our DB Language ID (assuming mapping exists or is direct)\n        // For now assuming the passed languageId is the Judge0 ID.\n\n        const encodedCode = Buffer.from(code).toString('base64');\n        const submissions = testCases.map(tc => ({\n            language_id: languageId,\n            source_code: encodedCode,\n            stdin: Buffer.from(tc.input).toString('base64'),\n            expected_output: Buffer.from(tc.output).toString('base64'),\n        }));\n\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 5000); // 5s timeout\n\n        try {\n            const response = await fetch(`${JUDGE0_URL}/submissions/batch?base64_encoded=true`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({ submissions }),\n                signal: controller.signal\n            });\n\n            clearTimeout(timeoutId);\n\n            if (!response.ok) {\n                throw new Error(`Judge0 Error: ${response.statusText}`);\n            }\n\n            const data = await response.json();\n            // data type: { token: string }[] (if params say so, but usually it returns tokens)\n            return data as { token: string }[];\n        } catch (error) {\n            console.error(\"Failed to send to Judge0\", error);\n            throw error;\n        } finally {\n            clearTimeout(timeoutId);\n        }\n    }\n\n    static async getBatchResults(tokens: string[]) {\n        if (tokens.length === 0) return [];\n\n        const tokensStr = tokens.join(\",\");\n        // Include compile_output, stderr for error messages, and stdout for user output\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 5000); // 5s timeout\n\n        try {\n            const response = await fetch(`${JUDGE0_URL}/submissions/batch?tokens=${tokensStr}&base64_encoded=true&fields=token,status,time,memory,compile_output,stderr,stdout`, {\n                method: \"GET\",\n                signal: controller.signal\n            });\n\n            clearTimeout(timeoutId);\n\n            if (!response.ok) {\n                const errorText = await response.text();\n                console.error(`Judge0 Batch Fetch Failed: Status ${response.status}`, errorText);\n                throw new Error(`Failed to fetch batch results: ${response.status} - ${errorText}`);\n            }\n\n            const data = await response.json();\n            return (data.submissions as {\n                token: string;\n                status: { id: number; description: string };\n                time: string;\n                memory: number;\n                compile_output: string | null;\n                stderr: string | null;\n                stdout: string | null;\n            }[]).map(sub => ({\n                ...sub,\n                stdout: sub.stdout ? Buffer.from(sub.stdout, 'base64').toString('utf-8') : null,\n                stderr: sub.stderr ? Buffer.from(sub.stderr, 'base64').toString('utf-8') : null,\n                compile_output: sub.compile_output ? Buffer.from(sub.compile_output, 'base64').toString('utf-8') : null,\n            }));\n        } catch (error) {\n            throw error;\n        } finally {\n            clearTimeout(timeoutId);\n        }\n    }\n\n    static async incrementProblemSolved(problemId: string, userId: string) {\n        // Use a transaction to atomically check and update\n        // This helps prevent race conditions when multiple submissions are processed concurrently\n        await prisma.$transaction(async (tx) => {\n            // Check if this is the first time the user has solved this problem\n            // Only count SUBMIT mode submissions to avoid double-counting from RUN mode\n            const acceptedCount = await tx.submission.count({\n                where: {\n                    problemId,\n                    userId,\n                    status: \"ACCEPTED\",\n                    mode: \"SUBMIT\"\n                }\n            });\n\n            // Only increment if this is the first accepted solution (count should be exactly 1, which is the current one)\n            if (acceptedCount === 1) {\n                // Fetch the problem to get its difficulty\n                const problem = await tx.problem.findUnique({\n                    where: { id: problemId },\n                    select: { difficulty: true }\n                });\n\n                if (!problem) {\n                    throw new Error(\"Problem not found\");\n                }\n\n                // Calculate points based on difficulty\n                const points = getPointsForDifficulty(problem.difficulty);\n\n                // Increment problem's solved count\n                await tx.problem.update({\n                    where: { id: problemId },\n                    data: {\n                        solved: {\n                            increment: 1\n                        }\n                    }\n                });\n\n                // Increment user's problemsSolved count and add points based on difficulty\n                // SKIP IF CONCEPT\n                if (problem.difficulty !== \"CONCEPT\") {\n                    await tx.user.update({\n                        where: { id: userId },\n                        data: {\n                            problemsSolved: {\n                                increment: 1\n                            },\n                            totalScore: {\n                                increment: points\n                            }\n                        }\n                    });\n                }\n\n                // Invalidate user score cache and leaderboard cache\n                try {\n                    await redis.del(`user-score-${userId}`);\n                    // Invalidate leaderboard cache so new users appear\n                    await redis.del('leaderboard:global');\n\n                    // Invalidate Next.js cache tags for categories\n                    try {\n                        updateTag('categories-list');\n                        updateTag(`categories-DSA-user-${userId}`);\n                        updateTag(`categories-SQL-user-${userId}`);\n                        updateTag(`user-submissions-${userId}`);\n                        updateTag('problems-list');\n                        updateTag('problems-search');\n                    } catch (e) {\n                        // Ignore if updateTag is not available or fails\n                    }\n                } catch (error) {\n                    // Cache invalidation might fail in worker context, but that's okay\n                    // The cache will expire naturally after 30 seconds (user score) and 10 minutes (leaderboard)\n                    console.error(\"Failed to invalidate cache:\", error);\n                }\n            }\n        });\n    }\n    static async getSubmissionById(id: string) {\n        return prisma.submission.findUnique({\n            where: { id },\n            include: {\n                problem: {\n                    select: {\n                        id: true,\n                        title: true,\n                        slug: true,\n                        difficulty: true,\n                    }\n                },\n                language: {\n                    select: {\n                        id: true,\n                        name: true,\n                    }\n                },\n                testCases: {\n                    orderBy: { index: 'asc' }\n                }\n            }\n        });\n    }\n\n    static async getProblemSubmissions(problemId: string, userId: string, take: number = 20, cursor?: string) {\n        const query: any = {\n            where: {\n                problemId,\n                userId,\n                mode: \"SUBMIT\" // Only show actual submissions, not runs\n            },\n            include: {\n                language: {\n                    select: {\n                        name: true\n                    }\n                }\n            },\n            take,\n            orderBy: {\n                createdAt: 'desc'\n            }\n        };\n\n        if (cursor) {\n            query.cursor = { id: cursor };\n            query.skip = 1;\n        }\n\n        return prisma.submission.findMany(query);\n    }\n    static async invalidateClassroomTracking(userId: string) {\n        try {\n            // Find all classrooms the user is enrolled in where tracking is active\n            const classrooms = await prisma.classroom.findMany({\n                where: {\n                    students: {\n                        some: { id: userId }\n                    },\n                    isTrackingActive: true\n                },\n                select: { id: true }\n            });\n\n            if (classrooms.length > 0) {\n                 // Invalidate live tracking cache for each classroom\n                 const keys = classrooms.map(c => `algofox:live-tracking:${c.id}`);\n                 await redis.del(...keys);\n\n                 // Also invalidate Next.js cache tags for good measure\n                 classrooms.forEach(c => {\n                     // Since we are in a service/worker context, revalidateTag might be tricky if not in a server action/request\n                     // But we can try just in case this service is called from a server action\n                     try {\n                        revalidateTag(`classroom-${c.id}`, \"max\");\n                     } catch (e) {\n                         // Ignore error if outside request context\n                     }\n                 });\n            }\n        } catch (error) {\n            console.error(\"Failed to invalidate classroom tracking cache:\", error);\n        }\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 878, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/actions/submission.action.ts"],"sourcesContent":["\"use server\";\n\nimport { SubmissionService } from \"@/core/services/submission.service\";\nimport { auth } from \"@/lib/auth\";\n\nimport { revalidatePath, revalidateTag, unstable_cache } from \"next/cache\";\nimport { cacheTag, cacheLife } from \"next/cache\";\nimport { headers } from \"next/headers\";\nimport { after } from \"next/server\"; // For background tasks\n\nasync function getCachedSubmissionInternal(id: string) {\n    \"use cache\"\n    cacheTag(`submission-${id}`);\n    // @ts-ignore\n    cacheLife(\"default\"); // or \"submission\" if defined\n\n    return SubmissionService.getSubmissionById(id);\n}\n\nexport async function getSubmission(id: string) {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || !session.user) {\n        return null;\n    }\n\n    const submission = await getCachedSubmissionInternal(id);\n\n    // Security check\n    if (submission && submission.userId !== session.user.id) {\n        return null;\n    }\n\n    return submission;\n}\n\nexport async function getProblemSubmissionsAction(problemId: string, take: number = 20, cursor?: string) {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 60, revalidate: 60 }); // 1 minute default, but we rely on on-demand revalidation ideally\n\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || !session.user) {\n        return [];\n    }\n\n    const userId = session.user.id;\n\n    const tagKey = `problem-submissions-${userId}-${problemId}${cursor ? `-cursor-${cursor}` : \"\"}-take-${take}`;\n    cacheTag(tagKey, `user-submissions-${userId}`, `problem-${problemId}`);\n\n    return SubmissionService.getProblemSubmissions(problemId, userId, take, cursor);\n}\n\nexport async function markConceptAsCompleted(problemId: string) {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || !session.user) {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const userId = session.user.id;\n\n    // Use a default language (e.g., JavaScript ID 63) for concept submissions since language doesn't matter\n    const DEFAULT_CONCEPT_LANG_ID = 63;\n\n    try {\n        // Create a submission with ACCEPTED status\n        const submission = await SubmissionService.createSubmission(\n            userId,\n            problemId,\n            DEFAULT_CONCEPT_LANG_ID,\n            \"// CONCEPT COMPLETED\",\n            \"SUBMIT\"\n        );\n\n        // Update status to ACCEPTED\n        await SubmissionService.updateSubmissionStatus(submission.id, \"ACCEPTED\", 0, 0);\n\n        // Move heavy stats updates to background\n        after(async () => {\n             await SubmissionService.incrementProblemSolved(problemId, userId);\n             // Revalidating paths/tags inside after() ensures the next request is fresh,\n             // but current UI might need revalidatePath synchronous if it relies on server reload.\n             // However, separating side-effects is key.\n             // Using revalidateTag inside after works for ISR.\n             revalidateTag(`problem-${problemId}`,\"max\");\n             revalidateTag(`user-submissions-${userId}`,\"max\");\n             revalidateTag(`problem-submissions-${userId}-${problemId}`,\"max\");\n        });\n\n        revalidatePath(\"/problems\");\n        revalidatePath(\"/problems/dsa\");\n        revalidatePath(\"/problems/sql\");\n        // These might fail in standard runtime if cache tags aren't updated synchronously?\n        // Actually, revalidating path is enough for UI. Tags are for cached data.\n\n        return { success: true };\n    } catch (error) {\n        console.error(\"Failed to mark concept as completed:\", error);\n        return { success: false, error: \"Failed to mark as completed\" };\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1013, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/workspace/CodeEditor.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/workspace/CodeEditor.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/workspace/CodeEditor.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuS,GACpU,qEACA","ignoreList":[0]}},
    {"offset": {"line": 1027, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/workspace/CodeEditor.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/workspace/CodeEditor.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/workspace/CodeEditor.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAmR,GAChT,iDACA","ignoreList":[0]}},
    {"offset": {"line": 1041, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 1049, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/app/submissions/%5Bid%5D/page.tsx"],"sourcesContent":["import { getSubmission } from \"@/actions/submission.action\";\nimport { notFound } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { ArrowLeft, Calendar, Clock, Database, CheckCircle2, XCircle, AlertCircle, Terminal } from \"lucide-react\";\nimport CodeEditor from \"@/components/workspace/CodeEditor\";\nimport { Suspense } from \"react\";\n\ninterface PageProps {\n    params: Promise<{ id: string }>;\n}\n\nasync function SubmissionContent({ params }: PageProps) {\n    \"use cache: private\";\n    const { id } = await params;\n    const submission = await getSubmission(id);\n\n    if (!submission) {\n        return notFound();\n    }\n\n    const { status, time, memory, createdAt, language, problem, code, testCases } = submission;\n\n    const getStatusColor = (status: string) => {\n        switch (status) {\n            case 'ACCEPTED': return 'text-green-500';\n            case 'WRONG_ANSWER': return 'text-red-500';\n            case 'TIME_LIMIT_EXCEEDED': return 'text-orange-500';\n            case 'MEMORY_LIMIT_EXCEEDED': return 'text-purple-500';\n            default: return 'text-gray-500';\n        }\n    };\n\n    const getStatusIcon = (status: string) => {\n        switch (status) {\n            case 'ACCEPTED': return <CheckCircle2 className=\"w-12 h-12\" />;\n            case 'WRONG_ANSWER': return <XCircle className=\"w-12 h-12\" />;\n            case 'TIME_LIMIT_EXCEEDED': return <Clock className=\"w-12 h-12\" />;\n            case 'MEMORY_LIMIT_EXCEEDED': return <Database className=\"w-12 h-12\" />;\n            default: return <AlertCircle className=\"w-12 h-12\" />;\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-white dark:bg-[#050505] py-8 px-4 sm:px-6 lg:px-8\">\n            <div className=\"max-w-[1400px] mx-auto space-y-8\">\n                {/* HEADER / BREADCRUMBS */}\n                <div className=\"flex items-center justify-between border-b border-gray-100 dark:border-[#1a1a1a] pb-6\">\n                    <div className=\"flex items-center gap-6\">\n                        <Link\n                            href={`/problems/${problem.slug}`}\n                            className=\"group flex items-center gap-2 text-gray-500 hover:text-orange-500 transition-colors\"\n                        >\n                            <ArrowLeft className=\"w-4 h-4 group-hover:-translate-x-1 transition-transform\" />\n                            <span className=\"text-sm font-medium uppercase tracking-widest\">Back</span>\n                        </Link>\n                        <div className=\"h-6 w-[1px] bg-gray-200 dark:bg-[#1a1a1a]\" />\n                        <div>\n                            <h1 className=\"text-2xl font-black text-gray-900 dark:text-white zf uppercase \">{problem.title}</h1>\n                            <p className=\"text-[10px] text-gray-400 font-mono mt-0.5 tracking-tighter uppercase\">Submission Reference: {id}</p>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-10 items-start\">\n                    {/* LEFT SIDE: CODE VIEWER */}\n                    <div className=\"lg:col-span-8 space-y-6\">\n                        <div className=\"glass-container relative bg-white/5 dark:bg-white/[0.02] backdrop-blur-md border border-gray-100 dark:border-white/10 rounded-sm overflow-hidden flex flex-col shadow-2xl shadow-black/5\">\n                            <div className=\"px-6 py-4 border-b border-gray-100 dark:border-white/5 bg-white/50 dark:bg-black/20 flex items-center justify-between\">\n                                <h2 className=\"text-[10px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-[0.2em] flex items-center gap-3\">\n                                    <Terminal className=\"w-3.5 h-3.5 text-orange-500\" />\n                                    Source Code\n                                </h2>\n                                <div className=\"flex items-center gap-4\">\n                                    <span className=\"text-[10px] font-black text-orange-500 bg-orange-500/10 px-2 py-0.5 rounded-none border border-orange-500/20 uppercase tracking-widest\">\n                                        {language.name}\n                                    </span>\n                                </div>\n                            </div>\n                            <div className=\"h-[600px] lg:h-[calc(100vh-300px)] w-full antialiased font-mono\">\n                                <CodeEditor\n                                    value={code}\n                                    languageId={language.id}\n                                    readOnly={true}\n                                />\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* RIGHT SIDE: METADATA & RESULTS */}\n                    <div className=\"lg:col-span-4 space-y-2 lg:sticky lg:top-8\">\n                        {/* OUTCOME - TEXT ONLY VERSION */}\n                        <div className=\"flex flex-col items-center text-center py-6\">\n                            <div className={`mb-4 ${getStatusColor(status).replace('text-', 'text- opacity-80 ')} animate-pulse`}>\n                                {getStatusIcon(status)}\n                            </div>\n                            <h3 className={`text-4xl font-black uppercase tracking-tighter italic ${getStatusColor(status)} line-height-1`}>\n                                {status.replace(/_/g, \" \")}\n                            </h3>\n                            <p className=\"text-[10px] font-bold text-gray-400 dark:text-gray-600 mt-2 uppercase tracking-[0.3em]\">Status Result</p>\n                        </div>\n\n                        <div className=\"h-[1px] bg-gradient-to-r from-transparent via-gray-100 dark:via-white/10 to-transparent w-full\" />\n\n                        {/* PERFORMANCE STATS - GLASS STYLE */}\n                        <div className=\"bg-white/5 rounded-xl dark:bg-white/[0.02] backdrop-blur-md border border-gray-100 dark:border-white/10 p-8 rounded-none shadow-xl shadow-black/5\">\n                            <h3 className=\"text-[10px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-[0.3em] mb-8 border-b border-white/5 pb-4\">\n                                Metrics Detail\n                            </h3>\n                            <div className=\"grid grid-cols-2 gap-x-8 gap-y-10\">\n                                <div className=\"space-y-3\">\n                                    <div className=\"flex items-center gap-2 text-gray-400\">\n                                        <Clock className=\"w-3 h-3\" />\n                                        <span className=\"text-[9px] font-black uppercase tracking-widest\">Runtime</span>\n                                    </div>\n                                    <p className=\"text-2xl font-black text-gray-900 dark:text-gray-100 tracking-tighter\">\n                                        {time ? <>{time}<span className=\"text-xs ml-1 font-medium text-gray-400\">ms</span></> : <span className=\"text-gray-200 dark:text-gray-800\">--</span>}\n                                    </p>\n                                </div>\n                                <div className=\"space-y-3\">\n                                    <div className=\"flex items-center gap-2 text-gray-400\">\n                                        <Database className=\"w-3 h-3\" />\n                                        <span className=\"text-[9px] font-black uppercase tracking-widest\">Memory</span>\n                                    </div>\n                                    <p className=\"text-2xl font-black text-gray-900 dark:text-gray-100 tracking-tighter\">\n                                        {memory ? <>{memory}<span className=\"text-xs ml-1 font-medium text-gray-400\">KB</span></> : <span className=\"text-gray-200 dark:text-gray-800\">--</span>}\n                                    </p>\n                                </div>\n                            </div>\n\n                            <div className=\"mt-10 pt-6 border-t  border-gray-50 dark:border-white/5\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"space-y-1\">\n                                        <span className=\"text-[9px] font-black text-gray-400 uppercase tracking-widest\">Submitted</span>\n                                        <p className=\"text-[11px] font-bold text-gray-900 dark:text-gray-300 uppercase tracking-tighter flex items-center gap-2\">\n                                            <Calendar className=\"w-3 h-3 text-orange-500\" />\n                                            {new Date(createdAt).toLocaleString('en-US', {\n                                                month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit'\n                                            })}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* TEST CASES ACCORDION / LIST */}\n                        {testCases.length > 0 && (\n                            <div className=\"bg-white/5 rounded-xl dark:bg-white/[0.02] backdrop-blur-md border border-gray-100 dark:border-white/10 rounded-none shadow-xl shadow-black/5 overflow-hidden\">\n                                <div className=\"px-6 py-4 border-b border-gray-100 dark:border-white/5 bg-white/50 dark:bg-black/20 flex items-center justify-between\">\n                                    <h3 className=\"text-[10px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-[0.2em]\">Test Scenarios</h3>\n                                    <div className=\"flex items-center gap-1 bg-black/5 dark:bg-white/5 px-2 py-1\">\n                                        <span className=\"text-[10px] font-black text-green-500\">{testCases.filter(t => t.status === 'ACCEPTED').length}</span>\n                                        <span className=\"text-[10px] font-black text-gray-300 italic\">PASS</span>\n                                    </div>\n                                </div>\n                                <div className=\"divide-y divide-gray-100 dark:divide-white/5 max-h-[300px] overflow-y-auto custom-scrollbar\">\n                                    {testCases.map((tc) => (\n                                        <div key={tc.id} className=\"px-6 py-4 flex items-center justify-between hover:bg-black/5 dark:hover:bg-white/[0.02] transition-colors group\">\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className={`w-1 h-4 rounded-none ${tc.status === 'ACCEPTED' ? 'bg-green-500' : 'bg-red-500'}`} />\n                                                <span className=\"text-[10px] font-bold text-gray-700 dark:text-gray-400 uppercase tracking-widest\">Case {tc.index + 1}</span>\n                                            </div>\n                                            <span className={`text-[9px] font-black uppercase tracking-[0.1em] ${tc.status === 'ACCEPTED' ? 'text-green-500' : 'text-red-500'}`}>\n                                                {tc.status === 'ACCEPTED' ? 'OK' : 'FAIL'}\n                                            </span>\n                                        </div>\n                                    ))}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default function SubmissionPage({ params }: PageProps) {\n    return (\n        <Suspense fallback={\n            <div className=\"min-h-screen pt-24 flex items-center justify-center\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-orange-500 border-t-transparent\"></div>\n            </div>\n        }>\n            <SubmissionContent params={params} />\n        </Suspense>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1713, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/.next-internal/server/app/submissions/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {checkSessionConflict as '00424ba432501922f40bb512e30bdbd7d1847d3c3e'} from 'ACTIONS_MODULE0'\nexport {resolveSessionConflict as '40acca00133b06cb19d5be722d10fe520a25103a8b'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_CACHE_0 as 'c0e480813910f7d5fb3c4f803050573a64bd815288'} from 'ACTIONS_MODULE1'\nexport {markConceptAsCompleted as '40a37009f3d89fa942e11725f8853c3d127638cb39'} from 'ACTIONS_MODULE2'\nexport {getSubmission as '40f3732208c79da0b2b65a5118279fb4de68977ef7'} from 'ACTIONS_MODULE2'\nexport {$$RSC_SERVER_CACHE_0 as 'c0f6768c60a2a7ca7ca0e72e9a870514874cb5a6d4'} from 'ACTIONS_MODULE2'\nexport {$$RSC_SERVER_CACHE_1 as 'f01eedd733ad152101ce62211207b02999e4266a89'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AAEA;AACA"}}]
}