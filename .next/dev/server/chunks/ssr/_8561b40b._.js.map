{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/actions/user.action.ts"],"sourcesContent":["\"use server\";\n\nimport { UserService } from \"@/core/services/user.service\";\nimport { auth } from \"@/lib/auth\";\nimport { headers } from \"next/headers\";\nimport { prisma } from \"@/lib/prisma\";\nimport { revalidatePath, updateTag, cacheTag, cacheLife } from \"next/cache\";\n\n/**\n * Get user's total score (cached for 5 minutes)\n * Cache is invalidated when user solves a problem via updateTag\n */\n\nexport async function getUserScore(): Promise<number> {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 300, revalidate: 300 }); // 5 minutes\n\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session?.user?.id) {\n        return 0;\n    }\n\n    const userId = session.user.id;\n\n    cacheTag(`user-score-${userId}`, `user-${userId}`);\n\n    return UserService.getUserScore(userId);\n}\n\n/**\n * Recalculate user's total score based on their solved problems\n * This fixes any incorrect scores in the database\n */\nexport async function recalculateUserScore(): Promise<{ success: boolean; newScore: number }> {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session?.user?.id) {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const userId = session.user.id;\n\n    return UserService.recalculateUserScore(userId);\n}\n\n/**\n * Complete user onboarding process\n * Updates user profile information and marks onboarding as complete\n */\nexport async function completeOnboarding(data: {\n    name?: string;\n    bio?: string;\n    collegeId: string;\n    year?: string;\n    leetCodeHandle?: string;\n    codeChefHandle?: string;\n    hackerrankHandle?: string;\n    githubHandle?: string;\n}): Promise<{ success: boolean; error?: string }> {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session?.user?.id) {\n        return { success: false, error: \"Unauthorized\" };\n    }\n\n    const userId = session.user.id;\n\n    const res = await UserService.completeOnboarding(userId, data);\n\n    if (res.success) {\n        // Invalidate Redis cache (redundant but good to have here too)\n        try {\n            const redis = (await import(\"@/lib/redis\")).default;\n            await redis.del(`dashboard:stats:${userId}`);\n        } catch (error) {\n            console.error(\"Failed to invalidate dashboard redis cache:\", error);\n        }\n\n        revalidatePath(\"/dashboard\");\n        updateTag(`user-${userId}`);\n        updateTag(`dashboard-${userId}`);\n        updateTag('dashboard-stats');\n    }\n\n    return res;\n}\n\n/**\n * Update user profile information\n */\nexport async function updateUserInfo(data: {\n    name?: string;\n    bio?: string;\n    leetCodeHandle?: string;\n    codeChefHandle?: string;\n    hackerrankHandle?: string;\n    codeforcesHandle?: string;\n    githubHandle?: string;\n}): Promise<{ success: boolean; error?: string }> {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session?.user?.id) {\n        return { success: false, error: \"Unauthorized\" };\n    }\n\n    const userId = session.user.id;\n\n    try {\n        // Fetch current user to check for changes\n        const currentUser = await prisma.user.findUnique({\n            where: { id: userId },\n            select: {\n                codeChefHandle: true,\n                codeforcesHandle: true,\n            }\n        });\n\n        const updateData: any = {\n            name: data.name,\n            bio: data.bio,\n            leetCodeHandle: data.leetCodeHandle,\n            codeChefHandle: data.codeChefHandle,\n            codeforcesHandle: data.codeforcesHandle,\n            githubHandle: data.githubHandle,\n        };\n\n        // Reset verification if handle changed\n        if (currentUser) {\n            if (data.codeChefHandle !== undefined && data.codeChefHandle !== currentUser.codeChefHandle) {\n                updateData.codeChefVerified = false;\n            }\n            if (data.codeforcesHandle !== undefined && data.codeforcesHandle !== currentUser.codeforcesHandle) {\n                updateData.codeforcesVerified = false;\n            }\n            if (data.leetCodeHandle !== undefined && data.leetCodeHandle !== currentUser.leetCodeHandle) {\n                updateData.leetCodeVerified = false;\n            }\n        }\n\n        await prisma.user.update({\n            where: { id: userId },\n            data: updateData\n        });\n\n        // Invalidate Redis cache\n        try {\n            const redis = (await import(\"@/lib/redis\")).default;\n            await redis.del(`dashboard:stats:${userId}`);\n        } catch (error) {\n            console.error(\"Failed to invalidate dashboard redis cache:\", error);\n        }\n\n        revalidatePath(\"/dashboard\");\n        revalidatePath(\"/dashboard/settings\"); // Added to refresh settings page\n        updateTag(`user-${userId}`);\n        updateTag(`user-score-${userId}`);\n        updateTag(`dashboard-${userId}`);\n        updateTag('dashboard-stats');\n        return { success: true };\n    } catch (error) {\n        console.error(\"Failed to update user info:\", error);\n        return { success: false, error: \"Failed to update profile\" };\n    }\n}\n\n/**\n * Sync user profile and stats\n * Clears all caches related to the user and revalidates dashboard\n */\nexport async function syncUserProfile(): Promise<{ success: boolean; error?: string }> {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session?.user?.id) {\n        return { success: false, error: \"Unauthorized\" };\n    }\n\n    const userId = session.user.id;\n\n    try {\n        // Invalidate Redis cache\n        try {\n            const redis = (await import(\"@/lib/redis\")).default;\n            await redis.del(`dashboard:stats:${userId}`);\n            await redis.del(`user-score-${userId}`);\n        } catch (error) {\n            console.error(\"Failed to invalidate redis cache during sync:\", error);\n        }\n\n        // Revalidate Next.js cache\n        revalidatePath(\"/dashboard\");\n        updateTag(`user-${userId}`);\n        updateTag(`user-score-${userId}`);\n        updateTag('dashboard-stats');\n\n        return { success: true };\n    } catch (error) {\n        console.error(\"Sync failed:\", error);\n        return { success: false, error: \"Failed to sync profile\" };\n    }\n}\n\n/**\n * Get user settings data (cached)\n */\nexport async function getUserSettings() {\n    \"use cache: private\";\n    cacheLife({ stale: 300, revalidate: 300 });\n\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session?.user?.id) {\n        return null;\n    }\n\n    const userId = session.user.id;\n    cacheTag(`user-${userId}`);\n\n    const user = await prisma.user.findUnique({\n        where: { id: userId },\n        include: {\n            institution: true\n        }\n    });\n\n    if (!user) return null;\n\n    return {\n        id: user.id,\n        name: user.name,\n        email: user.email,\n        image: user.image,\n        bio: user.bio,\n        institutionName: user.institution?.name\n    };\n}\n"],"names":[],"mappings":";;;;;;;IAasB,eAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/UserPoints.tsx"],"sourcesContent":["\n// TODO : MAKE IT SERVER COMPONENT AND OPTIMIZE\n\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { getUserScore } from \"@/actions/user.action\";\nimport { Coins } from \"lucide-react\";\n\ninterface UserPointsProps {\n    className?: string;\n}\n\nexport default function UserPoints({ className = \"\" }: UserPointsProps) {\n    const [points, setPoints] = useState<number | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        async function fetchPoints() {\n            try {\n                const score = await getUserScore();\n                setPoints(score);\n            } catch (error) {\n                console.error(\"Failed to fetch user points:\", error);\n                setPoints(0);\n            } finally {\n                setIsLoading(false);\n            }\n        }\n\n        fetchPoints();\n    }, []);\n\n    // Refresh points when window gains focus or when points are updated\n    useEffect(() => {\n        const handleFocus = async () => {\n            try {\n                const score = await getUserScore();\n                setPoints(score);\n            } catch (error) {\n                console.error(\"Failed to refresh user points:\", error);\n            }\n        };\n\n        const handlePointsUpdated = async () => {\n            try {\n                const score = await getUserScore();\n                setPoints(score);\n            } catch (error) {\n                console.error(\"Failed to refresh user points:\", error);\n            }\n        };\n\n        window.addEventListener(\"focus\", handleFocus);\n        window.addEventListener(\"pointsUpdated\", handlePointsUpdated);\n\n        return () => {\n            window.removeEventListener(\"focus\", handleFocus);\n            window.removeEventListener(\"pointsUpdated\", handlePointsUpdated);\n        };\n    }, []);\n\n    if (isLoading) {\n        return (\n            <div className={`flex items-center gap-2 ${className}`}>\n                <Coins className=\"w-4 h-4 text-amber-500\" />\n                <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">...</span>\n            </div>\n        );\n    }\n\n    return (\n        <div className={`flex items-center gap-2 ${className}`}>\n            <Coins className=\"w-4 h-4 text-amber-500\" />\n            <span className=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">{points?.toLocaleString() || 0}</span>\n            <span className=\"text-xs text-gray-500 dark:text-gray-400\">pts</span>\n        </div>\n    );\n}\n"],"names":[],"mappings":"AACA,+CAA+C;;;;;;AAI/C;AACA;AACA;AAJA;;;;;AAUe,SAAS,WAAW,EAAE,YAAY,EAAE,EAAmB;IAClE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAgB;IACpD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,IAAA,kNAAS,EAAC;QACN,eAAe;YACX,IAAI;gBACA,MAAM,QAAQ,MAAM,IAAA,+JAAY;gBAChC,UAAU;YACd,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,UAAU;YACd,SAAU;gBACN,aAAa;YACjB;QACJ;QAEA;IACJ,GAAG,EAAE;IAEL,oEAAoE;IACpE,IAAA,kNAAS,EAAC;QACN,MAAM,cAAc;YAChB,IAAI;gBACA,MAAM,QAAQ,MAAM,IAAA,+JAAY;gBAChC,UAAU;YACd,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,kCAAkC;YACpD;QACJ;QAEA,MAAM,sBAAsB;YACxB,IAAI;gBACA,MAAM,QAAQ,MAAM,IAAA,+JAAY;gBAChC,UAAU;YACd,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,kCAAkC;YACpD;QACJ;QAEA,OAAO,gBAAgB,CAAC,SAAS;QACjC,OAAO,gBAAgB,CAAC,iBAAiB;QAEzC,OAAO;YACH,OAAO,mBAAmB,CAAC,SAAS;YACpC,OAAO,mBAAmB,CAAC,iBAAiB;QAChD;IACJ,GAAG,EAAE;IAEL,IAAI,WAAW;QACX,qBACI,8OAAC;YAAI,WAAW,CAAC,wBAAwB,EAAE,WAAW;;8BAClD,8OAAC,6MAAK;oBAAC,WAAU;;;;;;8BACjB,8OAAC;oBAAK,WAAU;8BAAyD;;;;;;;;;;;;IAGrF;IAEA,qBACI,8OAAC;QAAI,WAAW,CAAC,wBAAwB,EAAE,WAAW;;0BAClD,8OAAC,6MAAK;gBAAC,WAAU;;;;;;0BACjB,8OAAC;gBAAK,WAAU;0BAA0D,QAAQ,oBAAoB;;;;;;0BACtG,8OAAC;gBAAK,WAAU;0BAA2C;;;;;;;;;;;;AAGvE"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/ThemeToggle.tsx"],"sourcesContent":["\"use client\";\n\nimport { useTheme } from \"next-themes\";\nimport { useEffect, useState } from \"react\";\nimport { Sun, Moon } from \"lucide-react\";\n\nexport function ThemeToggle() {\n  const { theme, setTheme, resolvedTheme } = useTheme();\n  const [loading, setloading] = useState(true);\n  useEffect(() => {\n    setloading(false);\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"w-9 h-9 rounded-lg bg-gray-100 dark:bg-[#262626] animate-pulse\" />\n    );\n  }\n\n  const toggleTheme = () => {\n    setTheme(theme === \"dark\" ? \"light\" : \"dark\");\n  };\n\n  return (\n    <button\n      onClick={toggleTheme}\n      className=\"relative p-2 rounded-lg bg-gray-100 hover:bg-gray-200 dark:bg-[#262626] dark:hover:bg-[#333333] group\"\n      aria-label={`Switch to ${\n        resolvedTheme === \"dark\" ? \"light\" : \"dark\"\n      } mode`}\n      title={`Current: ${resolvedTheme} mode`}\n    >\n      <div className=\"relative w-5 h-5\">\n        <Sun\n          className={`absolute inset-0 w-5 h-5 text-orange-500 transition-all duration-300 ${\n            resolvedTheme === \"light\"\n              ? \"opacity-100 rotate-0 scale-100\"\n              : \"opacity-0 rotate-90 scale-0\"\n          }`}\n        />\n        <Moon\n          className={`absolute inset-0 w-5 h-5 text-orange-400 transition-all duration-300 ${\n            resolvedTheme === \"dark\"\n              ? \"opacity-100 rotate-0 scale-100\"\n              : \"opacity-0 -rotate-90 scale-0\"\n          }`}\n        />\n      </div>\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAJA;;;;;AAMO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,aAAa,EAAE,GAAG,IAAA,4JAAQ;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,IAAA,kNAAS,EAAC;QACR,WAAW;IACb,GAAG,EAAE;IAEL,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;;;;;;IAEnB;IAEA,MAAM,cAAc;QAClB,SAAS,UAAU,SAAS,UAAU;IACxC;IAEA,qBACE,8OAAC;QACC,SAAS;QACT,WAAU;QACV,cAAY,CAAC,UAAU,EACrB,kBAAkB,SAAS,UAAU,OACtC,KAAK,CAAC;QACP,OAAO,CAAC,SAAS,EAAE,cAAc,KAAK,CAAC;kBAEvC,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,uMAAG;oBACF,WAAW,CAAC,qEAAqE,EAC/E,kBAAkB,UACd,mCACA,+BACJ;;;;;;8BAEJ,8OAAC,0MAAI;oBACH,WAAW,CAAC,qEAAqE,EAC/E,kBAAkB,SACd,mCACA,gCACJ;;;;;;;;;;;;;;;;;AAKZ"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport { authClient } from \"@/lib/auth-client\";\nimport { useState, useEffect } from \"react\";\nimport { useRouter, usePathname } from \"next/navigation\";\nimport { toast } from \"sonner\";\nimport UserPoints from \"./UserPoints\";\nimport { ThemeToggle } from \"./ThemeToggle\";\nimport { ChevronDown } from \"lucide-react\";\n\nexport default function Navbar() {\n    const { data: session, isPending } = authClient.useSession();\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n    const [mounted, setMounted] = useState(false);\n    const router = useRouter();\n    const pathname = usePathname();\n\n    useEffect(() => {\n        setMounted(true);\n    }, []);\n\n\n\n    const handleSignOut = async () => {\n        await authClient.signOut({\n            fetchOptions: {\n                onSuccess: () => {\n                    toast.success(\"Logged out successfully\");\n                    router.push(\"/\");\n                },\n            },\n        });\n    };\n\n    // Check for active nav link\n    const isActive = (path: string) => {\n        if (path === \"/\") return pathname === path;\n        return pathname?.startsWith(path);\n    };\n\n    const navLinkClass = (path: string) => {\n        const base = \"text-sm font-medium transition-colors\";\n        return isActive(path)\n            ? `${base} text-orange-600 font-semibold`\n            : `${base} text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white`;\n    };\n\n    // Role checks\n    const userRole = (session?.user as any)?.role;\n    const isAdmin = userRole === \"ADMIN\";\n    const isInstitutionManager = userRole === \"INSTITUTION_MANAGER\";\n    const isTeacher = userRole === \"TEACHER\";\n    const isContestManager = userRole === \"CONTEST_MANAGER\";\n    const canManage = isAdmin || isTeacher || isContestManager;\n\n    return (\n        <nav className=\"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-[#0a0a0a] backdrop-blur-md border-b border-dashed border-gray-300 dark:border-[#262626]\">\n            <div className=\"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between\">\n                <Link href=\"/\" className=\"text-xl font-bold flex items-center gap-2 group\">\n                    <span className=\"w-8 h-8 bg-linear-to-br from-orange-500 to-red-500 rounded-lg flex items-center justify-center text-white shadow-md shadow-orange-500/20 group-hover:scale-105 transition-transform duration-300 text-sm\">\n                        A\n                    </span>\n                    <span className=\"tracking-tight text-gray-900 dark:text-gray-100\">Algofox</span>\n                </Link>\n\n                {/* Desktop Menu */}\n                <div className=\"hidden md:flex items-center gap-6\">\n                    {!isPending && (\n                        <>\n                            {session ? (\n                                <div className=\"flex items-center gap-6\">\n                                    {/* Main Navigation Links */}\n                                    <Link href=\"/problems\" className={navLinkClass(\"/problems\")}>\n                                        Practice\n                                    </Link>\n                                    <Link href=\"/contests\" className={navLinkClass(\"/contests\")}>\n                                        Contests\n                                    </Link>\n                                    <Link href=\"/leaderboard\" className={navLinkClass(\"/leaderboard\")}>\n                                        Leaderboard\n                                    </Link>\n\n                                    <div className=\"flex items-center gap-4\">\n                                        {/* User Dropdown */}\n                                        <div className=\"relative\">\n                                            <button\n                                                onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n                                                className=\"flex items-center gap-2 pl-2 pr-1 py-1 rounded-full hover:bg-gray-100 dark:hover:bg-[#1a1a1a] transition-all border border-transparent hover:border-gray-200 dark:hover:border-[#262626]\"\n                                            >\n                                                <span className=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">{session.user.name}</span>\n                                                <div className=\"w-8 h-8 rounded-full overflow-hidden ring-2 ring-white bg-orange-50 text-orange-600 flex items-center justify-center font-bold text-xs\">\n                                                    {session.user.image ? (\n                                                        <Image\n                                                            src={session.user.image}\n                                                            alt={session.user.name || \"User\"}\n                                                            width={32}\n                                                            height={32}\n                                                            className=\"w-full h-full object-cover\"\n                                                            referrerPolicy=\"no-referrer\"\n                                                        />\n                                                    ) : (\n                                                        session.user.name?.charAt(0).toUpperCase()\n                                                    )}\n                                                </div>\n                                                <ChevronDown className={`w-4 h-4 text-gray-400 transition-transform ${isDropdownOpen ? 'rotate-180' : ''}`} />\n                                            </button>\n\n                                            {isDropdownOpen && (\n                                                <>\n                                                    {/* Backdrop */}\n                                                    <div className=\"fixed inset-0 z-40\" onClick={() => setIsDropdownOpen(false)} />\n                                                    <div className=\"absolute right-0 top-full mt-1 w-52 bg-white dark:bg-[#141414] border border-gray-100 dark:border-[#262626] rounded-xl shadow-lg z-50 p-1\">\n                                                        {/* Primary Links */}\n                                                        <Link href=\"/dashboard\" onClick={() => setIsDropdownOpen(false)} className=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] rounded-lg\">\n                                                            My Dashboard\n                                                        </Link>\n                                                        <Link href=\"/dashboard/classrooms\" onClick={() => setIsDropdownOpen(false)} className=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] rounded-lg\">\n                                                        My Classrooms\n                                                    </Link>\n                                                    <Link href=\"/my-assignments\" onClick={() => setIsDropdownOpen(false)} className=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] rounded-lg\">\n                                                        My Assignments\n                                                    </Link>\n\n                                                    {/* Role-specific management links */}\n                                                    {(canManage || isInstitutionManager) && (\n                                                        <>\n                                                            <div className=\"my-1 border-t border-gray-100 dark:border-[#262626]\" />\n                                                            <div className=\"px-4 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider\">Manage</div>\n                                                        </>\n                                                    )}\n\n                                                        {isTeacher && (\n                                                            <Link href=\"/dashboard/teacher/classrooms\" onClick={() => setIsDropdownOpen(false)} className=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] rounded-lg\">\n                                                                Teacher Dashboard\n                                                            </Link>\n                                                        )}\n\n                                                        {isInstitutionManager && (\n                                                            <Link href=\"/dashboard/institution\" onClick={() => setIsDropdownOpen(false)} className=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] rounded-lg\">\n                                                                Institution\n                                                            </Link>\n                                                        )}\n\n                                                        {(isAdmin || isContestManager) && (\n                                                            <Link href=\"/dashboard/contests\" onClick={() => setIsDropdownOpen(false)} className=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] rounded-lg\">\n                                                                Contest Management\n                                                            </Link>\n                                                        )}\n\n                                                        {isAdmin && (\n                                                            <Link href=\"/admin\" onClick={() => setIsDropdownOpen(false)} className=\"block px-4 py-2 text-sm font-semibold text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-500/10 rounded-lg\">\n                                                                Admin Panel\n                                                            </Link>\n                                                        )}\n\n                                                        {/* Bottom section */}\n                                                        <div className=\"my-1 border-t border-gray-100 dark:border-[#262626]\" />\n                                                        <button\n                                                            onClick={() => { setIsDropdownOpen(false); handleSignOut(); }}\n                                                            className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg\"\n                                                        >\n                                                            Sign Out\n                                                        </button>\n                                                    </div>\n                                                </>\n                                            )}\n                                        </div>\n                                        <ThemeToggle />\n                                        <UserPoints />\n                                    </div>\n                                </div>\n                            ) : (\n                                <div className=\"flex items-center gap-4\">\n                                    <ThemeToggle />\n                                    <Link href=\"/signin\" className=\"text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors\">\n                                        Sign In\n                                    </Link>\n                                    <Link href=\"/signup\" className=\"px-4 py-2 bg-black dark:bg-white text-white dark:text-black text-sm rounded-lg hover:bg-gray-900 dark:hover:bg-gray-100 transition-all font-medium shadow-md hover:shadow-lg hover:-translate-y-0.5\">\n                                        Get Started\n                                    </Link>\n                                </div>\n                            )}\n                        </>\n                    )}\n                </div>\n\n                {/* MOBILE MENU HAMBURGER ICON */}\n                <button\n                    className=\"md:hidden p-2 text-gray-600 dark:text-gray-400\"\n                    onClick={() => setIsMenuOpen(!isMenuOpen)}\n                >\n                    <div className=\"w-5 h-5 flex flex-col justify-center gap-1\">\n                        <span className={`block w-full h-0.5 bg-current transition-all origin-center ${isMenuOpen ? 'rotate-45 translate-y-1.5' : ''}`} />\n                        <span className={`block w-full h-0.5 bg-current transition-all ${isMenuOpen ? 'opacity-0' : ''}`} />\n                        <span className={`block w-full h-0.5 bg-current transition-all origin-center ${isMenuOpen ? '-rotate-45 -translate-y-1.5' : ''}`} />\n                    </div>\n                </button>\n            </div>\n\n            {/* MOBILE MENU DROPDOWN */}\n            {isMenuOpen && (\n                <div className=\"md:hidden absolute top-16 left-0 w-full bg-white dark:bg-[#0a0a0a] border-b border-gray-100 dark:border-[#262626] p-6 shadow-xl animate-fadeIn\">\n                    <div className=\"flex flex-col gap-4\">\n                        {session ? (\n                            <>\n                                <div className=\"flex items-center gap-3 mb-2 pb-4 border-b border-gray-100 dark:border-[#262626]\">\n                                    <div className=\"w-10 h-10 rounded-full overflow-hidden bg-orange-100 dark:bg-orange-500/20 text-orange-600 flex items-center justify-center font-bold text-sm\">\n                                        {session.user.image ? (\n                                            <Image\n                                                src={session.user.image}\n                                                alt={session.user.name || \"User\"}\n                                                width={40}\n                                                height={40}\n                                                className=\"w-full h-full object-cover\"\n                                                referrerPolicy=\"no-referrer\"\n                                            />\n                                        ) : (\n                                            session.user.name?.charAt(0).toUpperCase()\n                                        )}\n                                    </div>\n                                    <div className=\"flex-1\">\n                                        <p className=\"font-semibold dark:text-gray-100\">{session.user.name}</p>\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">{session.user.email}</p>\n                                    </div>\n                                    <UserPoints />\n                                </div>\n\n                                {/* Main Links */}\n                                <Link href=\"/problems\" className={`text-base font-medium ${isActive(\"/problems\") ? \"text-orange-600\" : \"text-gray-800 hover:text-orange-600\"}`}>\n                                    Practice\n                                </Link>\n                                <Link href=\"/contests\" className={`text-base font-medium ${isActive(\"/contests\") ? \"text-orange-600\" : \"text-gray-800 hover:text-orange-600\"}`}>\n                                    Contests\n                                </Link>\n                                <Link href=\"/leaderboard\" className={`text-base font-medium ${isActive(\"/leaderboard\") ? \"text-orange-600\" : \"text-gray-800 hover:text-orange-600\"}`}>\n                                    Leaderboard\n                                </Link>\n\n                                <div className=\"my-2 border-t border-gray-100\" />\n\n                                <Link href=\"/dashboard\" className=\"text-base font-medium text-gray-800 hover:text-orange-600\">\n                                    My Dashboard\n                                </Link>\n                                <Link href=\"/dashboard/classrooms\" className=\"text-base font-medium text-gray-800 hover:text-orange-600\">\n                                    My Classrooms\n                                </Link>\n\n                                {/* Role-specific Links */}\n                                {isAdmin && (\n                                    <Link href=\"/admin\" className=\"text-base font-medium text-orange-600 hover:text-orange-700\">\n                                        Admin Panel\n                                    </Link>\n                                )}\n                                {isInstitutionManager && (\n                                    <Link href=\"/dashboard/institution\" className=\"text-base font-medium text-gray-800 hover:text-orange-600\">\n                                        Institution\n                                    </Link>\n                                )}\n                                {isTeacher && (\n                                    <Link href=\"/dashboard/teacher/classrooms\" className=\"text-base font-medium text-gray-800 hover:text-orange-600\">\n                                        Teacher Dashboard\n                                    </Link>\n                                )}\n                                {(isAdmin || isContestManager) && (\n                                    <Link href=\"/dashboard/contests\" className=\"text-base font-medium text-gray-800 hover:text-orange-600\">\n                                        Contest Management\n                                    </Link>\n                                )}\n\n                                <div className=\"my-2 border-t border-gray-100\" />\n                                <button onClick={handleSignOut} className=\"text-base font-medium text-red-600 text-left hover:text-red-700\">\n                                    Sign Out\n                                </button>\n                            </>\n                        ) : (\n                            <>\n                                <Link href=\"/signin\" className=\"text-base font-medium text-gray-800 hover:text-black\">Sign In</Link>\n                                <Link href=\"/signup\" className=\"text-base font-medium text-orange-600 hover:text-orange-700\">Get Started</Link>\n                            </>\n                        )}\n                    </div>\n                </div>\n            )}\n        </nav>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;;;;;;;;;;AAYe,SAAS;IACpB,MAAM,EAAE,MAAM,OAAO,EAAE,SAAS,EAAE,GAAG,mIAAU,CAAC,UAAU;IAC1D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,IAAA,kNAAS,EAAC;QACN,WAAW;IACf,GAAG,EAAE;IAIL,MAAM,gBAAgB;QAClB,MAAM,mIAAU,CAAC,OAAO,CAAC;YACrB,cAAc;gBACV,WAAW;oBACP,iJAAK,CAAC,OAAO,CAAC;oBACd,OAAO,IAAI,CAAC;gBAChB;YACJ;QACJ;IACJ;IAEA,4BAA4B;IAC5B,MAAM,WAAW,CAAC;QACd,IAAI,SAAS,KAAK,OAAO,aAAa;QACtC,OAAO,UAAU,WAAW;IAChC;IAEA,MAAM,eAAe,CAAC;QAClB,MAAM,OAAO;QACb,OAAO,SAAS,QACV,GAAG,KAAK,8BAA8B,CAAC,GACvC,GAAG,KAAK,wEAAwE,CAAC;IAC3F;IAEA,cAAc;IACd,MAAM,WAAY,SAAS,MAAc;IACzC,MAAM,UAAU,aAAa;IAC7B,MAAM,uBAAuB,aAAa;IAC1C,MAAM,YAAY,aAAa;IAC/B,MAAM,mBAAmB,aAAa;IACtC,MAAM,YAAY,WAAW,aAAa;IAE1C,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,uKAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACrB,8OAAC;gCAAK,WAAU;0CAA2M;;;;;;0CAG3N,8OAAC;gCAAK,WAAU;0CAAkD;;;;;;;;;;;;kCAItE,8OAAC;wBAAI,WAAU;kCACV,CAAC,2BACE;sCACK,wBACG,8OAAC;gCAAI,WAAU;;kDAEX,8OAAC,uKAAI;wCAAC,MAAK;wCAAY,WAAW,aAAa;kDAAc;;;;;;kDAG7D,8OAAC,uKAAI;wCAAC,MAAK;wCAAY,WAAW,aAAa;kDAAc;;;;;;kDAG7D,8OAAC,uKAAI;wCAAC,MAAK;wCAAe,WAAW,aAAa;kDAAiB;;;;;;kDAInE,8OAAC;wCAAI,WAAU;;0DAEX,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDACG,SAAS,IAAM,kBAAkB,CAAC;wDAClC,WAAU;;0EAEV,8OAAC;gEAAK,WAAU;0EAA0D,QAAQ,IAAI,CAAC,IAAI;;;;;;0EAC3F,8OAAC;gEAAI,WAAU;0EACV,QAAQ,IAAI,CAAC,KAAK,iBACf,8OAAC,wIAAK;oEACF,KAAK,QAAQ,IAAI,CAAC,KAAK;oEACvB,KAAK,QAAQ,IAAI,CAAC,IAAI,IAAI;oEAC1B,OAAO;oEACP,QAAQ;oEACR,WAAU;oEACV,gBAAe;;;;;2EAGnB,QAAQ,IAAI,CAAC,IAAI,EAAE,OAAO,GAAG;;;;;;0EAGrC,8OAAC,mOAAW;gEAAC,WAAW,CAAC,2CAA2C,EAAE,iBAAiB,eAAe,IAAI;;;;;;;;;;;;oDAG7G,gCACG;;0EAEI,8OAAC;gEAAI,WAAU;gEAAqB,SAAS,IAAM,kBAAkB;;;;;;0EACrE,8OAAC;gEAAI,WAAU;;kFAEX,8OAAC,uKAAI;wEAAC,MAAK;wEAAa,SAAS,IAAM,kBAAkB;wEAAQ,WAAU;kFAA+G;;;;;;kFAG1L,8OAAC,uKAAI;wEAAC,MAAK;wEAAwB,SAAS,IAAM,kBAAkB;wEAAQ,WAAU;kFAA+G;;;;;;kFAGzM,8OAAC,uKAAI;wEAAC,MAAK;wEAAkB,SAAS,IAAM,kBAAkB;wEAAQ,WAAU;kFAA+G;;;;;;oEAK9L,CAAC,aAAa,oBAAoB,mBAC/B;;0FACI,8OAAC;gFAAI,WAAU;;;;;;0FACf,8OAAC;gFAAI,WAAU;0FAAyE;;;;;;;;oEAI3F,2BACG,8OAAC,uKAAI;wEAAC,MAAK;wEAAgC,SAAS,IAAM,kBAAkB;wEAAQ,WAAU;kFAA+G;;;;;;oEAKhN,sCACG,8OAAC,uKAAI;wEAAC,MAAK;wEAAyB,SAAS,IAAM,kBAAkB;wEAAQ,WAAU;kFAA+G;;;;;;oEAKzM,CAAC,WAAW,gBAAgB,mBACzB,8OAAC,uKAAI;wEAAC,MAAK;wEAAsB,SAAS,IAAM,kBAAkB;wEAAQ,WAAU;kFAA+G;;;;;;oEAKtM,yBACG,8OAAC,uKAAI;wEAAC,MAAK;wEAAS,SAAS,IAAM,kBAAkB;wEAAQ,WAAU;kFAAkH;;;;;;kFAM7L,8OAAC;wEAAI,WAAU;;;;;;kFACf,8OAAC;wEACG,SAAS;4EAAQ,kBAAkB;4EAAQ;wEAAiB;wEAC5D,WAAU;kFACb;;;;;;;;;;;;;;;;;;;;0DAOjB,8OAAC,yIAAW;;;;;0DACZ,8OAAC,oIAAU;;;;;;;;;;;;;;;;qDAInB,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,yIAAW;;;;;kDACZ,8OAAC,uKAAI;wCAAC,MAAK;wCAAU,WAAU;kDAAgH;;;;;;kDAG/I,8OAAC,uKAAI;wCAAC,MAAK;wCAAU,WAAU;kDAAsM;;;;;;;;;;;;;;;;;;kCAUzP,8OAAC;wBACG,WAAU;wBACV,SAAS,IAAM,cAAc,CAAC;kCAE9B,cAAA,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAK,WAAW,CAAC,2DAA2D,EAAE,aAAa,8BAA8B,IAAI;;;;;;8CAC9H,8OAAC;oCAAK,WAAW,CAAC,6CAA6C,EAAE,aAAa,cAAc,IAAI;;;;;;8CAChG,8OAAC;oCAAK,WAAW,CAAC,2DAA2D,EAAE,aAAa,gCAAgC,IAAI;;;;;;;;;;;;;;;;;;;;;;;YAM3I,4BACG,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;8BACV,wBACG;;0CACI,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;kDACV,QAAQ,IAAI,CAAC,KAAK,iBACf,8OAAC,wIAAK;4CACF,KAAK,QAAQ,IAAI,CAAC,KAAK;4CACvB,KAAK,QAAQ,IAAI,CAAC,IAAI,IAAI;4CAC1B,OAAO;4CACP,QAAQ;4CACR,WAAU;4CACV,gBAAe;;;;;mDAGnB,QAAQ,IAAI,CAAC,IAAI,EAAE,OAAO,GAAG;;;;;;kDAGrC,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAE,WAAU;0DAAoC,QAAQ,IAAI,CAAC,IAAI;;;;;;0DAClE,8OAAC;gDAAE,WAAU;0DAA4C,QAAQ,IAAI,CAAC,KAAK;;;;;;;;;;;;kDAE/E,8OAAC,oIAAU;;;;;;;;;;;0CAIf,8OAAC,uKAAI;gCAAC,MAAK;gCAAY,WAAW,CAAC,sBAAsB,EAAE,SAAS,eAAe,oBAAoB,uCAAuC;0CAAE;;;;;;0CAGhJ,8OAAC,uKAAI;gCAAC,MAAK;gCAAY,WAAW,CAAC,sBAAsB,EAAE,SAAS,eAAe,oBAAoB,uCAAuC;0CAAE;;;;;;0CAGhJ,8OAAC,uKAAI;gCAAC,MAAK;gCAAe,WAAW,CAAC,sBAAsB,EAAE,SAAS,kBAAkB,oBAAoB,uCAAuC;0CAAE;;;;;;0CAItJ,8OAAC;gCAAI,WAAU;;;;;;0CAEf,8OAAC,uKAAI;gCAAC,MAAK;gCAAa,WAAU;0CAA4D;;;;;;0CAG9F,8OAAC,uKAAI;gCAAC,MAAK;gCAAwB,WAAU;0CAA4D;;;;;;4BAKxG,yBACG,8OAAC,uKAAI;gCAAC,MAAK;gCAAS,WAAU;0CAA8D;;;;;;4BAI/F,sCACG,8OAAC,uKAAI;gCAAC,MAAK;gCAAyB,WAAU;0CAA4D;;;;;;4BAI7G,2BACG,8OAAC,uKAAI;gCAAC,MAAK;gCAAgC,WAAU;0CAA4D;;;;;;4BAIpH,CAAC,WAAW,gBAAgB,mBACzB,8OAAC,uKAAI;gCAAC,MAAK;gCAAsB,WAAU;0CAA4D;;;;;;0CAK3G,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAO,SAAS;gCAAe,WAAU;0CAAkE;;;;;;;qDAKhH;;0CACI,8OAAC,uKAAI;gCAAC,MAAK;gCAAU,WAAU;0CAAuD;;;;;;0CACtF,8OAAC,uKAAI;gCAAC,MAAK;gCAAU,WAAU;0CAA8D;;;;;;;;;;;;;;;;;;;;;;;;AAQ7H"}}]
}