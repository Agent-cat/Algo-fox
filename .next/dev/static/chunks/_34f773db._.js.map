{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/workspace/WorkspaceClientWrapper.tsx"],"sourcesContent":["\"use client\";\n\nimport dynamic from \"next/dynamic\";\nimport { Problem, ProblemTestCase } from '@prisma/client';\n\n// Define the Props type explicitly to avoid import issues or use 'any' if complex\n// Ideally, we import WorkspaceProps, but let's replicate the structure or import if exported.\n// Copying relevant parts of the interface from Workspace.tsx for safety or importing it.\n// To avoid circular dependency issues if types are in Workspace.tsx, we can try to import just the types,\n// but it's safer to just define the props we need or use any for this wrapper.\n\nconst Workspace = dynamic(() => import(\"./Workspace\"), {\n    ssr: false,\n    loading: () => (\n        <div className=\"min-h-screen bg-white dark:bg-[#0a0a0a] flex items-center justify-center\">\n            <div className=\"text-center\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto\"></div>\n                <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading workspace...</p>\n            </div>\n        </div>\n    )\n});\n\nexport default function WorkspaceClientWrapper(props: any) {\n    return <Workspace {...props} />;\n}\n"],"names":[],"mappings":";;;;;AAEA;;AAFA;;;AAKA,kFAAkF;AAClF,8FAA8F;AAC9F,yFAAyF;AACzF,0GAA0G;AAC1G,+EAA+E;AAE/E,MAAM,YAAY,IAAA,6KAAO,EAAC;;;;;;IACtB,KAAK;IACL,SAAS,kBACL,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;;;;;;;;KAN/D;AAYS,SAAS,uBAAuB,KAAU;IACrD,qBAAO,6LAAC;QAAW,GAAG,KAAK;;;;;;AAC/B;MAFwB"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/actions/submission.action.ts"],"sourcesContent":["\"use server\";\n\nimport { SubmissionService } from \"@/core/services/submission.service\";\nimport { auth } from \"@/lib/auth\";\nimport { headers } from \"next/headers\";\nimport { revalidatePath, updateTag, cacheTag, cacheLife } from \"next/cache\";\n\nexport async function getSubmission(id: string) {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 86400, revalidate: 86400 }); // 24 hours (submissions are immutable generally)\n\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || !session.user) {\n        return null;\n    }\n\n    cacheTag(`submission-${id}`, `user-submissions-${session.user.id}`);\n\n    const submission = await SubmissionService.getSubmissionById(id);\n\n    // Security check: Ensure the submission belongs to the user\n    // OR if we want to allow sharing, we might skip this.\n    // For now, assuming private submissions.\n    if (submission && submission.userId !== session.user.id) {\n        return null; // Or throw Unauthorized\n    }\n\n    return submission;\n}\n\nexport async function getProblemSubmissionsAction(problemId: string, take: number = 20, cursor?: string) {\n    \"use cache: private\"; // Must be at top - allows headers() inside\n    cacheLife({ stale: 60, revalidate: 60 }); // 1 minute default, but we rely on on-demand revalidation ideally\n\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || !session.user) {\n        return [];\n    }\n\n    const userId = session.user.id;\n\n    const tagKey = `problem-submissions-${userId}-${problemId}${cursor ? `-cursor-${cursor}` : \"\"}-take-${take}`;\n    cacheTag(tagKey, `user-submissions-${userId}`, `problem-${problemId}`);\n\n    return SubmissionService.getProblemSubmissions(problemId, userId, take, cursor);\n}\n\nexport async function markConceptAsCompleted(problemId: string) {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n\n    if (!session || !session.user) {\n        throw new Error(\"Unauthorized\");\n    }\n\n    const userId = session.user.id;\n\n    // Use a default language (e.g., JavaScript ID 63) for concept submissions since language doesn't matter\n    const DEFAULT_CONCEPT_LANG_ID = 63;\n\n    try {\n        // Create a submission with ACCEPTED status\n        const submission = await SubmissionService.createSubmission(\n            userId,\n            problemId,\n            DEFAULT_CONCEPT_LANG_ID,\n            \"// CONCEPT COMPLETED\",\n            \"SUBMIT\"\n        );\n\n        // Update status to ACCEPTED\n        await SubmissionService.updateSubmissionStatus(submission.id, \"ACCEPTED\", 0, 0);\n\n        // Increment solved counts (logic in service handles exclusion of user stats for CONCEPT)\n        await SubmissionService.incrementProblemSolved(problemId, userId);\n\n        revalidatePath(\"/problems\");\n        revalidatePath(\"/problems/dsa\");\n        revalidatePath(\"/problems/sql\");\n        updateTag(`problem-${problemId}`);\n        updateTag(`user-submissions-${userId}`);\n        updateTag(`problem-submissions-${userId}-${problemId}`);\n        updateTag('categories-list');\n        updateTag(`categories-DSA-user-${userId}`);\n        updateTag(`categories-SQL-user-${userId}`);\n        updateTag('problems-list');\n        updateTag('problems-search');\n\n        return { success: true };\n    } catch (error) {\n        console.error(\"Failed to mark concept as completed:\", error);\n        return { success: false, error: \"Failed to mark as completed\" };\n    }\n}\n"],"names":[],"mappings":";;;;;;;IAqDsB,yBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/BackButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { ArrowLeft } from \"lucide-react\";\n\ninterface BackButtonProps {\n  href?: string;\n  label?: string;\n  children?: React.ReactNode;\n  className?: string;\n}\n\nexport default function BackButton({\n  href,\n  label = \"Back\",\n  children,\n  className = \"\"\n}: BackButtonProps) {\n  const router = useRouter();\n\n  const handleClick = () => {\n    if (href) {\n      router.push(href);\n    } else {\n      router.back();\n    }\n  };\n\n  return (\n    <button\n      onClick={handleClick}\n      className={`inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-[#1a1a1a] ${className}`}\n    >\n      <ArrowLeft className=\"w-4 h-4\" />\n      {children || label}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAYe,SAAS,WAAW,EACjC,IAAI,EACJ,QAAQ,MAAM,EACd,QAAQ,EACR,YAAY,EAAE,EACE;;IAChB,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,cAAc;QAClB,IAAI,MAAM;YACR,OAAO,IAAI,CAAC;QACd,OAAO;YACL,OAAO,IAAI;QACb;IACF;IAEA,qBACE,6LAAC;QACC,SAAS;QACT,WAAW,CAAC,kNAAkN,EAAE,WAAW;;0BAE3O,6LAAC,gOAAS;gBAAC,WAAU;;;;;;YACpB,YAAY;;;;;;;AAGnB;GAzBwB;;QAMP,kJAAS;;;KANF"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/markdown/SolutionCodeGroup.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, ReactElement, ReactNode } from \"react\";\nimport { Copy, Check, Maximize2, X, Download } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport hljs from \"highlight.js\";\nimport \"highlight.js/styles/github-dark.css\"; // Ensure a dark theme is available, or use a specific one\n\n// Helper to extract text from React children\nconst extractText = (children: ReactNode): string => {\n  if (typeof children === \"string\") return children;\n  if (Array.isArray(children)) return children.map(extractText).join(\"\");\n  if (React.isValidElement(children)) {\n    const props = (children as any).props;\n    if (props && props.children) {\n      return extractText(props.children);\n    }\n  }\n  return \"\";\n};\n\ninterface CodeSnippet {\n  language: string;\n  code: string;\n  element: ReactNode;\n}\n\ninterface SolutionCodeGroupProps {\n  title?: string;\n  children: ReactNode;\n}\n\nconst STORAGE_KEY = \"algofox_solution_lang_pref\";\n\nexport default function SolutionCodeGroup({ title = \"Solution\", children }: SolutionCodeGroupProps) {\n  const [snippets, setSnippets] = useState<CodeSnippet[]>([]);\n  const [activeLang, setActiveLang] = useState<string>(\"\");\n  const [isCopied, setIsCopied] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n\n  // Parse children to extract code blocks and languages\n  useEffect(() => {\n    const validSnippets: CodeSnippet[] = [];\n\n    // React.Children.toArray transforms children to an array for safe iteration\n    React.Children.forEach(children, (child) => {\n      // We expect 'pre' tags containing 'code' tags from markdown\n      if (React.isValidElement(child)) {\n        // Direct code block in pre usually looks like <pre><code className=\"language-xyz\">...</code></pre>\n        const childEl = child as any;\n        if (childEl.type === 'pre' && childEl.props.children) {\n          const codeElement = childEl.props.children as ReactElement;\n          if (React.isValidElement(codeElement) && (codeElement as any).type === 'code') {\n            const codeProps = (codeElement as any).props;\n            const className = codeProps.className || \"\";\n            // Extract language from className \"language-xyz\"\n            const match = /language-(\\w+)/.exec(className);\n            const language = match ? match[1] : \"text\";\n            const code = extractText(codeProps.children);\n\n            validSnippets.push({\n              language,\n              code,\n              element: child // Keep original element for rendering if needed, or we reproduce it\n            });\n          }\n        }\n      }\n    });\n\n    setSnippets(validSnippets);\n\n    // Set initial active language based on localStorage or default to first\n    const savedLang = localStorage.getItem(STORAGE_KEY);\n    if (validSnippets.length > 0) {\n      if (savedLang && validSnippets.some(s => s.language === savedLang)) {\n        setActiveLang(savedLang);\n      } else {\n        setActiveLang(validSnippets[0].language);\n      }\n    }\n  }, [children]);\n\n  const handleLangChange = (lang: string) => {\n    setActiveLang(lang);\n    localStorage.setItem(STORAGE_KEY, lang);\n  };\n\n  const activeSnippet = snippets.find(s => s.language === activeLang) || snippets[0];\n\n  const handleCopy = async () => {\n    if (!activeSnippet) return;\n    try {\n      await navigator.clipboard.writeText(activeSnippet.code);\n      setIsCopied(true);\n      setTimeout(() => setIsCopied(false), 2000);\n    } catch (err) {\n      console.error(\"Failed to copy\", err);\n    }\n  };\n\n  const getLangName = (lang: string) => {\n    const map: Record<string, string> = {\n      cpp: \"C++\",\n      java: \"Java\",\n      python: \"Python\",\n      py: \"Python\",\n      js: \"JavaScript\",\n      javascript: \"JavaScript\",\n      ts: \"TypeScript\",\n      typescript: \"TypeScript\",\n      c: \"C\",\n      cs: \"C#\",\n      csharp: \"C#\",\n      go: \"Go\",\n      rust: \"Rust\",\n      sql: \"SQL\",\n      swift: \"Swift\",\n      kotlin: \"Kotlin\"\n    };\n    return map[lang.toLowerCase()] || lang.toUpperCase();\n  };\n\n  // Syntax highlighting\n  const HighlightedCode = ({ code, language }: { code: string, language: string }) => {\n    // In a real implementation with shiki, we would perform async highlighting.\n    // With highlight.js in client, we can do:\n  const highlighted = hljs.highlightAuto(code, [language]).value;\n\n    return (\n       <code\n         className={`language-${language} bg-transparent !p-0 !m-0 border-none shadow-none font-mono text-sm leading-relaxed`}\n         style={{ backgroundColor: 'transparent' }}\n         dangerouslySetInnerHTML={{ __html: highlighted }}\n       />\n    );\n  };\n\n  if (snippets.length === 0) return null;\n\n  const Container = isFullscreen ? motion.div : \"div\";\n  const containerProps = isFullscreen ? {\n    initial: { opacity: 0, scale: 0.95 },\n    animate: { opacity: 1, scale: 1 },\n    exit: { opacity: 0, scale: 0.95 },\n    className: \"fixed inset-0 z-[100] bg-[#1e1e1e] flex flex-col p-4 md:p-8 overflow-hidden font-sans\"\n  } : {\n    className: \"w-full rounded-xl overflow-hidden bg-[#1e1e1e] border border-gray-800 my-8 shadow-xl font-sans\"\n  };\n\n  return (\n    <AnimatePresence>\n      {/* @ts-ignore - dynamic component handling */}\n      <Container {...containerProps}>\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between bg-[#252526] px-2 border-b border-gray-800\">\n           <div className=\"flex items-center overflow-hidden\">\n              <span className=\"text-gray-400 font-bold text-xs uppercase tracking-wider px-4 py-3 hidden md:block border-r border-gray-800 mr-2\">{title}</span>\n\n              {/* Tabs */}\n              <div className=\"flex items-center gap-1 overflow-x-auto no-scrollbar mask-gradient-right\">\n                {snippets.map((snippet) => (\n                   <button\n                     key={snippet.language}\n                     onClick={() => handleLangChange(snippet.language)}\n                     className={`\n                       relative px-4 py-3 text-xs font-bold uppercase tracking-wider transition-all whitespace-nowrap outline-none\n                       ${activeLang === snippet.language\n                         ? 'text-orange-500 bg-[#1e1e1e]'\n                         : 'text-gray-500 hover:text-gray-300 hover:bg-[#2a2a2b]'}\n                     `}\n                   >\n                     {getLangName(snippet.language)}\n                     {activeLang === snippet.language && (\n                       <motion.div\n                         layoutId={`underline-${title}`}\n                         className=\"absolute top-0 left-0 right-0 h-0.5 bg-orange-500\"\n                       />\n                     )}\n                   </button>\n                ))}\n              </div>\n           </div>\n\n           {/* Actions */}\n           <div className=\"flex items-center gap-1 py-1 pr-2 md:py-0 self-end md:self-auto bg-[#252526] pl-2 shadow-[-10px_0_10px_#252526]\">\n              <button\n                onClick={handleCopy}\n                className=\"p-2 text-gray-500 hover:text-white hover:bg-[#333] rounded-md transition-colors\"\n                title=\"Copy code\"\n              >\n                {isCopied ? <Check className=\"w-4 h-4 text-emerald-500\" /> : <Copy className=\"w-4 h-4\" />}\n              </button>\n\n              <button\n                onClick={() => setIsFullscreen(!isFullscreen)}\n                className=\"p-2 text-gray-500 hover:text-white hover:bg-[#333] rounded-md transition-colors\"\n                title={isFullscreen ? \"Exit Fullscreen\" : \"Fullscreen\"}\n              >\n                {isFullscreen ? <X className=\"w-4 h-4\" /> : <Maximize2 className=\"w-4 h-4\" />}\n              </button>\n           </div>\n        </div>\n\n        {/* Code Area */}\n        <div className={`\n          relative bg-[#1e1e1e] overflow-auto custom-scrollbar group\n          ${isFullscreen ? 'flex-1 p-8' : 'p-6 max-h-[600px]'}\n        `}>\n          <pre className=\"!bg-transparent !p-0 !m-0 !border-0 font-mono text-[13px] md:text-sm leading-7 text-gray-300 font-medium\">\n             <HighlightedCode code={activeSnippet.code} language={activeSnippet.language} />\n          </pre>\n        </div>\n      </Container>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 472, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/lib/markdown-plugins.ts"],"sourcesContent":["import { visit } from 'unist-util-visit';\nimport { Node } from 'unist';\n\n// Type definitions for the tree structure since we are working with unist\ninterface ContentNode extends Node {\n  name?: string;\n  attributes?: Record<string, any>;\n  children?: ContentNode[];\n  data?: {\n    hName?: string;\n    hProperties?: Record<string, any>;\n  };\n  type: string;\n}\n\nexport function remarkSolutionDirective() {\n  return (tree: ContentNode) => {\n    visit(tree, (node) => {\n      if (\n        node.type === 'containerDirective' ||\n        node.type === 'leafDirective' ||\n        node.type === 'textDirective'\n      ) {\n        if (node.name === 'solution') {\n          // Verify we have attributes\n          const data = node.data || (node.data = {});\n          const attributes = node.attributes || {};\n          const title = attributes.title || \"Solution\";\n\n          // Transform this node into a custom 'solution-group' element for React Markdown to pick up\n          // react-markdown will see this as a customized element\n          data.hName = 'solution-group';\n          data.hProperties = {\n            title,\n            ...attributes,\n          };\n        }\n      }\n    });\n  };\n}\n"],"names":[],"mappings":";;;;AAAA;;AAeO,SAAS;IACd,OAAO,CAAC;QACN,IAAA,kLAAK,EAAC,MAAM,CAAC;YACX,IACE,KAAK,IAAI,KAAK,wBACd,KAAK,IAAI,KAAK,mBACd,KAAK,IAAI,KAAK,iBACd;gBACA,IAAI,KAAK,IAAI,KAAK,YAAY;oBAC5B,4BAA4B;oBAC5B,MAAM,OAAO,KAAK,IAAI,IAAI,CAAC,KAAK,IAAI,GAAG,CAAC,CAAC;oBACzC,MAAM,aAAa,KAAK,UAAU,IAAI,CAAC;oBACvC,MAAM,QAAQ,WAAW,KAAK,IAAI;oBAElC,2FAA2F;oBAC3F,uDAAuD;oBACvD,KAAK,KAAK,GAAG;oBACb,KAAK,WAAW,GAAG;wBACjB;wBACA,GAAG,UAAU;oBACf;gBACF;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 506, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/lib/markdown-utils.ts"],"sourcesContent":["\n/**\n * Pre-processes markdown content to normalize directive syntax for remark-directive.\n *\n * Handles cases like:\n * - \"::: solution\" -> \":::solution\" (removes space)\n * - \":::solution title=\"Title\"\" -> \":::solution{title=\"Title\"}\" (wrapping attributes)\n */\nexport function preprocessMarkdown(content: string): string {\n  if (!content) return \"\";\n\n  // Regex to match \"::: solution\" or \":::solution\" with optional attributes following\n  // Capture groups:\n  // 1. The colons and name (:::solution)\n  // 2. The attributes part (title=\"...\", etc.)\n\n  // This regex finds lines starting with \"::: solution\" or \":::solution\"\n  // It effectively collapses \"::: solution\" to \":::solution\"\n  // And it wraps attributes in {} if they aren't already\n\n  const processed = content.replace(/^:::\\s*([a-zA-Z0-9_-]+)(.*)$/gm, (match, name, args) => {\n    const trimmedArgs = args.trim();\n\n    // If no args, just return the directive\n    if (!trimmedArgs) {\n      return `:::${name}`;\n    }\n\n    // If args are already wrapped in {}, return as is (but with normalized name spacing)\n    if (trimmedArgs.startsWith('{') && trimmedArgs.endsWith('}')) {\n      return `:::${name}${trimmedArgs}`;\n    }\n\n    // Otherwise, wrap args in {}\n    return `:::${name}{${trimmedArgs}}`;\n  });\n\n  return processed;\n}\n"],"names":[],"mappings":"AACA;;;;;;CAMC;;;;AACM,SAAS,mBAAmB,OAAe;IAChD,IAAI,CAAC,SAAS,OAAO;IAErB,oFAAoF;IACpF,kBAAkB;IAClB,uCAAuC;IACvC,6CAA6C;IAE7C,uEAAuE;IACvE,2DAA2D;IAC3D,uDAAuD;IAEvD,MAAM,YAAY,QAAQ,OAAO,CAAC,kCAAkC,CAAC,OAAO,MAAM;QAChF,MAAM,cAAc,KAAK,IAAI;QAE7B,wCAAwC;QACxC,IAAI,CAAC,aAAa;YAChB,OAAO,CAAC,GAAG,EAAE,MAAM;QACrB;QAEA,qFAAqF;QACrF,IAAI,YAAY,UAAU,CAAC,QAAQ,YAAY,QAAQ,CAAC,MAAM;YAC5D,OAAO,CAAC,GAAG,EAAE,OAAO,aAAa;QACnC;QAEA,6BAA6B;QAC7B,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,YAAY,CAAC,CAAC;IACrC;IAEA,OAAO;AACT"}},
    {"offset": {"line": 547, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/Algo-fox/components/problems/ConceptViewer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport Markdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport remarkBreaks from 'remark-breaks';\nimport remarkDirective from 'remark-directive';\nimport rehypeRaw from 'rehype-raw';\nimport { Problem } from \"@prisma/client\";\nimport { CheckCircle2, Circle, ArrowLeft } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { markConceptAsCompleted } from \"@/actions/submission.action\";\nimport { useRouter } from \"next/navigation\";\nimport BackButton from \"@/components/BackButton\";\nimport SolutionCodeGroup from \"@/components/markdown/SolutionCodeGroup\";\nimport { remarkSolutionDirective } from \"@/lib/markdown-plugins\";\nimport { preprocessMarkdown } from \"@/lib/markdown-utils\";\n// Removed static highlight.js import to allow custom adaptive styling\n\ninterface ConceptViewerProps {\n    problem: Problem & { tags?: { name: string; slug: string }[] };\n    isSolved: boolean;\n}\n\nexport default function ConceptViewer({ problem, isSolved: initialIsSolved }: ConceptViewerProps) {\n    const [isSolved, setIsSolved] = useState(initialIsSolved);\n    const [isLoading, setIsLoading] = useState(false);\n    const router = useRouter();\n\n    const handleMarkCompleted = async () => {\n        if (isSolved) return;\n        setIsLoading(true);\n        try {\n            const res = await markConceptAsCompleted(problem.id);\n            if (res.success) {\n                setIsSolved(true);\n                toast.success(\"Marked as completed!\");\n                router.refresh();\n            } else {\n                toast.error(res.error || \"Failed to mark as completed\");\n            }\n        } catch (error) {\n            console.error(error);\n            toast.error(\"Something went wrong\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-[#fcfcfd] dark:bg-[#0a0a0a] pt-6 pb-20\">\n            <div className=\"w-full max-w-none px-4 md:px-8\">\n                {/* Back Button */}\n                <div className=\"mb-4\">\n                    <BackButton />\n                </div>\n\n                {/* Main Content Card */}\n                <div className=\"bg-white dark:bg-[#141414] rounded-xl border border-gray-200 dark:border-[#262626] shadow-sm overflow-hidden\">\n                    {/* Header */}\n                    <div className=\"px-6 py-6 border-b border-gray-100 dark:border-[#262626] bg-white dark:bg-[#141414]\">\n                        <div className=\"flex flex-col gap-3\">\n                            <div className=\"flex items-center gap-3\">\n                                <span className=\"text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-widest\">\n                                    Concept\n                                </span>\n                                {problem.tags && problem.tags.length > 0 && (\n                                    <div className=\"flex items-center gap-2\">\n                                        <div className=\"w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-700\" />\n                                        {problem.tags.map(tag => (\n                                            <span key={tag.slug} className=\"text-xs font-medium text-gray-500 dark:text-gray-400\">\n                                                {tag.name}\n                                            </span>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                            <h1 className=\"text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100 leading-tight\">\n                                {problem.title}\n                            </h1>\n                        </div>\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"px-6 py-6 md:px-10 md:py-8\">\n                        <article className=\"prose max-w-none prose-slate dark:prose-invert\n                            prose-headings:font-bold prose-headings:tracking-tight prose-headings:text-gray-900 dark:prose-headings:text-gray-100\n                            prose-p:text-gray-700 dark:prose-p:text-gray-300 prose-p:leading-7\n                            prose-li:text-gray-700 dark:prose-li:text-gray-300\n                            prose-strong:text-gray-900 dark:prose-strong:text-white prose-strong:font-bold\n                            prose-code:text-orange-600 dark:prose-code:text-orange-400 prose-code:bg-orange-50 dark:prose-code:bg-orange-950/30 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:font-mono prose-code:font-medium prose-code:before:content-none prose-code:after:content-none\n                            prose-pre:bg-white dark:prose-pre:bg-[#0a0a0a] prose-pre:p-0 prose-pre:m-0 prose-pre:border-none prose-pre:shadow-none prose-pre:rounded-lg prose-pre:my-6\n                            prose-img:rounded-lg prose-img:border prose-img:border-gray-100 dark:prose-img:border-[#262626] prose-img:my-6\n                            prose-blockquote:border-l-2 prose-blockquote:border-orange-500 prose-blockquote:bg-gray-50 dark:prose-blockquote:bg-[#1a1a1a] prose-blockquote:px-6 prose-blockquote:py-4 prose-blockquote:text-gray-700 dark:prose-blockquote:text-gray-300 prose-blockquote:not-italic prose-blockquote:my-6\">\n                            <Markdown\n                                remarkPlugins={[\n                                    remarkGfm,\n                                    remarkBreaks,\n                                    remarkDirective,\n                                    remarkSolutionDirective\n                                ]}\n                                rehypePlugins={[rehypeRaw]}\n                                components={{\n                                  // @ts-ignore - custom element\n                                  'solution-group': SolutionCodeGroup,\n                                  // Override pre/code if we want custom styling for standalone blocks too,\n                                  // but SolutionCodeGroup handles its own children.\n                                  // If the user uses standard code blocks outside solution block, we might want a similar style.\n                                }}\n                            >\n                                {preprocessMarkdown(problem.description)}\n                            </Markdown>\n                        </article>\n                    </div>\n\n                    {/* Footer Action */}\n                    <div className=\"px-8 py-6 bg-gray-50/50 dark:bg-[#1a1a1a]/50 border-t border-gray-100 dark:border-[#262626] flex items-center justify-between\">\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400 font-medium\">\n                            {isSolved ? \"You have completed this concept.\" : \"Read through the material?\"}\n                        </div>\n                        <button\n                            onClick={handleMarkCompleted}\n                            disabled={isSolved || isLoading}\n                            className={`\n                                flex items-center gap-2 px-6 py-2.5 rounded-xl text-sm font-bold shadow-sm transition-all transform active:scale-95\n                                ${isSolved\n                                    ? \"bg-green-100 dark:bg-green-500/10 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-500/30 cursor-default\"\n                                    : \"bg-gray-900 dark:bg-white text-white dark:text-black hover:bg-gray-800 dark:hover:bg-gray-100 hover:shadow-md\"\n                                }\n                            `}\n                        >\n                            {isLoading ? (\n                                <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n                            ) : isSolved ? (\n                                <CheckCircle2 className=\"w-4 h-4\" />\n                            ) : (\n                                <Circle className=\"w-4 h-4\" />\n                            )}\n                            {isSolved ? \"Completed\" : \"Mark as Completed\"}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAhBA;;;;;;;;;;;;;;;AAwBe,SAAS,cAAc,EAAE,OAAO,EAAE,UAAU,eAAe,EAAsB;;IAC5F,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,sBAAsB;QACxB,IAAI,UAAU;QACd,aAAa;QACb,IAAI;YACA,MAAM,MAAM,MAAM,IAAA,4KAAsB,EAAC,QAAQ,EAAE;YACnD,IAAI,IAAI,OAAO,EAAE;gBACb,YAAY;gBACZ,oJAAK,CAAC,OAAO,CAAC;gBACd,OAAO,OAAO;YAClB,OAAO;gBACH,oJAAK,CAAC,KAAK,CAAC,IAAI,KAAK,IAAI;YAC7B;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC;YACd,oJAAK,CAAC,KAAK,CAAC;QAChB,SAAU;YACN,aAAa;QACjB;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC,uIAAU;;;;;;;;;;8BAIf,6LAAC;oBAAI,WAAU;;sCAEX,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAK,WAAU;0DAAmF;;;;;;4CAGlG,QAAQ,IAAI,IAAI,QAAQ,IAAI,CAAC,MAAM,GAAG,mBACnC,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAI,WAAU;;;;;;oDACd,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAA,oBACd,6LAAC;4DAAoB,WAAU;sEAC1B,IAAI,IAAI;2DADF,IAAI,IAAI;;;;;;;;;;;;;;;;;kDAOnC,6LAAC;wCAAG,WAAU;kDACT,QAAQ,KAAK;;;;;;;;;;;;;;;;;sCAM1B,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAQ,WAAU;0CASf,cAAA,6LAAC,sMAAQ;oCACL,eAAe;wCACX,2JAAS;wCACT,8JAAY;wCACZ,iKAAe;wCACf,wJAAuB;qCAC1B;oCACD,eAAe;wCAAC,2JAAS;qCAAC;oCAC1B,YAAY;wCACV,8BAA8B;wCAC9B,kBAAkB,0JAAiB;oCAIrC;8CAEC,IAAA,iJAAkB,EAAC,QAAQ,WAAW;;;;;;;;;;;;;;;;sCAMnD,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;8CACV,WAAW,qCAAqC;;;;;;8CAErD,6LAAC;oCACG,SAAS;oCACT,UAAU,YAAY;oCACtB,WAAW,CAAC;;gCAER,EAAE,WACI,yIACA,gHACL;4BACL,CAAC;;wCAEA,0BACG,6LAAC;4CAAI,WAAU;;;;;mDACf,yBACA,6LAAC,wOAAY;4CAAC,WAAU;;;;;iEAExB,6LAAC,mNAAM;4CAAC,WAAU;;;;;;wCAErB,WAAW,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtD;GAzHwB;;QAGL,kJAAS;;;KAHJ"}}]
}