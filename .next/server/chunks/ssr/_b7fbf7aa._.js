module.exports=[606835,454989,576472,63910,39758,584082,92727,289822,509634,972328,513730,36447,367191,604924,83607,709633,149646,191511,696722,192702,769417,298109,500694,699685,230739,a=>{"use strict";let b,c,d,e=(0,a.i(260711).trackDynamicImport)(import("node:async_hooks")).then(a=>a.AsyncLocalStorage).catch(a=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),a});async function f(){let a=await e;if(null!==a)return a;throw Error("getAsyncLocalStorage is only available in server code")}let g=null,h=async()=>(g||(g=new(await f())),g);async function i(){return h()}async function j(){let a=(await h()).getStore();if(!a)throw Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return a}async function k(a,b){return(await h()).run(a,b)}let l=null,m=async()=>(l||(l=new(await f())),l);async function n(){return m()}async function o(){return void 0!==(await m()).getStore()}async function p(){let a=(await m()).getStore();if(!a)throw Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return a}async function q(a,b){return(await m()).run(a,b)}function r(a){let b=Object.freeze({});return{get ref(){return b},async get(){let c=await p();if(!c.has(b)){let d=await a();return c.set(b,d),d}return c.get(b)},async set(a){(await p()).set(b,a)}}}let s=null,t=async()=>(s||(s=new(await f())),s),u=async()=>t(),v=async a=>t().then(b=>b.getStore()||a).catch(()=>a),w=async(a,b)=>t().then(c=>c.run(a,b)).catch(a=>{throw a}),x=async(a,b)=>t().then(c=>a.transaction(async a=>c.run(a,b))).catch(a=>{throw a});a.s(["a",()=>r,"c",()=>o,"d",()=>i,"f",()=>k,"i",()=>x,"l",()=>q,"n",()=>u,"o",()=>p,"r",()=>w,"s",()=>n,"t",()=>v,"u",()=>j],454989),a.s([],576472);let{get:y,set:z}=r(()=>null);a.s(["getOAuthState",()=>y,"setOAuthState",()=>z],606835);let A=(0,a.i(285078).createRandomStringGenerator)("a-z","0-9","A-Z","-_");function B(a,b){"string"==typeof a&&(a=new TextEncoder().encode(a)),"string"==typeof b&&(b=new TextEncoder().encode(b));let c=new Uint8Array(a),d=new Uint8Array(b),e=c.length^d.length,f=Math.max(c.length,d.length);for(let a=0;a<f;a++)e|=(a<c.length?c[a]:0)^(a<d.length?d[a]:0);return 0===e}function C(a,b=""){if(!Number.isSafeInteger(a)||a<0){let c=b&&`"${b}" `;throw Error(`${c}expected integer >= 0, got ${a}`)}}function D(a,b,c=""){let d=a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name,e=a?.length,f=void 0!==b;if(!d||f&&e!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(f?` of length ${b}`:"")+", got "+(d?`length=${e}`:`type=${typeof a}`));return a}function E(a){if("function"!=typeof a||"function"!=typeof a.create)throw Error("Hash must wrapped by utils.createHasher");C(a.outputLen),C(a.blockLen)}function F(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function G(a,b){D(a,void 0,"digestInto() output");let c=b.outputLen;if(a.length<c)throw Error('"digestInto() output" expected to be of length >='+c)}function H(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}function I(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}function J(a){return new DataView(a.buffer,a.byteOffset,a.byteLength)}function K(a,b){return a<<32-b|a>>>b}function L(a,b){return a<<b|a>>>32-b>>>0}a.s(["generateRandomString",()=>A],63910),a.s(["constantTimeEqual",()=>B],39758);let M=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?a=>a:function(a){for(let c=0;c<a.length;c++){var b;a[c]=(b=a[c])<<24&0xff000000|b<<8&0xff0000|b>>>8&65280|b>>>24&255}return a},N="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex;function O(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:void 0}function P(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(N)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=O(a.charCodeAt(e)),f=O(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}let Q=async()=>{};async function R(a,b,c){let d=Date.now();for(let e=0;e<a;e++){c(e);let a=Date.now()-d;a>=0&&a<b||(await Q(),d+=a)}}function S(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}function T(a,b=""){return"string"==typeof a?S(a):D(a,void 0,b)}function U(a,b){if(void 0!==b&&"[object Object]"!==({}).toString.call(b))throw Error("options must be object or undefined");return Object.assign(a,b)}function V(a,b={}){let c=(b,c)=>a(c).update(b).digest(),d=a(void 0);return c.outputLen=d.outputLen,c.blockLen=d.blockLen,c.create=b=>a(b),Object.assign(c,b),Object.freeze(c)}let W=a=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,a])});a.s(["abytes",()=>D,"aexists",()=>F,"ahash",()=>E,"anumber",()=>C,"aoutput",()=>G,"asyncLoop",()=>R,"checkOpts",()=>U,"clean",()=>I,"createHasher",()=>V,"createView",()=>J,"hexToBytes",()=>P,"kdfInputToBytes",()=>T,"oidNist",0,W,"rotl",()=>L,"rotr",()=>K,"swap32IfBE",0,M,"u32",()=>H,"utf8ToBytes",()=>S],584082);class X{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(a,b){if(E(a),D(b,void 0,"key"),this.iHash=a.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,d=new Uint8Array(c);d.set(b.length>c?a.create().update(b).digest():b);for(let a=0;a<d.length;a++)d[a]^=54;this.iHash.update(d),this.oHash=a.create();for(let a=0;a<d.length;a++)d[a]^=106;this.oHash.update(d),I(d)}update(a){return F(this),this.iHash.update(a),this}digestInto(a){F(this),D(a,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){let a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||=Object.create(Object.getPrototypeOf(this),{});let{oHash:b,iHash:c,finished:d,destroyed:e,blockLen:f,outputLen:g}=this;return a.finished=d,a.destroyed=e,a.blockLen=f,a.outputLen=g,a.oHash=b._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let Y=(a,b,c)=>new X(a,b).update(c).digest();Y.create=(a,b)=>new X(a,b);let Z=Uint8Array.of(0),$=Uint8Array.of(),_=(a,b,c,d,e)=>{var f;return function(a,b,c,d=32){E(a),C(d,"length");let e=a.outputLen;if(d>255*e)throw Error("Length must be <= 255*HashLen");let f=Math.ceil(d/e);void 0===c?c=$:D(c,void 0,"info");let g=new Uint8Array(f*e),h=Y.create(a,b),i=h._cloneInto(),j=new Uint8Array(h.outputLen);for(let a=0;a<f;a++)Z[0]=a+1,i.update(0===a?$:j).update(c).update(Z).digestInto(j),g.set(j,e*a),h._cloneInto(i);return h.destroy(),i.destroy(),I(j,Z),g.slice(0,d)}(a,(f=c,E(a),void 0===f&&(f=new Uint8Array(a.outputLen)),Y(a,f,b)),d,e)};class aa{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(a,b,c,d){this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=d,this.buffer=new Uint8Array(a),this.view=J(this.buffer)}update(a){F(this),D(a);let{view:b,buffer:c,blockLen:d}=this,e=a.length;for(let f=0;f<e;){let g=Math.min(d-this.pos,e-f);if(g===d){let b=J(a);for(;d<=e-f;f+=d)this.process(b,f);continue}c.set(a.subarray(f,f+g),this.pos),this.pos+=g,f+=g,this.pos===d&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){F(this),G(a,this),this.finished=!0;let{buffer:b,view:c,blockLen:d,isLE:e}=this,{pos:f}=this;b[f++]=128,I(this.buffer.subarray(f)),this.padOffset>d-f&&(this.process(c,0),f=0);for(let a=f;a<d;a++)b[a]=0;c.setBigUint64(d-8,BigInt(8*this.length),e),this.process(c,0);let g=J(a),h=this.outputLen;if(h%4)throw Error("_sha2: outputLen must be aligned to 32bit");let i=h/4,j=this.get();if(i>j.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<i;a++)g.setUint32(4*a,j[a],e)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){(a||=new this.constructor).set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.destroyed=f,a.finished=e,a.length=d,a.pos=g,d%b&&a.buffer.set(c),a}clone(){return this._cloneInto()}}let ab=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),ac=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),ad=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),ae=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),af=BigInt(0x100000000-1),ag=BigInt(32);function ah(a,b=!1){let c=a.length,d=new Uint32Array(c),e=new Uint32Array(c);for(let f=0;f<c;f++){let{h:c,l:g}=function(a,b=!1){return b?{h:Number(a&af),l:Number(a>>ag&af)}:{h:0|Number(a>>ag&af),l:0|Number(a&af)}}(a[f],b);[d[f],e[f]]=[c,g]}return[d,e]}let ai=(a,b,c)=>a>>>c,aj=(a,b,c)=>a<<32-c|b>>>c,ak=(a,b,c)=>a>>>c|b<<32-c,al=(a,b,c)=>a<<32-c|b>>>c,am=(a,b,c)=>a<<64-c|b>>>c-32,an=(a,b,c)=>a>>>c-32|b<<64-c,ao=(a,b,c)=>a<<c|b>>>32-c,ap=(a,b,c)=>b<<c|a>>>32-c,aq=(a,b,c)=>b<<c-32|a>>>64-c,ar=(a,b,c)=>a<<c-32|b>>>64-c;function as(a,b,c,d){let e=(b>>>0)+(d>>>0);return{h:a+c+(e/0x100000000|0)|0,l:0|e}}let at=(a,b,c)=>(a>>>0)+(b>>>0)+(c>>>0),au=(a,b,c,d)=>b+c+d+(a/0x100000000|0)|0,av=(a,b,c,d)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0),aw=(a,b,c,d,e)=>b+c+d+e+(a/0x100000000|0)|0,ax=(a,b,c,d,e)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0)+(e>>>0),ay=(a,b,c,d,e,f)=>b+c+d+e+f+(a/0x100000000|0)|0;a.s(["add",()=>as,"add3H",()=>au,"add3L",()=>at,"add4H",()=>aw,"add4L",()=>av,"add5H",()=>ay,"add5L",()=>ax,"rotlBH",()=>aq,"rotlBL",()=>ar,"rotlSH",()=>ao,"rotlSL",()=>ap,"rotrBH",()=>am,"rotrBL",()=>an,"rotrSH",()=>ak,"rotrSL",()=>al,"shrSH",()=>ai,"shrSL",()=>aj,"split",()=>ah],92727);let az=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),aA=new Uint32Array(64);class aB extends aa{constructor(a){super(64,a,8,!1)}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)aA[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=aA[a-15],c=aA[a-2],d=K(b,7)^K(b,18)^b>>>3,e=K(c,17)^K(c,19)^c>>>10;aA[a]=e+aA[a-7]+d+aA[a-16]|0}let{A:c,B:d,C:e,D:f,E:g,F:h,G:i,H:j}=this;for(let a=0;a<64;a++){var k,l,m,n;let b=j+(K(g,6)^K(g,11)^K(g,25))+((k=g)&h^~k&i)+az[a]+aA[a]|0,o=(K(c,2)^K(c,13)^K(c,22))+((l=c)&(m=d)^l&(n=e)^m&n)|0;j=i,i=h,h=g,g=f+b|0,f=e,e=d,d=c,c=b+o|0}c=c+this.A|0,d=d+this.B|0,e=e+this.C|0,f=f+this.D|0,g=g+this.E|0,h=h+this.F|0,i=i+this.G|0,j=j+this.H|0,this.set(c,d,e,f,g,h,i,j)}roundClean(){I(aA)}destroy(){this.set(0,0,0,0,0,0,0,0),I(this.buffer)}}class aC extends aB{A=0|ab[0];B=0|ab[1];C=0|ab[2];D=0|ab[3];E=0|ab[4];F=0|ab[5];G=0|ab[6];H=0|ab[7];constructor(){super(32)}}let aD=ah(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(a=>BigInt(a))),aE=aD[0],aF=aD[1],aG=new Uint32Array(80),aH=new Uint32Array(80);let aI=V(()=>new aC,W(1)),aJ=new TextEncoder,aK=new TextDecoder;function aL(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}function aM(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function aN(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return aM(c,b,0),aM(c,a%0x100000000,4),c}function aO(a){let b=new Uint8Array(4);return aM(b,a),b}function aP(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);if(d>127)throw TypeError("non-ASCII string encountered in encode()");b[c]=d}return b}function aQ(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof a?a:aK.decode(a),{alphabet:"base64url"});let b=a;b instanceof Uint8Array&&(b=aK.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/");try{var c=b;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let a=atob(c),d=new Uint8Array(a.length);for(let b=0;b<a.length;b++)d[b]=a.charCodeAt(b);return d}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function aR(a){let b=a;return("string"==typeof b&&(b=aJ.encode(b)),Uint8Array.prototype.toBase64)?b.toBase64({alphabet:"base64url",omitPadding:!0}):(function(a){if(Uint8Array.prototype.toBase64)return a.toBase64();let b=[];for(let c=0;c<a.length;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join(""))})(b).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}a.s(["concat",()=>aL,"decoder",0,aK,"encode",()=>aP,"encoder",0,aJ,"uint32be",()=>aO,"uint64be",()=>aN],289822),a.s(["decode",()=>aQ,"encode",()=>aR],509634);let aS=Symbol();class aT extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class aU extends aT{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class aV extends aT{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class aW extends aT{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class aX extends aT{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class aY extends aT{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(a="decryption operation failed",b){super(a,b)}}class aZ extends aT{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class a$ extends aT{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class a_ extends aT{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class a0 extends aT{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class a1 extends aT{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class a2 extends aT{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(a="no applicable key found in the JSON Web Key Set",b){super(a,b)}}class a3 extends aT{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}class a4 extends aT{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(a="request timed out",b){super(a,b)}}class a5 extends aT{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(a="signature verification failed",b){super(a,b)}}function a6(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new aX(`Unsupported JWE Algorithm: ${a}`)}}function a7(a,b){if(b.length<<3!==a6(a))throw new aZ("Invalid Initialization Vector length")}function a8(a,b){let c=a.byteLength<<3;if(c!==b)throw new aZ(`Invalid Content Encryption Key length. Expected ${b} bits, got ${c} bits`)}a.s(["JOSEAlgNotAllowed",()=>aW,"JOSEError",()=>aT,"JOSENotSupported",()=>aX,"JWEDecryptionFailed",()=>aY,"JWEInvalid",()=>aZ,"JWKInvalid",()=>a0,"JWKSInvalid",()=>a1,"JWKSMultipleMatchingKeys",()=>a3,"JWKSNoMatchingKey",()=>a2,"JWKSTimeout",()=>a4,"JWSInvalid",()=>a$,"JWSSignatureVerificationFailed",()=>a5,"JWTClaimValidationFailed",()=>aU,"JWTExpired",()=>aV,"JWTInvalid",()=>a_],972328);let a9=(a,b="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`);function ba(a){return parseInt(a.name.slice(4),10)}function bb(a,b){if(b&&!a.usages.includes(b))throw TypeError(`CryptoKey does not support this operation, its usages must include ${b}.`)}function bc(a,b,c){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if("AES-GCM"!==a.algorithm.name)throw a9("AES-GCM");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw a9(c,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if("AES-KW"!==a.algorithm.name)throw a9("AES-KW");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw a9(c,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":break;default:throw a9("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if("PBKDF2"!==a.algorithm.name)throw a9("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if("RSA-OAEP"!==a.algorithm.name)throw a9("RSA-OAEP");let c=parseInt(b.slice(9),10)||1;if(ba(a.algorithm.hash)!==c)throw a9(`SHA-${c}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}bb(a,c)}function bd(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let be=(a,...b)=>bd("Key must be ",a,...b),bf=(a,b,...c)=>bd(`Key for the ${a} algorithm must be `,b,...c);function bg(a){if(!bh(a))throw Error("CryptoKey instance expected")}let bh=a=>{if(a?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return a instanceof CryptoKey}catch{return!1}},bi=a=>a?.[Symbol.toStringTag]==="KeyObject",bj=a=>bh(a)||bi(a);async function bk(a,b,c,d,e){if(!(c instanceof Uint8Array))throw TypeError(be(c,"Uint8Array"));let f=parseInt(a.slice(1,4),10),g=await crypto.subtle.importKey("raw",c.subarray(f>>3),"AES-CBC",!1,["encrypt"]),h=await crypto.subtle.importKey("raw",c.subarray(0,f>>3),{hash:`SHA-${f<<1}`,name:"HMAC"},!1,["sign"]),i=new Uint8Array(await crypto.subtle.encrypt({iv:d,name:"AES-CBC"},g,b)),j=aL(e,d,i,aN(e.length<<3));return{ciphertext:i,tag:new Uint8Array((await crypto.subtle.sign("HMAC",h,j)).slice(0,f>>3)),iv:d}}async function bl(a,b,c,d,e){let f;c instanceof Uint8Array?f=await crypto.subtle.importKey("raw",c,"AES-GCM",!1,["encrypt"]):(bc(c,a,"encrypt"),f=c);let g=new Uint8Array(await crypto.subtle.encrypt({additionalData:e,iv:d,name:"AES-GCM",tagLength:128},f,b)),h=g.slice(-16);return{ciphertext:g.slice(0,-16),tag:h,iv:d}}async function bm(a,b,c,d,e){if(!bh(c)&&!(c instanceof Uint8Array))throw TypeError(be(c,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(d)a7(a,d);else d=crypto.getRandomValues(new Uint8Array(a6(a)>>3));switch(a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return c instanceof Uint8Array&&a8(c,parseInt(a.slice(-3),10)),bk(a,b,c,d,e);case"A128GCM":case"A192GCM":case"A256GCM":return c instanceof Uint8Array&&a8(c,parseInt(a.slice(1,4),10)),bl(a,b,c,d,e);default:throw new aX("Unsupported JWE Content Encryption Algorithm")}}function bn(a,b){if(a.algorithm.length!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function bo(a,b,c){return a instanceof Uint8Array?crypto.subtle.importKey("raw",a,"AES-KW",!0,[c]):(bc(a,b,c),a)}async function bp(a,b,c){let d=await bo(b,a,"wrapKey");bn(d,a);let e=await crypto.subtle.importKey("raw",c,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",e,d,"AES-KW"))}async function bq(a,b,c){let d=await bo(b,a,"unwrapKey");bn(d,a);let e=await crypto.subtle.unwrapKey("raw",c,d,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",e))}async function br(a,b){let c=`SHA-${a.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(c,b))}function bs(a){return aL(aO(a.length),a)}async function bt(a,b,c){let d=b>>3,e=Math.ceil(d/32),f=new Uint8Array(32*e);for(let b=1;b<=e;b++){let d=new Uint8Array(4+a.length+c.length);d.set(aO(b),0),d.set(a,4),d.set(c,4+a.length);let e=await br("sha256",d);f.set(e,(b-1)*32)}return f.slice(0,d)}async function bu(a,b,c,d,e=new Uint8Array,f=new Uint8Array){var g;bc(a,"ECDH"),bc(b,"ECDH","deriveBits");let h=aL(bs(aP(c)),bs(e),bs(f),aO(d),new Uint8Array);return bt(new Uint8Array(await crypto.subtle.deriveBits({name:a.algorithm.name,public:a},b,"X25519"===(g=a).algorithm.name?256:Math.ceil(parseInt(g.algorithm.namedCurve.slice(-3),10)/8)<<3)),d,h)}function bv(a){switch(a.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===a.algorithm.name}}async function bw(a,b,c,d){if(!(a instanceof Uint8Array)||a.length<8)throw new aZ("PBES2 Salt Input must be 8 or more octets");let e=aL(aP(b),Uint8Array.of(0),a),f=parseInt(b.slice(13,16),10),g={hash:`SHA-${b.slice(8,11)}`,iterations:c,name:"PBKDF2",salt:e},h=await (d instanceof Uint8Array?crypto.subtle.importKey("raw",d,"PBKDF2",!1,["deriveBits"]):(bc(d,b,"deriveBits"),d));return new Uint8Array(await crypto.subtle.deriveBits(g,h,f))}async function bx(a,b,c,d=2048,e=crypto.getRandomValues(new Uint8Array(16))){let f=await bw(e,a,d,b);return{encryptedKey:await bp(a.slice(-6),f,c),p2c:d,p2s:aR(e)}}async function by(a,b,c,d,e){let f=await bw(e,a,d,b);return bq(a.slice(-6),f,c)}function bz(a,b){if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}}let bA=a=>{switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new aX(`alg ${a} is not supported either by JOSE or your javascript runtime`)}};async function bB(a,b,c){return bc(b,a,"encrypt"),bz(a,b),new Uint8Array(await crypto.subtle.encrypt(bA(a),b,c))}async function bC(a,b,c){return bc(b,a,"decrypt"),bz(a,b),new Uint8Array(await crypto.subtle.decrypt(bA(a),b,c))}function bD(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}a.s(["isObject",()=>bD],513730);let bE=a=>bD(a)&&"string"==typeof a.kty;async function bF(a){if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:b,keyUsages:c}=function(a){let b,c;switch(a.kty){case"AKP":switch(a.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":b={name:a.alg},c=a.priv?["sign"]:["verify"];break;default:throw new aX('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new aX('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new aX('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"Ed25519":case"EdDSA":b={name:"Ed25519"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new aX('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new aX('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),d={...a};return"AKP"!==d.kty&&delete d.alg,delete d.use,crypto.subtle.importKey("jwk",d,b,a.ext??(!a.d&&!a.priv),a.key_ops??c)}let bG=async(a,c,d,e=!1)=>{let f=(b||=new WeakMap).get(a);if(f?.[d])return f[d];let g=await bF({...c,alg:d});return e&&Object.freeze(a),f?f[d]=g:b.set(a,{[d]:g}),g};async function bH(a,c){if(a instanceof Uint8Array||bh(a))return a;if(bi(a)){if("secret"===a.type)return a.export();if("toCryptoKey"in a&&"function"==typeof a.toCryptoKey)try{return((a,c)=>{let d,e=(b||=new WeakMap).get(a);if(e?.[c])return e[c];let f="public"===a.type,g=!!f;if("x25519"===a.asymmetricKeyType){switch(c){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}d=a.toCryptoKey(a.asymmetricKeyType,g,f?[]:["deriveBits"])}if("ed25519"===a.asymmetricKeyType){if("EdDSA"!==c&&"Ed25519"!==c)throw TypeError("given KeyObject instance cannot be used for this algorithm");d=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}switch(a.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(c!==a.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");d=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}if("rsa"===a.asymmetricKeyType){let b;switch(c){case"RSA-OAEP":b="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":b="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":b="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":b="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(c.startsWith("RSA-OAEP"))return a.toCryptoKey({name:"RSA-OAEP",hash:b},g,f?["encrypt"]:["decrypt"]);d=a.toCryptoKey({name:c.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:b},g,[f?"verify":"sign"])}if("ec"===a.asymmetricKeyType){let b=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(a.asymmetricKeyDetails?.namedCurve);if(!b)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===c&&"P-256"===b&&(d=a.toCryptoKey({name:"ECDSA",namedCurve:b},g,[f?"verify":"sign"])),"ES384"===c&&"P-384"===b&&(d=a.toCryptoKey({name:"ECDSA",namedCurve:b},g,[f?"verify":"sign"])),"ES512"===c&&"P-521"===b&&(d=a.toCryptoKey({name:"ECDSA",namedCurve:b},g,[f?"verify":"sign"])),c.startsWith("ECDH-ES")&&(d=a.toCryptoKey({name:"ECDH",namedCurve:b},g,f?[]:["deriveBits"]))}if(!d)throw TypeError("given KeyObject instance cannot be used for this algorithm");return e?e[c]=d:b.set(a,{[c]:d}),d})(a,c)}catch(a){if(a instanceof TypeError)throw a}let d=a.export({format:"jwk"});return bG(a,d,c)}if(bE(a))return a.k?aQ(a.k):bG(a,a,c,!0);throw Error("unreachable")}function bI(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new aX(`Unsupported JWE Algorithm: ${a}`)}}let bJ=a=>crypto.getRandomValues(new Uint8Array(bI(a)>>3));async function bK(a){if(bi(a))if("secret"!==a.type)return a.export({format:"jwk"});else a=a.export();if(a instanceof Uint8Array)return{kty:"oct",k:aR(a)};if(!bh(a))throw TypeError(be(a,"CryptoKey","KeyObject","Uint8Array"));if(!a.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:b,key_ops:c,alg:d,use:e,...f}=await crypto.subtle.exportKey("jwk",a);return"AKP"===f.kty&&(f.alg=d),f}async function bL(a){return bK(a)}async function bM(a,b){if(!(a instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let c={name:"HMAC",hash:"SHA-256"},d=await crypto.subtle.generateKey(c,!1,["sign"]),e=new Uint8Array(await crypto.subtle.sign(c,d,a)),f=new Uint8Array(await crypto.subtle.sign(c,d,b)),g=0,h=-1;for(;++h<32;)g|=e[h]^f[h];return 0===g}async function bN(a,b,c,d,e,f){let g,h;if(!(b instanceof Uint8Array))throw TypeError(be(b,"Uint8Array"));let i=parseInt(a.slice(1,4),10),j=await crypto.subtle.importKey("raw",b.subarray(i>>3),"AES-CBC",!1,["decrypt"]),k=await crypto.subtle.importKey("raw",b.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),l=aL(f,d,c,aN(f.length<<3)),m=new Uint8Array((await crypto.subtle.sign("HMAC",k,l)).slice(0,i>>3));try{g=await bM(e,m)}catch{}if(!g)throw new aY;try{h=new Uint8Array(await crypto.subtle.decrypt({iv:d,name:"AES-CBC"},j,c))}catch{}if(!h)throw new aY;return h}async function bO(a,b,c,d,e,f){let g;b instanceof Uint8Array?g=await crypto.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]):(bc(b,a,"decrypt"),g=b);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:f,iv:d,name:"AES-GCM",tagLength:128},g,aL(c,e)))}catch{throw new aY}}async function bP(a,b,c,d,e,f){if(!bh(b)&&!(b instanceof Uint8Array))throw TypeError(be(b,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!d)throw new aZ("JWE Initialization Vector missing");if(!e)throw new aZ("JWE Authentication Tag missing");switch(a7(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return b instanceof Uint8Array&&a8(b,parseInt(a.slice(-3),10)),bN(a,b,c,d,e,f);case"A128GCM":case"A192GCM":case"A256GCM":return b instanceof Uint8Array&&a8(b,parseInt(a.slice(1,4),10)),bO(a,b,c,d,e,f);default:throw new aX("Unsupported JWE Content Encryption Algorithm")}}async function bQ(a,b,c,d){let e=a.slice(0,7),f=await bm(e,c,b,d,new Uint8Array);return{encryptedKey:f.ciphertext,iv:aR(f.iv),tag:aR(f.tag)}}async function bR(a,b,c,d,e){return bP(a.slice(0,7),b,c,d,e,new Uint8Array)}async function bS(a,b,c,d,e={}){let f,g,h;switch(a){case"dir":h=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i;if(bg(c),!bv(c))throw new aX("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:j,apv:k}=e;i=e.epk?await bH(e.epk,a):(await crypto.subtle.generateKey(c.algorithm,!0,["deriveBits"])).privateKey;let{x:l,y:m,crv:n,kty:o}=await bL(i),p=await bu(c,i,"ECDH-ES"===a?b:a,"ECDH-ES"===a?bI(b):parseInt(a.slice(-5,-2),10),j,k);if(g={epk:{x:l,crv:n,kty:o}},"EC"===o&&(g.epk.y=m),j&&(g.apu=aR(j)),k&&(g.apv=aR(k)),"ECDH-ES"===a){h=p;break}h=d||bJ(b);let q=a.slice(-6);f=await bp(q,p,h);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h=d||bJ(b),bg(c),f=await bB(a,c,h);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{h=d||bJ(b);let{p2c:i,p2s:j}=e;({encryptedKey:f,...g}=await bx(a,c,h,i,j));break}case"A128KW":case"A192KW":case"A256KW":h=d||bJ(b),f=await bp(a,c,h);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{h=d||bJ(b);let{iv:i}=e;({encryptedKey:f,...g}=await bQ(a,c,h,i));break}default:throw new aX('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:h,encryptedKey:f,parameters:g}}function bT(...a){let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}function bU(a,b,c,d,e){let f;if(void 0!==e.crit&&d?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new aX(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)}a.s(["exportJWK",()=>bL],36447);let bV=a=>a?.[Symbol.toStringTag],bW=(a,b,c)=>{if(void 0!==b.use){let a;switch(c){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc"}if(b.use!==a)throw TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, its "alg" must be "${a}" when present`);if(Array.isArray(b.key_ops)){let d;switch(!0){case"sign"===c||"verify"===c:case"dir"===a:case a.includes("CBC-HS"):d=c;break;case a.startsWith("PBES2"):d="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(a):d=!a.includes("GCM")&&a.endsWith("KW")?"encrypt"===c?"wrapKey":"unwrapKey":c;break;case"encrypt"===c&&a.startsWith("RSA"):d="wrapKey";break;case"decrypt"===c:d=a.startsWith("RSA")?"unwrapKey":"deriveBits"}if(d&&b.key_ops?.includes?.(d)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${d}" when present`)}return!0};function bX(a,b,c){switch(a.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((a,b,c)=>{if(!(b instanceof Uint8Array)){if(bE(b)){if("oct"===b.kty&&"string"==typeof b.k&&bW(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!bj(b))throw TypeError(bf(a,b,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==b.type)throw TypeError(`${bV(b)} instances for symmetric algorithms must be of type "secret"`)}})(a,b,c);break;default:((a,b,c)=>{if(bE(b))switch(c){case"decrypt":case"sign":if("oct"!==b.kty&&("AKP"===b.kty&&"string"==typeof b.priv||"string"==typeof b.d)&&bW(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if("oct"!==b.kty&&void 0===b.d&&void 0===b.priv&&bW(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!bj(b))throw TypeError(bf(a,b,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===b.type)throw TypeError(`${bV(b)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===b.type)switch(c){case"sign":throw TypeError(`${bV(b)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${bV(b)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===b.type)switch(c){case"verify":throw TypeError(`${bV(b)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${bV(b)} instances for asymmetric algorithm encryption must be of type "public"`)}})(a,b,c)}}class bY{#a;#b;#c;#d;#e;#f;#g;#h;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#a=a}setKeyManagementParameters(a){if(this.#h)throw TypeError("setKeyManagementParameters can only be called once");return this.#h=a,this}setProtectedHeader(a){if(this.#b)throw TypeError("setProtectedHeader can only be called once");return this.#b=a,this}setSharedUnprotectedHeader(a){if(this.#c)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#c=a,this}setUnprotectedHeader(a){if(this.#d)throw TypeError("setUnprotectedHeader can only be called once");return this.#d=a,this}setAdditionalAuthenticatedData(a){return this.#e=a,this}setContentEncryptionKey(a){if(this.#f)throw TypeError("setContentEncryptionKey can only be called once");return this.#f=a,this}setInitializationVector(a){if(this.#g)throw TypeError("setInitializationVector can only be called once");return this.#g=a,this}async encrypt(a,b){let c,d,e,f,g,h;if(!this.#b&&!this.#d&&!this.#c)throw new aZ("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!bT(this.#b,this.#d,this.#c))throw new aZ("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let i={...this.#b,...this.#d,...this.#c};if(bU(aZ,new Map,b?.crit,this.#b,i),void 0!==i.zip)throw new aX('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:j,enc:k}=i;if("string"!=typeof j||!j)throw new aZ('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof k||!k)throw new aZ('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#f&&("dir"===j||"ECDH-ES"===j))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${j}`);bX("dir"===j?k:j,a,"encrypt");{let e,f=await bH(a,j);({cek:d,encryptedKey:c,parameters:e}=await bS(j,k,f,this.#f,this.#h)),e&&(b&&aS in b?this.#d?this.#d={...this.#d,...e}:this.setUnprotectedHeader(e):this.#b?this.#b={...this.#b,...e}:this.setProtectedHeader(e))}if(this.#b?g=aP(f=aR(JSON.stringify(this.#b))):(f="",g=new Uint8Array),this.#e){let a=aP(h=aR(this.#e));e=aL(g,aP("."),a)}else e=g;let{ciphertext:l,tag:m,iv:n}=await bm(k,this.#a,d,this.#g,e),o={ciphertext:aR(l)};return n&&(o.iv=aR(n)),m&&(o.tag=aR(m)),c&&(o.encrypted_key=aR(c)),h&&(o.aad=h),this.#b&&(o.protected=f),this.#c&&(o.unprotected=this.#c),this.#d&&(o.header=this.#d),o}}class bZ{#i;constructor(a){this.#i=new bY(a)}setContentEncryptionKey(a){return this.#i.setContentEncryptionKey(a),this}setInitializationVector(a){return this.#i.setInitializationVector(a),this}setProtectedHeader(a){return this.#i.setProtectedHeader(a),this}setKeyManagementParameters(a){return this.#i.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this.#i.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}let b$=a=>Math.floor(a.getTime()/1e3),b_=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function b0(a){let b,c=b_.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b}function b1(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}let b2=a=>a.includes("/")?a.toLowerCase():`application/${a.toLowerCase()}`;function b3(a,b,c={}){var d,e;let f,g;try{f=JSON.parse(aK.decode(b))}catch{}if(!bD(f))throw new a_("JWT Claims Set must be a top-level JSON object");let{typ:h}=c;if(h&&("string"!=typeof a.typ||b2(a.typ)!==b2(h)))throw new aU('unexpected "typ" JWT header value',f,"typ","check_failed");let{requiredClaims:i=[],issuer:j,subject:k,audience:l,maxTokenAge:m}=c,n=[...i];for(let a of(void 0!==m&&n.push("iat"),void 0!==l&&n.push("aud"),void 0!==k&&n.push("sub"),void 0!==j&&n.push("iss"),new Set(n.reverse())))if(!(a in f))throw new aU(`missing required "${a}" claim`,f,a,"missing");if(j&&!(Array.isArray(j)?j:[j]).includes(f.iss))throw new aU('unexpected "iss" claim value',f,"iss","check_failed");if(k&&f.sub!==k)throw new aU('unexpected "sub" claim value',f,"sub","check_failed");if(l&&(d=f.aud,e="string"==typeof l?[l]:l,"string"==typeof d?!e.includes(d):!(Array.isArray(d)&&e.some(Set.prototype.has.bind(new Set(d))))))throw new aU('unexpected "aud" claim value',f,"aud","check_failed");switch(typeof c.clockTolerance){case"string":g=b0(c.clockTolerance);break;case"number":g=c.clockTolerance;break;case"undefined":g=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:o}=c,p=b$(o||new Date);if((void 0!==f.iat||m)&&"number"!=typeof f.iat)throw new aU('"iat" claim must be a number',f,"iat","invalid");if(void 0!==f.nbf){if("number"!=typeof f.nbf)throw new aU('"nbf" claim must be a number',f,"nbf","invalid");if(f.nbf>p+g)throw new aU('"nbf" claim timestamp check failed',f,"nbf","check_failed")}if(void 0!==f.exp){if("number"!=typeof f.exp)throw new aU('"exp" claim must be a number',f,"exp","invalid");if(f.exp<=p-g)throw new aV('"exp" claim timestamp check failed',f,"exp","check_failed")}if(m){let a=p-f.iat;if(a-g>("number"==typeof m?m:b0(m)))throw new aV('"iat" claim timestamp check failed (too far in the past)',f,"iat","check_failed");if(a<0-g)throw new aU('"iat" claim timestamp check failed (it should be in the past)',f,"iat","check_failed")}return f}class b4{#j;constructor(a){if(!bD(a))throw TypeError("JWT Claims Set MUST be an object");this.#j=structuredClone(a)}data(){return aJ.encode(JSON.stringify(this.#j))}get iss(){return this.#j.iss}set iss(a){this.#j.iss=a}get sub(){return this.#j.sub}set sub(a){this.#j.sub=a}get aud(){return this.#j.aud}set aud(a){this.#j.aud=a}set jti(a){this.#j.jti=a}set nbf(a){"number"==typeof a?this.#j.nbf=b1("setNotBefore",a):a instanceof Date?this.#j.nbf=b1("setNotBefore",b$(a)):this.#j.nbf=b$(new Date)+b0(a)}set exp(a){"number"==typeof a?this.#j.exp=b1("setExpirationTime",a):a instanceof Date?this.#j.exp=b1("setExpirationTime",b$(a)):this.#j.exp=b$(new Date)+b0(a)}set iat(a){void 0===a?this.#j.iat=b$(new Date):a instanceof Date?this.#j.iat=b1("setIssuedAt",b$(a)):"string"==typeof a?this.#j.iat=b1("setIssuedAt",b$(new Date)+b0(a)):this.#j.iat=b1("setIssuedAt",a)}}a.s(["JWTClaimsBuilder",()=>b4,"validateClaimsSet",()=>b3],367191);class b5{#f;#g;#h;#b;#k;#l;#m;#n;constructor(a={}){this.#n=new b4(a)}setIssuer(a){return this.#n.iss=a,this}setSubject(a){return this.#n.sub=a,this}setAudience(a){return this.#n.aud=a,this}setJti(a){return this.#n.jti=a,this}setNotBefore(a){return this.#n.nbf=a,this}setExpirationTime(a){return this.#n.exp=a,this}setIssuedAt(a){return this.#n.iat=a,this}setProtectedHeader(a){if(this.#b)throw TypeError("setProtectedHeader can only be called once");return this.#b=a,this}setKeyManagementParameters(a){if(this.#h)throw TypeError("setKeyManagementParameters can only be called once");return this.#h=a,this}setContentEncryptionKey(a){if(this.#f)throw TypeError("setContentEncryptionKey can only be called once");return this.#f=a,this}setInitializationVector(a){if(this.#g)throw TypeError("setInitializationVector can only be called once");return this.#g=a,this}replicateIssuerAsHeader(){return this.#k=!0,this}replicateSubjectAsHeader(){return this.#l=!0,this}replicateAudienceAsHeader(){return this.#m=!0,this}async encrypt(a,b){let c=new bZ(this.#n.data());return this.#b&&(this.#k||this.#l||this.#m)&&(this.#b={...this.#b,iss:this.#k?this.#n.iss:void 0,sub:this.#l?this.#n.sub:void 0,aud:this.#m?this.#n.aud:void 0}),c.setProtectedHeader(this.#b),this.#g&&c.setInitializationVector(this.#g),this.#f&&c.setContentEncryptionKey(this.#f),this.#h&&c.setKeyManagementParameters(this.#h),c.encrypt(a,b)}}function b6(a,b){let c=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:parseInt(a.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:b.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:a};default:throw new aX(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}async function b7(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(be(b,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",b,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[c])}return!function(a,b,c){switch(b){case"HS256":case"HS384":case"HS512":{if("HMAC"!==a.algorithm.name)throw a9("HMAC");let c=parseInt(b.slice(2),10);if(ba(a.algorithm.hash)!==c)throw a9(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if("RSASSA-PKCS1-v1_5"!==a.algorithm.name)throw a9("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(ba(a.algorithm.hash)!==c)throw a9(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if("RSA-PSS"!==a.algorithm.name)throw a9("RSA-PSS");let c=parseInt(b.slice(2),10);if(ba(a.algorithm.hash)!==c)throw a9(`SHA-${c}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if("Ed25519"!==a.algorithm.name)throw a9("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":let d;if(d=a.algorithm,d.name!==b)throw a9(b);break;case"ES256":case"ES384":case"ES512":{if("ECDSA"!==a.algorithm.name)throw a9("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw a9(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}bb(a,c)}(b,a,c),b}async function b8(a,b,c){let d=await b7(a,b,"sign");return bz(a,d),new Uint8Array(await crypto.subtle.sign(b6(a,d.algorithm),d,c))}class b9{#j;#b;#d;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#j=a}setProtectedHeader(a){if(this.#b)throw TypeError("setProtectedHeader can only be called once");return this.#b=a,this}setUnprotectedHeader(a){if(this.#d)throw TypeError("setUnprotectedHeader can only be called once");return this.#d=a,this}async sign(a,b){let c,d,e,f;if(!this.#b&&!this.#d)throw new a$("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!bT(this.#b,this.#d))throw new a$("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...this.#b,...this.#d},h=bU(a$,new Map([["b64",!0]]),b?.crit,this.#b,g),i=!0;if(h.has("b64")&&"boolean"!=typeof(i=this.#b.b64))throw new a$('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:j}=g;if("string"!=typeof j||!j)throw new a$('JWS "alg" (Algorithm) Header Parameter missing or invalid');bX(j,a,"sign"),i?d=aP(c=aR(this.#j)):(d=this.#j,c=""),this.#b?f=aP(e=aR(JSON.stringify(this.#b))):(e="",f=new Uint8Array);let k=aL(f,aP("."),d),l=await bH(a,j),m={signature:aR(await b8(j,l,k)),payload:c};return this.#d&&(m.header=this.#d),this.#b&&(m.protected=e),m}}class ca{#i;constructor(a){this.#i=new b9(a)}setProtectedHeader(a){return this.#i.setProtectedHeader(a),this}async sign(a,b){let c=await this.#i.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}class cb{#b;#n;constructor(a={}){this.#n=new b4(a)}setIssuer(a){return this.#n.iss=a,this}setSubject(a){return this.#n.sub=a,this}setAudience(a){return this.#n.aud=a,this}setJti(a){return this.#n.jti=a,this}setNotBefore(a){return this.#n.nbf=a,this}setExpirationTime(a){return this.#n.exp=a,this}setIssuedAt(a){return this.#n.iat=a,this}setProtectedHeader(a){return this.#b=a,this}async sign(a,b){let c=new ca(this.#n.data());if(c.setProtectedHeader(this.#b),Array.isArray(this.#b?.crit)&&this.#b.crit.includes("b64")&&!1===this.#b.b64)throw new a_("JWTs MUST NOT use unencoded payload");return c.sign(a,b)}}a.s(["SignJWT",()=>cb],604924);var cc,cd=a.i(509634),cd=cd;let ce=(a,b)=>{if("string"!=typeof a||!a)throw new a0(`${b} missing or invalid`)};async function cf(a,b){let c,d;if(bE(a))c=a;else if(bj(a))c=await bL(a);else throw TypeError(be(a,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(b??="sha256")&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(c.kty){case"AKP":ce(c.alg,'"alg" (Algorithm) Parameter'),ce(c.pub,'"pub" (Public key) Parameter'),d={alg:c.alg,kty:c.kty,pub:c.pub};break;case"EC":ce(c.crv,'"crv" (Curve) Parameter'),ce(c.x,'"x" (X Coordinate) Parameter'),ce(c.y,'"y" (Y Coordinate) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x,y:c.y};break;case"OKP":ce(c.crv,'"crv" (Subtype of Key Pair) Parameter'),ce(c.x,'"x" (Public Key) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x};break;case"RSA":ce(c.e,'"e" (Exponent) Parameter'),ce(c.n,'"n" (Modulus) Parameter'),d={e:c.e,kty:c.kty,n:c.n};break;case"oct":ce(c.k,'"k" (Key Value) Parameter'),d={k:c.k,kty:c.kty};break;default:throw new aX('"kty" (Key Type) Parameter missing or unsupported')}let e=aP(JSON.stringify(d));return aR(await br(b,e))}async function cg(a,b,c){let d;if(!bD(a))throw TypeError("JWK must be an object");switch(b??=a.alg,d??=c?.extractable??a.ext,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return aQ(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new aX('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return bF({...a,alg:b,ext:d});case"AKP":if("string"!=typeof a.alg||!a.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==b&&b!==a.alg)throw TypeError("JWK alg and alg option value mismatch");return bF({...a,ext:d});case"EC":case"OKP":return bF({...a,alg:b,ext:d});default:throw new aX('Unsupported "kty" (Key Type) Parameter value')}}async function ch(a,b,c,d,e){switch(a){case"dir":if(void 0!==c)throw new aZ("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new aZ("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e,f;if(!bD(d.epk))throw new aZ('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(bg(b),!bv(b))throw new aX("ECDH with the provided key is not allowed or not supported by your javascript runtime");let g=await cg(d.epk,a);if(bg(g),void 0!==d.apu){if("string"!=typeof d.apu)throw new aZ('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{e=aQ(d.apu)}catch{throw new aZ("Failed to base64url decode the apu")}}if(void 0!==d.apv){if("string"!=typeof d.apv)throw new aZ('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{f=aQ(d.apv)}catch{throw new aZ("Failed to base64url decode the apv")}}let h=await bu(g,b,"ECDH-ES"===a?d.enc:a,"ECDH-ES"===a?bI(d.enc):parseInt(a.slice(-5,-2),10),e,f);if("ECDH-ES"===a)return h;if(void 0===c)throw new aZ("JWE Encrypted Key missing");return bq(a.slice(-6),h,c)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new aZ("JWE Encrypted Key missing");return bg(b),bC(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let f;if(void 0===c)throw new aZ("JWE Encrypted Key missing");if("number"!=typeof d.p2c)throw new aZ('JOSE Header "p2c" (PBES2 Count) missing or invalid');let g=e?.maxPBES2Count||1e4;if(d.p2c>g)throw new aZ('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof d.p2s)throw new aZ('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{f=aQ(d.p2s)}catch{throw new aZ("Failed to base64url decode the p2s")}return by(a,b,c,d.p2c,f)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new aZ("JWE Encrypted Key missing");return bq(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let e,f;if(void 0===c)throw new aZ("JWE Encrypted Key missing");if("string"!=typeof d.iv)throw new aZ('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof d.tag)throw new aZ('JOSE Header "tag" (Authentication Tag) missing or invalid');try{e=aQ(d.iv)}catch{throw new aZ("Failed to base64url decode the iv")}try{f=aQ(d.tag)}catch{throw new aZ("Failed to base64url decode the tag")}return bR(a,b,c,e,f)}default:throw new aX('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function ci(a,b){if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}async function cj(a,b,c){let d,e,f,g,h,i,j;if(!bD(a))throw new aZ("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new aZ("JOSE Header missing");if(void 0!==a.iv&&"string"!=typeof a.iv)throw new aZ("JWE Initialization Vector incorrect type");if("string"!=typeof a.ciphertext)throw new aZ("JWE Ciphertext missing or incorrect type");if(void 0!==a.tag&&"string"!=typeof a.tag)throw new aZ("JWE Authentication Tag incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new aZ("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new aZ("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new aZ("JWE AAD incorrect type");if(void 0!==a.header&&!bD(a.header))throw new aZ("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!bD(a.unprotected))throw new aZ("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=aQ(a.protected);d=JSON.parse(aK.decode(b))}catch{throw new aZ("JWE Protected Header is invalid")}if(!bT(d,a.header,a.unprotected))throw new aZ("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let k={...d,...a.header,...a.unprotected};if(bU(aZ,new Map,c?.crit,d,k),void 0!==k.zip)throw new aX('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:l,enc:m}=k;if("string"!=typeof l||!l)throw new aZ("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof m||!m)throw new aZ("missing JWE Encryption Algorithm (enc) in JWE Header");let n=c&&ci("keyManagementAlgorithms",c.keyManagementAlgorithms),o=c&&ci("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(n&&!n.has(l)||!n&&l.startsWith("PBES2"))throw new aW('"alg" (Algorithm) Header Parameter value not allowed');if(o&&!o.has(m))throw new aW('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==a.encrypted_key)try{e=aQ(a.encrypted_key)}catch{throw new aZ("Failed to base64url decode the encrypted_key")}let p=!1;"function"==typeof b&&(b=await b(d,a),p=!0),bX("dir"===l?m:l,b,"decrypt");let q=await bH(b,l);try{f=await ch(l,q,e,k,c)}catch(a){if(a instanceof TypeError||a instanceof aZ||a instanceof aX)throw a;f=bJ(m)}if(void 0!==a.iv)try{g=aQ(a.iv)}catch{throw new aZ("Failed to base64url decode the iv")}if(void 0!==a.tag)try{h=aQ(a.tag)}catch{throw new aZ("Failed to base64url decode the tag")}let r=void 0!==a.protected?aP(a.protected):new Uint8Array;i=void 0!==a.aad?aL(r,aP("."),aP(a.aad)):r;try{j=aQ(a.ciphertext)}catch{throw new aZ("Failed to base64url decode the ciphertext")}let s={plaintext:await bP(m,f,j,g,h,i)};if(void 0!==a.protected&&(s.protectedHeader=d),void 0!==a.aad)try{s.additionalAuthenticatedData=aQ(a.aad)}catch{throw new aZ("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(s.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(s.unprotectedHeader=a.header),p)?{...s,key:q}:s}async function ck(a,b,c){if(a instanceof Uint8Array&&(a=aK.decode(a)),"string"!=typeof a)throw new aZ("Compact JWE must be a string or Uint8Array");let{0:d,1:e,2:f,3:g,4:h,length:i}=a.split(".");if(5!==i)throw new aZ("Invalid Compact JWE");let j=await cj({ciphertext:g,iv:f||void 0,protected:d,tag:h||void 0,encrypted_key:e||void 0},b,c),k={plaintext:j.plaintext,protectedHeader:j.protectedHeader};return"function"==typeof b?{...k,key:j.key}:k}async function cl(a,b,c){let d=await ck(a,b,c),e=b3(d.protectedHeader,d.plaintext,c),{protectedHeader:f}=d;if(void 0!==f.iss&&f.iss!==e.iss)throw new aU('replicated "iss" claim header parameter mismatch',e,"iss","mismatch");if(void 0!==f.sub&&f.sub!==e.sub)throw new aU('replicated "sub" claim header parameter mismatch',e,"sub","mismatch");if(void 0!==f.aud&&JSON.stringify(f.aud)!==JSON.stringify(e.aud))throw new aU('replicated "aud" claim header parameter mismatch',e,"aud","mismatch");let g={payload:e,protectedHeader:f};return"function"==typeof b?{...g,key:d.key}:g}async function cm(a,b,c,d){let e=await b7(a,b,"verify");bz(a,e);let f=b6(a,e.algorithm);try{return await crypto.subtle.verify(f,e,c,d)}catch{return!1}}async function cn(a,b,c){let d,e;if(!bD(a))throw new a$("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new a$('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new a$("JWS Protected Header incorrect type");if(void 0===a.payload)throw new a$("JWS Payload missing");if("string"!=typeof a.signature)throw new a$("JWS Signature missing or incorrect type");if(void 0!==a.header&&!bD(a.header))throw new a$("JWS Unprotected Header incorrect type");let f={};if(a.protected)try{let b=aQ(a.protected);f=JSON.parse(aK.decode(b))}catch{throw new a$("JWS Protected Header is invalid")}if(!bT(f,a.header))throw new a$("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...f,...a.header},h=bU(a$,new Map([["b64",!0]]),c?.crit,f,g),i=!0;if(h.has("b64")&&"boolean"!=typeof(i=f.b64))throw new a$('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:j}=g;if("string"!=typeof j||!j)throw new a$('JWS "alg" (Algorithm) Header Parameter missing or invalid');let k=c&&ci("algorithms",c.algorithms);if(k&&!k.has(j))throw new aW('"alg" (Algorithm) Header Parameter value not allowed');if(i){if("string"!=typeof a.payload)throw new a$("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new a$("JWS Payload must be a string or an Uint8Array instance");let l=!1;"function"==typeof b&&(b=await b(f,a),l=!0),bX(j,b,"verify");let m=aL(void 0!==a.protected?aP(a.protected):new Uint8Array,aP("."),"string"==typeof a.payload?i?aP(a.payload):aJ.encode(a.payload):a.payload);try{d=aQ(a.signature)}catch{throw new a$("Failed to base64url decode the signature")}let n=await bH(b,j);if(!await cm(j,n,d,m))throw new a5;if(i)try{e=aQ(a.payload)}catch{throw new a$("Failed to base64url decode the payload")}else e="string"==typeof a.payload?aJ.encode(a.payload):a.payload;let o={payload:e};return(void 0!==a.protected&&(o.protectedHeader=f),void 0!==a.header&&(o.unprotectedHeader=a.header),l)?{...o,key:n}:o}async function co(a,b,c){if(a instanceof Uint8Array&&(a=aK.decode(a)),"string"!=typeof a)throw new a$("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new a$("Invalid Compact JWS");let h=await cn({payload:e,protected:d,signature:f},b,c),i={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...i,key:h.key}:i}async function cp(a,b,c){let d=await co(a,b,c);if(d.protectedHeader.crit?.includes("b64")&&!1===d.protectedHeader.b64)throw new a_("JWTs MUST NOT use unencoded payload");let e={payload:b3(d.protectedHeader,d.payload,c),protectedHeader:d.protectedHeader};return"function"==typeof b?{...e,key:d.key}:e}async function cq(a,b,c=3600){return await new cb(a).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+c).sign(new TextEncoder().encode(b))}async function cr(a,b){try{return(await cp(a,new TextEncoder().encode(b))).payload}catch{return null}}a.s(["importJWK",()=>cg],83607),a.s(["jwtVerify",()=>cp],709633);let cs=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121]),ct="A256CBC-HS512";async function cu(a,b,c,d=3600){let e=_(aI,new TextEncoder().encode(b),new TextEncoder().encode(c),cs,64),f=await cf({kty:"oct",k:cd.encode(e)},"sha256");return await new b5(a).setProtectedHeader({alg:"dir",enc:ct,kid:f}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+d).setJti(crypto.randomUUID()).encrypt(e)}async function cv(a,b,c){if(!a)return null;try{let{payload:d}=await cl(a,async({kid:a})=>{let d=_(aI,new TextEncoder().encode(b),new TextEncoder().encode(c),cs,64);if(void 0===a||a===await cf({kty:"oct",k:cd.encode(d)},"sha256"))return d;throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[ct,"A256GCM"]});return d}catch{return null}}a.s(["signJWT",()=>cq,"symmetricDecodeJWT",()=>cv,"symmetricEncodeJWT",()=>cu,"verifyJWT",()=>cr],149646),a.i(123651),a.i(900193);var cw=a.i(261703);a.s([],191511);var cx=cw;a.s(["BetterAuthError",()=>cx.t],696722);var cx=cw;let cy={encode:a=>{if("string"==typeof a&&(a=new TextEncoder().encode(a)),0===a.byteLength)return"";let b=new Uint8Array(a),c="";for(let a of b)c+=a.toString(16).padStart(2,"0");return c},decode:a=>{if(!a)return"";if("string"==typeof a){if(a.length%2!=0||!RegExp("^[0123456789abcdef]+$").test(a))throw Error("Invalid hexadecimal string");let b=new Uint8Array(a.length/2);for(let c=0;c<a.length;c+=2)b[c/2]=parseInt(a.slice(c,c+2),16);return new TextDecoder().decode(b)}return new TextDecoder().decode(a)}};function cz(a,b,c,d){var e;let f,{c:g,dkLen:h,DK:i,PRF:j,PRFSalt:k}=function(a,b,c,d){E(a);let{c:e,dkLen:f,asyncTick:g}=U({dkLen:32,asyncTick:10},d);if(C(e,"c"),C(f,"dkLen"),C(g,"asyncTick"),e<1)throw Error("iterations (c) must be >= 1");let h=T(b,"password"),i=T(c,"salt"),j=new Uint8Array(f),k=Y.create(a,h),l=k._cloneInto().update(i);return{c:e,dkLen:f,asyncTick:g,DK:j,PRF:k,PRFSalt:l}}(a,b,c,d),l=new Uint8Array(4),m=J(l),n=new Uint8Array(j.outputLen);for(let a=1,b=0;b<h;a++,b+=j.outputLen){let c=i.subarray(b,b+j.outputLen);m.setInt32(0,a,!1),(f=k._cloneInto(f)).update(l).digestInto(n),c.set(n.subarray(0,c.length));for(let a=1;a<g;a++){j._cloneInto(f).update(n).digestInto(n);for(let a=0;a<c.length;a++)c[a]^=n[a]}}return e=f,j.destroy(),k.destroy(),e&&e.destroy(),I(n),i}function cA(a,b,c,d,e,f){let g=a[b++]^c[d++],h=a[b++]^c[d++],i=a[b++]^c[d++],j=a[b++]^c[d++],k=a[b++]^c[d++],l=a[b++]^c[d++],m=a[b++]^c[d++],n=a[b++]^c[d++],o=a[b++]^c[d++],p=a[b++]^c[d++],q=a[b++]^c[d++],r=a[b++]^c[d++],s=a[b++]^c[d++],t=a[b++]^c[d++],u=a[b++]^c[d++],v=a[b++]^c[d++],w=g,x=h,y=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,M=v;for(let a=0;a<8;a+=2)A^=L(w+I|0,7),E^=L(A+w|0,9),I^=L(E+A|0,13),w^=L(I+E|0,18),F^=L(B+x|0,7),J^=L(F+B|0,9),x^=L(J+F|0,13),B^=L(x+J|0,18),K^=L(G+C|0,7),y^=L(K+G|0,9),C^=L(y+K|0,13),G^=L(C+y|0,18),z^=L(M+H|0,7),D^=L(z+M|0,9),H^=L(D+z|0,13),M^=L(H+D|0,18),x^=L(w+z|0,7),y^=L(x+w|0,9),z^=L(y+x|0,13),w^=L(z+y|0,18),C^=L(B+A|0,7),D^=L(C+B|0,9),A^=L(D+C|0,13),B^=L(A+D|0,18),H^=L(G+F|0,7),E^=L(H+G|0,9),F^=L(E+H|0,13),G^=L(F+E|0,18),I^=L(M+K|0,7),J^=L(I+M|0,9),K^=L(J+I|0,13),M^=L(K+J|0,18);e[f++]=g+w|0,e[f++]=h+x|0,e[f++]=i+y|0,e[f++]=j+z|0,e[f++]=k+A|0,e[f++]=l+B|0,e[f++]=m+C|0,e[f++]=n+D|0,e[f++]=o+E|0,e[f++]=p+F|0,e[f++]=q+G|0,e[f++]=r+H|0,e[f++]=s+I|0,e[f++]=t+J|0,e[f++]=u+K|0,e[f++]=v+M|0}function cB(a,b,c,d,e){let f=d+0,g=d+16*e;for(let d=0;d<16;d++)c[g+d]=a[b+(2*e-1)*16+d];for(let d=0;d<e;d++,f+=16,b+=16)cA(c,g,a,b,c,f),d>0&&(g+=16),cA(c,f,a,b+=16,c,g)}async function cC(a,b,c){let d,{N:e,r:f,p:g,dkLen:h,blockSize32:i,V:j,B32:k,B:l,tmp:m,blockMixCb:n,asyncTick:o}=function(a,b,c){let{N:d,r:e,p:f,dkLen:g,asyncTick:h,maxmem:i,onProgress:j}=U({dkLen:32,asyncTick:10,maxmem:0x40000400},c);if(C(d,"N"),C(e,"r"),C(f,"p"),C(g,"dkLen"),C(h,"asyncTick"),C(i,"maxmem"),void 0!==j&&"function"!=typeof j)throw Error("progressCb must be a function");let k=128*e,l=k/4;if(d<=1||(d&d-1)!=0||d>0x100000000)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(f<1||f>0x1fffffffe0/k)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(g<1||g>0x1fffffffe0)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(k*(d+f)>i)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+i);let m=cz(aI,a,b,{c:1,dkLen:k*f}),n=H(m),o=H(new Uint8Array(k*d)),p=H(new Uint8Array(k)),q=()=>{};if(j){let a=2*d*f,b=Math.max(Math.floor(a/1e4),1),c=0;q=()=>{c++,j&&(!(c%b)||c===a)&&j(c/a)}}return{N:d,r:e,p:f,dkLen:g,blockSize32:l,V:o,B32:n,B:m,tmp:p,blockMixCb:q,asyncTick:h}}(a,b,c);M(k);for(let a=0;a<g;a++){let b=i*a;for(let a=0;a<i;a++)j[a]=k[b+a];let c=0;await R(e-1,o,()=>{cB(j,c,j,c+=i,f),n()}),cB(j,(e-1)*i,k,b,f),n(),await R(e,o,()=>{let a=(k[b+i-16]&e-1)>>>0;for(let c=0;c<i;c++)m[c]=k[b+c]^j[a*i+c];cB(m,0,k,b,f),n()})}return M(k),d=cz(aI,a,l,{c:1,dkLen:h}),I(l,j,m),d}a.s(["hex",()=>cy],192702);async function cD(a,b){return await cC(a.normalize("NFKC"),b,{N:16384,p:1,r:16,dkLen:64,maxmem:0x4000000})}let cE=async a=>{let b=cy.encode(crypto.getRandomValues(new Uint8Array(16))),c=await cD(a,b);return`${b}:${cy.encode(c)}`},cF=async({hash:a,password:b})=>{let[c,d]=a.split(":");if(!c||!d)throw new cx.t("Invalid password hash");return B(await cD(b,c),P(d))};function cG(){let a="u">typeof globalThis&&globalThis.crypto;if(a&&"object"==typeof a.subtle&&null!=a.subtle)return a.subtle;throw Error("crypto.subtle must be defined")}function cH(a){return a?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function cI(a,b,c){let d="",e=0,f=0;for(let c of a)for(e=e<<8|c,f+=8;f>=6;)f-=6,d+=b[e>>f&63];if(f>0&&(d+=b[e<<6-f&63]),c){let a=(4-d.length%4)%4;d+="=".repeat(a)}return d}function cJ(a,b){let c=new Map;for(let a=0;a<b.length;a++)c.set(b[a],a);let d=[],e=0,f=0;for(let b of a){if("="===b)break;let a=c.get(b);if(void 0===a)throw Error(`Invalid Base64 character: ${b}`);e=e<<6|a,(f+=6)>=8&&(f-=8,d.push(e>>f&255))}return Uint8Array.from(d)}a.s(["hashPassword",()=>cE,"verifyPassword",()=>cF],769417),a.s(["getWebcryptoSubtle",()=>cG],298109);let cK={encode(a,b={}){let c=cH(!1);return cI("string"==typeof a?new TextEncoder().encode(a):new Uint8Array(a),c,b.padding??!0)},decode(a){"string"!=typeof a&&(a=new TextDecoder().decode(a));let b=cH(a.includes("-")||a.includes("_"));return cJ(a,b)}},cL={encode(a,b={}){let c=cH(!0);return cI("string"==typeof a?new TextEncoder().encode(a):new Uint8Array(a),c,b.padding??!0)},decode(a){let b=cH(a.includes("-")||a.includes("_"));return cJ(a,b)}};function cM(a,b){return{digest:async c=>{let d=new TextEncoder,e="string"==typeof c?d.encode(c):c,f=await cG().digest(a,e);return"hex"===b?Array.from(new Uint8Array(f)).map(a=>a.toString(16).padStart(2,"0")).join(""):"base64"===b||"base64url"===b||"base64urlnopad"===b?b.includes("url")?cL.encode(f,{padding:"base64urlnopad"!==b}):cK.encode(f):f}}}function cN(a){if("boolean"!=typeof a)throw Error(`boolean expected, not ${a}`)}function cO(a){if(!Number.isSafeInteger(a)||a<0)throw Error("positive integer expected, got "+a)}function cP(a,b,c=""){let d=a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name,e=a?.length,f=void 0!==b;if(!d||f&&e!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(f?` of length ${b}`:"")+", got "+(d?`length=${e}`:`type=${typeof a}`));return a}function cQ(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function cR(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}function cS(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}a.s(["base64",()=>cK,"base64Url",()=>cL],500694),a.s(["createHash",()=>cM],699685);let cT=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],cU="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,cV=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function cW(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:void 0}function cX(a,b,c=!0){if(void 0===b)return new Uint8Array(a);if(b.length!==a)throw Error('"output" expected Uint8Array of length '+a+", got: "+b.length);if(c&&b.byteOffset%4!=0)throw Error("invalid output, must be aligned");return b}function cY(a){return Uint8Array.from(a)}function cZ(a=32){let b="object"==typeof globalThis?globalThis.crypto:null;if("function"!=typeof b?.getRandomValues)throw Error("crypto.getRandomValues must be defined");return b.getRandomValues(new Uint8Array(a))}function c$(a,b=cZ){let{nonceLength:c}=a;cO(c);let d=(a,b)=>{let c=function(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];cP(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}(a,b);return b.fill(0),c};return(e,...f)=>({encrypt(g){cP(g);let h=b(c),i=a(e,h,...f).encrypt(g);return i instanceof Promise?i.then(a=>d(h,a)):d(h,i)},decrypt(b){cP(b);let d=b.subarray(0,c),g=b.subarray(c);return a(e,d,...f).decrypt(g)}})}let c_=a=>Uint8Array.from(a.split(""),a=>a.charCodeAt(0)),c0=c_("expand 16-byte k"),c1=c_("expand 32-byte k"),c2=cR(c0),c3=cR(c1);function c4(a,b){return a<<b|a>>>32-b}function c5(a){return a.byteOffset%4==0}let c6=0x100000000-1,c7=Uint32Array.of();function c8(a,b){let{allowShortKeys:c,extendNonceFn:d,counterLength:e,counterRight:f,rounds:g}=function(a,b){if(null==b||"object"!=typeof b)throw Error("options must be defined");return Object.assign(a,b)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},b);if("function"!=typeof a)throw Error("core must be a function");return cO(e),cO(g),cN(f),cN(c),(b,h,i,j,k=0)=>{let l,m;cP(b,void 0,"key"),cP(h,void 0,"nonce"),cP(i,void 0,"data");let n=i.length;if(void 0===j&&(j=new Uint8Array(n)),cP(j,void 0,"output"),cO(k),k<0||k>=c6)throw Error("arx: counter overflow");if(j.length<n)throw Error(`arx: output (${j.length}) is shorter than data (${n})`);let o=[],p=b.length;if(32===p)o.push(l=cY(b)),m=c3;else if(16===p&&c)(l=new Uint8Array(32)).set(b),l.set(b,16),m=c2,o.push(l);else throw cP(b,32,"arx key"),Error("invalid key size");c5(h)||o.push(h=cY(h));let q=cR(l);if(d){if(24!==h.length)throw Error("arx: extended nonce must be 24 bytes");d(m,q,cR(h.subarray(0,16)),q),h=h.subarray(16)}let r=16-e;if(r!==h.length)throw Error(`arx: nonce must be ${r} or 16 bytes`);if(12!==r){let a=new Uint8Array(12);a.set(h,f?0:12-h.length),h=a,o.push(h)}return!function(a,b,c,d,e,f,g,h){let i=e.length,j=new Uint8Array(64),k=cR(j),l=c5(e)&&c5(f),m=l?cR(e):c7,n=l?cR(f):c7;for(let o=0;o<i;g++){if(a(b,c,d,k,g,h),g>=c6)throw Error("arx: counter overflow");let p=Math.min(64,i-o);if(l&&64===p){let a=o/4;if(o%4!=0)throw Error("arx: invalid block position");for(let b=0,c;b<16;b++)n[c=a+b]=m[c]^k[b];o+=64;continue}for(let a=0,b;a<p;a++)f[b=o+a]=e[b]^j[a];o+=p}}(a,m,q,cR(h),i,j,k,g),cS(...o),j}}function c9(a,b){return 255&a[b++]|(255&a[b++])<<8}class da{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(a){const b=c9(a=cY(cP(a,32,"key")),0),c=c9(a,2),d=c9(a,4),e=c9(a,6),f=c9(a,8),g=c9(a,10),h=c9(a,12),i=c9(a,14);this.r[0]=8191&b,this.r[1]=(b>>>13|c<<3)&8191,this.r[2]=(c>>>10|d<<6)&7939,this.r[3]=(d>>>7|e<<9)&8191,this.r[4]=(e>>>4|f<<12)&255,this.r[5]=f>>>1&8190,this.r[6]=(f>>>14|g<<2)&8191,this.r[7]=(g>>>11|h<<5)&8065,this.r[8]=(h>>>8|i<<8)&8191,this.r[9]=i>>>5&127;for(let b=0;b<8;b++)this.pad[b]=c9(a,16+2*b)}process(a,b,c=!1){let{h:d,r:e}=this,f=e[0],g=e[1],h=e[2],i=e[3],j=e[4],k=e[5],l=e[6],m=e[7],n=e[8],o=e[9],p=c9(a,b+0),q=c9(a,b+2),r=c9(a,b+4),s=c9(a,b+6),t=c9(a,b+8),u=c9(a,b+10),v=c9(a,b+12),w=c9(a,b+14),x=d[0]+(8191&p),y=d[1]+((p>>>13|q<<3)&8191),z=d[2]+((q>>>10|r<<6)&8191),A=d[3]+((r>>>7|s<<9)&8191),B=d[4]+((s>>>4|t<<12)&8191),C=d[5]+(t>>>1&8191),D=d[6]+((t>>>14|u<<2)&8191),E=d[7]+((u>>>11|v<<5)&8191),F=d[8]+((v>>>8|w<<8)&8191),G=d[9]+(w>>>5|2048*!c),H=0,I=0+x*f+5*o*y+5*n*z+5*m*A+5*l*B;H=I>>>13,I&=8191,I+=5*k*C+5*j*D+5*i*E+5*h*F+5*g*G,H+=I>>>13,I&=8191;let J=H+x*g+y*f+5*o*z+5*n*A+5*m*B;H=J>>>13,J&=8191,J+=5*l*C+5*k*D+5*j*E+5*i*F+5*h*G,H+=J>>>13,J&=8191;let K=H+x*h+y*g+z*f+5*o*A+5*n*B;H=K>>>13,K&=8191,K+=5*m*C+5*l*D+5*k*E+5*j*F+5*i*G,H+=K>>>13,K&=8191;let L=H+x*i+y*h+z*g+A*f+5*o*B;H=L>>>13,L&=8191,L+=5*n*C+5*m*D+5*l*E+5*k*F+5*j*G,H+=L>>>13,L&=8191;let M=H+x*j+y*i+z*h+A*g+B*f;H=M>>>13,M&=8191,M+=5*o*C+5*n*D+5*m*E+5*l*F+5*k*G,H+=M>>>13,M&=8191;let N=H+x*k+y*j+z*i+A*h+B*g;H=N>>>13,N&=8191,N+=C*f+5*o*D+5*n*E+5*m*F+5*l*G,H+=N>>>13,N&=8191;let O=H+x*l+y*k+z*j+A*i+B*h;H=O>>>13,O&=8191,O+=C*g+D*f+5*o*E+5*n*F+5*m*G,H+=O>>>13,O&=8191;let P=H+x*m+y*l+z*k+A*j+B*i;H=P>>>13,P&=8191,P+=C*h+D*g+E*f+5*o*F+5*n*G,H+=P>>>13,P&=8191;let Q=H+x*n+y*m+z*l+A*k+B*j;H=Q>>>13,Q&=8191,Q+=C*i+D*h+E*g+F*f+5*o*G,H+=Q>>>13,Q&=8191;let R=H+x*o+y*n+z*m+A*l+B*k;H=R>>>13,R&=8191,R+=C*j+D*i+E*h+F*g+G*f,H+=R>>>13,R&=8191,I=8191&(H=(H=(H<<2)+H|0)+I|0),H>>>=13,J+=H,d[0]=I,d[1]=J,d[2]=K,d[3]=L,d[4]=M,d[5]=N,d[6]=O,d[7]=P,d[8]=Q,d[9]=R}finalize(){let{h:a,pad:b}=this,c=new Uint16Array(10),d=a[1]>>>13;a[1]&=8191;for(let b=2;b<10;b++)a[b]+=d,d=a[b]>>>13,a[b]&=8191;a[0]+=5*d,d=a[0]>>>13,a[0]&=8191,a[1]+=d,d=a[1]>>>13,a[1]&=8191,a[2]+=d,c[0]=a[0]+5,d=c[0]>>>13,c[0]&=8191;for(let b=1;b<10;b++)c[b]=a[b]+d,d=c[b]>>>13,c[b]&=8191;c[9]-=8192;let e=(1^d)-1;for(let a=0;a<10;a++)c[a]&=e;e=~e;for(let b=0;b<10;b++)a[b]=a[b]&e|c[b];a[0]=(a[0]|a[1]<<13)&65535,a[1]=(a[1]>>>3|a[2]<<10)&65535,a[2]=(a[2]>>>6|a[3]<<7)&65535,a[3]=(a[3]>>>9|a[4]<<4)&65535,a[4]=(a[4]>>>12|a[5]<<1|a[6]<<14)&65535,a[5]=(a[6]>>>2|a[7]<<11)&65535,a[6]=(a[7]>>>5|a[8]<<8)&65535,a[7]=(a[8]>>>8|a[9]<<5)&65535;let f=a[0]+b[0];a[0]=65535&f;for(let c=1;c<8;c++)f=(a[c]+b[c]|0)+(f>>>16)|0,a[c]=65535&f;cS(c)}update(a){cQ(this),cP(a);let{buffer:b,blockLen:c}=this,d=(a=cY(a)).length;for(let e=0;e<d;){let f=Math.min(c-this.pos,d-e);if(f===c){for(;c<=d-e;e+=c)this.process(a,e);continue}b.set(a.subarray(e,e+f),this.pos),this.pos+=f,e+=f,this.pos===c&&(this.process(b,0,!1),this.pos=0)}return this}destroy(){cS(this.h,this.r,this.buffer,this.pad)}digestInto(a){cQ(this);cP(a,void 0,"output");let b=this.outputLen;if(a.length<b)throw Error("digestInto() expects output buffer of length at least "+b);this.finished=!0;let{buffer:c,h:d}=this,{pos:e}=this;if(e){for(c[e++]=1;e<16;e++)c[e]=0;this.process(c,0,!0)}this.finalize();let f=0;for(let b=0;b<8;b++)a[f++]=d[b]>>>0,a[f++]=d[b]>>>8;return a}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}}let db=(cc=a=>new da(a),(c=(a,b)=>cc(b).update(a).digest()).outputLen=(d=cc(new Uint8Array(32))).outputLen,c.blockLen=d.blockLen,c.create=a=>cc(a),c);function dc(a,b,c,d,e,f=20){let g=a[0],h=a[1],i=a[2],j=a[3],k=b[0],l=b[1],m=b[2],n=b[3],o=b[4],p=b[5],q=b[6],r=b[7],s=c[0],t=c[1],u=c[2],v=g,w=h,x=i,y=j,z=k,A=l,B=m,C=n,D=o,E=p,F=q,G=r,H=e,I=s,J=t,K=u;for(let a=0;a<f;a+=2)D=D+(H=c4(H^(v=v+z|0),16))|0,v=v+(z=c4(z^D,12))|0,D=D+(H=c4(H^v,8))|0,z=c4(z^D,7),E=E+(I=c4(I^(w=w+A|0),16))|0,w=w+(A=c4(A^E,12))|0,E=E+(I=c4(I^w,8))|0,A=c4(A^E,7),F=F+(J=c4(J^(x=x+B|0),16))|0,x=x+(B=c4(B^F,12))|0,F=F+(J=c4(J^x,8))|0,B=c4(B^F,7),G=G+(K=c4(K^(y=y+C|0),16))|0,y=y+(C=c4(C^G,12))|0,G=G+(K=c4(K^y,8))|0,C=c4(C^G,7),F=F+(K=c4(K^(v=v+A|0),16))|0,v=v+(A=c4(A^F,12))|0,F=F+(K=c4(K^v,8))|0,A=c4(A^F,7),G=G+(H=c4(H^(w=w+B|0),16))|0,w=w+(B=c4(B^G,12))|0,G=G+(H=c4(H^w,8))|0,B=c4(B^G,7),D=D+(I=c4(I^(x=x+C|0),16))|0,x=x+(C=c4(C^D,12))|0,D=D+(I=c4(I^x,8))|0,C=c4(C^D,7),E=E+(J=c4(J^(y=y+z|0),16))|0,y=y+(z=c4(z^E,12))|0,E=E+(J=c4(J^y,8))|0,z=c4(z^E,7);let L=0;d[L++]=g+v|0,d[L++]=h+w|0,d[L++]=i+x|0,d[L++]=j+y|0,d[L++]=k+z|0,d[L++]=l+A|0,d[L++]=m+B|0,d[L++]=n+C|0,d[L++]=o+D|0,d[L++]=p+E|0,d[L++]=q+F|0,d[L++]=r+G|0,d[L++]=e+H|0,d[L++]=s+I|0,d[L++]=t+J|0,d[L++]=u+K|0}let dd=c8(dc,{counterRight:!1,counterLength:4,allowShortKeys:!1}),de=c8(dc,{counterRight:!1,counterLength:8,extendNonceFn:function(a,b,c,d){let e=a[0],f=a[1],g=a[2],h=a[3],i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=c[0],r=c[1],s=c[2],t=c[3];for(let a=0;a<20;a+=2)m=m+(q=c4(q^(e=e+i|0),16))|0,e=e+(i=c4(i^m,12))|0,m=m+(q=c4(q^e,8))|0,i=c4(i^m,7),n=n+(r=c4(r^(f=f+j|0),16))|0,f=f+(j=c4(j^n,12))|0,n=n+(r=c4(r^f,8))|0,j=c4(j^n,7),o=o+(s=c4(s^(g=g+k|0),16))|0,g=g+(k=c4(k^o,12))|0,o=o+(s=c4(s^g,8))|0,k=c4(k^o,7),p=p+(t=c4(t^(h=h+l|0),16))|0,h=h+(l=c4(l^p,12))|0,p=p+(t=c4(t^h,8))|0,l=c4(l^p,7),o=o+(t=c4(t^(e=e+j|0),16))|0,e=e+(j=c4(j^o,12))|0,o=o+(t=c4(t^e,8))|0,j=c4(j^o,7),p=p+(q=c4(q^(f=f+k|0),16))|0,f=f+(k=c4(k^p,12))|0,p=p+(q=c4(q^f,8))|0,k=c4(k^p,7),m=m+(r=c4(r^(g=g+l|0),16))|0,g=g+(l=c4(l^m,12))|0,m=m+(r=c4(r^g,8))|0,l=c4(l^m,7),n=n+(s=c4(s^(h=h+i|0),16))|0,h=h+(i=c4(i^n,12))|0,n=n+(s=c4(s^h,8))|0,i=c4(i^n,7);let u=0;d[u++]=e,d[u++]=f,d[u++]=g,d[u++]=h,d[u++]=q,d[u++]=r,d[u++]=s,d[u++]=t},allowShortKeys:!1}),df=new Uint8Array(16),dg=(a,b)=>{a.update(b);let c=b.length%16;c&&a.update(df.subarray(c))},dh=new Uint8Array(32);function di(a,b,c,d,e){var f,g;let h,i;void 0!==e&&cP(e,void 0,"AAD");let j=a(b,c,dh),k=(f=d.length,g=e?e.length:0,cN(!0),(i=new DataView((h=new Uint8Array(16)).buffer,h.byteOffset,h.byteLength)).setBigUint64(0,BigInt(g),!0),i.setBigUint64(8,BigInt(f),!0),h),l=db.create(j);e&&dg(l,e),dg(l,d),l.update(k);let m=l.digest();return cS(j,k),m}let dj=a=>(b,c,d)=>({encrypt(e,f){let g=e.length;(f=cX(g+16,f,!1)).set(e);let h=f.subarray(0,-16);a(b,c,h,h,1);let i=di(a,b,c,h,d);return f.set(i,g),cS(i),f},decrypt(e,f){f=cX(e.length-16,f,!1);let g=e.subarray(0,-16),h=e.subarray(-16),i=di(a,b,c,g,d);if(!function(a,b){if(a.length!==b.length)return!1;let c=0;for(let d=0;d<a.length;d++)c|=a[d]^b[d];return 0===c}(h,i))throw Error("invalid tag");return f.set(e.subarray(0,-16)),a(b,c,f,f,1),cS(i),f}});dj(dd);let dk=((a,b)=>{function c(d,...e){if(cP(d,void 0,"key"),!cT)throw Error("Non little-endian hardware is not yet supported");void 0!==a.nonceLength&&cP(e[0],a.varSizeNonce?void 0:a.nonceLength,"nonce");let f=a.tagLength;f&&void 0!==e[1]&&cP(e[1],void 0,"AAD");let g=b(d,...e),h=(a,b)=>{if(void 0!==b){if(2!==a)throw Error("cipher output not supported");cP(b,void 0,"output")}},i=!1;return{encrypt(a,b){if(i)throw Error("cannot encrypt() twice with same key + nonce");return i=!0,cP(a),h(g.encrypt.length,b),g.encrypt(a,b)},decrypt(a,b){if(cP(a),f&&a.length<f)throw Error('"ciphertext" expected length bigger than tagLength='+f);return h(g.decrypt.length,b),g.decrypt(a,b)}}}return Object.assign(c,a),c})({blockSize:64,nonceLength:24,tagLength:16},dj(de)),dl=async({key:a,data:b})=>{let c=await cM("SHA-256").digest(a),d=function(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}(b);var e=c$(dk)(new Uint8Array(c)).encrypt(d);if(cP(e),cU)return e.toHex();let f="";for(let a=0;a<e.length;a++)f+=cV[e[a]];return f},dm=async({key:a,data:b})=>{let c=await cM("SHA-256").digest(a),d=function(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(cU)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=cW(a.charCodeAt(e)),f=cW(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}(b),e=c$(dk)(new Uint8Array(c));return new TextDecoder().decode(e.decrypt(d))};a.s(["symmetricDecrypt",()=>dm,"symmetricEncrypt",()=>dl],230739)},954757,794219,222157,a=>{"use strict";let b=Object.freeze({status:"aborted"});function c(a,b,c){function d(c,d){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:d,constr:g,traits:new Set},enumerable:!1}),c._zod.traits.has(a))return;c._zod.traits.add(a),b(c,d);let e=g.prototype,f=Object.keys(e);for(let a=0;a<f.length;a++){let b=f[a];b in c||(c[b]=e[b].bind(c))}}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}let d=Symbol("zod_brand");class e extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class f extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}let g={};function h(a){return a&&Object.assign(g,a),g}function i(a){return a}function j(a){return a}function k(a){}function l(a){throw Error("Unexpected value in exhaustive check")}function m(a){}function n(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function o(a,b="|"){return a.map(a=>R(a)).join(b)}function p(a,b){return"bigint"==typeof b?b.toString():b}function q(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function r(a){return null==a}function s(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function t(a,b){let c=(a.toString().split(".")[1]||"").length,d=b.toString(),e=(d.split(".")[1]||"").length;if(0===e&&/\d?e-\d?/.test(d)){let a=d.match(/\d?e-(\d?)/);a?.[1]&&(e=Number.parseInt(a[1]))}let f=c>e?c:e;return Number.parseInt(a.toFixed(f).replace(".",""))%Number.parseInt(b.toFixed(f).replace(".",""))/10**f}a.s(["$ZodAsyncError",()=>e,"$ZodEncodeError",()=>f,"$brand",0,d,"$constructor",()=>c,"NEVER",0,b,"config",()=>h,"globalConfig",0,g],185679);let u=Symbol("evaluating");function v(a,b,c){let d;Object.defineProperty(a,b,{get(){if(d!==u)return void 0===d&&(d=u,d=c()),d},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function w(a){return Object.create(Object.getPrototypeOf(a),Object.getOwnPropertyDescriptors(a))}function x(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function y(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function z(a){return y(a._zod.def)}function A(a,b){return b?b.reduce((a,b)=>a?.[b],a):a}function B(a){let b=Object.keys(a);return Promise.all(b.map(b=>a[b])).then(a=>{let c={};for(let d=0;d<b.length;d++)c[b[d]]=a[d];return c})}function C(a=10){let b="abcdefghijklmnopqrstuvwxyz",c="";for(let d=0;d<a;d++)c+=b[Math.floor(Math.random()*b.length)];return c}function D(a){return JSON.stringify(a)}function E(a){return a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let F="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function G(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let H=q(()=>{if("u">typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function I(a){if(!1===G(a))return!1;let b=a.constructor;if(void 0===b||"function"!=typeof b)return!0;let c=b.prototype;return!1!==G(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function J(a){return I(a)?{...a}:Array.isArray(a)?[...a]:a}function K(a){let b=0;for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b++;return b}let L=new Set(["string","number","symbol"]),M=new Set(["string","number","bigint","boolean","symbol","undefined"]);function N(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function P(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function Q(a){let b;return new Proxy({},{get:(c,d,e)=>(b??(b=a()),Reflect.get(b,d,e)),set:(c,d,e,f)=>(b??(b=a()),Reflect.set(b,d,e,f)),has:(c,d)=>(b??(b=a()),Reflect.has(b,d)),deleteProperty:(c,d)=>(b??(b=a()),Reflect.deleteProperty(b,d)),ownKeys:c=>(b??(b=a()),Reflect.ownKeys(b)),getOwnPropertyDescriptor:(c,d)=>(b??(b=a()),Reflect.getOwnPropertyDescriptor(b,d)),defineProperty:(c,d,e)=>(b??(b=a()),Reflect.defineProperty(b,d,e))})}function R(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}function S(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}let T={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},U={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function V(a,b){let c=a._zod.def,d=c.checks;if(d&&d.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let e=y(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return x(this,"shape",a),a},checks:[]});return O(a,e)}function W(a,b){let c=a._zod.def,d=c.checks;if(d&&d.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let e=y(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return x(this,"shape",d),d},checks:[]});return O(a,e)}function X(a,b){if(!I(b))throw Error("Invalid input to extend: expected a plain object");let c=a._zod.def.checks;if(c&&c.length>0){let c=a._zod.def.shape;for(let a in b)if(void 0!==Object.getOwnPropertyDescriptor(c,a))throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let d=y(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return x(this,"shape",c),c}});return O(a,d)}function Y(a,b){if(!I(b))throw Error("Invalid input to safeExtend: expected a plain object");let c=y(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return x(this,"shape",c),c}});return O(a,c)}function Z(a,b){let c=y(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return x(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return O(a,c)}function $(a,b,c){let d=b._zod.def.checks;if(d&&d.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let e=y(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return x(this,"shape",e),e},checks:[]});return O(b,e)}function _(a,b,c){let d=y(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return x(this,"shape",e),e}});return O(b,d)}function aa(a,b=0){if(!0===a.aborted)return!0;for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function ab(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function ac(a){return"string"==typeof a?a:a?.message}function ad(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=ac(a.inst?._zod.def?.error?.(a))??ac(b?.error?.(a))??ac(c.customError?.(a))??ac(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function ae(a){return a instanceof Set?"set":a instanceof Map?"map":a instanceof File?"file":"unknown"}function af(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function ag(a){let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"nan":"number";case"object":if(null===a)return"null";if(Array.isArray(a))return"array";if(a&&Object.getPrototypeOf(a)!==Object.prototype&&"constructor"in a&&a.constructor)return a.constructor.name}return b}function ah(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}function ai(a){return Object.entries(a).filter(([a,b])=>Number.isNaN(Number.parseInt(a,10))).map(a=>a[1])}function aj(a){let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}function ak(a){let b="";for(let c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return btoa(b)}function al(a){let b=a.replace(/-/g,"+").replace(/_/g,"/"),c="=".repeat((4-b.length%4)%4);return aj(b+c)}function am(a){return ak(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function an(a){let b=a.replace(/^0x/,"");if(b.length%2!=0)throw Error("Invalid hex string length");let c=new Uint8Array(b.length/2);for(let a=0;a<b.length;a+=2)c[a/2]=Number.parseInt(b.slice(a,a+2),16);return c}function ao(a){return Array.from(a).map(a=>a.toString(16).padStart(2,"0")).join("")}class ap{constructor(...a){}}a.s(["BIGINT_FORMAT_RANGES",0,U,"Class",()=>ap,"NUMBER_FORMAT_RANGES",0,T,"aborted",()=>aa,"allowsEval",0,H,"assert",()=>m,"assertEqual",()=>i,"assertIs",()=>k,"assertNever",()=>l,"assertNotEqual",()=>j,"assignProp",()=>x,"base64ToUint8Array",()=>aj,"base64urlToUint8Array",()=>al,"cached",()=>q,"captureStackTrace",0,F,"cleanEnum",()=>ai,"cleanRegex",()=>s,"clone",()=>O,"cloneDef",()=>z,"createTransparentProxy",()=>Q,"defineLazy",()=>v,"esc",()=>D,"escapeRegex",()=>N,"extend",()=>X,"finalizeIssue",()=>ad,"floatSafeRemainder",()=>t,"getElementAtPath",()=>A,"getEnumValues",()=>n,"getLengthableOrigin",()=>af,"getParsedType",0,a=>{let b=typeof a;switch(b){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(a)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return"promise";if("u">typeof Map&&a instanceof Map)return"map";if("u">typeof Set&&a instanceof Set)return"set";if("u">typeof Date&&a instanceof Date)return"date";if("u">typeof File&&a instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${b}`)}},"getSizableOrigin",()=>ae,"hexToUint8Array",()=>an,"isObject",()=>G,"isPlainObject",()=>I,"issue",()=>ah,"joinValues",()=>o,"jsonStringifyReplacer",()=>p,"merge",()=>Z,"mergeDefs",()=>y,"normalizeParams",()=>P,"nullish",()=>r,"numKeys",()=>K,"objectClone",()=>w,"omit",()=>W,"optionalKeys",()=>S,"parsedType",()=>ag,"partial",()=>$,"pick",()=>V,"prefixIssues",()=>ab,"primitiveTypes",0,M,"promiseAllObject",()=>B,"propertyKeyTypes",0,L,"randomString",()=>C,"required",()=>_,"safeExtend",()=>Y,"shallowClone",()=>J,"slugify",()=>E,"stringifyPrimitive",()=>R,"uint8ArrayToBase64",()=>ak,"uint8ArrayToBase64url",()=>am,"uint8ArrayToHex",()=>ao,"unwrapMessage",()=>ac],428110);let aq=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,p,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},ar=c("$ZodError",aq),as=c("$ZodError",aq,{Parent:Error});function at(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}}function au(a,b=a=>a.message){let c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code&&e.errors.length)e.errors.map(a=>d({issues:a}));else if("invalid_key"===e.code)d({issues:e.issues});else if("invalid_element"===e.code)d({issues:e.issues});else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(a),c}function av(a,b=a=>a.message){let c={errors:[]},d=(a,e=[])=>{var f,g;for(let h of a.issues)if("invalid_union"===h.code&&h.errors.length)h.errors.map(a=>d({issues:a},h.path));else if("invalid_key"===h.code)d({issues:h.issues},h.path);else if("invalid_element"===h.code)d({issues:h.issues},h.path);else{let a=[...e,...h.path];if(0===a.length){c.errors.push(b(h));continue}let d=c,i=0;for(;i<a.length;){let c=a[i],e=i===a.length-1;"string"==typeof c?(d.properties??(d.properties={}),(f=d.properties)[c]??(f[c]={errors:[]}),d=d.properties[c]):(d.items??(d.items=[]),(g=d.items)[c]??(g[c]={errors:[]}),d=d.items[c]),e&&d.errors.push(b(h)),i++}}};return d(a),c}function aw(a){let b=[];for(let c of a.map(a=>"object"==typeof a?a.key:a))"number"==typeof c?b.push(`[${c}]`):"symbol"==typeof c?b.push(`[${JSON.stringify(String(c))}]`):/[^\w$]/.test(c)?b.push(`[${JSON.stringify(c)}]`):(b.length&&b.push("."),b.push(c));return b.join("")}function ax(a){let b=[];for(let c of[...a.issues].sort((a,b)=>(a.path??[]).length-(b.path??[]).length))b.push(` ${c.message}`),c.path?.length&&b.push(`   at ${aw(c.path)}`);return b.join("\n")}a.s(["$ZodError",0,ar,"$ZodRealError",0,as,"flattenError",()=>at,"formatError",()=>au,"prettifyError",()=>ax,"toDotPath",()=>aw,"treeifyError",()=>av],313399);let ay=a=>(b,c,d,f)=>{let g=d?Object.assign(d,{async:!1}):{async:!1},i=b._zod.run({value:c,issues:[]},g);if(i instanceof Promise)throw new e;if(i.issues.length){let b=new(f?.Err??a)(i.issues.map(a=>ad(a,g,h())));throw F(b,f?.callee),b}return i.value},az=ay(as),aA=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>ad(a,f,h())));throw F(b,e?.callee),b}return g.value},aB=aA(as),aC=a=>(b,c,d)=>{let f=d?{...d,async:!1}:{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new e;return g.issues.length?{success:!1,error:new(a??ar)(g.issues.map(a=>ad(a,f,h())))}:{success:!0,data:g.value}},aD=aC(as),aE=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>ad(a,e,h())))}:{success:!0,data:f.value}},aF=aE(as),aG=a=>(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return ay(a)(b,c,e)},aH=aG(as),aI=a=>(b,c,d)=>ay(a)(b,c,d),aJ=aI(as),aK=a=>async(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return aA(a)(b,c,e)},aL=aK(as),aM=a=>async(b,c,d)=>aA(a)(b,c,d),aN=aM(as),aO=a=>(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return aC(a)(b,c,e)},aP=aO(as),aQ=a=>(b,c,d)=>aC(a)(b,c,d),aR=aQ(as),aS=a=>async(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return aE(a)(b,c,e)},aT=aS(as),aU=a=>async(b,c,d)=>aE(a)(b,c,d),aV=aU(as);a.s(["_decode",0,aI,"_decodeAsync",0,aM,"_encode",0,aG,"_encodeAsync",0,aK,"_parse",0,ay,"_parseAsync",0,aA,"_safeDecode",0,aQ,"_safeDecodeAsync",0,aU,"_safeEncode",0,aO,"_safeEncodeAsync",0,aS,"_safeParse",0,aC,"_safeParseAsync",0,aE,"decode",0,aJ,"decodeAsync",0,aN,"encode",0,aH,"encodeAsync",0,aL,"parse",0,az,"parseAsync",0,aB,"safeDecode",0,aR,"safeDecodeAsync",0,aV,"safeEncode",0,aP,"safeEncodeAsync",0,aT,"safeParse",0,aD,"safeParseAsync",0,aF],651152);let aW=/^[cC][^\s-]{8,}$/,aX=/^[0-9a-z]+$/,aY=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,aZ=/^[0-9a-vA-V]{20}$/,a$=/^[A-Za-z0-9]{27}$/,a_=/^[a-zA-Z0-9_-]{21}$/,a0=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,a1=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,a2=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,a3=a2(4),a4=a2(6),a5=a2(7),a6=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,a7=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u;function a8(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let a9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ba=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,bb=a=>{let b=N(a??":");return RegExp(`^(?:[0-9A-F]{2}${b}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${b}){5}[0-9a-f]{2}$`)},bc=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,bd=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,be=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,bf=/^[A-Za-z0-9_-]*$/,bg=/^\+[1-9]\d{6,14}$/,bh="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",bi=RegExp(`^${bh}$`);function bj(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}function bk(a){return RegExp(`^${bj(a)}$`)}function bl(a){let b=bj({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${bh}T(?:${d})$`)}let bm=a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)},bn=/^-?\d+n?$/,bo=/^-?\d+$/,bp=/^-?\d+(?:\.\d+)?$/,bq=/^(?:true|false)$/i,br=/^null$/i,bs=/^undefined$/i,bt=/^[^A-Z]*$/,bu=/^[^a-z]*$/;function bv(a,b){return RegExp(`^[A-Za-z0-9+/]{${a}}${b}$`)}function bw(a){return RegExp(`^[A-Za-z0-9_-]{${a}}$`)}let bx=bv(22,"=="),by=bw(22),bz=bv(27,"="),bA=bw(27),bB=bv(43,"="),bC=bw(43),bD=bv(64,""),bE=bw(64),bF=bv(86,"=="),bG=bw(86);a.s(["base64",0,be,"base64url",0,bf,"bigint",0,bn,"boolean",0,bq,"browserEmail",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"cidrv4",0,bc,"cidrv6",0,bd,"cuid",0,aW,"cuid2",0,aX,"date",0,bi,"datetime",()=>bl,"domain",0,/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,"duration",0,a0,"e164",0,bg,"email",0,a6,"emoji",()=>a8,"extendedDuration",0,/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,"guid",0,a1,"hex",0,/^[0-9a-fA-F]*$/,"hostname",0,/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,"html5Email",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"idnEmail",0,a7,"integer",0,bo,"ipv4",0,a9,"ipv6",0,ba,"ksuid",0,a$,"lowercase",0,bt,"mac",0,bb,"md5_base64",0,bx,"md5_base64url",0,by,"md5_hex",0,/^[0-9a-fA-F]{32}$/,"nanoid",0,a_,"null",()=>br,"number",0,bp,"rfc5322Email",0,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"sha1_base64",0,bz,"sha1_base64url",0,bA,"sha1_hex",0,/^[0-9a-fA-F]{40}$/,"sha256_base64",0,bB,"sha256_base64url",0,bC,"sha256_hex",0,/^[0-9a-fA-F]{64}$/,"sha384_base64",0,bD,"sha384_base64url",0,bE,"sha384_hex",0,/^[0-9a-fA-F]{96}$/,"sha512_base64",0,bF,"sha512_base64url",0,bG,"sha512_hex",0,/^[0-9a-fA-F]{128}$/,"string",0,bm,"time",()=>bk,"ulid",0,aY,"undefined",()=>bs,"unicodeEmail",0,a7,"uppercase",0,bu,"uuid",0,a2,"uuid4",0,a3,"uuid6",0,a4,"uuid7",0,a5,"xid",0,aZ],520559);let bH=c("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),bI={number:"number",bigint:"bigint",object:"date"},bJ=c("$ZodCheckLessThan",(a,b)=>{bH.init(a,b);let c=bI[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:"object"==typeof b.value?b.value.getTime():b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),bK=c("$ZodCheckGreaterThan",(a,b)=>{bH.init(a,b);let c=bI[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:"object"==typeof b.value?b.value.getTime():b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),bL=c("$ZodCheckMultipleOf",(a,b)=>{bH.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===t(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),bM=c("$ZodCheckNumberFormat",(a,b)=>{bH.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=T[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=bo)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",continue:!1,input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,inclusive:!0,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,inclusive:!0,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inclusive:!0,inst:a,continue:!b.abort})}}),bN=c("$ZodCheckBigIntFormat",(a,b)=>{bH.init(a,b);let[c,d]=U[b.format];a._zod.onattach.push(a=>{let e=a._zod.bag;e.format=b.format,e.minimum=c,e.maximum=d}),a._zod.check=e=>{let f=e.value;f<c&&e.issues.push({origin:"bigint",input:f,code:"too_small",minimum:c,inclusive:!0,inst:a,continue:!b.abort}),f>d&&e.issues.push({origin:"bigint",input:f,code:"too_big",maximum:d,inclusive:!0,inst:a,continue:!b.abort})}}),bO=c("$ZodCheckMaxSize",(a,b)=>{var c;bH.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!r(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;d.size<=b.maximum||c.issues.push({origin:ae(d),code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bP=c("$ZodCheckMinSize",(a,b)=>{var c;bH.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!r(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;d.size>=b.minimum||c.issues.push({origin:ae(d),code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bQ=c("$ZodCheckSizeEquals",(a,b)=>{var c;bH.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!r(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.size,c.maximum=b.size,c.size=b.size}),a._zod.check=c=>{let d=c.value,e=d.size;if(e===b.size)return;let f=e>b.size;c.issues.push({origin:ae(d),...f?{code:"too_big",maximum:b.size}:{code:"too_small",minimum:b.size},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),bR=c("$ZodCheckMaxLength",(a,b)=>{var c;bH.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!r(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=af(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bS=c("$ZodCheckMinLength",(a,b)=>{var c;bH.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!r(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=af(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bT=c("$ZodCheckLengthEquals",(a,b)=>{var c;bH.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!r(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=af(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),bU=c("$ZodCheckStringFormat",(a,b)=>{var c,d;bH.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),bV=c("$ZodCheckRegex",(a,b)=>{bU.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),bW=c("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=bt),bU.init(a,b)}),bX=c("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=bu),bU.init(a,b)}),bY=c("$ZodCheckIncludes",(a,b)=>{bH.init(a,b);let c=N(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),bZ=c("$ZodCheckStartsWith",(a,b)=>{bH.init(a,b);let c=RegExp(`^${N(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),b$=c("$ZodCheckEndsWith",(a,b)=>{bH.init(a,b);let c=RegExp(`.*${N(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}});function b_(a,b,c){a.issues.length&&b.issues.push(...ab(c,a.issues))}let b0=c("$ZodCheckProperty",(a,b)=>{bH.init(a,b),a._zod.check=a=>{let c=b.schema._zod.run({value:a.value[b.property],issues:[]},{});if(c instanceof Promise)return c.then(c=>b_(c,a,b.property));b_(c,a,b.property)}}),b1=c("$ZodCheckMimeType",(a,b)=>{bH.init(a,b);let c=new Set(b.mime);a._zod.onattach.push(a=>{a._zod.bag.mime=b.mime}),a._zod.check=d=>{c.has(d.value.type)||d.issues.push({code:"invalid_value",values:b.mime,input:d.value.type,inst:a,continue:!b.abort})}}),b2=c("$ZodCheckOverwrite",(a,b)=>{bH.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});a.s(["$ZodCheck",0,bH,"$ZodCheckBigIntFormat",0,bN,"$ZodCheckEndsWith",0,b$,"$ZodCheckGreaterThan",0,bK,"$ZodCheckIncludes",0,bY,"$ZodCheckLengthEquals",0,bT,"$ZodCheckLessThan",0,bJ,"$ZodCheckLowerCase",0,bW,"$ZodCheckMaxLength",0,bR,"$ZodCheckMaxSize",0,bO,"$ZodCheckMimeType",0,b1,"$ZodCheckMinLength",0,bS,"$ZodCheckMinSize",0,bP,"$ZodCheckMultipleOf",0,bL,"$ZodCheckNumberFormat",0,bM,"$ZodCheckOverwrite",0,b2,"$ZodCheckProperty",0,b0,"$ZodCheckRegex",0,bV,"$ZodCheckSizeEquals",0,bQ,"$ZodCheckStartsWith",0,bZ,"$ZodCheckStringFormat",0,bU,"$ZodCheckUpperCase",0,bX],561802);class b3{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}a.s(["Doc",()=>b3],866004);let b4={major:4,minor:3,patch:4};a.s(["version",0,b4],872385);let b5=c("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=b4;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,f=aa(a);for(let g of b){if(g._zod.def.when){if(!g._zod.def.when(a))continue}else if(f)continue;let b=a.issues.length,h=g._zod.check(a);if(h instanceof Promise&&c?.async===!1)throw new e;if(d||h instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await h,a.issues.length!==b&&(f||(f=aa(a,b)))});else{if(a.issues.length===b)continue;f||(f=aa(a,b))}}return d?d.then(()=>a):a},c=(c,f,g)=>{if(aa(c))return c.aborted=!0,c;let h=b(f,d,g);if(h instanceof Promise){if(!1===g.async)throw new e;return h.then(b=>a._zod.parse(b,g))}return a._zod.parse(h,g)};a._zod.run=(f,g)=>{if(g.skipChecks)return a._zod.parse(f,g);if("backward"===g.direction){let b=a._zod.parse({value:f.value,issues:[]},{...g,skipChecks:!0});return b instanceof Promise?b.then(a=>c(a,f,g)):c(b,f,g)}let h=a._zod.parse(f,g);if(h instanceof Promise){if(!1===g.async)throw new e;return h.then(a=>b(a,d,g))}return b(h,d,g)}}v(a,"~standard",()=>({validate:b=>{try{let c=aD(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return aF(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}))}),b6=c("$ZodString",(a,b)=>{b5.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??bm(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),b7=c("$ZodStringFormat",(a,b)=>{bU.init(a,b),b6.init(a,b)}),b8=c("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=a1),b7.init(a,b)}),b9=c("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=a2(a))}else b.pattern??(b.pattern=a2());b7.init(a,b)}),ca=c("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=a6),b7.init(a,b)}),cb=c("$ZodURL",(a,b)=>{b7.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:b.hostname.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),cc=c("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=a8()),b7.init(a,b)}),cd=c("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=a_),b7.init(a,b)}),ce=c("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=aW),b7.init(a,b)}),cf=c("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=aX),b7.init(a,b)}),cg=c("$ZodULID",(a,b)=>{b.pattern??(b.pattern=aY),b7.init(a,b)}),ch=c("$ZodXID",(a,b)=>{b.pattern??(b.pattern=aZ),b7.init(a,b)}),ci=c("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=a$),b7.init(a,b)}),cj=c("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=bl(b)),b7.init(a,b)}),ck=c("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=bi),b7.init(a,b)}),cl=c("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=bk(b)),b7.init(a,b)}),cm=c("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=a0),b7.init(a,b)}),cn=c("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=a9),b7.init(a,b),a._zod.bag.format="ipv4"}),co=c("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=ba),b7.init(a,b),a._zod.bag.format="ipv6",a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),cp=c("$ZodMAC",(a,b)=>{b.pattern??(b.pattern=bb(b.delimiter)),b7.init(a,b),a._zod.bag.format="mac"}),cq=c("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=bc),b7.init(a,b)}),cr=c("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=bd),b7.init(a,b),a._zod.check=c=>{let d=c.value.split("/");try{if(2!==d.length)throw Error();let[a,b]=d;if(!b)throw Error();let c=Number(b);if(`${c}`!==b||c<0||c>128)throw Error();new URL(`http://[${a}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function cs(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let ct=c("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=be),b7.init(a,b),a._zod.bag.contentEncoding="base64",a._zod.check=c=>{cs(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}});function cu(a){if(!bf.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return cs(b.padEnd(4*Math.ceil(b.length/4),"="))}let cv=c("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=bf),b7.init(a,b),a._zod.bag.contentEncoding="base64url",a._zod.check=c=>{cu(c.value)||c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),cw=c("$ZodE164",(a,b)=>{b.pattern??(b.pattern=bg),b7.init(a,b)});function cx(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}let cy=c("$ZodJWT",(a,b)=>{b7.init(a,b),a._zod.check=c=>{cx(c.value,b.alg)||c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),cz=c("$ZodCustomStringFormat",(a,b)=>{b7.init(a,b),a._zod.check=c=>{b.fn(c.value)||c.issues.push({code:"invalid_format",format:b.format,input:c.value,inst:a,continue:!b.abort})}}),cA=c("$ZodNumber",(a,b)=>{b5.init(a,b),a._zod.pattern=a._zod.bag.pattern??bp,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),cB=c("$ZodNumberFormat",(a,b)=>{bM.init(a,b),cA.init(a,b)}),cC=c("$ZodBoolean",(a,b)=>{b5.init(a,b),a._zod.pattern=bq,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),cD=c("$ZodBigInt",(a,b)=>{b5.init(a,b),a._zod.pattern=bn,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=BigInt(c.value)}catch(a){}return"bigint"==typeof c.value||c.issues.push({expected:"bigint",code:"invalid_type",input:c.value,inst:a}),c}}),cE=c("$ZodBigIntFormat",(a,b)=>{bN.init(a,b),cD.init(a,b)}),cF=c("$ZodSymbol",(a,b)=>{b5.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return"symbol"==typeof d||b.issues.push({expected:"symbol",code:"invalid_type",input:d,inst:a}),b}}),cG=c("$ZodUndefined",(a,b)=>{b5.init(a,b),a._zod.pattern=bs,a._zod.values=new Set([void 0]),a._zod.optin="optional",a._zod.optout="optional",a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"undefined",code:"invalid_type",input:d,inst:a}),b}}),cH=c("$ZodNull",(a,b)=>{b5.init(a,b),a._zod.pattern=br,a._zod.values=new Set([null]),a._zod.parse=(b,c)=>{let d=b.value;return null===d||b.issues.push({expected:"null",code:"invalid_type",input:d,inst:a}),b}}),cI=c("$ZodAny",(a,b)=>{b5.init(a,b),a._zod.parse=a=>a}),cJ=c("$ZodUnknown",(a,b)=>{b5.init(a,b),a._zod.parse=a=>a}),cK=c("$ZodNever",(a,b)=>{b5.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)}),cL=c("$ZodVoid",(a,b)=>{b5.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"void",code:"invalid_type",input:d,inst:a}),b}}),cM=c("$ZodDate",(a,b)=>{b5.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}});function cN(a,b,c){a.issues.length&&b.issues.push(...ab(c,a.issues)),b.value[c]=a.value}let cO=c("$ZodArray",(a,b)=>{b5.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>cN(b,c,a))):cN(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function cP(a,b,c,d,e){if(a.issues.length){if(e&&!(c in d))return;b.issues.push(...ab(c,a.issues))}void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}function cQ(a){let b=Object.keys(a.shape);for(let c of b)if(!a.shape?.[c]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=S(a.shape);return{...a,keys:b,keySet:new Set(b),numKeys:b.length,optionalKeys:new Set(c)}}function cR(a,b,c,d,e,f){let g=[],h=e.keySet,i=e.catchall._zod,j=i.def.type,k="optional"===i.optout;for(let e in b){if(h.has(e))continue;if("never"===j){g.push(e);continue}let f=i.run({value:b[e],issues:[]},d);f instanceof Promise?a.push(f.then(a=>cP(a,c,e,b,k))):cP(f,c,e,b,k)}return(g.length&&c.issues.push({code:"unrecognized_keys",keys:g,input:b,inst:f}),a.length)?Promise.all(a).then(()=>c):c}let cS=c("$ZodObject",(a,b)=>{let c;b5.init(a,b);let d=Object.getOwnPropertyDescriptor(b,"shape");if(!d?.get){let a=b.shape;Object.defineProperty(b,"shape",{get:()=>{let c={...a};return Object.defineProperty(b,"shape",{value:c}),c}})}let e=q(()=>cQ(b));v(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=b.catchall;a._zod.parse=(b,d)=>{c??(c=e.value);let g=b.value;if(!G(g))return b.issues.push({expected:"object",code:"invalid_type",input:g,inst:a}),b;b.value={};let h=[],i=c.shape;for(let a of c.keys){let c=i[a],e="optional"===c._zod.optout,f=c._zod.run({value:g[a],issues:[]},d);f instanceof Promise?h.push(f.then(c=>cP(c,b,a,g,e))):cP(f,b,a,g,e)}return f?cR(h,g,b,d,e.value,a):h.length?Promise.all(h).then(()=>b):b}}),cT=c("$ZodObjectJIT",(a,b)=>{let c,d;cS.init(a,b);let e=a._zod.parse,f=q(()=>cQ(b)),h=!g.jitless,i=h&&H.value,j=b.catchall;a._zod.parse=(g,k)=>{d??(d=f.value);let l=g.value;return G(l)?h&&i&&k?.async===!1&&!0!==k.jitless?(c||(c=(a=>{let b=new b3(["shape","payload","ctx"]),c=f.value,d=a=>{let b=D(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let e=Object.create(null),g=0;for(let a of c.keys)e[a]=`key_${g++}`;for(let f of(b.write("const newResult = {};"),c.keys)){let c=e[f],g=D(f),h=a[f],i=h?._zod?.optout==="optional";b.write(`const ${c} = ${d(f)};`),i?b.write(`
        if (${c}.issues.length) {
          if (${g} in input) {
            payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${g}, ...iss.path] : [${g}]
            })));
          }
        }
        
        if (${c}.value === undefined) {
          if (${g} in input) {
            newResult[${g}] = undefined;
          }
        } else {
          newResult[${g}] = ${c}.value;
        }
        
      `):b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${g}, ...iss.path] : [${g}]
          })));
        }
        
        if (${c}.value === undefined) {
          if (${g} in input) {
            newResult[${g}] = undefined;
          }
        } else {
          newResult[${g}] = ${c}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),g=c(g,k),j)?cR([],l,g,k,d,a):g:e(g,k):(g.issues.push({expected:"object",code:"invalid_type",input:l,inst:a}),g)}});function cU(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!aa(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>ad(a,d,h())))}),b)}let cV=c("$ZodUnion",(a,b)=>{b5.init(a,b),v(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),v(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),v(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),v(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>s(a.source)).join("|")})$`)}});let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);if(b instanceof Promise)h.push(b),g=!0;else{if(0===b.issues.length)return b;h.push(b)}}return g?Promise.all(h).then(b=>cU(b,e,a,f)):cU(h,e,a,f)}});function cW(a,b,c,d){let e=a.filter(a=>0===a.issues.length);return 1===e.length?b.value=e[0].value:0===e.length?b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>ad(a,d,h())))}):b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:[],inclusive:!1}),b}let cX=c("$ZodXor",(a,b)=>{cV.init(a,b),b.inclusive=!1;let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);b instanceof Promise?(h.push(b),g=!0):h.push(b)}return g?Promise.all(h).then(b=>cW(b,e,a,f)):cW(h,e,a,f)}}),cY=c("$ZodDiscriminatedUnion",(a,b)=>{b.inclusive=!1,cV.init(a,b);let c=a._zod.parse;v(a._zod,"propValues",()=>{let a={};for(let c of b.options){let d=c._zod.propValues;if(!d||0===Object.keys(d).length)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(c)}"`);for(let[b,c]of Object.entries(d))for(let d of(a[b]||(a[b]=new Set),c))a[b].add(d)}return a});let d=q(()=>{let a=b.options,c=new Map;for(let d of a){let a=d._zod.propValues?.[b.discriminator];if(!a||0===a.size)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(d)}"`);for(let b of a){if(c.has(b))throw Error(`Duplicate discriminator value "${String(b)}"`);c.set(b,d)}}return c});a._zod.parse=(e,f)=>{let g=e.value;if(!G(g))return e.issues.push({code:"invalid_type",expected:"object",input:g,inst:a}),e;let h=d.value.get(g?.[b.discriminator]);return h?h._zod.run(e,f):b.unionFallback?c(e,f):(e.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:b.discriminator,input:g,path:[b.discriminator],inst:a}),e)}}),cZ=c("$ZodIntersection",(a,b)=>{b5.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>c$(a,b,c)):c$(a,e,f)}});function c$(a,b,c){let d,e=new Map;for(let c of b.issues)if("unrecognized_keys"===c.code)for(let a of(d??(d=c),c.keys))e.has(a)||e.set(a,{}),e.get(a).l=!0;else a.issues.push(c);for(let b of c.issues)if("unrecognized_keys"===b.code)for(let a of b.keys)e.has(a)||e.set(a,{}),e.get(a).r=!0;else a.issues.push(b);let f=[...e].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(f.length&&d&&a.issues.push({...d,keys:f}),aa(a))return a;let g=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(I(b)&&I(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!g.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(g.mergeErrorPath)}`);return a.value=g.data,a}let c_=c("$ZodTuple",(a,b)=>{b5.init(a,b);let c=b.items;a._zod.parse=(d,e)=>{let f=d.value;if(!Array.isArray(f))return d.issues.push({input:f,inst:a,expected:"tuple",code:"invalid_type"}),d;d.value=[];let g=[],h=[...c].reverse().findIndex(a=>"optional"!==a._zod.optin),i=-1===h?0:c.length-h;if(!b.rest){let b=f.length>c.length,e=f.length<i-1;if(b||e)return d.issues.push({...b?{code:"too_big",maximum:c.length,inclusive:!0}:{code:"too_small",minimum:c.length},input:f,inst:a,origin:"array"}),d}let j=-1;for(let a of c){if(++j>=f.length&&j>=i)continue;let b=a._zod.run({value:f[j],issues:[]},e);b instanceof Promise?g.push(b.then(a=>c0(a,d,j))):c0(b,d,j)}if(b.rest)for(let a of f.slice(c.length)){j++;let c=b.rest._zod.run({value:a,issues:[]},e);c instanceof Promise?g.push(c.then(a=>c0(a,d,j))):c0(c,d,j)}return g.length?Promise.all(g).then(()=>d):d}});function c0(a,b,c){a.issues.length&&b.issues.push(...ab(c,a.issues)),b.value[c]=a.value}let c1=c("$ZodRecord",(a,b)=>{b5.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!I(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[],g=b.keyType._zod.values;if(g){let h;c.value={};let i=new Set;for(let a of g)if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){i.add("number"==typeof a?a.toString():a);let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...ab(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...ab(a,g.issues)),c.value[a]=g.value)}for(let a in e)i.has(a)||(h=h??[]).push(a);h&&h.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:h})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let i=b.keyType._zod.run({value:g,issues:[]},d);if(i instanceof Promise)throw Error("Async schemas not supported in object keys currently");if("string"==typeof g&&bp.test(g)&&i.issues.length&&i.issues.some(a=>"invalid_type"===a.code&&"number"===a.expected)){let a=b.keyType._zod.run({value:Number(g),issues:[]},d);if(a instanceof Promise)throw Error("Async schemas not supported in object keys currently");0===a.issues.length&&(i=a)}if(i.issues.length){"loose"===b.mode?c.value[g]=e[g]:c.issues.push({code:"invalid_key",origin:"record",issues:i.issues.map(a=>ad(a,d,h())),input:g,path:[g],inst:a});continue}let j=b.valueType._zod.run({value:e[g],issues:[]},d);j instanceof Promise?f.push(j.then(a=>{a.issues.length&&c.issues.push(...ab(g,a.issues)),c.value[i.value]=a.value})):(j.issues.length&&c.issues.push(...ab(g,j.issues)),c.value[i.value]=j.value)}return f.length?Promise.all(f).then(()=>c):c}}),c2=c("$ZodMap",(a,b)=>{b5.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Map))return c.issues.push({expected:"map",code:"invalid_type",input:e,inst:a}),c;let f=[];for(let[g,h]of(c.value=new Map,e)){let i=b.keyType._zod.run({value:g,issues:[]},d),j=b.valueType._zod.run({value:h,issues:[]},d);i instanceof Promise||j instanceof Promise?f.push(Promise.all([i,j]).then(([b,f])=>{c3(b,f,c,g,e,a,d)})):c3(i,j,c,g,e,a,d)}return f.length?Promise.all(f).then(()=>c):c}});function c3(a,b,c,d,e,f,g){a.issues.length&&(L.has(typeof d)?c.issues.push(...ab(d,a.issues)):c.issues.push({code:"invalid_key",origin:"map",input:e,inst:f,issues:a.issues.map(a=>ad(a,g,h()))})),b.issues.length&&(L.has(typeof d)?c.issues.push(...ab(d,b.issues)):c.issues.push({origin:"map",code:"invalid_element",input:e,inst:f,key:d,issues:b.issues.map(a=>ad(a,g,h()))})),c.value.set(a.value,b.value)}let c4=c("$ZodSet",(a,b)=>{b5.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Set))return c.issues.push({input:e,inst:a,expected:"set",code:"invalid_type"}),c;let f=[];for(let a of(c.value=new Set,e)){let e=b.valueType._zod.run({value:a,issues:[]},d);e instanceof Promise?f.push(e.then(a=>c5(a,c))):c5(e,c)}return f.length?Promise.all(f).then(()=>c):c}});function c5(a,b){a.issues.length&&b.issues.push(...a.issues),b.value.add(a.value)}let c6=c("$ZodEnum",(a,b)=>{b5.init(a,b);let c=n(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>L.has(typeof a)).map(a=>"string"==typeof a?N(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),c7=c("$ZodLiteral",(a,b)=>{if(b5.init(a,b),0===b.values.length)throw Error("Cannot create literal schema with no valid values");let c=new Set(b.values);a._zod.values=c,a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?N(a):a?N(a.toString()):String(a)).join("|")})$`),a._zod.parse=(d,e)=>{let f=d.value;return c.has(f)||d.issues.push({code:"invalid_value",values:b.values,input:f,inst:a}),d}}),c8=c("$ZodFile",(a,b)=>{b5.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return d instanceof File||b.issues.push({expected:"file",code:"invalid_type",input:d,inst:a}),b}}),c9=c("$ZodTransform",(a,b)=>{b5.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new f(a.constructor.name);let g=b.transform(c.value,c);if(d.async)return(g instanceof Promise?g:Promise.resolve(g)).then(a=>(c.value=a,c));if(g instanceof Promise)throw new e;return c.value=g,c}});function da(a,b){return a.issues.length&&void 0===b?{issues:[],value:void 0}:a}let db=c("$ZodOptional",(a,b)=>{b5.init(a,b),a._zod.optin="optional",a._zod.optout="optional",v(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),v(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${s(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>{if("optional"===b.innerType._zod.optin){let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>da(b,a.value)):da(d,a.value)}return void 0===a.value?a:b.innerType._zod.run(a,c)}}),dc=c("$ZodExactOptional",(a,b)=>{db.init(a,b),v(a._zod,"values",()=>b.innerType._zod.values),v(a._zod,"pattern",()=>b.innerType._zod.pattern),a._zod.parse=(a,c)=>b.innerType._zod.run(a,c)}),dd=c("$ZodNullable",(a,b)=>{b5.init(a,b),v(a._zod,"optin",()=>b.innerType._zod.optin),v(a._zod,"optout",()=>b.innerType._zod.optout),v(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${s(a.source)}|null)$`):void 0}),v(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),de=c("$ZodDefault",(a,b)=>{b5.init(a,b),a._zod.optin="optional",v(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>df(a,b)):df(d,b)}});function df(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let dg=c("$ZodPrefault",(a,b)=>{b5.init(a,b),a._zod.optin="optional",v(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>("backward"===c.direction||void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),dh=c("$ZodNonOptional",(a,b)=>{b5.init(a,b),v(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>di(b,a)):di(e,a)}});function di(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let dj=c("$ZodSuccess",(a,b)=>{b5.init(a,b),a._zod.parse=(a,c)=>{if("backward"===c.direction)throw new f("ZodSuccess");let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>(a.value=0===b.issues.length,a)):(a.value=0===d.issues.length,a)}}),dk=c("$ZodCatch",(a,b)=>{b5.init(a,b),v(a._zod,"optin",()=>b.innerType._zod.optin),v(a._zod,"optout",()=>b.innerType._zod.optout),v(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>ad(a,c,h()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>ad(a,c,h()))},input:a.value}),a.issues=[]),a)}}),dl=c("$ZodNaN",(a,b)=>{b5.init(a,b),a._zod.parse=(b,c)=>("number"==typeof b.value&&Number.isNaN(b.value)||b.issues.push({input:b.value,inst:a,expected:"nan",code:"invalid_type"}),b)}),dm=c("$ZodPipe",(a,b)=>{b5.init(a,b),v(a._zod,"values",()=>b.in._zod.values),v(a._zod,"optin",()=>b.in._zod.optin),v(a._zod,"optout",()=>b.out._zod.optout),v(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("backward"===c.direction){let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>dn(a,b.in,c)):dn(d,b.in,c)}let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>dn(a,b.out,c)):dn(d,b.out,c)}});function dn(a,b,c){return a.issues.length?(a.aborted=!0,a):b._zod.run({value:a.value,issues:a.issues},c)}let dp=c("$ZodCodec",(a,b)=>{b5.init(a,b),v(a._zod,"values",()=>b.in._zod.values),v(a._zod,"optin",()=>b.in._zod.optin),v(a._zod,"optout",()=>b.out._zod.optout),v(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("forward"===(c.direction||"forward")){let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>dq(a,b,c)):dq(d,b,c)}{let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>dq(a,b,c)):dq(d,b,c)}}});function dq(a,b,c){if(a.issues.length)return a.aborted=!0,a;if("forward"===(c.direction||"forward")){let d=b.transform(a.value,a);return d instanceof Promise?d.then(d=>dr(a,d,b.out,c)):dr(a,d,b.out,c)}{let d=b.reverseTransform(a.value,a);return d instanceof Promise?d.then(d=>dr(a,d,b.in,c)):dr(a,d,b.in,c)}}function dr(a,b,c,d){return a.issues.length?(a.aborted=!0,a):c._zod.run({value:b,issues:a.issues},d)}let ds=c("$ZodReadonly",(a,b)=>{b5.init(a,b),v(a._zod,"propValues",()=>b.innerType._zod.propValues),v(a._zod,"values",()=>b.innerType._zod.values),v(a._zod,"optin",()=>b.innerType?._zod?.optin),v(a._zod,"optout",()=>b.innerType?._zod?.optout),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(dt):dt(d)}});function dt(a){return a.value=Object.freeze(a.value),a}let du=c("$ZodTemplateLiteral",(a,b)=>{b5.init(a,b);let c=[];for(let a of b.parts)if("object"==typeof a&&null!==a){if(!a._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...a._zod.traits].shift()}`);let b=a._zod.pattern instanceof RegExp?a._zod.pattern.source:a._zod.pattern;if(!b)throw Error(`Invalid template literal part: ${a._zod.traits}`);let d=+!!b.startsWith("^"),e=b.endsWith("$")?b.length-1:b.length;c.push(b.slice(d,e))}else if(null===a||M.has(typeof a))c.push(N(`${a}`));else throw Error(`Invalid template literal part: ${a}`);a._zod.pattern=RegExp(`^${c.join("")}$`),a._zod.parse=(c,d)=>("string"!=typeof c.value?c.issues.push({input:c.value,inst:a,expected:"string",code:"invalid_type"}):(a._zod.pattern.lastIndex=0,a._zod.pattern.test(c.value)||c.issues.push({input:c.value,inst:a,code:"invalid_format",format:b.format??"template_literal",pattern:a._zod.pattern.source})),c)}),dv=c("$ZodFunction",(a,b)=>(b5.init(a,b),a._def=b,a._zod.def=b,a.implement=b=>{if("function"!=typeof b)throw Error("implement() must be called with a function");return function(...c){let d=Reflect.apply(b,this,a._def.input?az(a._def.input,c):c);return a._def.output?az(a._def.output,d):d}},a.implementAsync=b=>{if("function"!=typeof b)throw Error("implementAsync() must be called with a function");return async function(...c){let d=a._def.input?await aB(a._def.input,c):c,e=await Reflect.apply(b,this,d);return a._def.output?await aB(a._def.output,e):e}},a._zod.parse=(b,c)=>("function"!=typeof b.value?b.issues.push({code:"invalid_type",expected:"function",input:b.value,inst:a}):a._def.output&&"promise"===a._def.output._zod.def.type?b.value=a.implementAsync(b.value):b.value=a.implement(b.value),b),a.input=(...b)=>{let c=a.constructor;return new c(Array.isArray(b[0])?{type:"function",input:new c_({type:"tuple",items:b[0],rest:b[1]}),output:a._def.output}:{type:"function",input:b[0],output:a._def.output})},a.output=b=>new a.constructor({type:"function",input:a._def.input,output:b}),a)),dw=c("$ZodPromise",(a,b)=>{b5.init(a,b),a._zod.parse=(a,c)=>Promise.resolve(a.value).then(a=>b.innerType._zod.run({value:a,issues:[]},c))}),dx=c("$ZodLazy",(a,b)=>{b5.init(a,b),v(a._zod,"innerType",()=>b.getter()),v(a._zod,"pattern",()=>a._zod.innerType?._zod?.pattern),v(a._zod,"propValues",()=>a._zod.innerType?._zod?.propValues),v(a._zod,"optin",()=>a._zod.innerType?._zod?.optin??void 0),v(a._zod,"optout",()=>a._zod.innerType?._zod?.optout??void 0),a._zod.parse=(b,c)=>a._zod.innerType._zod.run(b,c)}),dy=c("$ZodCustom",(a,b)=>{bH.init(a,b),b5.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>dz(b,c,d,a));dz(e,c,d,a)}});function dz(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(ah(a))}}function dA(a,b,c,d){let e=Math.abs(a),f=e%10,g=e%100;return g>=11&&g<=19?d:1===f?b:f>=2&&f<=4?c:d}function dB(){let a,b,c;return{localeError:(a={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;return`Invalid input: expected ${a}, received ${e}`}case"invalid_value":if(1===d.values.length)return`Invalid input: expected ${R(d.values[0])}`;return`Invalid option: expected one of ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Too big: expected ${d.origin??"value"} to have ${b}${d.maximum.toString()} ${c.unit??"elements"}`;return`Too big: expected ${d.origin??"value"} to be ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Too small: expected ${d.origin} to have ${b}${d.minimum.toString()} ${c.unit}`;return`Too small: expected ${d.origin} to be ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Invalid string: must start with "${d.prefix}"`;if("ends_with"===d.format)return`Invalid string: must end with "${d.suffix}"`;if("includes"===d.format)return`Invalid string: must include "${d.includes}"`;if("regex"===d.format)return`Invalid string: must match pattern ${d.pattern}`;return`Invalid ${b[d.format]??d.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${d.divisor}`;case"unrecognized_keys":return`Unrecognized key${d.keys.length>1?"s":""}: ${o(d.keys,", ")}`;case"invalid_key":return`Invalid key in ${d.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${d.origin}`}})}}function dC(a,b,c){return 1===Math.abs(a)?b:c}function dD(a){if(!a)return"";let b=a[a.length-1];return a+(["","","","","","",""].includes(b)?"":"")}function dE(){let a,b,c;return{localeError:(a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:" (Array)",null:" (null)"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`  instanceof ${d.expected}  ${e}`;return`  ${a}  ${e}`}case"invalid_value":if(1===d.values.length)return`  ${R(d.values[0])}`;return`  ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`  ${d.origin??""} ${b} ${d.maximum.toString()} ${c.unit??""}`;return`  ${d.origin??""} ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`  ${d.origin} ${b} ${d.minimum.toString()} ${c.unit}`;return`  ${d.origin} ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`  "${d.prefix}"`;if("ends_with"===d.format)return`  "${d.suffix}"`;if("includes"===d.format)return`  "${d.includes}"`;if("regex"===d.format)return`  ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return`  ${d.divisor}`;case"unrecognized_keys":return` ${o(d.keys,", ")}`;case"invalid_key":return` ${d.origin}`;case"invalid_union":default:return``;case"invalid_element":return` ${d.origin}`}})}}a.s(["$ZodAny",0,cI,"$ZodArray",0,cO,"$ZodBase64",0,ct,"$ZodBase64URL",0,cv,"$ZodBigInt",0,cD,"$ZodBigIntFormat",0,cE,"$ZodBoolean",0,cC,"$ZodCIDRv4",0,cq,"$ZodCIDRv6",0,cr,"$ZodCUID",0,ce,"$ZodCUID2",0,cf,"$ZodCatch",0,dk,"$ZodCodec",0,dp,"$ZodCustom",0,dy,"$ZodCustomStringFormat",0,cz,"$ZodDate",0,cM,"$ZodDefault",0,de,"$ZodDiscriminatedUnion",0,cY,"$ZodE164",0,cw,"$ZodEmail",0,ca,"$ZodEmoji",0,cc,"$ZodEnum",0,c6,"$ZodExactOptional",0,dc,"$ZodFile",0,c8,"$ZodFunction",0,dv,"$ZodGUID",0,b8,"$ZodIPv4",0,cn,"$ZodIPv6",0,co,"$ZodISODate",0,ck,"$ZodISODateTime",0,cj,"$ZodISODuration",0,cm,"$ZodISOTime",0,cl,"$ZodIntersection",0,cZ,"$ZodJWT",0,cy,"$ZodKSUID",0,ci,"$ZodLazy",0,dx,"$ZodLiteral",0,c7,"$ZodMAC",0,cp,"$ZodMap",0,c2,"$ZodNaN",0,dl,"$ZodNanoID",0,cd,"$ZodNever",0,cK,"$ZodNonOptional",0,dh,"$ZodNull",0,cH,"$ZodNullable",0,dd,"$ZodNumber",0,cA,"$ZodNumberFormat",0,cB,"$ZodObject",0,cS,"$ZodObjectJIT",0,cT,"$ZodOptional",0,db,"$ZodPipe",0,dm,"$ZodPrefault",0,dg,"$ZodPromise",0,dw,"$ZodReadonly",0,ds,"$ZodRecord",0,c1,"$ZodSet",0,c4,"$ZodString",0,b6,"$ZodStringFormat",0,b7,"$ZodSuccess",0,dj,"$ZodSymbol",0,cF,"$ZodTemplateLiteral",0,du,"$ZodTransform",0,c9,"$ZodTuple",0,c_,"$ZodType",0,b5,"$ZodULID",0,cg,"$ZodURL",0,cb,"$ZodUUID",0,b9,"$ZodUndefined",0,cG,"$ZodUnion",0,cV,"$ZodUnknown",0,cJ,"$ZodVoid",0,cL,"$ZodXID",0,ch,"$ZodXor",0,cX,"isValidBase64",()=>cs,"isValidBase64URL",()=>cu,"isValidJWT",()=>cx],584516);let dF=a=>a.charAt(0).toUpperCase()+a.slice(1);function dG(a){let b=Math.abs(a),c=b%10,d=b%100;return d>=11&&d<=19||0===c?"many":1===c?"one":"few"}function dH(a,b,c,d){let e=Math.abs(a),f=e%10,g=e%100;return g>=11&&g<=19?d:1===f?b:f>=2&&f<=4?c:d}function dI(){let a,b,c;return{localeError:(a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "},c={nan:"NaN",number:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`  :  instanceof ${d.expected},  ${e}`;return`  :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return`  :  ${R(d.values[0])}`;return` :    ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` : ,  ${d.origin??""} ${c.verb} ${b}${d.maximum.toString()} ${c.unit??""}`;return` : ,  ${d.origin??""}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` : ,  ${d.origin} ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return` : ,  ${d.origin}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :    "${d.prefix}"`;if("ends_with"===d.format)return` :    "${d.suffix}"`;if("includes"===d.format)return` :   "${d.includes}"`;if("regex"===d.format)return` :    ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` :    ${d.divisor}`;case"unrecognized_keys":return` ${d.keys.length>1?"":""}: ${o(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${d.origin}`;default:return`  `}})}}a.s([],394551);let dJ=Symbol("ZodOutput"),dK=Symbol("ZodInput");class dL{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];return this._map.set(a,c),c&&"object"==typeof c&&"id"in c&&this._idmap.set(c.id,a),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function dM(){return new dL}(gm=globalThis).__zod_globalRegistry??(gm.__zod_globalRegistry=dM());let dN=globalThis.__zod_globalRegistry;function dO(a,b){return new a({type:"string",...P(b)})}function dP(a,b){return new a({type:"string",coerce:!0,...P(b)})}function dQ(a,b){return new a({type:"string",format:"email",check:"string_format",abort:!1,...P(b)})}function dR(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...P(b)})}function dS(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,...P(b)})}function dT(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...P(b)})}function dU(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...P(b)})}function dV(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...P(b)})}function dW(a,b){return new a({type:"string",format:"url",check:"string_format",abort:!1,...P(b)})}function dX(a,b){return new a({type:"string",format:"emoji",check:"string_format",abort:!1,...P(b)})}function dY(a,b){return new a({type:"string",format:"nanoid",check:"string_format",abort:!1,...P(b)})}function dZ(a,b){return new a({type:"string",format:"cuid",check:"string_format",abort:!1,...P(b)})}function d$(a,b){return new a({type:"string",format:"cuid2",check:"string_format",abort:!1,...P(b)})}function d_(a,b){return new a({type:"string",format:"ulid",check:"string_format",abort:!1,...P(b)})}function d0(a,b){return new a({type:"string",format:"xid",check:"string_format",abort:!1,...P(b)})}function d1(a,b){return new a({type:"string",format:"ksuid",check:"string_format",abort:!1,...P(b)})}function d2(a,b){return new a({type:"string",format:"ipv4",check:"string_format",abort:!1,...P(b)})}function d3(a,b){return new a({type:"string",format:"ipv6",check:"string_format",abort:!1,...P(b)})}function d4(a,b){return new a({type:"string",format:"mac",check:"string_format",abort:!1,...P(b)})}function d5(a,b){return new a({type:"string",format:"cidrv4",check:"string_format",abort:!1,...P(b)})}function d6(a,b){return new a({type:"string",format:"cidrv6",check:"string_format",abort:!1,...P(b)})}function d7(a,b){return new a({type:"string",format:"base64",check:"string_format",abort:!1,...P(b)})}function d8(a,b){return new a({type:"string",format:"base64url",check:"string_format",abort:!1,...P(b)})}function d9(a,b){return new a({type:"string",format:"e164",check:"string_format",abort:!1,...P(b)})}function ea(a,b){return new a({type:"string",format:"jwt",check:"string_format",abort:!1,...P(b)})}a.s(["$ZodRegistry",()=>dL,"$input",0,dK,"$output",0,dJ,"globalRegistry",0,dN,"registry",()=>dM],64166);let eb={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function ec(a,b){return new a({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...P(b)})}function ed(a,b){return new a({type:"string",format:"date",check:"string_format",...P(b)})}function ee(a,b){return new a({type:"string",format:"time",check:"string_format",precision:null,...P(b)})}function ef(a,b){return new a({type:"string",format:"duration",check:"string_format",...P(b)})}function eg(a,b){return new a({type:"number",checks:[],...P(b)})}function eh(a,b){return new a({type:"number",coerce:!0,checks:[],...P(b)})}function ei(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"safeint",...P(b)})}function ej(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"float32",...P(b)})}function ek(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"float64",...P(b)})}function el(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"int32",...P(b)})}function em(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"uint32",...P(b)})}function en(a,b){return new a({type:"boolean",...P(b)})}function eo(a,b){return new a({type:"boolean",coerce:!0,...P(b)})}function ep(a,b){return new a({type:"bigint",...P(b)})}function eq(a,b){return new a({type:"bigint",coerce:!0,...P(b)})}function er(a,b){return new a({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...P(b)})}function es(a,b){return new a({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...P(b)})}function et(a,b){return new a({type:"symbol",...P(b)})}function eu(a,b){return new a({type:"undefined",...P(b)})}function ev(a,b){return new a({type:"null",...P(b)})}function ew(a){return new a({type:"any"})}function ex(a){return new a({type:"unknown"})}function ey(a,b){return new a({type:"never",...P(b)})}function ez(a,b){return new a({type:"void",...P(b)})}function eA(a,b){return new a({type:"date",...P(b)})}function eB(a,b){return new a({type:"date",coerce:!0,...P(b)})}function eC(a,b){return new a({type:"nan",...P(b)})}function eD(a,b){return new bJ({check:"less_than",...P(b),value:a,inclusive:!1})}function eE(a,b){return new bJ({check:"less_than",...P(b),value:a,inclusive:!0})}function eF(a,b){return new bK({check:"greater_than",...P(b),value:a,inclusive:!1})}function eG(a,b){return new bK({check:"greater_than",...P(b),value:a,inclusive:!0})}function eH(a){return eF(0,a)}function eI(a){return eD(0,a)}function eJ(a){return eE(0,a)}function eK(a){return eG(0,a)}function eL(a,b){return new bL({check:"multiple_of",...P(b),value:a})}function eM(a,b){return new bO({check:"max_size",...P(b),maximum:a})}function eN(a,b){return new bP({check:"min_size",...P(b),minimum:a})}function eO(a,b){return new bQ({check:"size_equals",...P(b),size:a})}function eP(a,b){return new bR({check:"max_length",...P(b),maximum:a})}function eQ(a,b){return new bS({check:"min_length",...P(b),minimum:a})}function eR(a,b){return new bT({check:"length_equals",...P(b),length:a})}function eS(a,b){return new bV({check:"string_format",format:"regex",...P(b),pattern:a})}function eT(a){return new bW({check:"string_format",format:"lowercase",...P(a)})}function eU(a){return new bX({check:"string_format",format:"uppercase",...P(a)})}function eV(a,b){return new bY({check:"string_format",format:"includes",...P(b),includes:a})}function eW(a,b){return new bZ({check:"string_format",format:"starts_with",...P(b),prefix:a})}function eX(a,b){return new b$({check:"string_format",format:"ends_with",...P(b),suffix:a})}function eY(a,b,c){return new b0({check:"property",property:a,schema:b,...P(c)})}function eZ(a,b){return new b1({check:"mime_type",mime:a,...P(b)})}function e$(a){return new b2({check:"overwrite",tx:a})}function e_(a){return e$(b=>b.normalize(a))}function e0(){return e$(a=>a.trim())}function e1(){return e$(a=>a.toLowerCase())}function e2(){return e$(a=>a.toUpperCase())}function e3(){return e$(a=>E(a))}function e4(a,b,c){return new a({type:"array",element:b,...P(c)})}function e5(a,b,c){return new a({type:"union",options:b,...P(c)})}function e6(a,b,c){return new a({type:"union",options:b,inclusive:!1,...P(c)})}function e7(a,b,c,d){return new a({type:"union",options:c,discriminator:b,...P(d)})}function e8(a,b,c){return new a({type:"intersection",left:b,right:c})}function e9(a,b,c,d){let e=c instanceof b5,f=e?d:c;return new a({type:"tuple",items:b,rest:e?c:null,...P(f)})}function fa(a,b,c,d){return new a({type:"record",keyType:b,valueType:c,...P(d)})}function fb(a,b,c,d){return new a({type:"map",keyType:b,valueType:c,...P(d)})}function fc(a,b,c){return new a({type:"set",valueType:b,...P(c)})}function fd(a,b,c){return new a({type:"enum",entries:Array.isArray(b)?Object.fromEntries(b.map(a=>[a,a])):b,...P(c)})}function fe(a,b,c){return new a({type:"enum",entries:b,...P(c)})}function ff(a,b,c){return new a({type:"literal",values:Array.isArray(b)?b:[b],...P(c)})}function fg(a,b){return new a({type:"file",...P(b)})}function fh(a,b){return new a({type:"transform",transform:b})}function fi(a,b){return new a({type:"optional",innerType:b})}function fj(a,b){return new a({type:"nullable",innerType:b})}function fk(a,b,c){return new a({type:"default",innerType:b,get defaultValue(){return"function"==typeof c?c():J(c)}})}function fl(a,b,c){return new a({type:"nonoptional",innerType:b,...P(c)})}function fm(a,b){return new a({type:"success",innerType:b})}function fn(a,b,c){return new a({type:"catch",innerType:b,catchValue:"function"==typeof c?c:()=>c})}function fo(a,b,c){return new a({type:"pipe",in:b,out:c})}function fp(a,b){return new a({type:"readonly",innerType:b})}function fq(a,b,c){return new a({type:"template_literal",parts:b,...P(c)})}function fr(a,b){return new a({type:"lazy",getter:b})}function fs(a,b){return new a({type:"promise",innerType:b})}function ft(a,b,c){let d=P(c);return d.abort??(d.abort=!0),new a({type:"custom",check:"custom",fn:b,...d})}function fu(a,b,c){return new a({type:"custom",check:"custom",fn:b,...P(c)})}function fv(a){let b=fw(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(ah(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(ah(a)))},a(c.value,c)));return b}function fw(a,b){let c=new bH({check:"custom",...P(b)});return c._zod.check=a,c}function fx(a){let b=new bH({check:"describe"});return b._zod.onattach=[b=>{let c=dN.get(b)??{};dN.add(b,{...c,description:a})}],b._zod.check=()=>{},b}function fy(a){let b=new bH({check:"meta"});return b._zod.onattach=[b=>{let c=dN.get(b)??{};dN.add(b,{...c,...a})}],b._zod.check=()=>{},b}function fz(a,b){let c=P(b),d=c.truthy??["true","1","yes","on","y","enabled"],e=c.falsy??["false","0","no","off","n","disabled"];"sensitive"!==c.case&&(d=d.map(a=>"string"==typeof a?a.toLowerCase():a),e=e.map(a=>"string"==typeof a?a.toLowerCase():a));let f=new Set(d),g=new Set(e),h=a.Codec??dp,i=a.Boolean??cC,j=new h({type:"pipe",in:new(a.String??b6)({type:"string",error:c.error}),out:new i({type:"boolean",error:c.error}),transform:(a,b)=>{let d=a;return"sensitive"!==c.case&&(d=d.toLowerCase()),!!f.has(d)||!g.has(d)&&(b.issues.push({code:"invalid_value",expected:"stringbool",values:[...f,...g],input:b.value,inst:j,continue:!1}),{})},reverseTransform:(a,b)=>!0===a?d[0]||"true":e[0]||"false",error:c.error});return j}function fA(a,b,c,d={}){let e=P(d),f={...P(d),check:"string_format",type:"string",format:b,fn:"function"==typeof c?c:a=>c.test(a),...e};return c instanceof RegExp&&(f.pattern=c),new a(f)}function fB(a){let b=a?.target??"draft-2020-12";return"draft-4"===b&&(b="draft-04"),"draft-7"===b&&(b="draft-07"),{processors:a.processors??{},metadataRegistry:a?.metadata??dN,target:b,unrepresentable:a?.unrepresentable??"throw",override:a?.override??(()=>{}),io:a?.io??"output",counter:0,seen:new Map,cycles:a?.cycles??"ref",reused:a?.reused??"inline",external:a?.external??void 0}}function fC(a,b,c={path:[],schemaPath:[]}){var d;let e=a._zod.def,f=b.seen.get(a);if(f)return f.count++,c.schemaPath.includes(a)&&(f.cycle=c.path),f.schema;let g={schema:{},count:1,cycle:void 0,path:c.path};b.seen.set(a,g);let h=a._zod.toJSONSchema?.();if(h)g.schema=h;else{let d={...c,schemaPath:[...c.schemaPath,a],path:c.path};if(a._zod.processJSONSchema)a._zod.processJSONSchema(b,g.schema,d);else{let c=g.schema,f=b.processors[e.type];if(!f)throw Error(`[toJSONSchema]: Non-representable type encountered: ${e.type}`);f(a,b,c,d)}let f=a._zod.parent;f&&(g.ref||(g.ref=f),fC(f,b,d),b.seen.get(f).isParent=!0)}let i=b.metadataRegistry.get(a);return i&&Object.assign(g.schema,i),"input"===b.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;if("transform"===e.type)return!0;if("array"===e.type)return a(e.element,d);if("set"===e.type)return a(e.valueType,d);if("lazy"===e.type)return a(e.getter(),d);if("promise"===e.type||"optional"===e.type||"nonoptional"===e.type||"nullable"===e.type||"readonly"===e.type||"default"===e.type||"prefault"===e.type)return a(e.innerType,d);if("intersection"===e.type)return a(e.left,d)||a(e.right,d);if("record"===e.type||"map"===e.type)return a(e.keyType,d)||a(e.valueType,d);if("pipe"===e.type)return a(e.in,d)||a(e.out,d);if("object"===e.type){for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1}if("union"===e.type){for(let b of e.options)if(a(b,d))return!0;return!1}if("tuple"===e.type){for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0}return!1}(a)&&(delete g.schema.examples,delete g.schema.default),"input"===b.io&&g.schema._prefault&&((d=g.schema).default??(d.default=g.schema._prefault)),delete g.schema._prefault,b.seen.get(a).schema}function fD(a,b){let c=a.seen.get(b);if(!c)throw Error("Unprocessed schema. This is a bug in Zod.");let d=new Map;for(let b of a.seen.entries()){let c=a.metadataRegistry.get(b[0])?.id;if(c){let a=d.get(c);if(a&&a!==b[0])throw Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);d.set(c,b[0])}}let e=b=>{if(b[1].schema.$ref)return;let d=b[1],{ref:e,defId:f}=(b=>{let d="draft-2020-12"===a.target?"$defs":"definitions";if(a.external){let c=a.external.registry.get(b[0])?.id,e=a.external.uri??(a=>a);if(c)return{ref:e(c)};let f=b[1].defId??b[1].schema.id??`schema${a.counter++}`;return b[1].defId=f,{defId:f,ref:`${e("__shared")}#/${d}/${f}`}}if(b[1]===c)return{ref:"#"};let e=`#/${d}/`,f=b[1].schema.id??`__schema${a.counter++}`;return{defId:f,ref:e+f}})(b);d.def={...d.schema},f&&(d.defId=f);let g=d.schema;for(let a in g)delete g[a];g.$ref=e};if("throw"===a.cycles)for(let b of a.seen.entries()){let a=b[1];if(a.cycle)throw Error(`Cycle detected: #/${a.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let c of a.seen.entries()){let d=c[1];if(b===c[0]){e(c);continue}if(a.external){let d=a.external.registry.get(c[0])?.id;if(b!==c[0]&&d){e(c);continue}}if(a.metadataRegistry.get(c[0])?.id||d.cycle||d.count>1&&"ref"===a.reused){e(c);continue}}}function fE(a,b){let c=a.seen.get(b);if(!c)throw Error("Unprocessed schema. This is a bug in Zod.");let d=b=>{let c=a.seen.get(b);if(null===c.ref)return;let e=c.def??c.schema,f={...e},g=c.ref;if(c.ref=null,g){d(g);let c=a.seen.get(g),h=c.schema;if(h.$ref&&("draft-07"===a.target||"draft-04"===a.target||"openapi-3.0"===a.target)?(e.allOf=e.allOf??[],e.allOf.push(h)):Object.assign(e,h),Object.assign(e,f),b._zod.parent===g)for(let a in e)"$ref"!==a&&"allOf"!==a&&(a in f||delete e[a]);if(h.$ref)for(let a in e)"$ref"!==a&&"allOf"!==a&&a in c.def&&JSON.stringify(e[a])===JSON.stringify(c.def[a])&&delete e[a]}let h=b._zod.parent;if(h&&h!==g){d(h);let b=a.seen.get(h);if(b?.schema.$ref&&(e.$ref=b.schema.$ref,b.def))for(let a in e)"$ref"!==a&&"allOf"!==a&&a in b.def&&JSON.stringify(e[a])===JSON.stringify(b.def[a])&&delete e[a]}a.override({zodSchema:b,jsonSchema:e,path:c.path??[]})};for(let b of[...a.seen.entries()].reverse())d(b[0]);let e={};if("draft-2020-12"===a.target?e.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===a.target?e.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===a.target?e.$schema="http://json-schema.org/draft-04/schema#":a.target,a.external?.uri){let c=a.external.registry.get(b)?.id;if(!c)throw Error("Schema is missing an `id` property");e.$id=a.external.uri(c)}Object.assign(e,c.def??c.schema);let f=a.external?.defs??{};for(let b of a.seen.entries()){let a=b[1];a.def&&a.defId&&(f[a.defId]=a.def)}a.external||Object.keys(f).length>0&&("draft-2020-12"===a.target?e.$defs=f:e.definitions=f);try{let c=JSON.parse(JSON.stringify(e));return Object.defineProperty(c,"~standard",{value:{...b["~standard"],jsonSchema:{input:fG(b,"input",a.processors),output:fG(b,"output",a.processors)}},enumerable:!1,writable:!1}),c}catch(a){throw Error("Error converting schema to JSON.")}}a.s(["TimePrecision",0,eb,"_any",()=>ew,"_array",()=>e4,"_base64",()=>d7,"_base64url",()=>d8,"_bigint",()=>ep,"_boolean",()=>en,"_catch",()=>fn,"_check",()=>fw,"_cidrv4",()=>d5,"_cidrv6",()=>d6,"_coercedBigint",()=>eq,"_coercedBoolean",()=>eo,"_coercedDate",()=>eB,"_coercedNumber",()=>eh,"_coercedString",()=>dP,"_cuid",()=>dZ,"_cuid2",()=>d$,"_custom",()=>ft,"_date",()=>eA,"_default",()=>fk,"_discriminatedUnion",()=>e7,"_e164",()=>d9,"_email",()=>dQ,"_emoji",()=>dX,"_endsWith",()=>eX,"_enum",()=>fd,"_file",()=>fg,"_float32",()=>ej,"_float64",()=>ek,"_gt",()=>eF,"_gte",()=>eG,"_guid",()=>dR,"_includes",()=>eV,"_int",()=>ei,"_int32",()=>el,"_int64",()=>er,"_intersection",()=>e8,"_ipv4",()=>d2,"_ipv6",()=>d3,"_isoDate",()=>ed,"_isoDateTime",()=>ec,"_isoDuration",()=>ef,"_isoTime",()=>ee,"_jwt",()=>ea,"_ksuid",()=>d1,"_lazy",()=>fr,"_length",()=>eR,"_literal",()=>ff,"_lowercase",()=>eT,"_lt",()=>eD,"_lte",()=>eE,"_mac",()=>d4,"_map",()=>fb,"_max",()=>eE,"_maxLength",()=>eP,"_maxSize",()=>eM,"_mime",()=>eZ,"_min",()=>eG,"_minLength",()=>eQ,"_minSize",()=>eN,"_multipleOf",()=>eL,"_nan",()=>eC,"_nanoid",()=>dY,"_nativeEnum",()=>fe,"_negative",()=>eI,"_never",()=>ey,"_nonnegative",()=>eK,"_nonoptional",()=>fl,"_nonpositive",()=>eJ,"_normalize",()=>e_,"_null",()=>ev,"_nullable",()=>fj,"_number",()=>eg,"_optional",()=>fi,"_overwrite",()=>e$,"_pipe",()=>fo,"_positive",()=>eH,"_promise",()=>fs,"_property",()=>eY,"_readonly",()=>fp,"_record",()=>fa,"_refine",()=>fu,"_regex",()=>eS,"_set",()=>fc,"_size",()=>eO,"_slugify",()=>e3,"_startsWith",()=>eW,"_string",()=>dO,"_stringFormat",()=>fA,"_stringbool",()=>fz,"_success",()=>fm,"_superRefine",()=>fv,"_symbol",()=>et,"_templateLiteral",()=>fq,"_toLowerCase",()=>e1,"_toUpperCase",()=>e2,"_transform",()=>fh,"_trim",()=>e0,"_tuple",()=>e9,"_uint32",()=>em,"_uint64",()=>es,"_ulid",()=>d_,"_undefined",()=>eu,"_union",()=>e5,"_unknown",()=>ex,"_uppercase",()=>eU,"_url",()=>dW,"_uuid",()=>dS,"_uuidv4",()=>dT,"_uuidv6",()=>dU,"_uuidv7",()=>dV,"_void",()=>ez,"_xid",()=>d0,"_xor",()=>e6,"describe",()=>fx,"meta",()=>fy],863571);let fF=(a,b={})=>c=>{let d=fB({...c,processors:b});return fC(a,d),fD(d,a),fE(d,a)},fG=(a,b,c={})=>d=>{let{libraryOptions:e,target:f}=d??{},g=fB({...e??{},target:f,io:b,processors:c});return fC(a,g),fD(g,a),fE(g,a)};a.s(["createStandardJSONSchemaMethod",0,fG,"createToJSONSchemaMethod",0,fF,"extractDefs",()=>fD,"finalize",()=>fE,"initializeContext",()=>fB,"process",()=>fC],776403);let fH={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},fI=(a,b,c,d)=>{c.type="string";let{minimum:e,maximum:f,format:g,patterns:h,contentEncoding:i}=a._zod.bag;if("number"==typeof e&&(c.minLength=e),"number"==typeof f&&(c.maxLength=f),g&&(c.format=fH[g]??g,""===c.format&&delete c.format,"time"===g&&delete c.format),i&&(c.contentEncoding=i),h&&h.size>0){let a=[...h];1===a.length?c.pattern=a[0].source:a.length>1&&(c.allOf=[...a.map(a=>({..."draft-07"===b.target||"draft-04"===b.target||"openapi-3.0"===b.target?{type:"string"}:{},pattern:a.source}))])}},fJ=(a,b,c,d)=>{let{minimum:e,maximum:f,format:g,multipleOf:h,exclusiveMaximum:i,exclusiveMinimum:j}=a._zod.bag;"string"==typeof g&&g.includes("int")?c.type="integer":c.type="number","number"==typeof j&&("draft-04"===b.target||"openapi-3.0"===b.target?(c.minimum=j,c.exclusiveMinimum=!0):c.exclusiveMinimum=j),"number"==typeof e&&(c.minimum=e,"number"==typeof j&&"draft-04"!==b.target&&(j>=e?delete c.minimum:delete c.exclusiveMinimum)),"number"==typeof i&&("draft-04"===b.target||"openapi-3.0"===b.target?(c.maximum=i,c.exclusiveMaximum=!0):c.exclusiveMaximum=i),"number"==typeof f&&(c.maximum=f,"number"==typeof i&&"draft-04"!==b.target&&(i<=f?delete c.maximum:delete c.exclusiveMaximum)),"number"==typeof h&&(c.multipleOf=h)},fK=(a,b,c,d)=>{c.type="boolean"},fL=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema")},fM=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema")},fN=(a,b,c,d)=>{"openapi-3.0"===b.target?(c.type="string",c.nullable=!0,c.enum=[null]):c.type="null"},fO=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema")},fP=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Void cannot be represented in JSON Schema")},fQ=(a,b,c,d)=>{c.not={}},fR=(a,b,c,d)=>{},fS=(a,b,c,d)=>{},fT=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Date cannot be represented in JSON Schema")},fU=(a,b,c,d)=>{let e=n(a._zod.def.entries);e.every(a=>"number"==typeof a)&&(c.type="number"),e.every(a=>"string"==typeof a)&&(c.type="string"),c.enum=e},fV=(a,b,c,d)=>{let e=a._zod.def,f=[];for(let a of e.values)if(void 0===a){if("throw"===b.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof a)if("throw"===b.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else f.push(Number(a));else f.push(a);if(0===f.length);else if(1===f.length){let a=f[0];c.type=null===a?"null":typeof a,"draft-04"===b.target||"openapi-3.0"===b.target?c.enum=[a]:c.const=a}else f.every(a=>"number"==typeof a)&&(c.type="number"),f.every(a=>"string"==typeof a)&&(c.type="string"),f.every(a=>"boolean"==typeof a)&&(c.type="boolean"),f.every(a=>null===a)&&(c.type="null"),c.enum=f},fW=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("NaN cannot be represented in JSON Schema")},fX=(a,b,c,d)=>{let e=a._zod.pattern;if(!e)throw Error("Pattern not found in template literal");c.type="string",c.pattern=e.source},fY=(a,b,c,d)=>{let e={type:"string",format:"binary",contentEncoding:"binary"},{minimum:f,maximum:g,mime:h}=a._zod.bag;void 0!==f&&(e.minLength=f),void 0!==g&&(e.maxLength=g),h?1===h.length?(e.contentMediaType=h[0],Object.assign(c,e)):(Object.assign(c,e),c.anyOf=h.map(a=>({contentMediaType:a}))):Object.assign(c,e)},fZ=(a,b,c,d)=>{c.type="boolean"},f$=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")},f_=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")},f0=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema")},f1=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Map cannot be represented in JSON Schema")},f2=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Set cannot be represented in JSON Schema")},f3=(a,b,c,d)=>{let e=a._zod.def,{minimum:f,maximum:g}=a._zod.bag;"number"==typeof f&&(c.minItems=f),"number"==typeof g&&(c.maxItems=g),c.type="array",c.items=fC(e.element,b,{...d,path:[...d.path,"items"]})},f4=(a,b,c,d)=>{let e=a._zod.def;c.type="object",c.properties={};let f=e.shape;for(let a in f)c.properties[a]=fC(f[a],b,{...d,path:[...d.path,"properties",a]});let g=new Set([...new Set(Object.keys(f))].filter(a=>{let c=e.shape[a]._zod;return"input"===b.io?void 0===c.optin:void 0===c.optout}));g.size>0&&(c.required=Array.from(g)),e.catchall?._zod.def.type==="never"?c.additionalProperties=!1:e.catchall?e.catchall&&(c.additionalProperties=fC(e.catchall,b,{...d,path:[...d.path,"additionalProperties"]})):"output"===b.io&&(c.additionalProperties=!1)},f5=(a,b,c,d)=>{let e=a._zod.def,f=!1===e.inclusive,g=e.options.map((a,c)=>fC(a,b,{...d,path:[...d.path,f?"oneOf":"anyOf",c]}));f?c.oneOf=g:c.anyOf=g},f6=(a,b,c,d)=>{let e=a._zod.def,f=fC(e.left,b,{...d,path:[...d.path,"allOf",0]}),g=fC(e.right,b,{...d,path:[...d.path,"allOf",1]}),h=a=>"allOf"in a&&1===Object.keys(a).length;c.allOf=[...h(f)?f.allOf:[f],...h(g)?g.allOf:[g]]},f7=(a,b,c,d)=>{let e=a._zod.def;c.type="array";let f="draft-2020-12"===b.target?"prefixItems":"items",g="draft-2020-12"===b.target||"openapi-3.0"===b.target?"items":"additionalItems",h=e.items.map((a,c)=>fC(a,b,{...d,path:[...d.path,f,c]})),i=e.rest?fC(e.rest,b,{...d,path:[...d.path,g,..."openapi-3.0"===b.target?[e.items.length]:[]]}):null;"draft-2020-12"===b.target?(c.prefixItems=h,i&&(c.items=i)):"openapi-3.0"===b.target?(c.items={anyOf:h},i&&c.items.anyOf.push(i),c.minItems=h.length,i||(c.maxItems=h.length)):(c.items=h,i&&(c.additionalItems=i));let{minimum:j,maximum:k}=a._zod.bag;"number"==typeof j&&(c.minItems=j),"number"==typeof k&&(c.maxItems=k)},f8=(a,b,c,d)=>{let e=a._zod.def;c.type="object";let f=e.keyType,g=f._zod.bag,h=g?.patterns;if("loose"===e.mode&&h&&h.size>0){let a=fC(e.valueType,b,{...d,path:[...d.path,"patternProperties","*"]});for(let b of(c.patternProperties={},h))c.patternProperties[b.source]=a}else("draft-07"===b.target||"draft-2020-12"===b.target)&&(c.propertyNames=fC(e.keyType,b,{...d,path:[...d.path,"propertyNames"]})),c.additionalProperties=fC(e.valueType,b,{...d,path:[...d.path,"additionalProperties"]});let i=f._zod.values;if(i){let a=[...i].filter(a=>"string"==typeof a||"number"==typeof a);a.length>0&&(c.required=a)}},f9=(a,b,c,d)=>{let e=a._zod.def,f=fC(e.innerType,b,d),g=b.seen.get(a);"openapi-3.0"===b.target?(g.ref=e.innerType,c.nullable=!0):c.anyOf=[f,{type:"null"}]},ga=(a,b,c,d)=>{let e=a._zod.def;fC(e.innerType,b,d),b.seen.get(a).ref=e.innerType},gb=(a,b,c,d)=>{let e=a._zod.def;fC(e.innerType,b,d),b.seen.get(a).ref=e.innerType,c.default=JSON.parse(JSON.stringify(e.defaultValue))},gc=(a,b,c,d)=>{let e=a._zod.def;fC(e.innerType,b,d),b.seen.get(a).ref=e.innerType,"input"===b.io&&(c._prefault=JSON.parse(JSON.stringify(e.defaultValue)))},gd=(a,b,c,d)=>{let e,f=a._zod.def;fC(f.innerType,b,d),b.seen.get(a).ref=f.innerType;try{e=f.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}c.default=e},ge=(a,b,c,d)=>{let e=a._zod.def,f="input"===b.io?"transform"===e.in._zod.def.type?e.out:e.in:e.out;fC(f,b,d),b.seen.get(a).ref=f},gf=(a,b,c,d)=>{let e=a._zod.def;fC(e.innerType,b,d),b.seen.get(a).ref=e.innerType,c.readOnly=!0},gg=(a,b,c,d)=>{let e=a._zod.def;fC(e.innerType,b,d),b.seen.get(a).ref=e.innerType},gh=(a,b,c,d)=>{let e=a._zod.def;fC(e.innerType,b,d),b.seen.get(a).ref=e.innerType},gi=(a,b,c,d)=>{let e=a._zod.innerType;fC(e,b,d),b.seen.get(a).ref=e},gj={string:fI,number:fJ,boolean:fK,bigint:fL,symbol:fM,null:fN,undefined:fO,void:fP,never:fQ,any:fR,unknown:fS,date:fT,enum:fU,literal:fV,nan:fW,template_literal:fX,file:fY,success:fZ,custom:f$,function:f_,transform:f0,map:f1,set:f2,array:f3,object:f4,union:f5,intersection:f6,tuple:f7,record:f8,nullable:f9,nonoptional:ga,default:gb,prefault:gc,catch:gd,pipe:ge,readonly:gf,promise:gg,optional:gh,lazy:gi};function gk(a,b){if("_idmap"in a){let c=fB({...b,processors:gj}),d={};for(let b of a._idmap.entries()){let[a,d]=b;fC(d,c)}let e={};for(let f of(c.external={registry:a,uri:b?.uri,defs:d},a._idmap.entries())){let[a,b]=f;fD(c,b),e[a]=fE(c,b)}return Object.keys(d).length>0&&(e.__shared={["draft-2020-12"===c.target?"$defs":"definitions"]:d}),{schemas:e}}let c=fB({...b,processors:gj});return fC(a,c),fD(c,a),fE(c,a)}class gl{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(a){this.ctx.counter=a}get seen(){return this.ctx.seen}constructor(a){let b=a?.target??"draft-2020-12";"draft-4"===b&&(b="draft-04"),"draft-7"===b&&(b="draft-07"),this.ctx=fB({processors:gj,target:b,...a?.metadata&&{metadata:a.metadata},...a?.unrepresentable&&{unrepresentable:a.unrepresentable},...a?.override&&{override:a.override},...a?.io&&{io:a.io}})}process(a,b={path:[],schemaPath:[]}){return fC(a,this.ctx,b)}emit(a,b){b&&(b.cycles&&(this.ctx.cycles=b.cycles),b.reused&&(this.ctx.reused=b.reused),b.external&&(this.ctx.external=b.external)),fD(this.ctx,a);let{"~standard":c,...d}=fE(this.ctx,a);return d}}a.s([],795288),a.s([],838005),a.s(["ZodAny",()=>hY,"ZodArray",()=>h6,"ZodBase64",()=>hq,"ZodBase64URL",()=>hs,"ZodBigInt",()=>hN,"ZodBigIntFormat",()=>hP,"ZodBoolean",()=>hL,"ZodCIDRv4",()=>hm,"ZodCIDRv6",()=>ho,"ZodCUID",()=>g6,"ZodCUID2",()=>g8,"ZodCatch",()=>iV,"ZodCodec",()=>i_,"ZodCustom",()=>jb,"ZodCustomStringFormat",()=>hy,"ZodDate",()=>h4,"ZodDefault",()=>iN,"ZodDiscriminatedUnion",()=>ii,"ZodE164",()=>hu,"ZodEmail",()=>gS,"ZodEmoji",()=>g2,"ZodEnum",()=>ix,"ZodExactOptional",()=>iI,"ZodFile",()=>iC,"ZodFunction",()=>i9,"ZodGUID",()=>gU,"ZodIPv4",()=>hg,"ZodIPv6",()=>hk,"ZodIntersection",()=>ik,"ZodJWT",()=>hw,"ZodKSUID",()=>he,"ZodLazy",()=>i5,"ZodLiteral",()=>iA,"ZodMAC",()=>hi,"ZodMap",()=>it,"ZodNaN",()=>iX,"ZodNanoID",()=>g4,"ZodNever",()=>h0,"ZodNonOptional",()=>iR,"ZodNull",()=>hW,"ZodNullable",()=>iK,"ZodNumber",()=>hD,"ZodNumberFormat",()=>hF,"ZodObject",()=>h9,"ZodOptional",()=>iG,"ZodPipe",()=>iZ,"ZodPrefault",()=>iP,"ZodPromise",()=>i7,"ZodReadonly",()=>i1,"ZodRecord",()=>ip,"ZodSet",()=>iv,"ZodString",()=>gP,"ZodStringFormat",()=>gR,"ZodSuccess",()=>iT,"ZodSymbol",()=>hS,"ZodTemplateLiteral",()=>i3,"ZodTransform",()=>iE,"ZodTuple",()=>im,"ZodType",()=>gN,"ZodULID",()=>ha,"ZodURL",()=>g_,"ZodUUID",()=>gW,"ZodUndefined",()=>hU,"ZodUnion",()=>id,"ZodUnknown",()=>h$,"ZodVoid",()=>h2,"ZodXID",()=>hc,"ZodXor",()=>ig,"_ZodString",()=>gO,"_default",()=>iO,"_function",()=>ja,"any",()=>hZ,"array",()=>h7,"base64",()=>hr,"base64url",()=>ht,"bigint",()=>hO,"boolean",()=>hM,"catch",()=>iW,"check",()=>jc,"cidrv4",()=>hn,"cidrv6",()=>hp,"codec",()=>i0,"cuid",()=>g7,"cuid2",()=>g9,"custom",()=>jd,"date",()=>h5,"describe",()=>jg,"discriminatedUnion",()=>ij,"e164",()=>hv,"email",()=>gT,"emoji",()=>g3,"enum",()=>iy,"exactOptional",()=>iJ,"file",()=>iD,"float32",()=>hH,"float64",()=>hI,"function",()=>ja,"guid",()=>gV,"hash",()=>hC,"hex",()=>hB,"hostname",()=>hA,"httpUrl",()=>g1,"instanceof",()=>ji,"int",()=>hG,"int32",()=>hJ,"int64",()=>hQ,"intersection",()=>il,"ipv4",()=>hh,"ipv6",()=>hl,"json",()=>jk,"jwt",()=>hx,"keyof",()=>h8,"ksuid",()=>hf,"lazy",()=>i6,"literal",()=>iB,"looseObject",()=>ic,"looseRecord",()=>is,"mac",()=>hj,"map",()=>iu,"meta",()=>jh,"nan",()=>iY,"nanoid",()=>g5,"nativeEnum",()=>iz,"never",()=>h1,"nonoptional",()=>iS,"null",()=>hX,"nullable",()=>iL,"nullish",()=>iM,"number",()=>hE,"object",()=>ia,"optional",()=>iH,"partialRecord",()=>ir,"pipe",()=>i$,"prefault",()=>iQ,"preprocess",()=>jl,"promise",()=>i8,"readonly",()=>i2,"record",()=>iq,"refine",()=>je,"set",()=>iw,"strictObject",()=>ib,"string",()=>gQ,"stringFormat",()=>hz,"stringbool",()=>jj,"success",()=>iU,"superRefine",()=>jf,"symbol",()=>hT,"templateLiteral",()=>i4,"transform",()=>iF,"tuple",()=>io,"uint32",()=>hK,"uint64",()=>hR,"ulid",()=>hb,"undefined",()=>hV,"union",()=>ie,"unknown",()=>h_,"url",()=>g0,"uuid",()=>gX,"uuidv4",()=>gY,"uuidv6",()=>gZ,"uuidv7",()=>g$,"void",()=>h3,"xid",()=>hd,"xor",()=>ih],794219),a.i(584516),a.s(["$ZodAny",0,cI,"$ZodArray",0,cO,"$ZodBase64",0,ct,"$ZodBase64URL",0,cv,"$ZodBigInt",0,cD,"$ZodBigIntFormat",0,cE,"$ZodBoolean",0,cC,"$ZodCIDRv4",0,cq,"$ZodCIDRv6",0,cr,"$ZodCUID",0,ce,"$ZodCUID2",0,cf,"$ZodCatch",0,dk,"$ZodCodec",0,dp,"$ZodCustom",0,dy,"$ZodCustomStringFormat",0,cz,"$ZodDate",0,cM,"$ZodDefault",0,de,"$ZodDiscriminatedUnion",0,cY,"$ZodE164",0,cw,"$ZodEmail",0,ca,"$ZodEmoji",0,cc,"$ZodEnum",0,c6,"$ZodExactOptional",0,dc,"$ZodFile",0,c8,"$ZodFunction",0,dv,"$ZodGUID",0,b8,"$ZodIPv4",0,cn,"$ZodIPv6",0,co,"$ZodISODate",0,ck,"$ZodISODateTime",0,cj,"$ZodISODuration",0,cm,"$ZodISOTime",0,cl,"$ZodIntersection",0,cZ,"$ZodJWT",0,cy,"$ZodKSUID",0,ci,"$ZodLazy",0,dx,"$ZodLiteral",0,c7,"$ZodMAC",0,cp,"$ZodMap",0,c2,"$ZodNaN",0,dl,"$ZodNanoID",0,cd,"$ZodNever",0,cK,"$ZodNonOptional",0,dh,"$ZodNull",0,cH,"$ZodNullable",0,dd,"$ZodNumber",0,cA,"$ZodNumberFormat",0,cB,"$ZodObject",0,cS,"$ZodObjectJIT",0,cT,"$ZodOptional",0,db,"$ZodPipe",0,dm,"$ZodPrefault",0,dg,"$ZodPromise",0,dw,"$ZodReadonly",0,ds,"$ZodRecord",0,c1,"$ZodSet",0,c4,"$ZodString",0,b6,"$ZodStringFormat",0,b7,"$ZodSuccess",0,dj,"$ZodSymbol",0,cF,"$ZodTemplateLiteral",0,du,"$ZodTransform",0,c9,"$ZodTuple",0,c_,"$ZodType",0,b5,"$ZodULID",0,cg,"$ZodURL",0,cb,"$ZodUUID",0,b9,"$ZodUndefined",0,cG,"$ZodUnion",0,cV,"$ZodUnknown",0,cJ,"$ZodVoid",0,cL,"$ZodXID",0,ch,"$ZodXor",0,cX,"clone",()=>O,"isValidBase64",()=>cs,"isValidBase64URL",()=>cu,"isValidJWT",()=>cx],309419);var gm,gn,go=a.i(520559),go=go,gp=a.i(428110),gp=gp;a.s([],188476),a.s(["ZodISODate",()=>gs,"ZodISODateTime",()=>gq,"ZodISODuration",()=>gw,"ZodISOTime",()=>gu,"date",()=>gt,"datetime",()=>gr,"duration",()=>gx,"time",()=>gv],18850);let gq=c("ZodISODateTime",(a,b)=>{cj.init(a,b),gR.init(a,b)});function gr(a){return ec(gq,a)}let gs=c("ZodISODate",(a,b)=>{ck.init(a,b),gR.init(a,b)});function gt(a){return ed(gs,a)}let gu=c("ZodISOTime",(a,b)=>{cl.init(a,b),gR.init(a,b)});function gv(a){return ee(gu,a)}let gw=c("ZodISODuration",(a,b)=>{cm.init(a,b),gR.init(a,b)});function gx(a){return ef(gw,a)}let gy=(a,b)=>{ar.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>au(a,b)},flatten:{value:b=>at(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,p,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,p,2)}},isEmpty:{get:()=>0===a.issues.length}})},gz=c("ZodError",gy),gA=c("ZodError",gy,{Parent:Error});a.s(["ZodError",0,gz,"ZodRealError",0,gA],975160);let gB=ay(gA),gC=aA(gA),gD=aC(gA),gE=aE(gA),gF=aG(gA),gG=aI(gA),gH=aK(gA),gI=aM(gA),gJ=aO(gA),gK=aQ(gA),gL=aS(gA),gM=aU(gA);a.s(["decode",0,gG,"decodeAsync",0,gI,"encode",0,gF,"encodeAsync",0,gH,"parse",0,gB,"parseAsync",0,gC,"safeDecode",0,gK,"safeDecodeAsync",0,gM,"safeEncode",0,gJ,"safeEncodeAsync",0,gL,"safeParse",0,gD,"safeParseAsync",0,gE],373590);let gN=c("ZodType",(a,b)=>(b5.init(a,b),Object.assign(a["~standard"],{jsonSchema:{input:fG(a,"input"),output:fG(a,"output")}}),a.toJSONSchema=fF(a,{}),a.def=b,a.type=b.type,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone(gp.mergeDefs(b,{checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),{parent:!0}),a.with=a.check,a.clone=(b,c)=>O(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>gB(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>gD(a,b,c),a.parseAsync=async(b,c)=>gC(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>gE(a,b,c),a.spa=a.safeParseAsync,a.encode=(b,c)=>gF(a,b,c),a.decode=(b,c)=>gG(a,b,c),a.encodeAsync=async(b,c)=>gH(a,b,c),a.decodeAsync=async(b,c)=>gI(a,b,c),a.safeEncode=(b,c)=>gJ(a,b,c),a.safeDecode=(b,c)=>gK(a,b,c),a.safeEncodeAsync=async(b,c)=>gL(a,b,c),a.safeDecodeAsync=async(b,c)=>gM(a,b,c),a.refine=(b,c)=>a.check(je(b,c)),a.superRefine=b=>a.check(fv(b)),a.overwrite=b=>a.check(e$(b)),a.optional=()=>iH(a),a.exactOptional=()=>iJ(a),a.nullable=()=>iL(a),a.nullish=()=>iH(iL(a)),a.nonoptional=b=>iS(a,b),a.array=()=>h7(a),a.or=b=>ie([a,b]),a.and=b=>il(a,b),a.transform=b=>i$(a,iF(b)),a.default=b=>iO(a,b),a.prefault=b=>iQ(a,b),a.catch=b=>iW(a,b),a.pipe=b=>i$(a,b),a.readonly=()=>i2(a),a.describe=b=>{let c=a.clone();return dN.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>dN.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return dN.get(a);let c=a.clone();return dN.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a.apply=b=>b(a),a)),gO=c("_ZodString",(a,b)=>{b6.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fI(a,b,c,d);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(eS(...b)),a.includes=(...b)=>a.check(eV(...b)),a.startsWith=(...b)=>a.check(eW(...b)),a.endsWith=(...b)=>a.check(eX(...b)),a.min=(...b)=>a.check(eQ(...b)),a.max=(...b)=>a.check(eP(...b)),a.length=(...b)=>a.check(eR(...b)),a.nonempty=(...b)=>a.check(eQ(1,...b)),a.lowercase=b=>a.check(eT(b)),a.uppercase=b=>a.check(eU(b)),a.trim=()=>a.check(e0()),a.normalize=(...b)=>a.check(e_(...b)),a.toLowerCase=()=>a.check(e1()),a.toUpperCase=()=>a.check(e2()),a.slugify=()=>a.check(e3())}),gP=c("ZodString",(a,b)=>{b6.init(a,b),gO.init(a,b),a.email=b=>a.check(dQ(gS,b)),a.url=b=>a.check(dW(g_,b)),a.jwt=b=>a.check(ea(hw,b)),a.emoji=b=>a.check(dX(g2,b)),a.guid=b=>a.check(dR(gU,b)),a.uuid=b=>a.check(dS(gW,b)),a.uuidv4=b=>a.check(dT(gW,b)),a.uuidv6=b=>a.check(dU(gW,b)),a.uuidv7=b=>a.check(dV(gW,b)),a.nanoid=b=>a.check(dY(g4,b)),a.guid=b=>a.check(dR(gU,b)),a.cuid=b=>a.check(dZ(g6,b)),a.cuid2=b=>a.check(d$(g8,b)),a.ulid=b=>a.check(d_(ha,b)),a.base64=b=>a.check(d7(hq,b)),a.base64url=b=>a.check(d8(hs,b)),a.xid=b=>a.check(d0(hc,b)),a.ksuid=b=>a.check(d1(he,b)),a.ipv4=b=>a.check(d2(hg,b)),a.ipv6=b=>a.check(d3(hk,b)),a.cidrv4=b=>a.check(d5(hm,b)),a.cidrv6=b=>a.check(d6(ho,b)),a.e164=b=>a.check(d9(hu,b)),a.datetime=b=>a.check(gr(b)),a.date=b=>a.check(gt(b)),a.time=b=>a.check(gv(b)),a.duration=b=>a.check(gx(b))});function gQ(a){return dO(gP,a)}let gR=c("ZodStringFormat",(a,b)=>{b7.init(a,b),gO.init(a,b)}),gS=c("ZodEmail",(a,b)=>{ca.init(a,b),gR.init(a,b)});function gT(a){return dQ(gS,a)}let gU=c("ZodGUID",(a,b)=>{b8.init(a,b),gR.init(a,b)});function gV(a){return dR(gU,a)}let gW=c("ZodUUID",(a,b)=>{b9.init(a,b),gR.init(a,b)});function gX(a){return dS(gW,a)}function gY(a){return dT(gW,a)}function gZ(a){return dU(gW,a)}function g$(a){return dV(gW,a)}let g_=c("ZodURL",(a,b)=>{cb.init(a,b),gR.init(a,b)});function g0(a){return dW(g_,a)}function g1(a){return dW(g_,{protocol:/^https?$/,hostname:go.domain,...gp.normalizeParams(a)})}let g2=c("ZodEmoji",(a,b)=>{cc.init(a,b),gR.init(a,b)});function g3(a){return dX(g2,a)}let g4=c("ZodNanoID",(a,b)=>{cd.init(a,b),gR.init(a,b)});function g5(a){return dY(g4,a)}let g6=c("ZodCUID",(a,b)=>{ce.init(a,b),gR.init(a,b)});function g7(a){return dZ(g6,a)}let g8=c("ZodCUID2",(a,b)=>{cf.init(a,b),gR.init(a,b)});function g9(a){return d$(g8,a)}let ha=c("ZodULID",(a,b)=>{cg.init(a,b),gR.init(a,b)});function hb(a){return d_(ha,a)}let hc=c("ZodXID",(a,b)=>{ch.init(a,b),gR.init(a,b)});function hd(a){return d0(hc,a)}let he=c("ZodKSUID",(a,b)=>{ci.init(a,b),gR.init(a,b)});function hf(a){return d1(he,a)}let hg=c("ZodIPv4",(a,b)=>{cn.init(a,b),gR.init(a,b)});function hh(a){return d2(hg,a)}let hi=c("ZodMAC",(a,b)=>{cp.init(a,b),gR.init(a,b)});function hj(a){return d4(hi,a)}let hk=c("ZodIPv6",(a,b)=>{co.init(a,b),gR.init(a,b)});function hl(a){return d3(hk,a)}let hm=c("ZodCIDRv4",(a,b)=>{cq.init(a,b),gR.init(a,b)});function hn(a){return d5(hm,a)}let ho=c("ZodCIDRv6",(a,b)=>{cr.init(a,b),gR.init(a,b)});function hp(a){return d6(ho,a)}let hq=c("ZodBase64",(a,b)=>{ct.init(a,b),gR.init(a,b)});function hr(a){return d7(hq,a)}let hs=c("ZodBase64URL",(a,b)=>{cv.init(a,b),gR.init(a,b)});function ht(a){return d8(hs,a)}let hu=c("ZodE164",(a,b)=>{cw.init(a,b),gR.init(a,b)});function hv(a){return d9(hu,a)}let hw=c("ZodJWT",(a,b)=>{cy.init(a,b),gR.init(a,b)});function hx(a){return ea(hw,a)}let hy=c("ZodCustomStringFormat",(a,b)=>{cz.init(a,b),gR.init(a,b)});function hz(a,b,c={}){return fA(hy,a,b,c)}function hA(a){return fA(hy,"hostname",go.hostname,a)}function hB(a){return fA(hy,"hex",go.hex,a)}function hC(a,b){let c=b?.enc??"hex",d=`${a}_${c}`,e=go[d];if(!e)throw Error(`Unrecognized hash format: ${d}`);return fA(hy,d,e,b)}let hD=c("ZodNumber",(a,b)=>{cA.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fJ(a,b,c,d),a.gt=(b,c)=>a.check(eF(b,c)),a.gte=(b,c)=>a.check(eG(b,c)),a.min=(b,c)=>a.check(eG(b,c)),a.lt=(b,c)=>a.check(eD(b,c)),a.lte=(b,c)=>a.check(eE(b,c)),a.max=(b,c)=>a.check(eE(b,c)),a.int=b=>a.check(hG(b)),a.safe=b=>a.check(hG(b)),a.positive=b=>a.check(eF(0,b)),a.nonnegative=b=>a.check(eG(0,b)),a.negative=b=>a.check(eD(0,b)),a.nonpositive=b=>a.check(eE(0,b)),a.multipleOf=(b,c)=>a.check(eL(b,c)),a.step=(b,c)=>a.check(eL(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function hE(a){return eg(hD,a)}let hF=c("ZodNumberFormat",(a,b)=>{cB.init(a,b),hD.init(a,b)});function hG(a){return ei(hF,a)}function hH(a){return ej(hF,a)}function hI(a){return ek(hF,a)}function hJ(a){return el(hF,a)}function hK(a){return em(hF,a)}let hL=c("ZodBoolean",(a,b)=>{cC.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fK(a,b,c,d)});function hM(a){return en(hL,a)}let hN=c("ZodBigInt",(a,b)=>{cD.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fL(a,b,c,d),a.gte=(b,c)=>a.check(eG(b,c)),a.min=(b,c)=>a.check(eG(b,c)),a.gt=(b,c)=>a.check(eF(b,c)),a.gte=(b,c)=>a.check(eG(b,c)),a.min=(b,c)=>a.check(eG(b,c)),a.lt=(b,c)=>a.check(eD(b,c)),a.lte=(b,c)=>a.check(eE(b,c)),a.max=(b,c)=>a.check(eE(b,c)),a.positive=b=>a.check(eF(BigInt(0),b)),a.negative=b=>a.check(eD(BigInt(0),b)),a.nonpositive=b=>a.check(eE(BigInt(0),b)),a.nonnegative=b=>a.check(eG(BigInt(0),b)),a.multipleOf=(b,c)=>a.check(eL(b,c));let c=a._zod.bag;a.minValue=c.minimum??null,a.maxValue=c.maximum??null,a.format=c.format??null});function hO(a){return ep(hN,a)}let hP=c("ZodBigIntFormat",(a,b)=>{cE.init(a,b),hN.init(a,b)});function hQ(a){return er(hP,a)}function hR(a){return es(hP,a)}let hS=c("ZodSymbol",(a,b)=>{cF.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fM(a,b,c,d)});function hT(a){return et(hS,a)}let hU=c("ZodUndefined",(a,b)=>{cG.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fO(a,b,c,d)});function hV(a){return eu(hU,a)}let hW=c("ZodNull",(a,b)=>{cH.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fN(a,b,c,d)});function hX(a){return ev(hW,a)}let hY=c("ZodAny",(a,b)=>{cI.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fR(a,b,c,d)});function hZ(){return ew(hY)}let h$=c("ZodUnknown",(a,b)=>{cJ.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fS(a,b,c,d)});function h_(){return ex(h$)}let h0=c("ZodNever",(a,b)=>{cK.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fQ(a,b,c,d)});function h1(a){return ey(h0,a)}let h2=c("ZodVoid",(a,b)=>{cL.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fP(a,b,c,d)});function h3(a){return ez(h2,a)}let h4=c("ZodDate",(a,b)=>{cM.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fT(a,b,c,d),a.min=(b,c)=>a.check(eG(b,c)),a.max=(b,c)=>a.check(eE(b,c));let c=a._zod.bag;a.minDate=c.minimum?new Date(c.minimum):null,a.maxDate=c.maximum?new Date(c.maximum):null});function h5(a){return eA(h4,a)}let h6=c("ZodArray",(a,b)=>{cO.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f3(a,b,c,d),a.element=b.element,a.min=(b,c)=>a.check(eQ(b,c)),a.nonempty=b=>a.check(eQ(1,b)),a.max=(b,c)=>a.check(eP(b,c)),a.length=(b,c)=>a.check(eR(b,c)),a.unwrap=()=>a.element});function h7(a,b){return e4(h6,a,b)}function h8(a){return iy(Object.keys(a._zod.def.shape))}let h9=c("ZodObject",(a,b)=>{cT.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f4(a,b,c,d),gp.defineLazy(a,"shape",()=>b.shape),a.keyof=()=>iy(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:h_()}),a.loose=()=>a.clone({...a._zod.def,catchall:h_()}),a.strict=()=>a.clone({...a._zod.def,catchall:h1()}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>gp.extend(a,b),a.safeExtend=b=>gp.safeExtend(a,b),a.merge=b=>gp.merge(a,b),a.pick=b=>gp.pick(a,b),a.omit=b=>gp.omit(a,b),a.partial=(...b)=>gp.partial(iG,a,b[0]),a.required=(...b)=>gp.required(iR,a,b[0])});function ia(a,b){return new h9({type:"object",shape:a??{},...gp.normalizeParams(b)})}function ib(a,b){return new h9({type:"object",shape:a,catchall:h1(),...gp.normalizeParams(b)})}function ic(a,b){return new h9({type:"object",shape:a,catchall:h_(),...gp.normalizeParams(b)})}let id=c("ZodUnion",(a,b)=>{cV.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f5(a,b,c,d),a.options=b.options});function ie(a,b){return new id({type:"union",options:a,...gp.normalizeParams(b)})}let ig=c("ZodXor",(a,b)=>{id.init(a,b),cX.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f5(a,b,c,d),a.options=b.options});function ih(a,b){return new ig({type:"union",options:a,inclusive:!1,...gp.normalizeParams(b)})}let ii=c("ZodDiscriminatedUnion",(a,b)=>{id.init(a,b),cY.init(a,b)});function ij(a,b,c){return new ii({type:"union",options:b,discriminator:a,...gp.normalizeParams(c)})}let ik=c("ZodIntersection",(a,b)=>{cZ.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f6(a,b,c,d)});function il(a,b){return new ik({type:"intersection",left:a,right:b})}let im=c("ZodTuple",(a,b)=>{c_.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f7(a,b,c,d),a.rest=b=>a.clone({...a._zod.def,rest:b})});function io(a,b,c){let d=b instanceof b5,e=d?c:b;return new im({type:"tuple",items:a,rest:d?b:null,...gp.normalizeParams(e)})}let ip=c("ZodRecord",(a,b)=>{c1.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f8(a,b,c,d),a.keyType=b.keyType,a.valueType=b.valueType});function iq(a,b,c){return new ip({type:"record",keyType:a,valueType:b,...gp.normalizeParams(c)})}function ir(a,b,c){let d=O(a);return d._zod.values=void 0,new ip({type:"record",keyType:d,valueType:b,...gp.normalizeParams(c)})}function is(a,b,c){return new ip({type:"record",keyType:a,valueType:b,mode:"loose",...gp.normalizeParams(c)})}let it=c("ZodMap",(a,b)=>{c2.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f1(a,b,c,d),a.keyType=b.keyType,a.valueType=b.valueType,a.min=(...b)=>a.check(eN(...b)),a.nonempty=b=>a.check(eN(1,b)),a.max=(...b)=>a.check(eM(...b)),a.size=(...b)=>a.check(eO(...b))});function iu(a,b,c){return new it({type:"map",keyType:a,valueType:b,...gp.normalizeParams(c)})}let iv=c("ZodSet",(a,b)=>{c4.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f2(a,b,c,d),a.min=(...b)=>a.check(eN(...b)),a.nonempty=b=>a.check(eN(1,b)),a.max=(...b)=>a.check(eM(...b)),a.size=(...b)=>a.check(eO(...b))});function iw(a,b){return new iv({type:"set",valueType:a,...gp.normalizeParams(b)})}let ix=c("ZodEnum",(a,b)=>{c6.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fU(a,b,c,d),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new ix({...b,checks:[],...gp.normalizeParams(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new ix({...b,checks:[],...gp.normalizeParams(d),entries:e})}});function iy(a,b){return new ix({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...gp.normalizeParams(b)})}function iz(a,b){return new ix({type:"enum",entries:a,...gp.normalizeParams(b)})}let iA=c("ZodLiteral",(a,b)=>{c7.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fV(a,b,c,d),a.values=new Set(b.values),Object.defineProperty(a,"value",{get(){if(b.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return b.values[0]}})});function iB(a,b){return new iA({type:"literal",values:Array.isArray(a)?a:[a],...gp.normalizeParams(b)})}let iC=c("ZodFile",(a,b)=>{c8.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fY(a,b,c,d),a.min=(b,c)=>a.check(eN(b,c)),a.max=(b,c)=>a.check(eM(b,c)),a.mime=(b,c)=>a.check(eZ(Array.isArray(b)?b:[b],c))});function iD(a){return fg(iC,a)}let iE=c("ZodTransform",(a,b)=>{c9.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f0(a,b,c,d),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new f(a.constructor.name);c.addIssue=d=>{"string"==typeof d?c.issues.push(gp.issue(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(gp.issue(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}});function iF(a){return new iE({type:"transform",transform:a})}let iG=c("ZodOptional",(a,b)=>{db.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gh(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function iH(a){return new iG({type:"optional",innerType:a})}let iI=c("ZodExactOptional",(a,b)=>{dc.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gh(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function iJ(a){return new iI({type:"optional",innerType:a})}let iK=c("ZodNullable",(a,b)=>{dd.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f9(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function iL(a){return new iK({type:"nullable",innerType:a})}function iM(a){return iH(iL(a))}let iN=c("ZodDefault",(a,b)=>{de.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gb(a,b,c,d),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap});function iO(a,b){return new iN({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():gp.shallowClone(b)}})}let iP=c("ZodPrefault",(a,b)=>{dg.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gc(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function iQ(a,b){return new iP({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():gp.shallowClone(b)}})}let iR=c("ZodNonOptional",(a,b)=>{dh.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>ga(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function iS(a,b){return new iR({type:"nonoptional",innerType:a,...gp.normalizeParams(b)})}let iT=c("ZodSuccess",(a,b)=>{dj.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fZ(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function iU(a){return new iT({type:"success",innerType:a})}let iV=c("ZodCatch",(a,b)=>{dk.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gd(a,b,c,d),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap});function iW(a,b){return new iV({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})}let iX=c("ZodNaN",(a,b)=>{dl.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fW(a,b,c,d)});function iY(a){return eC(iX,a)}let iZ=c("ZodPipe",(a,b)=>{dm.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>ge(a,b,c,d),a.in=b.in,a.out=b.out});function i$(a,b){return new iZ({type:"pipe",in:a,out:b})}let i_=c("ZodCodec",(a,b)=>{iZ.init(a,b),dp.init(a,b)});function i0(a,b,c){return new i_({type:"pipe",in:a,out:b,transform:c.decode,reverseTransform:c.encode})}let i1=c("ZodReadonly",(a,b)=>{ds.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gf(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function i2(a){return new i1({type:"readonly",innerType:a})}let i3=c("ZodTemplateLiteral",(a,b)=>{du.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>fX(a,b,c,d)});function i4(a,b){return new i3({type:"template_literal",parts:a,...gp.normalizeParams(b)})}let i5=c("ZodLazy",(a,b)=>{dx.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gi(a,b,c,d),a.unwrap=()=>a._zod.def.getter()});function i6(a){return new i5({type:"lazy",getter:a})}let i7=c("ZodPromise",(a,b)=>{dw.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gg(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function i8(a){return new i7({type:"promise",innerType:a})}let i9=c("ZodFunction",(a,b)=>{dv.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f_(a,b,c,d)});function ja(a){return new i9({type:"function",input:Array.isArray(a?.input)?io(a?.input):a?.input??h7(h_()),output:a?.output??h_()})}let jb=c("ZodCustom",(a,b)=>{dy.init(a,b),gN.init(a,b),a._zod.processJSONSchema=(b,c,d)=>f$(a,b,c,d)});function jc(a){let b=new bH({check:"custom"});return b._zod.check=a,b}function jd(a,b){return ft(jb,a??(()=>!0),b)}function je(a,b={}){return fu(jb,a,b)}function jf(a){return fv(a)}let jg=fx,jh=fy;function ji(a,b={}){let c=new jb({type:"custom",check:"custom",fn:b=>b instanceof a,abort:!0,...gp.normalizeParams(b)});return c._zod.bag.Class=a,c._zod.check=b=>{b.value instanceof a||b.issues.push({code:"invalid_type",expected:a.name,input:b.value,inst:c,path:[...c._zod.def.path??[]]})},c}let jj=(...a)=>fz({Codec:i_,Boolean:hL,String:gP},...a);function jk(a){let b=i6(()=>ie([gQ(a),hE(),hM(),hX(),h7(b),iq(gQ(),b)]));return b}function jl(a,b){return i$(iF(a),b)}let jm={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function jn(a){h({customError:a})}function jo(){return h().customError}gn||(gn={}),a.s(["ZodFirstPartyTypeKind",()=>gn,"ZodIssueCode",0,jm,"getErrorMap",()=>jo,"setErrorMap",()=>jn],58277),a.i(188476),a.s(["endsWith",()=>eX,"gt",()=>eF,"gte",()=>eG,"includes",()=>eV,"length",()=>eR,"lowercase",()=>eT,"lt",()=>eD,"lte",()=>eE,"maxLength",()=>eP,"maxSize",()=>eM,"mime",()=>eZ,"minLength",()=>eQ,"minSize",()=>eN,"multipleOf",()=>eL,"negative",()=>eI,"nonnegative",()=>eK,"nonpositive",()=>eJ,"normalize",()=>e_,"overwrite",()=>e$,"positive",()=>eH,"property",()=>eY,"regex",()=>eS,"size",()=>eO,"slugify",()=>e3,"startsWith",()=>eW,"toLowerCase",()=>e1,"toUpperCase",()=>e2,"trim",()=>e0,"uppercase",()=>eU],454375);var jp=a.i(454375),jq=a.i(18850);let jr={...a.i(794219),...jp,iso:jq},js=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function jt(a,b){var c;let d;if("boolean"==typeof a)return a?jr.any():jr.never();let e={version:(c=b?.defaultTarget,"https://json-schema.org/draft/2020-12/schema"===(d=a.$schema)?"draft-2020-12":"http://json-schema.org/draft-07/schema#"===d?"draft-7":"http://json-schema.org/draft-04/schema#"===d?"draft-4":c??"draft-2020-12"),defs:a.$defs||a.definitions||{},refs:new Map,processing:new Set,rootSchema:a,registry:b?.registry??dN};return function a(b,c){if("boolean"==typeof b)return b?jr.any():jr.never();let d=function b(c,d){let e;if(void 0!==c.not){if("object"==typeof c.not&&0===Object.keys(c.not).length)return jr.never();throw Error("not is not supported in Zod (except { not: {} } for never)")}if(void 0!==c.unevaluatedItems)throw Error("unevaluatedItems is not supported");if(void 0!==c.unevaluatedProperties)throw Error("unevaluatedProperties is not supported");if(void 0!==c.if||void 0!==c.then||void 0!==c.else)throw Error("Conditional schemas (if/then/else) are not supported");if(void 0!==c.dependentSchemas||void 0!==c.dependentRequired)throw Error("dependentSchemas and dependentRequired are not supported");if(c.$ref){let b=c.$ref;if(d.refs.has(b))return d.refs.get(b);if(d.processing.has(b))return jr.lazy(()=>{if(!d.refs.has(b))throw Error(`Circular reference not resolved: ${b}`);return d.refs.get(b)});d.processing.add(b);let e=a(function(a,b){if(!a.startsWith("#"))throw Error("External $ref is not supported, only local refs (#/...) are allowed");let c=a.slice(1).split("/").filter(Boolean);if(0===c.length)return b.rootSchema;let d="draft-2020-12"===b.version?"$defs":"definitions";if(c[0]===d){let d=c[1];if(!d||!b.defs[d])throw Error(`Reference not found: ${a}`);return b.defs[d]}throw Error(`Reference not found: ${a}`)}(b,d),d);return d.refs.set(b,e),d.processing.delete(b),e}if(void 0!==c.enum){let a=c.enum;if("openapi-3.0"===d.version&&!0===c.nullable&&1===a.length&&null===a[0])return jr.null();if(0===a.length)return jr.never();if(1===a.length)return jr.literal(a[0]);if(a.every(a=>"string"==typeof a))return jr.enum(a);let b=a.map(a=>jr.literal(a));return b.length<2?b[0]:jr.union([b[0],b[1],...b.slice(2)])}if(void 0!==c.const)return jr.literal(c.const);let f=c.type;if(Array.isArray(f)){let a=f.map(a=>b({...c,type:a},d));return 0===a.length?jr.never():1===a.length?a[0]:jr.union(a)}if(!f)return jr.any();switch(f){case"string":{let a=jr.string();if(c.format){let b=c.format;"email"===b?a=a.check(jr.email()):"uri"===b||"uri-reference"===b?a=a.check(jr.url()):"uuid"===b||"guid"===b?a=a.check(jr.uuid()):"date-time"===b?a=a.check(jr.iso.datetime()):"date"===b?a=a.check(jr.iso.date()):"time"===b?a=a.check(jr.iso.time()):"duration"===b?a=a.check(jr.iso.duration()):"ipv4"===b?a=a.check(jr.ipv4()):"ipv6"===b?a=a.check(jr.ipv6()):"mac"===b?a=a.check(jr.mac()):"cidr"===b?a=a.check(jr.cidrv4()):"cidr-v6"===b?a=a.check(jr.cidrv6()):"base64"===b?a=a.check(jr.base64()):"base64url"===b?a=a.check(jr.base64url()):"e164"===b?a=a.check(jr.e164()):"jwt"===b?a=a.check(jr.jwt()):"emoji"===b?a=a.check(jr.emoji()):"nanoid"===b?a=a.check(jr.nanoid()):"cuid"===b?a=a.check(jr.cuid()):"cuid2"===b?a=a.check(jr.cuid2()):"ulid"===b?a=a.check(jr.ulid()):"xid"===b?a=a.check(jr.xid()):"ksuid"===b&&(a=a.check(jr.ksuid()))}"number"==typeof c.minLength&&(a=a.min(c.minLength)),"number"==typeof c.maxLength&&(a=a.max(c.maxLength)),c.pattern&&(a=a.regex(new RegExp(c.pattern))),e=a;break}case"number":case"integer":{let a="integer"===f?jr.number().int():jr.number();"number"==typeof c.minimum&&(a=a.min(c.minimum)),"number"==typeof c.maximum&&(a=a.max(c.maximum)),"number"==typeof c.exclusiveMinimum?a=a.gt(c.exclusiveMinimum):!0===c.exclusiveMinimum&&"number"==typeof c.minimum&&(a=a.gt(c.minimum)),"number"==typeof c.exclusiveMaximum?a=a.lt(c.exclusiveMaximum):!0===c.exclusiveMaximum&&"number"==typeof c.maximum&&(a=a.lt(c.maximum)),"number"==typeof c.multipleOf&&(a=a.multipleOf(c.multipleOf)),e=a;break}case"boolean":e=jr.boolean();break;case"null":e=jr.null();break;case"object":{let b={},f=c.properties||{},g=new Set(c.required||[]);for(let[c,e]of Object.entries(f)){let f=a(e,d);b[c]=g.has(c)?f:f.optional()}if(c.propertyNames){let f=a(c.propertyNames,d),g=c.additionalProperties&&"object"==typeof c.additionalProperties?a(c.additionalProperties,d):jr.any();if(0===Object.keys(b).length){e=jr.record(f,g);break}let h=jr.object(b).passthrough(),i=jr.looseRecord(f,g);e=jr.intersection(h,i);break}if(c.patternProperties){let f=c.patternProperties,g=Object.keys(f),h=[];for(let b of g){let c=a(f[b],d),e=jr.string().regex(new RegExp(b));h.push(jr.looseRecord(e,c))}let i=[];if(Object.keys(b).length>0&&i.push(jr.object(b).passthrough()),i.push(...h),0===i.length)e=jr.object({}).passthrough();else if(1===i.length)e=i[0];else{let a=jr.intersection(i[0],i[1]);for(let b=2;b<i.length;b++)a=jr.intersection(a,i[b]);e=a}break}let h=jr.object(b);e=!1===c.additionalProperties?h.strict():"object"==typeof c.additionalProperties?h.catchall(a(c.additionalProperties,d)):h.passthrough();break}case"array":{let b=c.prefixItems,f=c.items;if(b&&Array.isArray(b)){let g=b.map(b=>a(b,d)),h=f&&"object"==typeof f&&!Array.isArray(f)?a(f,d):void 0;e=h?jr.tuple(g).rest(h):jr.tuple(g),"number"==typeof c.minItems&&(e=e.check(jr.minLength(c.minItems))),"number"==typeof c.maxItems&&(e=e.check(jr.maxLength(c.maxItems)))}else if(Array.isArray(f)){let b=f.map(b=>a(b,d)),g=c.additionalItems&&"object"==typeof c.additionalItems?a(c.additionalItems,d):void 0;e=g?jr.tuple(b).rest(g):jr.tuple(b),"number"==typeof c.minItems&&(e=e.check(jr.minLength(c.minItems))),"number"==typeof c.maxItems&&(e=e.check(jr.maxLength(c.maxItems)))}else if(void 0!==f){let b=a(f,d),g=jr.array(b);"number"==typeof c.minItems&&(g=g.min(c.minItems)),"number"==typeof c.maxItems&&(g=g.max(c.maxItems)),e=g}else e=jr.array(jr.any());break}default:throw Error(`Unsupported type: ${f}`)}return c.description&&(e=e.describe(c.description)),void 0!==c.default&&(e=e.default(c.default)),e}(b,c),e=b.type||void 0!==b.enum||void 0!==b.const;if(b.anyOf&&Array.isArray(b.anyOf)){let f=b.anyOf.map(b=>a(b,c)),g=jr.union(f);d=e?jr.intersection(d,g):g}if(b.oneOf&&Array.isArray(b.oneOf)){let f=b.oneOf.map(b=>a(b,c)),g=jr.xor(f);d=e?jr.intersection(d,g):g}if(b.allOf&&Array.isArray(b.allOf))if(0===b.allOf.length)d=e?d:jr.any();else{let f=e?d:a(b.allOf[0],c),g=+!e;for(let d=g;d<b.allOf.length;d++)f=jr.intersection(f,a(b.allOf[d],c));d=f}!0===b.nullable&&"openapi-3.0"===c.version&&(d=jr.nullable(d)),!0===b.readOnly&&(d=jr.readonly(d));let f={};for(let a of["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"])a in b&&(f[a]=b[a]);for(let a of["contentEncoding","contentMediaType","contentSchema"])a in b&&(f[a]=b[a]);for(let a of Object.keys(b))js.has(a)||(f[a]=b[a]);return Object.keys(f).length>0&&c.registry.add(d,f),d}(a,e)}function ju(a){return dP(gP,a)}function jv(a){return eh(hD,a)}function jw(a){return eo(hL,a)}function jx(a){return eq(hN,a)}function jy(a){return eB(h4,a)}a.s(["bigint",()=>jx,"boolean",()=>jw,"date",()=>jy,"number",()=>jv,"string",()=>ju],758483),h(dB()),a.s([],222157),a.i(222157),a.i(838005),a.i(185679),a.i(651152),a.i(313399),a.i(309419),a.i(561802),a.i(872385);var jz=gp,jA=go;a.i(394551),a.s(["ar",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`  :   instanceof ${d.expected}    ${e}`;return`  :   ${a}    ${e}`}case"invalid_value":if(1===d.values.length)return`  :   ${R(d.values[0])}`;return`  :     : ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`   :    ${d.origin??""} ${b} ${d.maximum.toString()} ${c.unit??""}`;return`  :    ${d.origin??""} ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`  :   ${d.origin}   ${b} ${d.minimum.toString()} ${c.unit}`;return`  :   ${d.origin}   ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`  :     "${d.prefix}"`;if("ends_with"===d.format)return`  :     "${d.suffix}"`;if("includes"===d.format)return`  :    "${d.includes}"`;if("regex"===d.format)return`  :     ${d.pattern}`;return`${b[d.format]??d.format}  `;case"not_multiple_of":return`  :      ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"":""} ${d.keys.length>1?"":""}: ${o(d.keys," ")}`;case"invalid_key":return`    ${d.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`    ${d.origin}`}})}},"az",0,function(){let a,b,c;return{localeError:(a={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Yanl dyr: g\xf6zlniln instanceof ${d.expected}, daxil olan ${e}`;return`Yanl dyr: g\xf6zlniln ${a}, daxil olan ${e}`}case"invalid_value":if(1===d.values.length)return`Yanl dyr: g\xf6zlniln ${R(d.values[0])}`;return`Yanl se\xe7im: aadaklardan biri olmaldr: ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${d.origin??"dyr"} ${b}${d.maximum.toString()} ${c.unit??"element"}`;return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${d.origin??"dyr"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`\xc7ox ki\xe7ik: g\xf6zlniln ${d.origin} ${b}${d.minimum.toString()} ${c.unit}`;return`\xc7ox ki\xe7ik: g\xf6zlniln ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Yanl mtn: "${d.prefix}" il balamaldr`;if("ends_with"===d.format)return`Yanl mtn: "${d.suffix}" il bitmlidir`;if("includes"===d.format)return`Yanl mtn: "${d.includes}" daxil olmaldr`;if("regex"===d.format)return`Yanl mtn: ${d.pattern} ablonuna uyun olmaldr`;return`Yanl ${b[d.format]??d.format}`;case"not_multiple_of":return`Yanl dd: ${d.divisor} il b\xf6l\xfcn biln olmaldr`;case"unrecognized_keys":return`Tannmayan a\xe7ar${d.keys.length>1?"lar":""}: ${o(d.keys,", ")}`;case"invalid_key":return`${d.origin} daxilind yanl a\xe7ar`;case"invalid_union":return"Yanl dyr";case"invalid_element":return`${d.origin} daxilind yanl dyr`;default:return`Yanl dyr`}})}},"be",0,function(){let a,b,c;return{localeError:(a={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}},b={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${R(d.values[0])}`;return` :    ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c){let a=dA(Number(d.maximum),c.unit.one,c.unit.few,c.unit.many);return` : ,  ${d.origin??""}  ${c.verb} ${b}${d.maximum.toString()} ${a}`}return` : ,  ${d.origin??""}   ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c){let a=dA(Number(d.minimum),c.unit.one,c.unit.few,c.unit.many);return` : ,  ${d.origin}  ${c.verb} ${b}${d.minimum.toString()} ${a}`}return` : ,  ${d.origin}   ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :    "${d.prefix}"`;if("ends_with"===d.format)return` :    "${d.suffix}"`;if("includes"===d.format)return` :   "${d.includes}"`;if("regex"===d.format)return` :    ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` :    ${d.divisor}`;case"unrecognized_keys":return` ${d.keys.length>1?"":""}: ${o(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${d.origin}`;default:return` `}})}},"bg",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${R(d.values[0])}`;return` :    ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` :   ${d.origin??""}   ${b}${d.maximum.toString()} ${c.unit??""}`;return` :   ${d.origin??""}   ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` :   ${d.origin}   ${b}${d.minimum.toString()} ${c.unit}`;return` :   ${d.origin}   ${b}${d.minimum.toString()}`}case"invalid_format":{if("starts_with"===d.format)return` :     "${d.prefix}"`;if("ends_with"===d.format)return` :     "${d.suffix}"`;if("includes"===d.format)return` :    "${d.includes}"`;if("regex"===d.format)return` :     ${d.pattern}`;let a="";return"emoji"===d.format&&(a=""),"datetime"===d.format&&(a=""),"date"===d.format&&(a=""),"time"===d.format&&(a=""),"duration"===d.format&&(a=""),`${a} ${b[d.format]??d.format}`}case"not_multiple_of":return` :      ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"":""} ${d.keys.length>1?"":""}: ${o(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${d.origin}`;default:return` `}})}},"ca",0,function(){let a,b,c;return{localeError:(a={string:{unit:"carcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}},b={regex:"entrada",email:"adrea electrnica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adrea IPv4",ipv6:"adrea IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Tipus inv\xe0lid: s'esperava instanceof ${d.expected}, s'ha rebut ${e}`;return`Tipus inv\xe0lid: s'esperava ${a}, s'ha rebut ${e}`}case"invalid_value":if(1===d.values.length)return`Valor inv\xe0lid: s'esperava ${R(d.values[0])}`;return`Opci\xf3 inv\xe0lida: s'esperava una de ${o(d.values," o ")}`;case"too_big":{let b=d.inclusive?"com a mxim":"menys de",c=a[d.origin]??null;if(c)return`Massa gran: s'esperava que ${d.origin??"el valor"} contingu\xe9s ${b} ${d.maximum.toString()} ${c.unit??"elements"}`;return`Massa gran: s'esperava que ${d.origin??"el valor"} fos ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?"com a mnim":"ms de",c=a[d.origin]??null;if(c)return`Massa petit: s'esperava que ${d.origin} contingu\xe9s ${b} ${d.minimum.toString()} ${c.unit}`;return`Massa petit: s'esperava que ${d.origin} fos ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Format inv\xe0lid: ha de comen\xe7ar amb "${d.prefix}"`;if("ends_with"===d.format)return`Format inv\xe0lid: ha d'acabar amb "${d.suffix}"`;if("includes"===d.format)return`Format inv\xe0lid: ha d'incloure "${d.includes}"`;if("regex"===d.format)return`Format inv\xe0lid: ha de coincidir amb el patr\xf3 ${d.pattern}`;return`Format inv\xe0lid per a ${b[d.format]??d.format}`;case"not_multiple_of":return`N\xfamero inv\xe0lid: ha de ser m\xfaltiple de ${d.divisor}`;case"unrecognized_keys":return`Clau${d.keys.length>1?"s":""} no reconeguda${d.keys.length>1?"s":""}: ${o(d.keys,", ")}`;case"invalid_key":return`Clau inv\xe0lida a ${d.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Element inv\xe0lid a ${d.origin}`;default:return`Entrada inv\xe0lida`}})}},"cs",0,function(){let a,b,c;return{localeError:(a={string:{unit:"znak",verb:"mt"},file:{unit:"bajt",verb:"mt"},array:{unit:"prvk",verb:"mt"},set:{unit:"prvk",verb:"mt"}},b={regex:"regulrn vraz",email:"e-mailov adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve formtu ISO",date:"datum ve formtu ISO",time:"as ve formtu ISO",duration:"doba trvn ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zakdovan ve formtu base64",base64url:"etzec zakdovan ve formtu base64url",json_string:"etzec ve formtu JSON",e164:"slo E.164",jwt:"JWT",template_literal:"vstup"},c={nan:"NaN",number:"slo",string:"etzec",function:"funkce",array:"pole"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Neplatn\xfd vstup: oek\xe1v\xe1no instanceof ${d.expected}, obdreno ${e}`;return`Neplatn\xfd vstup: oek\xe1v\xe1no ${a}, obdreno ${e}`}case"invalid_value":if(1===d.values.length)return`Neplatn\xfd vstup: oek\xe1v\xe1no ${R(d.values[0])}`;return`Neplatn\xe1 monost: oek\xe1v\xe1na jedna z hodnot ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Hodnota je p\xedli velk\xe1: ${d.origin??"hodnota"} mus\xed m\xedt ${b}${d.maximum.toString()} ${c.unit??"prvk"}`;return`Hodnota je p\xedli velk\xe1: ${d.origin??"hodnota"} mus\xed b\xfdt ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Hodnota je p\xedli mal\xe1: ${d.origin??"hodnota"} mus\xed m\xedt ${b}${d.minimum.toString()} ${c.unit??"prvk"}`;return`Hodnota je p\xedli mal\xe1: ${d.origin??"hodnota"} mus\xed b\xfdt ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Neplatn\xfd etzec: mus\xed za\xednat na "${d.prefix}"`;if("ends_with"===d.format)return`Neplatn\xfd etzec: mus\xed konit na "${d.suffix}"`;if("includes"===d.format)return`Neplatn\xfd etzec: mus\xed obsahovat "${d.includes}"`;if("regex"===d.format)return`Neplatn\xfd etzec: mus\xed odpov\xeddat vzoru ${d.pattern}`;return`Neplatn\xfd form\xe1t ${b[d.format]??d.format}`;case"not_multiple_of":return`Neplatn\xe9 \xedslo: mus\xed b\xfdt n\xe1sobkem ${d.divisor}`;case"unrecognized_keys":return`Nezn\xe1m\xe9 kl\xede: ${o(d.keys,", ")}`;case"invalid_key":return`Neplatn\xfd kl\xed v ${d.origin}`;case"invalid_union":return"Neplatn vstup";case"invalid_element":return`Neplatn\xe1 hodnota v ${d.origin}`;default:return`Neplatn\xfd vstup`}})}},"da",0,function(){let a,b,c;return{localeError:(a={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},b={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslt",date:"ISO-dato",time:"ISO-klokkeslt",duration:"ISO-varighed",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},c={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"st",file:"fil"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ugyldigt input: forventede instanceof ${d.expected}, fik ${e}`;return`Ugyldigt input: forventede ${a}, fik ${e}`}case"invalid_value":if(1===d.values.length)return`Ugyldig v\xe6rdi: forventede ${R(d.values[0])}`;return`Ugyldigt valg: forventede en af f\xf8lgende ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",e=a[d.origin]??null,f=c[d.origin]??d.origin;if(e)return`For stor: forventede ${f??"value"} ${e.verb} ${b} ${d.maximum.toString()} ${e.unit??"elementer"}`;return`For stor: forventede ${f??"value"} havde ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",e=a[d.origin]??null,f=c[d.origin]??d.origin;if(e)return`For lille: forventede ${f} ${e.verb} ${b} ${d.minimum.toString()} ${e.unit}`;return`For lille: forventede ${f} havde ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Ugyldig streng: skal starte med "${d.prefix}"`;if("ends_with"===d.format)return`Ugyldig streng: skal ende med "${d.suffix}"`;if("includes"===d.format)return`Ugyldig streng: skal indeholde "${d.includes}"`;if("regex"===d.format)return`Ugyldig streng: skal matche m\xf8nsteret ${d.pattern}`;return`Ugyldig ${b[d.format]??d.format}`;case"not_multiple_of":return`Ugyldigt tal: skal v\xe6re deleligt med ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"Ukendte ngler":"Ukendt ngle"}: ${o(d.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8gle i ${d.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xe6rdi i ${d.origin}`;default:return"Ugyldigt input"}})}},"de",0,function(){let a,b,c;return{localeError:(a={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}},b={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},c={nan:"NaN",number:"Zahl",array:"Array"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ung\xfcltige Eingabe: erwartet instanceof ${d.expected}, erhalten ${e}`;return`Ung\xfcltige Eingabe: erwartet ${a}, erhalten ${e}`}case"invalid_value":if(1===d.values.length)return`Ung\xfcltige Eingabe: erwartet ${R(d.values[0])}`;return`Ung\xfcltige Option: erwartet eine von ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Zu gro\xdf: erwartet, dass ${d.origin??"Wert"} ${b}${d.maximum.toString()} ${c.unit??"Elemente"} hat`;return`Zu gro\xdf: erwartet, dass ${d.origin??"Wert"} ${b}${d.maximum.toString()} ist`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Zu klein: erwartet, dass ${d.origin} ${b}${d.minimum.toString()} ${c.unit} hat`;return`Zu klein: erwartet, dass ${d.origin} ${b}${d.minimum.toString()} ist`}case"invalid_format":if("starts_with"===d.format)return`Ung\xfcltiger String: muss mit "${d.prefix}" beginnen`;if("ends_with"===d.format)return`Ung\xfcltiger String: muss mit "${d.suffix}" enden`;if("includes"===d.format)return`Ung\xfcltiger String: muss "${d.includes}" enthalten`;if("regex"===d.format)return`Ung\xfcltiger String: muss dem Muster ${d.pattern} entsprechen`;return`Ung\xfcltig: ${b[d.format]??d.format}`;case"not_multiple_of":return`Ung\xfcltige Zahl: muss ein Vielfaches von ${d.divisor} sein`;case"unrecognized_keys":return`${d.keys.length>1?"Unbekannte Schlssel":"Unbekannter Schlssel"}: ${o(d.keys,", ")}`;case"invalid_key":return`Ung\xfcltiger Schl\xfcssel in ${d.origin}`;case"invalid_union":return"Ungltige Eingabe";case"invalid_element":return`Ung\xfcltiger Wert in ${d.origin}`;default:return`Ung\xfcltige Eingabe`}})}},"en",0,dB,"eo",0,function(){let a,b,c;return{localeError:(a={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}},b={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},c={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Nevalida enigo: atendiis instanceof ${d.expected}, riceviis ${e}`;return`Nevalida enigo: atendiis ${a}, riceviis ${e}`}case"invalid_value":if(1===d.values.length)return`Nevalida enigo: atendiis ${R(d.values[0])}`;return`Nevalida opcio: atendiis unu el ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Tro granda: atendiis ke ${d.origin??"valoro"} havu ${b}${d.maximum.toString()} ${c.unit??"elementojn"}`;return`Tro granda: atendiis ke ${d.origin??"valoro"} havu ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Tro malgranda: atendiis ke ${d.origin} havu ${b}${d.minimum.toString()} ${c.unit}`;return`Tro malgranda: atendiis ke ${d.origin} estu ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Nevalida karaktraro: devas komencii per "${d.prefix}"`;if("ends_with"===d.format)return`Nevalida karaktraro: devas finii per "${d.suffix}"`;if("includes"===d.format)return`Nevalida karaktraro: devas inkluzivi "${d.includes}"`;if("regex"===d.format)return`Nevalida karaktraro: devas kongrui kun la modelo ${d.pattern}`;return`Nevalida ${b[d.format]??d.format}`;case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${d.divisor}`;case"unrecognized_keys":return`Nekonata${d.keys.length>1?"j":""} losilo${d.keys.length>1?"j":""}: ${o(d.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${d.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${d.origin}`}})}},"es",0,function(){let a,b,c;return{localeError:(a={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},b={regex:"entrada",email:"direccin de correo electrnico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duracin ISO",ipv4:"direccin IPv4",ipv6:"direccin IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},c={nan:"NaN",string:"texto",number:"nmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nmero grande",symbol:"smbolo",undefined:"indefinido",null:"nulo",function:"funcin",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeracin",union:"unin",literal:"literal",promise:"promesa",void:"vaco",never:"nunca",unknown:"desconocido",any:"cualquiera"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Entrada inv\xe1lida: se esperaba instanceof ${d.expected}, recibido ${e}`;return`Entrada inv\xe1lida: se esperaba ${a}, recibido ${e}`}case"invalid_value":if(1===d.values.length)return`Entrada inv\xe1lida: se esperaba ${R(d.values[0])}`;return`Opci\xf3n inv\xe1lida: se esperaba una de ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",e=a[d.origin]??null,f=c[d.origin]??d.origin;if(e)return`Demasiado grande: se esperaba que ${f??"valor"} tuviera ${b}${d.maximum.toString()} ${e.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${f??"valor"} fuera ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",e=a[d.origin]??null,f=c[d.origin]??d.origin;if(e)return`Demasiado peque\xf1o: se esperaba que ${f} tuviera ${b}${d.minimum.toString()} ${e.unit}`;return`Demasiado peque\xf1o: se esperaba que ${f} fuera ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Cadena inv\xe1lida: debe comenzar con "${d.prefix}"`;if("ends_with"===d.format)return`Cadena inv\xe1lida: debe terminar en "${d.suffix}"`;if("includes"===d.format)return`Cadena inv\xe1lida: debe incluir "${d.includes}"`;if("regex"===d.format)return`Cadena inv\xe1lida: debe coincidir con el patr\xf3n ${d.pattern}`;return`Inv\xe1lido ${b[d.format]??d.format}`;case"not_multiple_of":return`N\xfamero inv\xe1lido: debe ser m\xfaltiplo de ${d.divisor}`;case"unrecognized_keys":return`Llave${d.keys.length>1?"s":""} desconocida${d.keys.length>1?"s":""}: ${o(d.keys,", ")}`;case"invalid_key":return`Llave inv\xe1lida en ${c[d.origin]??d.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido en ${c[d.origin]??d.origin}`;default:return`Entrada inv\xe1lida`}})}},"fa",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected}  ${e}  `;return` :  ${a}  ${e}  `}case"invalid_value":if(1===d.values.length)return` :  ${R(d.values[0])} `;return` :    ${o(d.values,"|")} `;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` : ${d.origin??""}  ${b}${d.maximum.toString()} ${c.unit??""} `;return` : ${d.origin??""}  ${b}${d.maximum.toString()} `}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` : ${d.origin}  ${b}${d.minimum.toString()} ${c.unit} `;return` : ${d.origin}  ${b}${d.minimum.toString()} `}case"invalid_format":if("starts_with"===d.format)return` :   "${d.prefix}"  `;if("ends_with"===d.format)return` :   "${d.suffix}"  `;if("includes"===d.format)return` :   "${d.includes}" `;if("regex"===d.format)return` :    ${d.pattern}   `;return`${b[d.format]??d.format} `;case"not_multiple_of":return` :   ${d.divisor} `;case"unrecognized_keys":return`${d.keys.length>1?"":""} : ${o(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":default:return` `;case"invalid_element":return`   ${d.origin}`}})}},"fi",0,function(){let a,b,c;return{localeError:(a={string:{unit:"merkki",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pivmrn"}},b={regex:"snnllinen lauseke",email:"shkpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pivmr",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Virheellinen tyyppi: odotettiin instanceof ${d.expected}, oli ${e}`;return`Virheellinen tyyppi: odotettiin ${a}, oli ${e}`}case"invalid_value":if(1===d.values.length)return`Virheellinen sy\xf6te: t\xe4ytyy olla ${R(d.values[0])}`;return`Virheellinen valinta: t\xe4ytyy olla yksi seuraavista: ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Liian suuri: ${c.subject} t\xe4ytyy olla ${b}${d.maximum.toString()} ${c.unit}`.trim();return`Liian suuri: arvon t\xe4ytyy olla ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Liian pieni: ${c.subject} t\xe4ytyy olla ${b}${d.minimum.toString()} ${c.unit}`.trim();return`Liian pieni: arvon t\xe4ytyy olla ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Virheellinen sy\xf6te: t\xe4ytyy alkaa "${d.prefix}"`;if("ends_with"===d.format)return`Virheellinen sy\xf6te: t\xe4ytyy loppua "${d.suffix}"`;if("includes"===d.format)return`Virheellinen sy\xf6te: t\xe4ytyy sis\xe4lt\xe4\xe4 "${d.includes}"`;if("regex"===d.format)return`Virheellinen sy\xf6te: t\xe4ytyy vastata s\xe4\xe4nn\xf6llist\xe4 lauseketta ${d.pattern}`;return`Virheellinen ${b[d.format]??d.format}`;case"not_multiple_of":return`Virheellinen luku: t\xe4ytyy olla luvun ${d.divisor} monikerta`;case"unrecognized_keys":return`${d.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${o(d.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return`Virheellinen sy\xf6te`}})}},"fr",0,function(){let a,b,c;return{localeError:(a={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},b={regex:"entre",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},c={nan:"NaN",number:"nombre",array:"tableau"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Entr\xe9e invalide : instanceof ${d.expected} attendu, ${e} re\xe7u`;return`Entr\xe9e invalide : ${a} attendu, ${e} re\xe7u`}case"invalid_value":if(1===d.values.length)return`Entr\xe9e invalide : ${R(d.values[0])} attendu`;return`Option invalide : une valeur parmi ${o(d.values,"|")} attendue`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Trop grand : ${d.origin??"valeur"} doit ${c.verb} ${b}${d.maximum.toString()} ${c.unit??"lment(s)"}`;return`Trop grand : ${d.origin??"valeur"} doit \xeatre ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Trop petit : ${d.origin} doit ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return`Trop petit : ${d.origin} doit \xeatre ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Cha\xeene invalide : doit commencer par "${d.prefix}"`;if("ends_with"===d.format)return`Cha\xeene invalide : doit se terminer par "${d.suffix}"`;if("includes"===d.format)return`Cha\xeene invalide : doit inclure "${d.includes}"`;if("regex"===d.format)return`Cha\xeene invalide : doit correspondre au mod\xe8le ${d.pattern}`;return`${b[d.format]??d.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${d.divisor}`;case"unrecognized_keys":return`Cl\xe9${d.keys.length>1?"s":""} non reconnue${d.keys.length>1?"s":""} : ${o(d.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${d.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${d.origin}`;default:return`Entr\xe9e invalide`}})}},"frCA",0,function(){let a,b,c;return{localeError:(a={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},b={regex:"entre",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Entr\xe9e invalide : attendu instanceof ${d.expected}, re\xe7u ${e}`;return`Entr\xe9e invalide : attendu ${a}, re\xe7u ${e}`}case"invalid_value":if(1===d.values.length)return`Entr\xe9e invalide : attendu ${R(d.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"":"<",c=a[d.origin]??null;if(c)return`Trop grand : attendu que ${d.origin??"la valeur"} ait ${b}${d.maximum.toString()} ${c.unit}`;return`Trop grand : attendu que ${d.origin??"la valeur"} soit ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?"":">",c=a[d.origin]??null;if(c)return`Trop petit : attendu que ${d.origin} ait ${b}${d.minimum.toString()} ${c.unit}`;return`Trop petit : attendu que ${d.origin} soit ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Cha\xeene invalide : doit commencer par "${d.prefix}"`;if("ends_with"===d.format)return`Cha\xeene invalide : doit se terminer par "${d.suffix}"`;if("includes"===d.format)return`Cha\xeene invalide : doit inclure "${d.includes}"`;if("regex"===d.format)return`Cha\xeene invalide : doit correspondre au motif ${d.pattern}`;return`${b[d.format]??d.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${d.divisor}`;case"unrecognized_keys":return`Cl\xe9${d.keys.length>1?"s":""} non reconnue${d.keys.length>1?"s":""} : ${o(d.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${d.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${d.origin}`;default:return`Entr\xe9e invalide`}})}},"he",0,function(){let a,b,c,d,e,f,g,h,i;return{localeError:(a={string:{label:"",gender:"f"},number:{label:"",gender:"m"},boolean:{label:" ",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"",gender:"m"},array:{label:"",gender:"m"},object:{label:"",gender:"m"},null:{label:"  (null)",gender:"m"},undefined:{label:"   (undefined)",gender:"m"},symbol:{label:" (Symbol)",gender:"m"},function:{label:"",gender:"f"},map:{label:" (Map)",gender:"f"},set:{label:" (Set)",gender:"f"},file:{label:"",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"  ",gender:"m"},value:{label:"",gender:"m"}},b={string:{unit:"",shortLabel:"",longLabel:""},file:{unit:"",shortLabel:"",longLabel:""},array:{unit:"",shortLabel:"",longLabel:""},set:{unit:"",shortLabel:"",longLabel:""},number:{unit:"",shortLabel:"",longLabel:""}},c=b=>b?a[b]:void 0,d=b=>{let d=c(b);return d?d.label:b??a.unknown.label},e=a=>`${d(a)}`,f=a=>{let b=c(a);return"f"===(b?.gender??"m")?" ":" "},g=a=>a?b[a]??null:null,h={regex:{label:"",gender:"m"},email:{label:" ",gender:"f"},url:{label:" ",gender:"f"},emoji:{label:"'",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"  ISO",gender:"m"},date:{label:" ISO",gender:"m"},time:{label:" ISO",gender:"m"},duration:{label:"  ISO",gender:"m"},ipv4:{label:" IPv4",gender:"f"},ipv6:{label:" IPv6",gender:"f"},cidrv4:{label:" IPv4",gender:"m"},cidrv6:{label:" IPv6",gender:"m"},base64:{label:"  64",gender:"f"},base64url:{label:"  64  ",gender:"f"},json_string:{label:" JSON",gender:"f"},e164:{label:" E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"",gender:"m"},includes:{label:"",gender:"m"},lowercase:{label:"",gender:"m"},starts_with:{label:"",gender:"m"},uppercase:{label:"",gender:"m"}},i={nan:"NaN"},b=>{switch(b.code){case"invalid_type":{let c=b.expected,e=i[c??""]??d(c),f=ag(b.input),g=i[f]??a[f]?.label??f;if(/^[A-Z]/.test(b.expected))return`  :   instanceof ${b.expected},  ${g}`;return`  :   ${e},  ${g}`}case"invalid_value":{if(1===b.values.length)return`  :    ${R(b.values[0])}`;let a=b.values.map(a=>R(a));if(2===b.values.length)return`  :    ${a[0]}  ${a[1]}`;let c=a[a.length-1],d=a.slice(0,-1).join(", ");return`  :    ${d}  ${c}`}case"too_big":{let a=g(b.origin),c=e(b.origin??"value");if("string"===b.origin)return`${a?.longLabel??""} : ${c}   ${b.maximum.toString()} ${a?.unit??""} ${b.inclusive?" ":" "}`.trim();if("number"===b.origin){let a=b.inclusive?`   -${b.maximum}`:` -${b.maximum}`;return` : ${c}   ${a}`}if("array"===b.origin||"set"===b.origin){let d="set"===b.origin?"":"",e=b.inclusive?`${b.maximum} ${a?.unit??""}  `:` -${b.maximum} ${a?.unit??""}`;return` : ${c} ${d}  ${e}`.trim()}let d=b.inclusive?"<=":"<",h=f(b.origin??"value");if(a?.unit)return`${a.longLabel} : ${c} ${h} ${d}${b.maximum.toString()} ${a.unit}`;return`${a?.longLabel??""} : ${c} ${h} ${d}${b.maximum.toString()}`}case"too_small":{let a=g(b.origin),c=e(b.origin??"value");if("string"===b.origin)return`${a?.shortLabel??""} : ${c}   ${b.minimum.toString()} ${a?.unit??""} ${b.inclusive?" ":""}`.trim();if("number"===b.origin){let a=b.inclusive?`   -${b.minimum}`:` -${b.minimum}`;return` : ${c}   ${a}`}if("array"===b.origin||"set"===b.origin){let d="set"===b.origin?"":"";if(1===b.minimum&&b.inclusive){let a=(b.origin,"  ");return` : ${c} ${d}  ${a}`}let e=b.inclusive?`${b.minimum} ${a?.unit??""}  `:` -${b.minimum} ${a?.unit??""}`;return` : ${c} ${d}  ${e}`.trim()}let d=b.inclusive?">=":">",h=f(b.origin??"value");if(a?.unit)return`${a.shortLabel} : ${c} ${h} ${d}${b.minimum.toString()} ${a.unit}`;return`${a?.shortLabel??""} : ${c} ${h} ${d}${b.minimum.toString()}`}case"invalid_format":{if("starts_with"===b.format)return`    "${b.prefix}"`;if("ends_with"===b.format)return`    "${b.suffix}"`;if("includes"===b.format)return`   "${b.includes}"`;if("regex"===b.format)return`    ${b.pattern}`;let a=h[b.format],c=a?.label??b.format,d=a?.gender??"m";return`${c}  ${"f"===d?"":""}`}case"not_multiple_of":return`  :     ${b.divisor}`;case"unrecognized_keys":return`${b.keys.length>1?"":""}  ${b.keys.length>1?"":""}: ${o(b.keys,", ")}`;case"invalid_key":return`   `;case"invalid_union":return"  ";case"invalid_element":{let a=e(b.origin??"array");return`   ${a}`}default:return`  `}})}},"hu",0,function(){let a,b,c;return{localeError:(a={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}},b={regex:"bemenet",email:"email cm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idblyeg",date:"ISO dtum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 cm",ipv6:"IPv6 cm",cidrv4:"IPv4 tartomny",cidrv6:"IPv6 tartomny",base64:"base64-kdolt string",base64url:"base64url-kdolt string",json_string:"JSON string",e164:"E.164 szm",jwt:"JWT",template_literal:"bemenet"},c={nan:"NaN",number:"szm",array:"tmb"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k instanceof ${d.expected}, a kapott \xe9rt\xe9k ${e}`;return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${a}, a kapott \xe9rt\xe9k ${e}`}case"invalid_value":if(1===d.values.length)return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${R(d.values[0])}`;return`\xc9rv\xe9nytelen opci\xf3: valamelyik \xe9rt\xe9k v\xe1rt ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`T\xfal nagy: ${d.origin??"rtk"} m\xe9rete t\xfal nagy ${b}${d.maximum.toString()} ${c.unit??"elem"}`;return`T\xfal nagy: a bemeneti \xe9rt\xe9k ${d.origin??"rtk"} t\xfal nagy: ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${d.origin} m\xe9rete t\xfal kicsi ${b}${d.minimum.toString()} ${c.unit}`;return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${d.origin} t\xfal kicsi ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`\xc9rv\xe9nytelen string: "${d.prefix}" \xe9rt\xe9kkel kell kezddnie`;if("ends_with"===d.format)return`\xc9rv\xe9nytelen string: "${d.suffix}" \xe9rt\xe9kkel kell v\xe9gzdnie`;if("includes"===d.format)return`\xc9rv\xe9nytelen string: "${d.includes}" \xe9rt\xe9ket kell tartalmaznia`;if("regex"===d.format)return`\xc9rv\xe9nytelen string: ${d.pattern} mint\xe1nak kell megfelelnie`;return`\xc9rv\xe9nytelen ${b[d.format]??d.format}`;case"not_multiple_of":return`\xc9rv\xe9nytelen sz\xe1m: ${d.divisor} t\xf6bbsz\xf6r\xf6s\xe9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${d.keys.length>1?"s":""}: ${o(d.keys,", ")}`;case"invalid_key":return`\xc9rv\xe9nytelen kulcs ${d.origin}`;case"invalid_union":return"rvnytelen bemenet";case"invalid_element":return`\xc9rv\xe9nytelen \xe9rt\xe9k: ${d.origin}`;default:return`\xc9rv\xe9nytelen bemenet`}})}},"hy",0,function(){let a,b,c;return{localeError:(a={string:{unit:{one:"",many:""},verb:""},file:{unit:{one:"",many:""},verb:""},array:{unit:{one:"",many:""},verb:""},set:{unit:{one:"",many:""},verb:""}},b={regex:"",email:". ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`    instanceof ${d.expected},   ${e}`;return`    ${a},   ${e}`}case"invalid_value":if(1===d.values.length)return`    ${R(d.values[1])}`;return`      ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c){let a=dC(Number(d.maximum),c.unit.one,c.unit.many);return`    ,  ${dD(d.origin??"")}  ${b}${d.maximum.toString()} ${a}`}return`    ,  ${dD(d.origin??"")}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c){let a=dC(Number(d.minimum),c.unit.one,c.unit.many);return`    ,  ${dD(d.origin)}  ${b}${d.minimum.toString()} ${a}`}return`    ,  ${dD(d.origin)}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`     "${d.prefix}"-`;if("ends_with"===d.format)return`     "${d.suffix}"-`;if("includes"===d.format)return`     "${d.includes}"`;if("regex"===d.format)return`     ${d.pattern} `;return` ${b[d.format]??d.format}`;case"not_multiple_of":return`      ${d.divisor}-`;case"unrecognized_keys":return` ${d.keys.length>1?"":""}. ${o(d.keys,", ")}`;case"invalid_key":return`  ${dD(d.origin)}-`;case"invalid_union":return" ";case"invalid_element":return`  ${dD(d.origin)}-`;default:return` `}})}},"id",0,function(){let a,b,c;return{localeError:(a={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}},b={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Input tidak valid: diharapkan instanceof ${d.expected}, diterima ${e}`;return`Input tidak valid: diharapkan ${a}, diterima ${e}`}case"invalid_value":if(1===d.values.length)return`Input tidak valid: diharapkan ${R(d.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Terlalu besar: diharapkan ${d.origin??"value"} memiliki ${b}${d.maximum.toString()} ${c.unit??"elemen"}`;return`Terlalu besar: diharapkan ${d.origin??"value"} menjadi ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Terlalu kecil: diharapkan ${d.origin} memiliki ${b}${d.minimum.toString()} ${c.unit}`;return`Terlalu kecil: diharapkan ${d.origin} menjadi ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`String tidak valid: harus dimulai dengan "${d.prefix}"`;if("ends_with"===d.format)return`String tidak valid: harus berakhir dengan "${d.suffix}"`;if("includes"===d.format)return`String tidak valid: harus menyertakan "${d.includes}"`;if("regex"===d.format)return`String tidak valid: harus sesuai pola ${d.pattern}`;return`${b[d.format]??d.format} tidak valid`;case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${d.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${d.keys.length>1?"s":""}: ${o(d.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${d.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${d.origin}`}})}},"is",0,function(){let a,b,c;return{localeError:(a={string:{unit:"stafi",verb:"a hafa"},file:{unit:"bti",verb:"a hafa"},array:{unit:"hluti",verb:"a hafa"},set:{unit:"hluti",verb:"a hafa"}},b={regex:"gildi",email:"netfang",url:"vefsl",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tmi",date:"ISO dagsetning",time:"ISO tmi",duration:"ISO tmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tlugildi",jwt:"JWT",template_literal:"gildi"},c={nan:"NaN",number:"nmer",array:"fylki"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Rangt gildi: \xde\xfa sl\xf3st inn ${e} \xfear sem \xe1 a\xf0 vera instanceof ${d.expected}`;return`Rangt gildi: \xde\xfa sl\xf3st inn ${e} \xfear sem \xe1 a\xf0 vera ${a}`}case"invalid_value":if(1===d.values.length)return`Rangt gildi: gert r\xe1\xf0 fyrir ${R(d.values[0])}`;return`\xd3gilt val: m\xe1 vera eitt af eftirfarandi ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${d.origin??"gildi"} hafi ${b}${d.maximum.toString()} ${c.unit??"hluti"}`;return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${d.origin??"gildi"} s\xe9 ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${d.origin} hafi ${b}${d.minimum.toString()} ${c.unit}`;return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${d.origin} s\xe9 ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 byrja \xe1 "${d.prefix}"`;if("ends_with"===d.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 enda \xe1 "${d.suffix}"`;if("includes"===d.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 innihalda "${d.includes}"`;if("regex"===d.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 fylgja mynstri ${d.pattern}`;return`Rangt ${b[d.format]??d.format}`;case"not_multiple_of":return`R\xf6ng tala: ver\xf0ur a\xf0 vera margfeldi af ${d.divisor}`;case"unrecognized_keys":return`\xd3\xfeekkt ${d.keys.length>1?"ir lyklar":"ur lykill"}: ${o(d.keys,", ")}`;case"invalid_key":return`Rangur lykill \xed ${d.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xed ${d.origin}`}})}},"it",0,function(){let a,b,c;return{localeError:(a={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}},b={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},c={nan:"NaN",number:"numero",array:"vettore"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Input non valido: atteso instanceof ${d.expected}, ricevuto ${e}`;return`Input non valido: atteso ${a}, ricevuto ${e}`}case"invalid_value":if(1===d.values.length)return`Input non valido: atteso ${R(d.values[0])}`;return`Opzione non valida: atteso uno tra ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Troppo grande: ${d.origin??"valore"} deve avere ${b}${d.maximum.toString()} ${c.unit??"elementi"}`;return`Troppo grande: ${d.origin??"valore"} deve essere ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Troppo piccolo: ${d.origin} deve avere ${b}${d.minimum.toString()} ${c.unit}`;return`Troppo piccolo: ${d.origin} deve essere ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Stringa non valida: deve iniziare con "${d.prefix}"`;if("ends_with"===d.format)return`Stringa non valida: deve terminare con "${d.suffix}"`;if("includes"===d.format)return`Stringa non valida: deve includere "${d.includes}"`;if("regex"===d.format)return`Stringa non valida: deve corrispondere al pattern ${d.pattern}`;return`Invalid ${b[d.format]??d.format}`;case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${d.divisor}`;case"unrecognized_keys":return`Chiav${d.keys.length>1?"i":"e"} non riconosciut${d.keys.length>1?"e":"a"}: ${o(d.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${d.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${d.origin}`}})}},"ja",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`: instanceof ${d.expected}${e}`;return`: ${a}${e}`}case"invalid_value":if(1===d.values.length)return`: ${R(d.values[0])}`;return`: ${o(d.values,"")}`;case"too_big":{let b=d.inclusive?"":"",c=a[d.origin]??null;if(c)return`: ${d.origin??""}${d.maximum.toString()}${c.unit??""}${b}`;return`: ${d.origin??""}${d.maximum.toString()}${b}`}case"too_small":{let b=d.inclusive?"":"",c=a[d.origin]??null;if(c)return`: ${d.origin}${d.minimum.toString()}${c.unit}${b}`;return`: ${d.origin}${d.minimum.toString()}${b}`}case"invalid_format":if("starts_with"===d.format)return`: "${d.prefix}"`;if("ends_with"===d.format)return`: "${d.suffix}"`;if("includes"===d.format)return`: "${d.includes}"`;if("regex"===d.format)return`: ${d.pattern}`;return`${b[d.format]??d.format}`;case"not_multiple_of":return`: ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"":""}: ${o(d.keys,"")}`;case"invalid_key":return`${d.origin}`;case"invalid_union":return"";case"invalid_element":return`${d.origin}`;default:return``}})}},"ka",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",string:"",boolean:"",function:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${R(d.values[0])}`;return` :  - ${o(d.values,"|")}-`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` :  ${d.origin??""} ${c.verb} ${b}${d.maximum.toString()} ${c.unit}`;return` :  ${d.origin??""}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` :  ${d.origin} ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return` :  ${d.origin}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :   "${d.prefix}"-`;if("ends_with"===d.format)return` :   "${d.suffix}"-`;if("includes"===d.format)return` :   "${d.includes}"-`;if("regex"===d.format)return` :    ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` :   ${d.divisor}- `;case"unrecognized_keys":return` ${d.keys.length>1?"":""}: ${o(d.keys,", ")}`;case"invalid_key":return`  ${d.origin}-`;case"invalid_union":return" ";case"invalid_element":return`  ${d.origin}-`;default:return` `}})}},"kh",0,function(){return dE()},"km",0,dE,"ko",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}},b={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :   instanceof ${d.expected},   ${e}`;return` :   ${a},   ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${R(d.values[0])}  `;return` : ${o(d.values," ")}   `;case"too_big":{let b=d.inclusive?"":"",c=""===b?" ":" ",e=a[d.origin]??null,f=e?.unit??"";if(e)return`${d.origin??""}  : ${d.maximum.toString()}${f} ${b}${c}`;return`${d.origin??""}  : ${d.maximum.toString()} ${b}${c}`}case"too_small":{let b=d.inclusive?"":"",c=""===b?" ":" ",e=a[d.origin]??null,f=e?.unit??"";if(e)return`${d.origin??""}  : ${d.minimum.toString()}${f} ${b}${c}`;return`${d.origin??""}  : ${d.minimum.toString()} ${b}${c}`}case"invalid_format":if("starts_with"===d.format)return` : "${d.prefix}"()  `;if("ends_with"===d.format)return` : "${d.suffix}"()  `;if("includes"===d.format)return` : "${d.includes}"()  `;if("regex"===d.format)return` :  ${d.pattern}   `;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` : ${d.divisor}  `;case"unrecognized_keys":return`   : ${o(d.keys,", ")}`;case"invalid_key":return` : ${d.origin}`;case"invalid_union":default:return` `;case"invalid_element":return` : ${d.origin}`}})}},"lt",0,function(){return{localeError:(()=>{let a={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function b(b,c,d,e){let f=a[b]??null;return null===f?f:{unit:f.unit[c],verb:f.verb[e][d?"inclusive":"notInclusive"]}}let c={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"},d={nan:"NaN",number:"skaiius",bigint:"sveikasis skaiius",string:"eilut",boolean:"login reikm",undefined:"neapibrta reikm",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin reikm"};return a=>{switch(a.code){case"invalid_type":{let b=d[a.expected]??a.expected,c=ag(a.input),e=d[c]??c;if(/^[A-Z]/.test(a.expected))return`Gautas tipas ${e}, o tiktasi - instanceof ${a.expected}`;return`Gautas tipas ${e}, o tiktasi - ${b}`}case"invalid_value":if(1===a.values.length)return`Privalo bti ${R(a.values[0])}`;return`Privalo bti vienas i ${o(a.values,"|")} pasirinkim`;case"too_big":{let c=d[a.origin]??a.origin,e=b(a.origin,dG(Number(a.maximum)),a.inclusive??!1,"smaller");if(e?.verb)return`${dF(c??a.origin??"reikm")} ${e.verb} ${a.maximum.toString()} ${e.unit??"element"}`;let f=a.inclusive?"ne didesnis kaip":"maesnis kaip";return`${dF(c??a.origin??"reikm")} turi bti ${f} ${a.maximum.toString()} ${e?.unit}`}case"too_small":{let c=d[a.origin]??a.origin,e=b(a.origin,dG(Number(a.minimum)),a.inclusive??!1,"bigger");if(e?.verb)return`${dF(c??a.origin??"reikm")} ${e.verb} ${a.minimum.toString()} ${e.unit??"element"}`;let f=a.inclusive?"ne maesnis kaip":"didesnis kaip";return`${dF(c??a.origin??"reikm")} turi bti ${f} ${a.minimum.toString()} ${e?.unit}`}case"invalid_format":if("starts_with"===a.format)return`Eilut privalo prasidti "${a.prefix}"`;if("ends_with"===a.format)return`Eilut privalo pasibaigti "${a.suffix}"`;if("includes"===a.format)return`Eilut privalo traukti "${a.includes}"`;if("regex"===a.format)return`Eilut privalo atitikti ${a.pattern}`;return`Neteisingas ${c[a.format]??a.format}`;case"not_multiple_of":return`Skaiius privalo bti ${a.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${a.keys.length>1?"i":"as"} rakt${a.keys.length>1?"ai":"as"}: ${o(a.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga vestis";case"invalid_element":{let b=d[a.origin]??a.origin;return`${dF(b??a.origin??"reikm")} turi klaiding vest`}}}})()}},"mk",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :   instanceof ${d.expected},  ${e}`;return` :   ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return`Invalid input: expected ${R(d.values[0])}`;return` :    ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` :   ${d.origin??""}   ${b}${d.maximum.toString()} ${c.unit??""}`;return` :   ${d.origin??""}   ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` :   ${d.origin}   ${b}${d.minimum.toString()} ${c.unit}`;return` :   ${d.origin}   ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :     "${d.prefix}"`;if("ends_with"===d.format)return` :     "${d.suffix}"`;if("includes"===d.format)return` :    "${d.includes}"`;if("regex"===d.format)return` :      ${d.pattern}`;return`Invalid ${b[d.format]??d.format}`;case"not_multiple_of":return` :      ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?" ":" "}: ${o(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${d.origin}`;default:return` `}})}},"ms",0,function(){let a,b,c;return{localeError:(a={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}},b={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},c={nan:"NaN",number:"nombor"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Input tidak sah: dijangka instanceof ${d.expected}, diterima ${e}`;return`Input tidak sah: dijangka ${a}, diterima ${e}`}case"invalid_value":if(1===d.values.length)return`Input tidak sah: dijangka ${R(d.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Terlalu besar: dijangka ${d.origin??"nilai"} ${c.verb} ${b}${d.maximum.toString()} ${c.unit??"elemen"}`;return`Terlalu besar: dijangka ${d.origin??"nilai"} adalah ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Terlalu kecil: dijangka ${d.origin} ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return`Terlalu kecil: dijangka ${d.origin} adalah ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`String tidak sah: mesti bermula dengan "${d.prefix}"`;if("ends_with"===d.format)return`String tidak sah: mesti berakhir dengan "${d.suffix}"`;if("includes"===d.format)return`String tidak sah: mesti mengandungi "${d.includes}"`;if("regex"===d.format)return`String tidak sah: mesti sepadan dengan corak ${d.pattern}`;return`${b[d.format]??d.format} tidak sah`;case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${d.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${o(d.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${d.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${d.origin}`}})}},"nl",0,function(){let a,b,c;return{localeError:(a={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}},b={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},c={nan:"NaN",number:"getal"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ongeldige invoer: verwacht instanceof ${d.expected}, ontving ${e}`;return`Ongeldige invoer: verwacht ${a}, ontving ${e}`}case"invalid_value":if(1===d.values.length)return`Ongeldige invoer: verwacht ${R(d.values[0])}`;return`Ongeldige optie: verwacht \xe9\xe9n van ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null,e="date"===d.origin?"laat":"string"===d.origin?"lang":"groot";if(c)return`Te ${e}: verwacht dat ${d.origin??"waarde"} ${b}${d.maximum.toString()} ${c.unit??"elementen"} ${c.verb}`;return`Te ${e}: verwacht dat ${d.origin??"waarde"} ${b}${d.maximum.toString()} is`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null,e="date"===d.origin?"vroeg":"string"===d.origin?"kort":"klein";if(c)return`Te ${e}: verwacht dat ${d.origin} ${b}${d.minimum.toString()} ${c.unit} ${c.verb}`;return`Te ${e}: verwacht dat ${d.origin} ${b}${d.minimum.toString()} is`}case"invalid_format":if("starts_with"===d.format)return`Ongeldige tekst: moet met "${d.prefix}" beginnen`;if("ends_with"===d.format)return`Ongeldige tekst: moet op "${d.suffix}" eindigen`;if("includes"===d.format)return`Ongeldige tekst: moet "${d.includes}" bevatten`;if("regex"===d.format)return`Ongeldige tekst: moet overeenkomen met patroon ${d.pattern}`;return`Ongeldig: ${b[d.format]??d.format}`;case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${d.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${d.keys.length>1?"s":""}: ${o(d.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${d.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${d.origin}`}})}},"no",0,function(){let a,b,c;return{localeError:(a={string:{unit:"tegn",verb:" ha"},file:{unit:"bytes",verb:" ha"},array:{unit:"elementer",verb:" inneholde"},set:{unit:"elementer",verb:" inneholde"}},b={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},c={nan:"NaN",number:"tall",array:"liste"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ugyldig input: forventet instanceof ${d.expected}, fikk ${e}`;return`Ugyldig input: forventet ${a}, fikk ${e}`}case"invalid_value":if(1===d.values.length)return`Ugyldig verdi: forventet ${R(d.values[0])}`;return`Ugyldig valg: forventet en av ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`For stor(t): forventet ${d.origin??"value"} til \xe5 ha ${b}${d.maximum.toString()} ${c.unit??"elementer"}`;return`For stor(t): forventet ${d.origin??"value"} til \xe5 ha ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`For lite(n): forventet ${d.origin} til \xe5 ha ${b}${d.minimum.toString()} ${c.unit}`;return`For lite(n): forventet ${d.origin} til \xe5 ha ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Ugyldig streng: m\xe5 starte med "${d.prefix}"`;if("ends_with"===d.format)return`Ugyldig streng: m\xe5 ende med "${d.suffix}"`;if("includes"===d.format)return`Ugyldig streng: m\xe5 inneholde "${d.includes}"`;if("regex"===d.format)return`Ugyldig streng: m\xe5 matche m\xf8nsteret ${d.pattern}`;return`Ugyldig ${b[d.format]??d.format}`;case"not_multiple_of":return`Ugyldig tall: m\xe5 v\xe6re et multiplum av ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"Ukjente nkler":"Ukjent nkkel"}: ${o(d.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8kkel i ${d.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${d.origin}`}})}},"ota",0,function(){let a,b,c;return{localeError:(a={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}},b={regex:"giren",email:"epostagh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengm",date:"ISO tarihi",time:"ISO zaman",duration:"ISO mddeti",ipv4:"IPv4 nin",ipv6:"IPv6 nin",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"},c={nan:"NaN",number:"numara",array:"saf",null:"gayb"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`F\xe2sit giren: umulan instanceof ${d.expected}, alnan ${e}`;return`F\xe2sit giren: umulan ${a}, alnan ${e}`}case"invalid_value":if(1===d.values.length)return`F\xe2sit giren: umulan ${R(d.values[0])}`;return`F\xe2sit tercih: m\xfbteberler ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Fazla b\xfcy\xfck: ${d.origin??"value"}, ${b}${d.maximum.toString()} ${c.unit??"elements"} sahip olmalyd.`;return`Fazla b\xfcy\xfck: ${d.origin??"value"}, ${b}${d.maximum.toString()} olmalyd.`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Fazla k\xfc\xe7\xfck: ${d.origin}, ${b}${d.minimum.toString()} ${c.unit} sahip olmalyd.`;return`Fazla k\xfc\xe7\xfck: ${d.origin}, ${b}${d.minimum.toString()} olmalyd.`}case"invalid_format":if("starts_with"===d.format)return`F\xe2sit metin: "${d.prefix}" ile balamal.`;if("ends_with"===d.format)return`F\xe2sit metin: "${d.suffix}" ile bitmeli.`;if("includes"===d.format)return`F\xe2sit metin: "${d.includes}" ihtiv\xe2 etmeli.`;if("regex"===d.format)return`F\xe2sit metin: ${d.pattern} nakna uymal.`;return`F\xe2sit ${b[d.format]??d.format}`;case"not_multiple_of":return`F\xe2sit say: ${d.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${d.keys.length>1?"s":""}: ${o(d.keys,", ")}`;case"invalid_key":return`${d.origin} i\xe7in tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${d.origin} i\xe7in tannmayan kymet var.`;default:return`Kymet tannamad.`}})}},"pl",0,function(){let a,b,c;return{localeError:(a={string:{unit:"znakw",verb:"mie"},file:{unit:"bajtw",verb:"mie"},array:{unit:"elementw",verb:"mie"},set:{unit:"elementw",verb:"mie"}},b={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znakw zakodowany w formacie base64",base64url:"cig znakw zakodowany w formacie base64url",json_string:"cig znakw w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"},c={nan:"NaN",number:"liczba",array:"tablica"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Nieprawidowe dane wejciowe: oczekiwano instanceof ${d.expected}, otrzymano ${e}`;return`Nieprawidowe dane wejciowe: oczekiwano ${a}, otrzymano ${e}`}case"invalid_value":if(1===d.values.length)return`Nieprawidowe dane wejciowe: oczekiwano ${R(d.values[0])}`;return`Nieprawidowa opcja: oczekiwano jednej z wartoci ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Za dua warto: oczekiwano, e ${d.origin??"warto"} bdzie mie ${b}${d.maximum.toString()} ${c.unit??"elementw"}`;return`Zbyt du(y/a/e): oczekiwano, e ${d.origin??"warto"} bdzie wynosi ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Za maa warto: oczekiwano, e ${d.origin??"warto"} bdzie mie ${b}${d.minimum.toString()} ${c.unit??"elementw"}`;return`Zbyt ma(y/a/e): oczekiwano, e ${d.origin??"warto"} bdzie wynosi ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Nieprawidowy cig znak\xf3w: musi zaczyna si od "${d.prefix}"`;if("ends_with"===d.format)return`Nieprawidowy cig znak\xf3w: musi koczy si na "${d.suffix}"`;if("includes"===d.format)return`Nieprawidowy cig znak\xf3w: musi zawiera "${d.includes}"`;if("regex"===d.format)return`Nieprawidowy cig znak\xf3w: musi odpowiada wzorcowi ${d.pattern}`;return`Nieprawidow(y/a/e) ${b[d.format]??d.format}`;case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${d.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${d.keys.length>1?"s":""}: ${o(d.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${d.origin}`;case"invalid_union":return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${d.origin}`;default:return`Nieprawidowe dane wejciowe`}})}},"ps",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected} ,  ${e}  `;return` :  ${a} ,  ${e}  `}case"invalid_value":if(1===d.values.length)return` :  ${R(d.values[0])} `;return` :    ${o(d.values,"|")}  `;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` : ${d.origin??""}  ${b}${d.maximum.toString()} ${c.unit??""} `;return` : ${d.origin??""}  ${b}${d.maximum.toString()} `}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` : ${d.origin}  ${b}${d.minimum.toString()} ${c.unit} `;return` : ${d.origin}  ${b}${d.minimum.toString()} `}case"invalid_format":if("starts_with"===d.format)return` :   "${d.prefix}"   `;if("ends_with"===d.format)return` :   "${d.suffix}"    `;if("includes"===d.format)return` :  "${d.includes}" `;if("regex"===d.format)return` :   ${d.pattern}   `;return`${b[d.format]??d.format}  `;case"not_multiple_of":return` :   ${d.divisor}  `;case"unrecognized_keys":return` ${d.keys.length>1?"":""}: ${o(d.keys,", ")}`;case"invalid_key":return`   ${d.origin} `;case"invalid_union":default:return` `;case"invalid_element":return`   ${d.origin} `}})}},"pt",0,function(){let a,b,c;return{localeError:(a={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}},b={regex:"padro",email:"endereo de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"durao ISO",ipv4:"endereo IPv4",ipv6:"endereo IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},c={nan:"NaN",number:"nmero",null:"nulo"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Tipo inv\xe1lido: esperado instanceof ${d.expected}, recebido ${e}`;return`Tipo inv\xe1lido: esperado ${a}, recebido ${e}`}case"invalid_value":if(1===d.values.length)return`Entrada inv\xe1lida: esperado ${R(d.values[0])}`;return`Op\xe7\xe3o inv\xe1lida: esperada uma das ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Muito grande: esperado que ${d.origin??"valor"} tivesse ${b}${d.maximum.toString()} ${c.unit??"elementos"}`;return`Muito grande: esperado que ${d.origin??"valor"} fosse ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Muito pequeno: esperado que ${d.origin} tivesse ${b}${d.minimum.toString()} ${c.unit}`;return`Muito pequeno: esperado que ${d.origin} fosse ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Texto inv\xe1lido: deve come\xe7ar com "${d.prefix}"`;if("ends_with"===d.format)return`Texto inv\xe1lido: deve terminar com "${d.suffix}"`;if("includes"===d.format)return`Texto inv\xe1lido: deve incluir "${d.includes}"`;if("regex"===d.format)return`Texto inv\xe1lido: deve corresponder ao padr\xe3o ${d.pattern}`;return`${b[d.format]??d.format} inv\xe1lido`;case"not_multiple_of":return`N\xfamero inv\xe1lido: deve ser m\xfaltiplo de ${d.divisor}`;case"unrecognized_keys":return`Chave${d.keys.length>1?"s":""} desconhecida${d.keys.length>1?"s":""}: ${o(d.keys,", ")}`;case"invalid_key":return`Chave inv\xe1lida em ${d.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido em ${d.origin}`;default:return`Campo inv\xe1lido`}})}},"ru",0,function(){let a,b,c;return{localeError:(a={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}},b={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${R(d.values[0])}`;return` :    ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c){let a=dH(Number(d.maximum),c.unit.one,c.unit.few,c.unit.many);return`  : ,  ${d.origin??""}   ${b}${d.maximum.toString()} ${a}`}return`  : ,  ${d.origin??""}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c){let a=dH(Number(d.minimum),c.unit.one,c.unit.few,c.unit.many);return`  : ,  ${d.origin}   ${b}${d.minimum.toString()} ${a}`}return`  : ,  ${d.origin}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :    "${d.prefix}"`;if("ends_with"===d.format)return` :    "${d.suffix}"`;if("includes"===d.format)return` :   "${d.includes}"`;if("regex"===d.format)return` :    ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` :    ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"":""} ${d.keys.length>1?"":""}: ${o(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${d.origin}`;default:return`  `}})}},"sl",0,function(){let a,b,c;return{localeError:(a={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}},b={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"},c={nan:"NaN",number:"tevilo",array:"tabela"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Neveljaven vnos: priakovano instanceof ${d.expected}, prejeto ${e}`;return`Neveljaven vnos: priakovano ${a}, prejeto ${e}`}case"invalid_value":if(1===d.values.length)return`Neveljaven vnos: priakovano ${R(d.values[0])}`;return`Neveljavna monost: priakovano eno izmed ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Preveliko: priakovano, da bo ${d.origin??"vrednost"} imelo ${b}${d.maximum.toString()} ${c.unit??"elementov"}`;return`Preveliko: priakovano, da bo ${d.origin??"vrednost"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Premajhno: priakovano, da bo ${d.origin} imelo ${b}${d.minimum.toString()} ${c.unit}`;return`Premajhno: priakovano, da bo ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Neveljaven niz: mora se zaeti z "${d.prefix}"`;if("ends_with"===d.format)return`Neveljaven niz: mora se konati z "${d.suffix}"`;if("includes"===d.format)return`Neveljaven niz: mora vsebovati "${d.includes}"`;if("regex"===d.format)return`Neveljaven niz: mora ustrezati vzorcu ${d.pattern}`;return`Neveljaven ${b[d.format]??d.format}`;case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${d.divisor}`;case"unrecognized_keys":return`Neprepoznan${d.keys.length>1?"i kljui":" klju"}: ${o(d.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${d.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${d.origin}`}})}},"sv",0,function(){let a,b,c;return{localeError:(a={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehlla"},set:{unit:"objekt",verb:"att innehlla"}},b={regex:"reguljrt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strng",base64url:"base64url-kodad strng",json_string:"JSON-strng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},c={nan:"NaN",number:"antal",array:"lista"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ogiltig inmatning: f\xf6rv\xe4ntat instanceof ${d.expected}, fick ${e}`;return`Ogiltig inmatning: f\xf6rv\xe4ntat ${a}, fick ${e}`}case"invalid_value":if(1===d.values.length)return`Ogiltig inmatning: f\xf6rv\xe4ntat ${R(d.values[0])}`;return`Ogiltigt val: f\xf6rv\xe4ntade en av ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`F\xf6r stor(t): f\xf6rv\xe4ntade ${d.origin??"vrdet"} att ha ${b}${d.maximum.toString()} ${c.unit??"element"}`;return`F\xf6r stor(t): f\xf6rv\xe4ntat ${d.origin??"vrdet"} att ha ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`F\xf6r lite(t): f\xf6rv\xe4ntade ${d.origin??"vrdet"} att ha ${b}${d.minimum.toString()} ${c.unit}`;return`F\xf6r lite(t): f\xf6rv\xe4ntade ${d.origin??"vrdet"} att ha ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Ogiltig str\xe4ng: m\xe5ste b\xf6rja med "${d.prefix}"`;if("ends_with"===d.format)return`Ogiltig str\xe4ng: m\xe5ste sluta med "${d.suffix}"`;if("includes"===d.format)return`Ogiltig str\xe4ng: m\xe5ste inneh\xe5lla "${d.includes}"`;if("regex"===d.format)return`Ogiltig str\xe4ng: m\xe5ste matcha m\xf6nstret "${d.pattern}"`;return`Ogiltig(t) ${b[d.format]??d.format}`;case"not_multiple_of":return`Ogiltigt tal: m\xe5ste vara en multipel av ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"Oknda nycklar":"Oknd nyckel"}: ${o(d.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${d.origin??"vrdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xe4rde i ${d.origin??"vrdet"}`}})}},"ta",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"},c={nan:"NaN",number:"",array:"",null:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${R(d.values[0])}`;return` :  ${o(d.values,"|")}  `;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` :  ${d.origin??""} ${b}${d.maximum.toString()} ${c.unit??""}   `;return` :  ${d.origin??""} ${b}${d.maximum.toString()}   `}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` :  ${d.origin} ${b}${d.minimum.toString()} ${c.unit}   `;return` :  ${d.origin} ${b}${d.minimum.toString()}   `}case"invalid_format":if("starts_with"===d.format)return` : "${d.prefix}"   `;if("ends_with"===d.format)return` : "${d.suffix}"   `;if("includes"===d.format)return` : "${d.includes}"   `;if("regex"===d.format)return` : ${d.pattern}   `;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` : ${d.divisor}    `;case"unrecognized_keys":return`  ${d.keys.length>1?"":""}: ${o(d.keys,", ")}`;case"invalid_key":return`${d.origin}   `;case"invalid_union":return" ";case"invalid_element":return`${d.origin}   `;default:return` `}})}},"th",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""},c={nan:"NaN",number:"",array:" (Array)",null:" (null)"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`:  instanceof ${d.expected}  ${e}`;return`:  ${a}  ${e}`}case"invalid_value":if(1===d.values.length)return`:  ${R(d.values[0])}`;return`:  ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"":"",c=a[d.origin]??null;if(c)return`: ${d.origin??""} ${b} ${d.maximum.toString()} ${c.unit??""}`;return`: ${d.origin??""} ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?"":"",c=a[d.origin]??null;if(c)return`: ${d.origin} ${b} ${d.minimum.toString()} ${c.unit}`;return`: ${d.origin} ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`:  "${d.prefix}"`;if("ends_with"===d.format)return`:  "${d.suffix}"`;if("includes"===d.format)return`:  "${d.includes}" `;if("regex"===d.format)return`:  ${d.pattern}`;return`: ${b[d.format]??d.format}`;case"not_multiple_of":return`:  ${d.divisor} `;case"unrecognized_keys":return`: ${o(d.keys,", ")}`;case"invalid_key":return` ${d.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${d.origin}`;default:return``}})}},"tr",0,function(){let a,b,c;return{localeError:(a={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"e",verb:"olmal"},set:{unit:"e",verb:"olmal"}},b={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ge\xe7ersiz deer: beklenen instanceof ${d.expected}, alnan ${e}`;return`Ge\xe7ersiz deer: beklenen ${a}, alnan ${e}`}case"invalid_value":if(1===d.values.length)return`Ge\xe7ersiz deer: beklenen ${R(d.values[0])}`;return`Ge\xe7ersiz se\xe7enek: aadakilerden biri olmal: ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`\xc7ok b\xfcy\xfck: beklenen ${d.origin??"deer"} ${b}${d.maximum.toString()} ${c.unit??"e"}`;return`\xc7ok b\xfcy\xfck: beklenen ${d.origin??"deer"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`\xc7ok k\xfc\xe7\xfck: beklenen ${d.origin} ${b}${d.minimum.toString()} ${c.unit}`;return`\xc7ok k\xfc\xe7\xfck: beklenen ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Ge\xe7ersiz metin: "${d.prefix}" ile balamal`;if("ends_with"===d.format)return`Ge\xe7ersiz metin: "${d.suffix}" ile bitmeli`;if("includes"===d.format)return`Ge\xe7ersiz metin: "${d.includes}" i\xe7ermeli`;if("regex"===d.format)return`Ge\xe7ersiz metin: ${d.pattern} desenine uymal`;return`Ge\xe7ersiz ${b[d.format]??d.format}`;case"not_multiple_of":return`Ge\xe7ersiz say: ${d.divisor} ile tam b\xf6l\xfcnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${d.keys.length>1?"lar":""}: ${o(d.keys,", ")}`;case"invalid_key":return`${d.origin} i\xe7inde ge\xe7ersiz anahtar`;case"invalid_union":return"Geersiz deer";case"invalid_element":return`${d.origin} i\xe7inde ge\xe7ersiz deer`;default:return`Ge\xe7ersiz deer`}})}},"ua",0,function(){return dI()},"uk",0,dI,"ur",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "},c={nan:"NaN",number:"",array:"",null:""},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`  : instanceof ${d.expected}   ${e}  `;return`  : ${a}   ${e}  `}case"invalid_value":if(1===d.values.length)return`  : ${R(d.values[0])}  `;return` : ${o(d.values,"|")}     `;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` : ${d.origin??""}  ${b}${d.maximum.toString()} ${c.unit??""}   `;return` : ${d.origin??""}  ${b}${d.maximum.toString()}   `}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` : ${d.origin}  ${b}${d.minimum.toString()} ${c.unit}   `;return` : ${d.origin}  ${b}${d.minimum.toString()}   `}case"invalid_format":if("starts_with"===d.format)return` : "${d.prefix}"    `;if("ends_with"===d.format)return` : "${d.suffix}"    `;if("includes"===d.format)return` : "${d.includes}"   `;if("regex"===d.format)return` :  ${d.pattern}    `;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` : ${d.divisor}    `;case"unrecognized_keys":return`   ${d.keys.length>1?"":""}: ${o(d.keys," ")}`;case"invalid_key":return`${d.origin}   `;case"invalid_union":return"  ";case"invalid_element":return`${d.origin}   `;default:return`  `}})}},"uz",0,function(){let a,b,c;return{localeError:(a={string:{unit:"belgi",verb:"bolishi kerak"},file:{unit:"bayt",verb:"bolishi kerak"},array:{unit:"element",verb:"bolishi kerak"},set:{unit:"element",verb:"bolishi kerak"}},b={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},c={nan:"NaN",number:"raqam",array:"massiv"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Notogri kirish: kutilgan instanceof ${d.expected}, qabul qilingan ${e}`;return`Notogri kirish: kutilgan ${a}, qabul qilingan ${e}`}case"invalid_value":if(1===d.values.length)return`Notogri kirish: kutilgan ${R(d.values[0])}`;return`Notogri variant: quyidagilardan biri kutilgan ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Juda katta: kutilgan ${d.origin??"qiymat"} ${b}${d.maximum.toString()} ${c.unit} ${c.verb}`;return`Juda katta: kutilgan ${d.origin??"qiymat"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Juda kichik: kutilgan ${d.origin} ${b}${d.minimum.toString()} ${c.unit} ${c.verb}`;return`Juda kichik: kutilgan ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Notogri satr: "${d.prefix}" bilan boshlanishi kerak`;if("ends_with"===d.format)return`Notogri satr: "${d.suffix}" bilan tugashi kerak`;if("includes"===d.format)return`Notogri satr: "${d.includes}" ni oz ichiga olishi kerak`;if("regex"===d.format)return`Notogri satr: ${d.pattern} shabloniga mos kelishi kerak`;return`Notogri ${b[d.format]??d.format}`;case"not_multiple_of":return`Notogri raqam: ${d.divisor} ning karralisi bolishi kerak`;case"unrecognized_keys":return`Nomalum kalit${d.keys.length>1?"lar":""}: ${o(d.keys,", ")}`;case"invalid_key":return`${d.origin} dagi kalit notogri`;case"invalid_union":return"Notogri kirish";case"invalid_element":return`${d.origin} da notogri qiymat`;default:return`Notogri kirish`}})}},"vi",0,function(){let a,b,c;return{localeError:(a={string:{unit:"k t",verb:"c"},file:{unit:"byte",verb:"c"},array:{unit:"phn t",verb:"c"},set:{unit:"phn t",verb:"c"}},b={regex:"u vo",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngy gi ISO",date:"ngy ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m ha base64",base64url:"chui m ha base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u vo"},c={nan:"NaN",number:"s",array:"mng"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`u v\xe0o kh\xf4ng hp l: mong i instanceof ${d.expected}, nhn c ${e}`;return`u v\xe0o kh\xf4ng hp l: mong i ${a}, nhn c ${e}`}case"invalid_value":if(1===d.values.length)return`u v\xe0o kh\xf4ng hp l: mong i ${R(d.values[0])}`;return`T\xf9y chn kh\xf4ng hp l: mong i mt trong c\xe1c gi\xe1 tr ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Qu\xe1 ln: mong i ${d.origin??"gi tr"} ${c.verb} ${b}${d.maximum.toString()} ${c.unit??"phn t"}`;return`Qu\xe1 ln: mong i ${d.origin??"gi tr"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Qu\xe1 nh: mong i ${d.origin} ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return`Qu\xe1 nh: mong i ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Chui kh\xf4ng hp l: phi bt u bng "${d.prefix}"`;if("ends_with"===d.format)return`Chui kh\xf4ng hp l: phi kt th\xfac bng "${d.suffix}"`;if("includes"===d.format)return`Chui kh\xf4ng hp l: phi bao gm "${d.includes}"`;if("regex"===d.format)return`Chui kh\xf4ng hp l: phi khp vi mu ${d.pattern}`;return`${b[d.format]??d.format} kh\xf4ng hp l`;case"not_multiple_of":return`S kh\xf4ng hp l: phi l\xe0 bi s ca ${d.divisor}`;case"unrecognized_keys":return`Kh\xf3a kh\xf4ng c nhn dng: ${o(d.keys,", ")}`;case"invalid_key":return`Kh\xf3a kh\xf4ng hp l trong ${d.origin}`;case"invalid_union":return"u vo khng hp l";case"invalid_element":return`Gi\xe1 tr kh\xf4ng hp l trong ${d.origin}`;default:return`u v\xe0o kh\xf4ng hp l`}})}},"yo",0,function(){let a,b,c;return{localeError:(a={string:{unit:"mi",verb:"n"},file:{unit:"bytes",verb:"n"},array:{unit:"nkan",verb:"n"},set:{unit:"nkan",verb:"n"}},b={regex:"r bwl",email:"drs ml",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"kk ISO",date:"j ISO",time:"kk ISO",duration:"kk t p ISO",ipv4:"drs IPv4",ipv6:"drs IPv6",cidrv4:"gbgb IPv4",cidrv6:"gbgb IPv6",base64:"r t a k n base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb E.164",jwt:"JWT",template_literal:"r bwl"},c={nan:"NaN",number:"nmb",array:"akop"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi instanceof ${d.expected}, \xe0m a r\xed ${e}`;return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${a}, \xe0m a r\xed ${e}`}case"invalid_value":if(1===d.values.length)return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${R(d.values[0])}`;return`\xc0\xe0y\xe0n a\xece: yan kan l\xe1ra ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`T\xf3 p j\xf9: a n\xed l\xe1ti j p\xe9 ${d.origin??"iye"} ${c.verb} ${b}${d.maximum} ${c.unit}`;return`T\xf3 p j\xf9: a n\xed l\xe1ti j ${b}${d.maximum}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`K\xe9r\xe9 ju: a n\xed l\xe1ti j p\xe9 ${d.origin} ${c.verb} ${b}${d.minimum} ${c.unit}`;return`K\xe9r\xe9 ju: a n\xed l\xe1ti j ${b}${d.minimum}`}case"invalid_format":if("starts_with"===d.format)return`r a\xece: gbd br pl\xfa "${d.prefix}"`;if("ends_with"===d.format)return`r a\xece: gbd par\xed pl\xfa "${d.suffix}"`;if("includes"===d.format)return`r a\xece: gbd n\xed "${d.includes}"`;if("regex"===d.format)return`r a\xece: gbd b\xe1 \xe0pr mu ${d.pattern}`;return`A\xece: ${b[d.format]??d.format}`;case"not_multiple_of":return`Nmb\xe0 a\xece: gbd j \xe8y\xe0 p\xedp\xedn ti ${d.divisor}`;case"unrecognized_keys":return`Bt\xecn\xec \xe0\xecm: ${o(d.keys,", ")}`;case"invalid_key":return`Bt\xecn\xec a\xece n\xedn\xfa ${d.origin}`;case"invalid_union":default:return"bwl ae";case"invalid_element":return`Iye a\xece n\xedn\xfa ${d.origin}`}})}},"zhCN",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:"",null:"(null)"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` instanceof ${d.expected} ${e}`;return` ${a} ${e}`}case"invalid_value":if(1===d.values.length)return` ${R(d.values[0])}`;return` ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` ${d.origin??""} ${b}${d.maximum.toString()} ${c.unit??""}`;return` ${d.origin??""} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` ${d.origin} ${b}${d.minimum.toString()} ${c.unit}`;return` ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` "${d.prefix}" `;if("ends_with"===d.format)return` "${d.suffix}" `;if("includes"===d.format)return` "${d.includes}"`;if("regex"===d.format)return` ${d.pattern}`;return`${b[d.format]??d.format}`;case"not_multiple_of":return` ${d.divisor} `;case"unrecognized_keys":return`(key): ${o(d.keys,", ")}`;case"invalid_key":return`${d.origin} (key)`;case"invalid_union":return"";case"invalid_element":return`${d.origin} (value)`;default:return``}})}},"zhTW",0,function(){let a,b,c;return{localeError:(a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN"},d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=ag(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` instanceof ${d.expected} ${e}`;return` ${a} ${e}`}case"invalid_value":if(1===d.values.length)return` ${R(d.values[0])}`;return` ${o(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` ${d.origin??""}  ${b}${d.maximum.toString()} ${c.unit??""}`;return` ${d.origin??""}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` ${d.origin}  ${b}${d.minimum.toString()} ${c.unit}`;return` ${d.origin}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` "${d.prefix}" `;if("ends_with"===d.format)return` "${d.suffix}" `;if("includes"===d.format)return` "${d.includes}"`;if("regex"===d.format)return` ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` ${d.divisor} `;case"unrecognized_keys":return`${d.keys.length>1?"":""}${o(d.keys,"")}`;case"invalid_key":return`${d.origin} `;case"invalid_union":return"";case"invalid_element":return`${d.origin} `;default:return``}})}}],186618);var jB=a.i(186618);a.i(64166),a.i(866004),a.i(863571),a.i(776403);var jC=a.i(795288);a.s(["$ZodAny",0,cI,"$ZodArray",0,cO,"$ZodAsyncError",()=>e,"$ZodBase64",0,ct,"$ZodBase64URL",0,cv,"$ZodBigInt",0,cD,"$ZodBigIntFormat",0,cE,"$ZodBoolean",0,cC,"$ZodCIDRv4",0,cq,"$ZodCIDRv6",0,cr,"$ZodCUID",0,ce,"$ZodCUID2",0,cf,"$ZodCatch",0,dk,"$ZodCheck",0,bH,"$ZodCheckBigIntFormat",0,bN,"$ZodCheckEndsWith",0,b$,"$ZodCheckGreaterThan",0,bK,"$ZodCheckIncludes",0,bY,"$ZodCheckLengthEquals",0,bT,"$ZodCheckLessThan",0,bJ,"$ZodCheckLowerCase",0,bW,"$ZodCheckMaxLength",0,bR,"$ZodCheckMaxSize",0,bO,"$ZodCheckMimeType",0,b1,"$ZodCheckMinLength",0,bS,"$ZodCheckMinSize",0,bP,"$ZodCheckMultipleOf",0,bL,"$ZodCheckNumberFormat",0,bM,"$ZodCheckOverwrite",0,b2,"$ZodCheckProperty",0,b0,"$ZodCheckRegex",0,bV,"$ZodCheckSizeEquals",0,bQ,"$ZodCheckStartsWith",0,bZ,"$ZodCheckStringFormat",0,bU,"$ZodCheckUpperCase",0,bX,"$ZodCodec",0,dp,"$ZodCustom",0,dy,"$ZodCustomStringFormat",0,cz,"$ZodDate",0,cM,"$ZodDefault",0,de,"$ZodDiscriminatedUnion",0,cY,"$ZodE164",0,cw,"$ZodEmail",0,ca,"$ZodEmoji",0,cc,"$ZodEncodeError",()=>f,"$ZodEnum",0,c6,"$ZodError",0,ar,"$ZodExactOptional",0,dc,"$ZodFile",0,c8,"$ZodFunction",0,dv,"$ZodGUID",0,b8,"$ZodIPv4",0,cn,"$ZodIPv6",0,co,"$ZodISODate",0,ck,"$ZodISODateTime",0,cj,"$ZodISODuration",0,cm,"$ZodISOTime",0,cl,"$ZodIntersection",0,cZ,"$ZodJWT",0,cy,"$ZodKSUID",0,ci,"$ZodLazy",0,dx,"$ZodLiteral",0,c7,"$ZodMAC",0,cp,"$ZodMap",0,c2,"$ZodNaN",0,dl,"$ZodNanoID",0,cd,"$ZodNever",0,cK,"$ZodNonOptional",0,dh,"$ZodNull",0,cH,"$ZodNullable",0,dd,"$ZodNumber",0,cA,"$ZodNumberFormat",0,cB,"$ZodObject",0,cS,"$ZodObjectJIT",0,cT,"$ZodOptional",0,db,"$ZodPipe",0,dm,"$ZodPrefault",0,dg,"$ZodPromise",0,dw,"$ZodReadonly",0,ds,"$ZodRealError",0,as,"$ZodRecord",0,c1,"$ZodRegistry",()=>dL,"$ZodSet",0,c4,"$ZodString",0,b6,"$ZodStringFormat",0,b7,"$ZodSuccess",0,dj,"$ZodSymbol",0,cF,"$ZodTemplateLiteral",0,du,"$ZodTransform",0,c9,"$ZodTuple",0,c_,"$ZodType",0,b5,"$ZodULID",0,cg,"$ZodURL",0,cb,"$ZodUUID",0,b9,"$ZodUndefined",0,cG,"$ZodUnion",0,cV,"$ZodUnknown",0,cJ,"$ZodVoid",0,cL,"$ZodXID",0,ch,"$ZodXor",0,cX,"$brand",0,d,"$constructor",()=>c,"$input",0,dK,"$output",0,dJ,"Doc",()=>b3,"JSONSchema",0,jC,"JSONSchemaGenerator",()=>gl,"NEVER",0,b,"TimePrecision",0,eb,"_any",()=>ew,"_array",()=>e4,"_base64",()=>d7,"_base64url",()=>d8,"_bigint",()=>ep,"_boolean",()=>en,"_catch",()=>fn,"_check",()=>fw,"_cidrv4",()=>d5,"_cidrv6",()=>d6,"_coercedBigint",()=>eq,"_coercedBoolean",()=>eo,"_coercedDate",()=>eB,"_coercedNumber",()=>eh,"_coercedString",()=>dP,"_cuid",()=>dZ,"_cuid2",()=>d$,"_custom",()=>ft,"_date",()=>eA,"_decode",0,aI,"_decodeAsync",0,aM,"_default",()=>fk,"_discriminatedUnion",()=>e7,"_e164",()=>d9,"_email",()=>dQ,"_emoji",()=>dX,"_encode",0,aG,"_encodeAsync",0,aK,"_endsWith",()=>eX,"_enum",()=>fd,"_file",()=>fg,"_float32",()=>ej,"_float64",()=>ek,"_gt",()=>eF,"_gte",()=>eG,"_guid",()=>dR,"_includes",()=>eV,"_int",()=>ei,"_int32",()=>el,"_int64",()=>er,"_intersection",()=>e8,"_ipv4",()=>d2,"_ipv6",()=>d3,"_isoDate",()=>ed,"_isoDateTime",()=>ec,"_isoDuration",()=>ef,"_isoTime",()=>ee,"_jwt",()=>ea,"_ksuid",()=>d1,"_lazy",()=>fr,"_length",()=>eR,"_literal",()=>ff,"_lowercase",()=>eT,"_lt",()=>eD,"_lte",()=>eE,"_mac",()=>d4,"_map",()=>fb,"_max",()=>eE,"_maxLength",()=>eP,"_maxSize",()=>eM,"_mime",()=>eZ,"_min",()=>eG,"_minLength",()=>eQ,"_minSize",()=>eN,"_multipleOf",()=>eL,"_nan",()=>eC,"_nanoid",()=>dY,"_nativeEnum",()=>fe,"_negative",()=>eI,"_never",()=>ey,"_nonnegative",()=>eK,"_nonoptional",()=>fl,"_nonpositive",()=>eJ,"_normalize",()=>e_,"_null",()=>ev,"_nullable",()=>fj,"_number",()=>eg,"_optional",()=>fi,"_overwrite",()=>e$,"_parse",0,ay,"_parseAsync",0,aA,"_pipe",()=>fo,"_positive",()=>eH,"_promise",()=>fs,"_property",()=>eY,"_readonly",()=>fp,"_record",()=>fa,"_refine",()=>fu,"_regex",()=>eS,"_safeDecode",0,aQ,"_safeDecodeAsync",0,aU,"_safeEncode",0,aO,"_safeEncodeAsync",0,aS,"_safeParse",0,aC,"_safeParseAsync",0,aE,"_set",()=>fc,"_size",()=>eO,"_slugify",()=>e3,"_startsWith",()=>eW,"_string",()=>dO,"_stringFormat",()=>fA,"_stringbool",()=>fz,"_success",()=>fm,"_superRefine",()=>fv,"_symbol",()=>et,"_templateLiteral",()=>fq,"_toLowerCase",()=>e1,"_toUpperCase",()=>e2,"_transform",()=>fh,"_trim",()=>e0,"_tuple",()=>e9,"_uint32",()=>em,"_uint64",()=>es,"_ulid",()=>d_,"_undefined",()=>eu,"_union",()=>e5,"_unknown",()=>ex,"_uppercase",()=>eU,"_url",()=>dW,"_uuid",()=>dS,"_uuidv4",()=>dT,"_uuidv6",()=>dU,"_uuidv7",()=>dV,"_void",()=>ez,"_xid",()=>d0,"_xor",()=>e6,"clone",()=>O,"config",()=>h,"createStandardJSONSchemaMethod",0,fG,"createToJSONSchemaMethod",0,fF,"decode",0,aJ,"decodeAsync",0,aN,"describe",()=>fx,"encode",0,aH,"encodeAsync",0,aL,"extractDefs",()=>fD,"finalize",()=>fE,"flattenError",()=>at,"formatError",()=>au,"globalConfig",0,g,"globalRegistry",0,dN,"initializeContext",()=>fB,"isValidBase64",()=>cs,"isValidBase64URL",()=>cu,"isValidJWT",()=>cx,"locales",0,jB,"meta",()=>fy,"parse",0,az,"parseAsync",0,aB,"prettifyError",()=>ax,"process",()=>fC,"regexes",0,jA,"registry",()=>dM,"safeDecode",0,aR,"safeDecodeAsync",0,aV,"safeEncode",0,aP,"safeEncodeAsync",0,aT,"safeParse",0,aD,"safeParseAsync",0,aF,"toDotPath",()=>aw,"toJSONSchema",()=>gk,"treeifyError",()=>av,"util",0,jz,"version",0,b4],529642);var jD=a.i(529642);a.i(975160),a.i(373590),a.i(58277),a.s(["$brand",0,d,"ZodFirstPartyTypeKind",()=>gn,"ZodIssueCode",0,jm,"config",()=>h,"getErrorMap",()=>jo,"setErrorMap",()=>jn],229126),a.i(229126);var go=go,gp=gp,jE=a.i(758483);a.s(["$brand",0,d,"$input",0,dK,"$output",0,dJ,"NEVER",0,b,"TimePrecision",0,eb,"ZodAny",0,hY,"ZodArray",0,h6,"ZodBase64",0,hq,"ZodBase64URL",0,hs,"ZodBigInt",0,hN,"ZodBigIntFormat",0,hP,"ZodBoolean",0,hL,"ZodCIDRv4",0,hm,"ZodCIDRv6",0,ho,"ZodCUID",0,g6,"ZodCUID2",0,g8,"ZodCatch",0,iV,"ZodCodec",0,i_,"ZodCustom",0,jb,"ZodCustomStringFormat",0,hy,"ZodDate",0,h4,"ZodDefault",0,iN,"ZodDiscriminatedUnion",0,ii,"ZodE164",0,hu,"ZodEmail",0,gS,"ZodEmoji",0,g2,"ZodEnum",0,ix,"ZodError",0,gz,"ZodExactOptional",0,iI,"ZodFile",0,iC,"ZodFirstPartyTypeKind",()=>gn,"ZodFunction",0,i9,"ZodGUID",0,gU,"ZodIPv4",0,hg,"ZodIPv6",0,hk,"ZodISODate",0,gs,"ZodISODateTime",0,gq,"ZodISODuration",0,gw,"ZodISOTime",0,gu,"ZodIntersection",0,ik,"ZodIssueCode",0,jm,"ZodJWT",0,hw,"ZodKSUID",0,he,"ZodLazy",0,i5,"ZodLiteral",0,iA,"ZodMAC",0,hi,"ZodMap",0,it,"ZodNaN",0,iX,"ZodNanoID",0,g4,"ZodNever",0,h0,"ZodNonOptional",0,iR,"ZodNull",0,hW,"ZodNullable",0,iK,"ZodNumber",0,hD,"ZodNumberFormat",0,hF,"ZodObject",0,h9,"ZodOptional",0,iG,"ZodPipe",0,iZ,"ZodPrefault",0,iP,"ZodPromise",0,i7,"ZodReadonly",0,i1,"ZodRealError",0,gA,"ZodRecord",0,ip,"ZodSet",0,iv,"ZodString",0,gP,"ZodStringFormat",0,gR,"ZodSuccess",0,iT,"ZodSymbol",0,hS,"ZodTemplateLiteral",0,i3,"ZodTransform",0,iE,"ZodTuple",0,im,"ZodType",0,gN,"ZodULID",0,ha,"ZodURL",0,g_,"ZodUUID",0,gW,"ZodUndefined",0,hU,"ZodUnion",0,id,"ZodUnknown",0,h$,"ZodVoid",0,h2,"ZodXID",0,hc,"ZodXor",0,ig,"_ZodString",0,gO,"_default",()=>iO,"_function",()=>ja,"any",()=>hZ,"array",()=>h7,"base64",()=>hr,"base64url",()=>ht,"bigint",()=>hO,"boolean",()=>hM,"catch",()=>iW,"check",()=>jc,"cidrv4",()=>hn,"cidrv6",()=>hp,"clone",()=>O,"codec",()=>i0,"coerce",0,jE,"config",()=>h,"core",0,jD,"cuid",()=>g7,"cuid2",()=>g9,"custom",()=>jd,"date",()=>h5,"decode",0,gG,"decodeAsync",0,gI,"describe",0,jg,"discriminatedUnion",()=>ij,"e164",()=>hv,"email",()=>gT,"emoji",()=>g3,"encode",0,gF,"encodeAsync",0,gH,"endsWith",()=>eX,"enum",()=>iy,"exactOptional",()=>iJ,"file",()=>iD,"flattenError",()=>at,"float32",()=>hH,"float64",()=>hI,"formatError",()=>au,"fromJSONSchema",()=>jt,"function",()=>ja,"getErrorMap",()=>jo,"globalRegistry",0,dN,"gt",()=>eF,"gte",()=>eG,"guid",()=>gV,"hash",()=>hC,"hex",()=>hB,"hostname",()=>hA,"httpUrl",()=>g1,"includes",()=>eV,"instanceof",()=>ji,"int",()=>hG,"int32",()=>hJ,"int64",()=>hQ,"intersection",()=>il,"ipv4",()=>hh,"ipv6",()=>hl,"iso",0,jq,"json",()=>jk,"jwt",()=>hx,"keyof",()=>h8,"ksuid",()=>hf,"lazy",()=>i6,"length",()=>eR,"literal",()=>iB,"locales",0,jB,"looseObject",()=>ic,"looseRecord",()=>is,"lowercase",()=>eT,"lt",()=>eD,"lte",()=>eE,"mac",()=>hj,"map",()=>iu,"maxLength",()=>eP,"maxSize",()=>eM,"meta",0,jh,"mime",()=>eZ,"minLength",()=>eQ,"minSize",()=>eN,"multipleOf",()=>eL,"nan",()=>iY,"nanoid",()=>g5,"nativeEnum",()=>iz,"negative",()=>eI,"never",()=>h1,"nonnegative",()=>eK,"nonoptional",()=>iS,"nonpositive",()=>eJ,"normalize",()=>e_,"null",()=>hX,"nullable",()=>iL,"nullish",()=>iM,"number",()=>hE,"object",()=>ia,"optional",()=>iH,"overwrite",()=>e$,"parse",0,gB,"parseAsync",0,gC,"partialRecord",()=>ir,"pipe",()=>i$,"positive",()=>eH,"prefault",()=>iQ,"preprocess",()=>jl,"prettifyError",()=>ax,"promise",()=>i8,"property",()=>eY,"readonly",()=>i2,"record",()=>iq,"refine",()=>je,"regex",()=>eS,"regexes",()=>go,"registry",()=>dM,"safeDecode",0,gK,"safeDecodeAsync",0,gM,"safeEncode",0,gJ,"safeEncodeAsync",0,gL,"safeParse",0,gD,"safeParseAsync",0,gE,"set",()=>iw,"setErrorMap",()=>jn,"size",()=>eO,"slugify",()=>e3,"startsWith",()=>eW,"strictObject",()=>ib,"string",()=>gQ,"stringFormat",()=>hz,"stringbool",0,jj,"success",()=>iU,"superRefine",()=>jf,"symbol",()=>hT,"templateLiteral",()=>i4,"toJSONSchema",()=>gk,"toLowerCase",()=>e1,"toUpperCase",()=>e2,"transform",()=>iF,"treeifyError",()=>av,"trim",()=>e0,"tuple",()=>io,"uint32",()=>hK,"uint64",()=>hR,"ulid",()=>hb,"undefined",()=>hV,"union",()=>ie,"unknown",()=>h_,"uppercase",()=>eU,"url",()=>g0,"util",()=>gp,"uuid",()=>gX,"uuidv4",()=>gY,"uuidv6",()=>gZ,"uuidv7",()=>g$,"void",()=>h3,"xid",()=>hd,"xor",()=>ih],954757)},409223,a=>{"use strict";let b,c,d,e,f,g,h,i,j;var k,l,m,n,o=a.i(606835),p=a.i(63910),q=a.i(230739),r=a.i(794219),s=a.i(954757);let t={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511};var u=class extends Error{constructor(a="INTERNAL_SERVER_ERROR",b,c={},d="number"==typeof a?a:t[a]){super(b?.message,b?.cause?{cause:b.cause}:void 0),this.status=a,this.body=b,this.headers=c,this.statusCode=d,this.name="APIError",this.status=a,this.headers=c,this.statusCode=d,this.body=b?{code:b?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...b}:void 0}},v=class extends u{constructor(a,b){super(400,{message:a,code:"VALIDATION_ERROR"}),this.message=a,this.issues=b,this.issues=b}},w=class extends Error{constructor(a){super(a),this.name="BetterCallError"}};let x=function(a,b){class c extends a{#o;constructor(...a){if(function(){let a=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return void 0===a?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(a,"writable")?a.writable:void 0!==a.set}()){const b=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...a),Error.stackTraceLimit=b}else super(...a);const b=Error().stack;b&&(this.#o=function(a){let b=a.split("\n    at ");return b.length<=1?a:(b.splice(1,1),b.join("\n    at "))}(b.replace(/^Error/,this.name)))}get errorStack(){return this.#o}}return Object.defineProperty(c.prototype,"constructor",{get:()=>b,enumerable:!1,configurable:!0}),c}(u,Error),y=/^application\/([a-z0-9.+-]*\+)?json/i;async function z(a,b){let c=a.headers.get("content-type")||"",d=c.toLowerCase();if(a.body){if(b&&b.length>0&&!b.some(a=>{let b=d.split(";")[0].trim(),c=a.toLowerCase().trim();return b===c||b.includes(c)})){if(!d)throw new x(415,{message:`Content-Type is required. Allowed types: ${b.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});throw new x(415,{message:`Content-Type "${c}" is not allowed. Allowed types: ${b.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"})}if(y.test(d))return await a.json();if(d.includes("application/x-www-form-urlencoded")){let b=await a.formData(),c={};return b.forEach((a,b)=>{c[b]=a.toString()}),c}if(d.includes("multipart/form-data")){let b=await a.formData(),c={};return b.forEach((a,b)=>{c[b]=a}),c}return d.includes("text/plain")?await a.text():d.includes("application/octet-stream")?await a.arrayBuffer():d.includes("application/pdf")||d.includes("image/")||d.includes("video/")?await a.blob():d.includes("application/stream")||a.body instanceof ReadableStream?a.body:await a.text()}}function A(a){return a instanceof x||a?.name==="APIError"}async function B(a){try{return{data:await a,error:null}}catch(a){return{data:null,error:a}}}function C(a,b){if(a instanceof Response)return b?.headers instanceof Headers&&b.headers.forEach((b,c)=>{a.headers.set(c,b)}),a;if(a&&"object"==typeof a&&"_flag"in a&&"json"===a._flag){let c=a.body,d=a.routerResponse;if(d instanceof Response)return d;let e=new Headers;if(d?.headers){let a=new Headers(d.headers);for(let[b,c]of a.entries())a.set(b,c)}if(a.headers)for(let[b,c]of new Headers(a.headers).entries())e.set(b,c);if(b?.headers)for(let[a,c]of new Headers(b.headers).entries())e.set(a,c);return e.set("Content-Type","application/json"),new Response(JSON.stringify(c),{...d,headers:e,status:a.status??b?.status??d?.status,statusText:b?.statusText??d?.statusText})}if(A(a))return C(a.body,{status:b?.status??a.statusCode,statusText:a.status.toString(),headers:b?.headers||a.headers});let c=a,d=new Headers(b?.headers);if(a){if("string"==typeof a)c=a,d.set("Content-Type","text/plain");else if(a instanceof ArrayBuffer||ArrayBuffer.isView(a))c=a,d.set("Content-Type","application/octet-stream");else if(a instanceof Blob)c=a,d.set("Content-Type",a.type||"application/octet-stream");else if(a instanceof FormData)c=a;else if(a instanceof URLSearchParams)c=a,d.set("Content-Type","application/x-www-form-urlencoded");else if(a instanceof ReadableStream)c=a,d.set("Content-Type","application/octet-stream");else if(function(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}(a)){let b,e;b=0,e=new WeakMap,c=JSON.stringify(a,(a,c)=>{if("bigint"==typeof c)return c.toString();if("object"==typeof c&&null!==c){if(e.has(c))return`[Circular ref-${e.get(c)}]`;e.set(c,b++)}return c},void 0),d.set("Content-Type","application/json")}}else null===a&&(c=JSON.stringify(null)),d.set("content-type","application/json");return new Response(c,{...b,headers:d})}var D=a.i(298109);let E={name:"HMAC",hash:"SHA-256"},F=async a=>{let b="string"==typeof a?new TextEncoder().encode(a):a;return await (0,D.getWebcryptoSubtle)().importKey("raw",b,E,!1,["sign","verify"])},G=async(a,b,c)=>{try{let d=atob(a),e=new Uint8Array(d.length);for(let a=0,b=d.length;a<b;a++)e[a]=d.charCodeAt(a);return await (0,D.getWebcryptoSubtle)().verify(E,c,e,new TextEncoder().encode(b))}catch(a){return!1}},H=async(a,b)=>{let c=await F(b);return btoa(String.fromCharCode(...new Uint8Array(await (0,D.getWebcryptoSubtle)().sign(E.name,c,new TextEncoder().encode(a)))))},I=async(a,b)=>{let c=await H(a,b);return encodeURIComponent(a=`${a}.${c}`)},J=(a,b)=>{let c=a;if(b)if("secure"===b)c="__Secure-"+a;else{if("host"!==b)return;c="__Host-"+a}return c},K=(a,b,c={})=>{let d;if(d=c?.prefix==="secure"?`__Secure-${a}=${b}`:c?.prefix==="host"?`__Host-${a}=${b}`:`${a}=${b}`,a.startsWith("__Secure-")&&!c.secure&&(c.secure=!0),a.startsWith("__Host-")&&(c.secure||(c.secure=!0),"/"!==c.path&&(c.path="/"),c.domain&&(c.domain=void 0)),c&&"number"==typeof c.maxAge&&c.maxAge>=0){if(c.maxAge>3456e4)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");d+=`; Max-Age=${Math.floor(c.maxAge)}`}if(c.domain&&"host"!==c.prefix&&(d+=`; Domain=${c.domain}`),c.path&&(d+=`; Path=${c.path}`),c.expires){if(c.expires.getTime()-Date.now()>3456e7)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");d+=`; Expires=${c.expires.toUTCString()}`}return c.httpOnly&&(d+="; HttpOnly"),c.secure&&(d+="; Secure"),c.sameSite&&(d+=`; SameSite=${c.sameSite.charAt(0).toUpperCase()+c.sameSite.slice(1)}`),c.partitioned&&(c.secure||(c.secure=!0),d+="; Partitioned"),d},L=async(a,b,c,d)=>K(a,b=await I(b,c),d);async function M(a,b={}){let c={body:b.body,query:b.query};if(a.body){let d=await a.body["~standard"].validate(b.body);if(d.issues)return{data:null,error:N(d.issues,"body")};c.body=d.value}if(a.query){let d=await a.query["~standard"].validate(b.query);if(d.issues)return{data:null,error:N(d.issues,"query")};c.query=d.value}return a.requireHeaders&&!b.headers?{data:null,error:{message:"Headers is required",issues:[]}}:a.requireRequest&&!b.request?{data:null,error:{message:"Request is required",issues:[]}}:{data:c,error:null}}function N(a,b){return{message:a.map(a=>`[${a.path?.length?`${b}.`+a.path.map(a=>"object"==typeof a?a.key:a).join("."):b}] ${a.message}`).join("; "),issues:a}}let O=async(a,{options:b,path:c})=>{let d,e=new Headers,{data:f,error:g}=await M(b,a);if(g)throw new v(g.message,g.issues);let h="headers"in a?a.headers instanceof Headers?a.headers:new Headers(a.headers):"request"in a&&a.request instanceof Request?a.request.headers:null,i=h?.get("cookie"),j=i?function(a){if("string"!=typeof a)throw TypeError("argument str must be a string");let b=new Map,c=0;for(;c<a.length;){let d=a.indexOf("=",c);if(-1===d)break;let e=a.indexOf(";",c);if(-1===e)e=a.length;else if(e<d){c=a.lastIndexOf(";",d-1)+1;continue}let f=a.slice(c,d).trim();if(!b.has(f)){let c=a.slice(d+1,e).trim();34===c.codePointAt(0)&&(c=c.slice(1,-1)),b.set(f,function(a){try{return a.includes("%")?decodeURIComponent(a):a}catch{return a}}(c))}c=e+1}return b}(i):void 0,k={...a,body:f.body,query:f.query,path:a.path||c||"virtual:",context:"context"in a&&a.context?a.context:{},returned:void 0,headers:a?.headers,request:a?.request,params:"params"in a?a.params:void 0,method:a.method??(Array.isArray(b.method)?b.method[0]:"*"===b.method?"GET":b.method),setHeader:(a,b)=>{e.set(a,b)},getHeader:a=>h?h.get(a):null,getCookie:(a,b)=>{let c=J(a,b);return c&&j?.get(c)||null},getSignedCookie:async(a,b,c)=>{let d=J(a,c);if(!d)return null;let e=j?.get(d);if(!e)return null;let f=e.lastIndexOf(".");if(f<1)return null;let g=e.substring(0,f),h=e.substring(f+1);return 44===h.length&&h.endsWith("=")?!!await G(h,g,await F(b))&&g:null},setCookie:(a,b,c)=>{var d;let f=K(a,d=encodeURIComponent(d=b),c);return e.append("set-cookie",f),f},setSignedCookie:async(a,b,c,d)=>{let f=await L(a,b,c,d);return e.append("set-cookie",f),f},redirect:a=>(e.set("location",a),new x("FOUND",void 0,e)),error:(a,b,c)=>new x(a,b,c),setStatus:a=>{d=a},json:(b,c)=>a.asResponse?{body:c?.body||b,routerResponse:c,_flag:"json"}:b,responseHeaders:e,get responseStatus(){return d}};for(let a of b.use||[]){let b=await a({...k,returnHeaders:!0,asResponse:!1});b.response&&Object.assign(k.context,b.response),b.headers&&b.headers.forEach((a,b)=>{k.responseHeaders.set(b,a)})}return k};function P(a,b,c){let d="string"==typeof a?a:void 0,e="object"==typeof b?b:a,f="function"==typeof b?b:c;if(("GET"===e.method||"HEAD"===e.method)&&e.body)throw new w("Body is not allowed with GET or HEAD methods");if(d&&/\/{2,}/.test(d))throw new w("Path cannot contain consecutive slashes");let g=async(...a)=>{let b=a[0]||{},{data:c,error:g}=await B(O(b,{options:e,path:d}));if(g){if(!(g instanceof v))throw g;throw e.onValidationError&&await e.onValidationError({message:g.message,issues:g.issues}),new x(400,{message:g.message,code:"VALIDATION_ERROR"})}let h=await f(c).catch(async a=>{if(A(a)){let c=e.onAPIError;if(c&&await c(a),b.asResponse)return a}throw a}),i=c.responseHeaders,j=c.responseStatus;return b.asResponse?C(h,{headers:i,status:j}):b.returnHeaders?b.returnStatus?{headers:i,response:h,status:j}:{headers:i,response:h}:b.returnStatus?{response:h,status:j}:h};return g.options=e,g.path=d,g}function Q(a,b){let c=async c=>{let d="function"==typeof a?a:b,e=await O(c,{options:"function"==typeof a?{}:a,path:"/"});if(!d)throw Error("handler must be defined");let f=await d(e),g=e.responseHeaders;return c.returnHeaders?{headers:g,response:f}:f};return c.options="function"==typeof a?{}:a,c}P.create=a=>(b,c,d)=>P(b,{...c,use:[...c?.use||[],...a?.use||[]]},d),Q.create=a=>function(b,c){if("function"==typeof b)return Q({use:a?.use},b);if(!c)throw Error("Middleware handler is required");return Q({...b,method:"*",use:[...a?.use||[],...b.use||[]]},c)};let R={};function S(a){switch(a.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function T(a){let b=[];return a.metadata?.openapi?.parameters?b.push(...a.metadata.openapi.parameters):a.query instanceof r.ZodObject&&Object.entries(a.query.shape).forEach(([a,c])=>{c instanceof r.ZodObject&&b.push({name:a,in:"query",schema:{type:S(c),..."minLength"in c&&c.minLength?{minLength:c.minLength}:{},description:c.description}})}),b}function U(a){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...a}}async function V(a,b){return Object.entries(a).forEach(([a,b])=>{let c=b.options;if(!(!b.path||c.metadata?.SERVER_ONLY)&&("GET"===c.method&&(R[b.path]={get:{tags:["Default",...c.metadata?.openapi?.tags||[]],description:c.metadata?.openapi?.description,operationId:c.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:T(c),responses:U(c.metadata?.openapi?.responses)}}),"POST"===c.method)){let a=function(a){if(a.metadata?.openapi?.requestBody)return a.metadata.openapi.requestBody;if(a.body&&(a.body instanceof r.ZodObject||a.body instanceof r.ZodOptional)){let b=a.body.shape;if(!b)return;let c={},d=[];return Object.entries(b).forEach(([a,b])=>{b instanceof r.ZodObject&&(c[a]={type:S(b),description:b.description},b instanceof r.ZodOptional||d.push(a))}),{required:!(a.body instanceof r.ZodOptional)&&!!a.body,content:{"application/json":{schema:{type:"object",properties:c,required:d}}}}}}(c);R[b.path]={post:{tags:["Default",...c.metadata?.openapi?.tags||[]],description:c.metadata?.openapi?.description,operationId:c.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:T(c),...a?{requestBody:a}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:U(c.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{schemas:{}},security:[{apiKeyCookie:[]}],servers:[{url:b?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:R}}let W=((f=function(){}).prototype=Object.create(null),Object.freeze(f.prototype),f);function X(){return{root:{key:""},static:new W}}function Y(a){let[b,...c]=a.split("/");return""===c[c.length-1]?c.slice(0,-1):c}function Z(a,b){let c=new W;for(let[d,e]of b){let b=d<0?a.slice(-(d+1)).join("/"):a[d];if("string"==typeof e)c[e]=b;else{let a=b.match(e);if(a)for(let b in a.groups)c[b]=a.groups[b]}}return c}function $(a,b="",c,d){b=b.toUpperCase(),47!==c.charCodeAt(0)&&(c=`/${c}`);let e=Y(c=c.replace(/\\:/g,"%3A")),f=a.root,g=0,h=[],i=[];for(let a=0;a<e.length;a++){let b=e[a];if(b.startsWith("**")){f.wildcard||(f.wildcard={key:"**"}),f=f.wildcard,h.push([-(a+1),b.split(":")[1]||"_",2===b.length]);break}if("*"===b||b.includes(":")){if(f.param||(f.param={key:"*"}),f=f.param,"*"===b)h.push([a,`_${g++}`,!0]);else if(b.includes(":",1)){let c=function(a){let b=a.replace(/:(\w+)/g,(a,b)=>`(?<${b}>[^/]+)`).replace(/\./g,"\\.");return RegExp(`^${b}$`)}(b);i[a]=c,f.hasRegexParam=!0,h.push([a,c,!1])}else h.push([a,b.slice(1),!1]);continue}"\\*"===b?b=e[a]="*":"\\*\\*"===b&&(b=e[a]="**");let c=f.static?.[b];if(c)f=c;else{let a={key:b};f.static||(f.static=new W),f.static[b]=a,f=a}}let j=h.length>0;f.methods||(f.methods=new W),f.methods[b]??=[],f.methods[b].push({data:d||null,paramsRegexp:i,paramsMap:j?h:void 0}),j||(a.static["/"+e.join("/")]=f)}async function _(a,b,c){let d=a.body?.callbackURL||a.context.options.baseURL;if(!d)throw new x("BAD_REQUEST",{message:"callbackURL is required"});let e=(0,p.generateRandomString)(128),f=(0,p.generateRandomString)(32),g=a.context.oauthConfig.storeStateStrategy,h={...c||{},callbackURL:d,codeVerifier:e,errorURL:a.body?.errorCallbackURL,newUserURL:a.body?.newUserCallbackURL,link:b,expiresAt:Date.now()+6e5,requestSignUp:a.body?.requestSignUp,state:f};if(await (0,o.setOAuthState)(h),"cookie"===g){let b=await (0,q.symmetricEncrypt)({key:a.context.secret,data:JSON.stringify(h)}),c=a.context.createAuthCookie("oauth_state",{maxAge:6e5});return a.setCookie(c.name,b,c.attributes),{state:f,codeVerifier:e}}let i=a.context.createAuthCookie("state",{maxAge:3e5});await a.setSignedCookie(i.name,f,a.context.secret,i.attributes);let j=new Date;j.setMinutes(j.getMinutes()+10);let k=await a.context.internalAdapter.createVerificationValue({value:JSON.stringify(h),identifier:f,expiresAt:j});if(!k)throw a.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new x("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:k.identifier,codeVerifier:e}}async function aa(a){let b,c=a.query.state||a.body.state,d=a.context.oauthConfig.storeStateStrategy,e=r.looseObject({callbackURL:r.string(),codeVerifier:r.string(),errorURL:r.string().optional(),newUserURL:r.string().optional(),expiresAt:r.number(),link:r.object({email:r.string(),userId:s.coerce.string()}).optional(),requestSignUp:r.boolean().optional(),state:r.string().optional()}),f=a.context.oauthConfig?.skipStateCookieCheck;if("cookie"===d){let d=a.context.createAuthCookie("oauth_state"),f=a.getCookie(d.name);if(!f){a.context.logger.error("State Mismatch. OAuth state cookie not found",{state:c});let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=please_restart_the_process`)}try{let c=await (0,q.symmetricDecrypt)({key:a.context.secret,data:f});b=e.parse(JSON.parse(c))}catch(c){a.context.logger.error("Failed to decrypt or parse OAuth state cookie",{error:c});let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=please_restart_the_process`)}if(!a.context.oauthConfig?.skipStateCookieCheck&&b.state&&b.state!==c){a.context.logger.error("State Mismatch. State parameter does not match",{expected:b.state,received:c});let d=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${d}?error=state_mismatch`)}a.setCookie(d.name,"",{maxAge:0})}else{let d=await a.context.internalAdapter.findVerificationValue(c);if(!d){a.context.logger.error("State Mismatch. Verification not found",{state:c});let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=please_restart_the_process`)}b=e.parse(JSON.parse(d.value));let g=a.context.createAuthCookie("state"),h=await a.getSignedCookie(g.name,a.context.secret);if(!f&&(!h||h!==c)){let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=state_mismatch`)}a.setCookie(g.name,"",{maxAge:0}),await a.context.internalAdapter.deleteVerificationValue(d.id)}if(b.errorURL||(b.errorURL=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`),b.expiresAt<Date.now()){let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=please_restart_the_process`)}return b&&await (0,o.setOAuthState)(b),b}let ab={scope:"server"};var ac=a.i(123651),ad=a.i(900193),ae=ad;a.i(118129);var af=ac,ag=ac;function ah(a,b){if(b.advanced?.ipAddress?.disableIpTracking)return null;let c="headers"in a?a.headers:a;for(let a of b.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"]){let b="get"in c?c.get(a):c[a];if("string"==typeof b){var d;let a=b.split(",")[0].trim();if(d=a,r.ipv4().safeParse(d).success||r.ipv6().safeParse(d).success)return a}}return(0,ag.p)()||(0,af.d)()?"127.0.0.1":null}var ai=a.i(454989);let aj=Q(async()=>({})),ak=Q.create({use:[aj,Q(async()=>({}))]}),al=[aj];function am(a,b,c){let d="string"==typeof a?a:void 0,e="object"==typeof b?b:a,f="function"==typeof b?b:c;return d?P(d,{...e,use:[...e?.use||[],...al]},async a=>(0,ai.f)(a,()=>f(a))):P({...e,use:[...e?.use||[],...al]},async a=>(0,ai.f)(a,()=>f(a)))}let an=ak(async a=>{if(a.request?.method==="GET"||a.request?.method==="OPTIONS"||a.request?.method==="HEAD"||!a.request)return;let b=a.request?.headers,{body:c,query:d}=a,e=b?.get("origin")||b?.get("referer")||"",f=c?.callbackURL||d?.callbackURL,g=c?.redirectTo,h=c?.errorCallbackURL,i=c?.newUserCallbackURL,j=b?.has("cookie"),k=(b,c)=>{if(b&&!a.context.isTrustedOrigin(b,{allowRelativePaths:"origin"!==c}))throw a.context.logger.error(`Invalid ${c}: ${b}`),a.context.logger.info(`If it's a valid URL, please add ${b} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${a.context.trustedOrigins}`),new x("FORBIDDEN",{message:`Invalid ${c}`})};if(j&&!a.context.skipCSRFCheck&&!a.context.skipOriginCheck){if(!e||"null"===e)throw new x("FORBIDDEN",{message:"Missing or null Origin"});k(e,"origin")}f&&k(f,"callbackURL"),g&&k(g,"redirectURL"),h&&k(h,"errorCallbackURL"),i&&k(i,"newUserCallbackURL")}),ao=a=>ak(async b=>{if(!b.request)return;let c=a(b),d=(a,c)=>{if(a&&!b.context.isTrustedOrigin(a,{allowRelativePaths:"origin"!==c}))throw b.context.logger.error(`Invalid ${c}: ${a}`),b.context.logger.info(`If it's a valid URL, please add ${a} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${b.context.trustedOrigins}`),new x("FORBIDDEN",{message:`Invalid ${c}`})};for(let a of Array.isArray(c)?c:[c])d(a,"callbackURL")});function ap(a){return"-"===a||"^"===a||"$"===a||"+"===a||"."===a||"("===a||")"===a||"|"===a||"["===a||"]"===a||"{"===a||"}"===a||"*"===a||"?"===a||"\\"===a?`\\${a}`:a}function aq(a,b){if("string"!=typeof b)throw TypeError(`Sample must be a string, but ${typeof b} given`);return a.test(b)}function ar(a,b){if("string"!=typeof a&&!Array.isArray(a))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof a} given`);if(("string"==typeof b||"boolean"==typeof b)&&(b={separator:b}),2==arguments.length&&!(void 0===b||"object"==typeof b&&null!==b&&!Array.isArray(b)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof b} given`);if("\\"===(b=b||{}).separator)throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let c=function a(b,c=!0){if(Array.isArray(b))return`(?:${b.map(b=>`^${a(b,c)}$`).join("|")})`;let d="",e="",f=".";!0===c?(d="/",e="[/\\\\]",f="[^/\\\\]"):c&&((e=function(a){let b="";for(let c=0;c<a.length;c++)b+=ap(a[c]);return b}(d=c)).length>1?(e=`(?:${e})`,f=`((?!${e}).)`):f=`[^${e}]`);let g=c?`${e}+?`:"",h=c?`${e}*?`:"",i=c?b.split(d):[b],j="";for(let a=0;a<i.length;a++){let b=i[a],d=i[a+1],e="";if(b||!(a>0)){if(c&&(e=a===i.length-1?h:"**"!==d?g:""),c&&"**"===b){e&&(j+=0===a?"":e,j+=`(?:${f}*?${e})*?`);continue}for(let a=0;a<b.length;a++){let c=b[a];"\\"===c?a<b.length-1&&(j+=ap(b[a+1]),a++):"?"===c?j+=f:"*"===c?j+=`${f}*?`:j+=ap(c)}j+=e}}return j}(a,b.separator),d=RegExp(`^${c}$`,b.flags),e=aq.bind(null,d);return e.options=b,e.pattern=a,e.regexp=d,e}var as=ad;let at=new Map;async function au(a,b){if(!b.rateLimit.enabled)return;let c=new URL(a.url).pathname.replace(b.options.basePath||"/api/auth","").replace(/\/+$/,""),d=b.rateLimit.window,e=b.rateLimit.max,f=ah(a,b.options);if(!f)return;let g=f+c,h=[{pathMatcher:a=>a.startsWith("/sign-in")||a.startsWith("/sign-up")||a.startsWith("/change-password")||a.startsWith("/change-email"),window:10,max:3}].find(a=>a.pathMatcher(c));for(let a of(h&&(d=h.window,e=h.max),b.options.plugins||[]))if(a.rateLimit){let b=a.rateLimit.find(a=>a.pathMatcher(c));if(b){d=b.window,e=b.max;break}}if(b.rateLimit.customRules){let f=Object.keys(b.rateLimit.customRules).find(a=>a.includes("*")?ar(a)(c):a===c);if(f){let c=b.rateLimit.customRules[f],g="function"==typeof c?await c(a):c;if(g&&(d=g.window,e=g.max),!1===g)return}}let i=function(a,b){let c,d;if(a.options.rateLimit?.customStorage)return a.options.rateLimit.customStorage;let e=a.rateLimit.storage;return"secondary-storage"===e?{get:async b=>{let c=await a.options.secondaryStorage?.get(b);return c?(0,as.n)(c):void 0},set:async(c,d,e)=>{let f=b?.window??a.options.rateLimit?.window??10;await a.options.secondaryStorage?.set?.(c,JSON.stringify(d),f)}}:"memory"===e?{get:async a=>at.get(a),async set(a,b,c){at.set(a,b)}}:(c="rateLimit",d=a.adapter,{get:async a=>{let b=(await d.findMany({model:c,where:[{field:"key",value:a}]}))[0];return"bigint"==typeof b?.lastRequest&&(b.lastRequest=Number(b.lastRequest)),b},set:async(b,e,f)=>{try{f?await d.updateMany({model:c,where:[{field:"key",value:b}],update:{count:e.count,lastRequest:e.lastRequest}}):await d.create({model:c,data:{key:b,count:e.count,lastRequest:e.lastRequest}})}catch(b){a.logger.error("Error setting rate limit",b)}}})}(b,{window:d}),j=await i.get(g),k=Date.now();if(j){var l,m,n;let a=k-j.lastRequest;if(l=e,m=d,Date.now()-j.lastRequest<1e3*m&&j.count>=l)return n=Math.ceil((j.lastRequest+1e3*d-Date.now())/1e3),new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":n.toString()}});a>1e3*d?await i.set(g,{...j,count:1,lastRequest:k},!0):await i.set(g,{...j,count:j.count+1,lastRequest:k},!0)}else await i.set(g,{key:g,count:1,lastRequest:k})}let av=(a,b="ms")=>new Date(Date.now()+("sec"===b?1e3*a:a)),aw=new WeakMap;function ax(a,b){let c=b.fields,d={};for(let b in a){let e=c[b];if(!e){d[b]=a[b];continue}!1!==e.returned&&(d[b]=a[b])}return d}function ay(a,b){aw.has(a)||aw.set(a,new Map);let c=aw.get(a);if(c.has(b))return c.get(b);let d={..."user"===b?a.user?.additionalFields:{},..."session"===b?a.session?.additionalFields:{}};for(let c of a.plugins||[])c.schema&&c.schema[b]&&(d={...d,...c.schema[b].fields});return aw.get(a).set(b,d),d}function az(a,b){return{...ax(b,{fields:ay(a,"user")}),id:b.id}}function aA(a,b){return ax(b,{fields:ay(a,"account")})}function aB(a,b){return ax(b,{fields:ay(a,"session")})}function aC(a,b){let c=b.action||"create",d=b.fields,e=Object.assign(Object.create(null),null);for(let b in d){if(b in a){if(!1===d[b].input){if(void 0!==d[b].defaultValue&&"update"!==c){e[b]=d[b].defaultValue;continue}if(a[b])throw new x("BAD_REQUEST",{message:`${b} is not allowed to be set`});continue}if(d[b].validator?.input&&void 0!==a[b]){let c=d[b].validator.input["~standard"].validate(a[b]);if(c instanceof Promise)throw new x("INTERNAL_SERVER_ERROR",{message:"Async validation is not supported for additional fields"});if("issues"in c&&c.issues)throw new x("BAD_REQUEST",{message:c.issues[0]?.message||"Validation Error"});e[b]=c.value;continue}if(d[b].transform?.input&&void 0!==a[b]){e[b]=d[b].transform?.input(a[b]);continue}e[b]=a[b];continue}if(void 0!==d[b].defaultValue&&"create"===c){if("function"==typeof d[b].defaultValue){e[b]=d[b].defaultValue();continue}e[b]=d[b].defaultValue;continue}if(d[b].required&&"create"===c)throw new x("BAD_REQUEST",{message:`${b} is required`})}return e}function aD(a,b={},c){return aC(b,{fields:ay(a,"user"),action:c})}function aE(a,b){return aC(b||{},{fields:ay(a,"user")})}function aF(a,b){return aC(b,{fields:ay(a,"account")})}function aG(a,b){return aC(b,{fields:ay(a,"session")})}function aH(a,b){if(!b)return a;for(let c in b){let d=b[c]?.modelName;for(let e in d&&(a[c].modelName=d),a[c].fields){let d=b[c]?.fields?.[e];d&&(a[c].fields[e].fieldName=d)}}return a}var aI=Object.defineProperty,aJ=Object.getOwnPropertyDescriptor,aK=Object.getOwnPropertyNames,aL=Object.prototype.hasOwnProperty,aM=(a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(var e,f=aK(b),g=0,h=f.length;g<h;g++)e=f[g],aL.call(a,e)||e===c||aI(a,e,{get:(a=>b[a]).bind(null,e),enumerable:!(d=aJ(b,e))||d.enumerable});return a},aN=a.i(260711),aO=a.i(239391);let aP=r.object({id:r.string(),createdAt:r.date().default(()=>new Date),updatedAt:r.date().default(()=>new Date)}),aQ=aP.extend({providerId:r.string(),accountId:r.string(),userId:s.coerce.string(),accessToken:r.string().nullish(),refreshToken:r.string().nullish(),idToken:r.string().nullish(),accessTokenExpiresAt:r.date().nullish(),refreshTokenExpiresAt:r.date().nullish(),scope:r.string().nullish(),password:r.string().nullish()}),aR=r.object({key:r.string(),count:r.number(),lastRequest:r.number()}),aS=aP.extend({userId:s.coerce.string(),expiresAt:r.date(),token:r.string(),ipAddress:r.string().nullish(),userAgent:r.string().nullish()}),aT=aP.extend({email:r.string().transform(a=>a.toLowerCase()),emailVerified:r.boolean().default(!1),name:r.string(),image:r.string().nullish()}),aU=aP.extend({value:r.string(),expiresAt:r.date(),identifier:r.string()});a.s(["accountSchema",()=>aQ,"coreSchema",()=>aP,"rateLimitSchema",()=>aR,"sessionSchema",()=>aS,"userSchema",()=>aT,"verificationSchema",()=>aU],21190);var aV=aO,aW=a.i(944309);async function aX(b,c){let d;if(b.database)d="function"==typeof b.database?b.database(b):await c(b);else{let c=Object.keys((0,aV.t)(b)).reduce((a,b)=>(a[b]=[],a),{}),{memoryAdapter:e}=await (0,aN.trackDynamicImport)(a.A(588010));d=e(c)(b)}return d.transaction||(aW.logger.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),d.transaction=async a=>a(d)),d}a.i(191511);var aY=a.i(696722);async function aZ(b){return aX(b,async b=>{let{createKyselyAdapter:c}=await (0,aN.trackDynamicImport)(a.A(860484)),{kysely:d,databaseType:e,transaction:f}=await c(b);if(!d)throw new aY.BetterAuthError("Failed to initialize database adapter");let{kyselyAdapter:g}=await (0,aN.trackDynamicImport)(a.A(860484));return g(d,{type:e||"sqlite",debugLogs:!!b.database&&"debugLogs"in b.database&&b.database.debugLogs,transaction:f})(b)})}let a$=(a,b)=>({type:a,...b});function a_(a,b){let c=b.id?{id:b.id}:{};for(let d in a){let e=a[d],f=b[d];void 0!==f&&(c[e.fieldName||d]=f)}return c}function a0(a,b){if(!b)return null;let c={id:b.id};for(let[d,e]of Object.entries(a))c[d]=b[e.fieldName||d];return c}a.i(576472);var a1=ai,a2=ai;function a3(a,b){let c=b.hooks;return{createWithHooks:async function(b,d,e){let f=await (0,a2.u)().catch(()=>null),g=b;for(let a of c||[]){let b=a[d]?.create?.before;if(b){let a=await b(g,f);if(!1===a)return null;"object"==typeof a&&"data"in a&&(g={...g,...a.data})}}let h=e?await e.fn(g):null,i=!e||e.executeMainFn?await (await (0,a1.t)(a)).create({model:d,data:g,forceAllowId:!0}):h;for(let a of c||[]){let b=a[d]?.create?.after;b&&await b(i,f)}return i},updateWithHooks:async function(b,d,e,f){let g=await (0,a2.u)().catch(()=>null),h=b;for(let a of c||[]){let c=a[e]?.update?.before;if(c){let a=await c(b,g);if(!1===a)return null;"object"==typeof a&&"data"in a&&(h={...h,...a.data})}}let i=f?await f.fn(h):null,j=!f||f.executeMainFn?await (await (0,a1.t)(a)).update({model:e,update:h,where:d}):i;for(let a of c||[]){let b=a[e]?.update?.after;b&&await b(j,g)}return j},updateManyWithHooks:async function(b,d,e,f){let g=await (0,a2.u)().catch(()=>null),h=b;for(let a of c||[]){let c=a[e]?.update?.before;if(c){let a=await c(b,g);if(!1===a)return null;"object"==typeof a&&"data"in a&&(h={...h,...a.data})}}let i=f?await f.fn(h):null,j=!f||f.executeMainFn?await (await (0,a1.t)(a)).updateMany({model:e,update:h,where:d}):i;for(let a of c||[]){let b=a[e]?.update?.after;b&&await b(j,g)}return j},deleteWithHooks:async function(b,d,e){let f=await (0,a2.u)().catch(()=>null),g=null;try{g=(await (await (0,a1.t)(a)).findMany({model:d,where:b,limit:1}))[0]||null}catch{}if(g)for(let a of c||[]){let b=a[d]?.delete?.before;if(b&&await b(g,f)===!1)return null}let h=e?await e.fn(b):null,i=!e||e.executeMainFn?await (await (0,a1.t)(a)).delete({model:d,where:b}):h;if(g)for(let a of c||[]){let b=a[d]?.delete?.after;b&&await b(g,f)}return i},deleteManyWithHooks:async function(b,d,e){let f=await (0,a2.u)().catch(()=>null),g=[];try{g=await (await (0,a1.t)(a)).findMany({model:d,where:b})}catch{}for(let a of g)for(let b of c||[]){let c=b[d]?.delete?.before;if(c&&await c(a,f)===!1)return null}let h=e?await e.fn(b):null,i=!e||e.executeMainFn?await (await (0,a1.t)(a)).deleteMany({model:d,where:b}):h;for(let a of g)for(let b of c||[]){let c=b[d]?.delete?.after;c&&await c(a,f)}return i}}}var a1=ai,a2=ai,a4=ai,ae=ad,as=ad;let a5=(a,b)=>{let c=b.logger,d=b.options,e=d.secondaryStorage,f=d.session?.expiresIn||604800,{createWithHooks:g,updateWithHooks:h,updateManyWithHooks:i,deleteWithHooks:j,deleteManyWithHooks:k}=a3(a,b);async function l(a){if(!e)return;let b=await e.get(`active-sessions-${a.id}`);if(!b)return;let c=Date.now(),d=((0,as.n)(b)||[]).filter(a=>a.expiresAt>c);await Promise.all(d.map(async({token:b})=>{let d=await e.get(b);if(!d)return;let f=(0,as.n)(d);if(!f)return;let g=Math.max(Math.floor(new Date(f.session.expiresAt).getTime()-c)/1e3,0);await e.set(b,JSON.stringify({session:f.session,user:a}),Math.floor(g))}))}return{createOAuthUser:async(b,c)=>(0,a4.i)(a,async()=>{let a=await g({createdAt:new Date,updatedAt:new Date,...b},"user",void 0);return{user:a,account:await g({...c,userId:a.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}}),createUser:async a=>await g({createdAt:new Date,updatedAt:new Date,...a,email:a.email?.toLowerCase()},"user",void 0),createAccount:async a=>await g({createdAt:new Date,updatedAt:new Date,...a},"account",void 0),listSessions:async c=>{if(e){let a=await e.get(`active-sessions-${c}`);if(!a)return[];let d=(0,as.n)(a)||[],f=Date.now(),g=d.filter(a=>a.expiresAt>f),h=[];for(let a of g){let c=await e.get(a.token);if(c){let a=(0,as.n)(c);if(!a)return[];let d=aB(b.options,{...a.session,expiresAt:new Date(a.session.expiresAt)});h.push(d)}}return h}return await (await (0,a1.t)(a)).findMany({model:"session",where:[{field:"userId",value:c}]})},listUsers:async(b,c,d,e)=>await (await (0,a1.t)(a)).findMany({model:"user",limit:b,offset:c,sortBy:d,where:e}),countTotalUsers:async b=>{let c=await (await (0,a1.t)(a)).count({model:"user",where:b});return"string"==typeof c?parseInt(c):c},deleteUser:async a=>{(!e||d.session?.storeSessionInDatabase)&&await k([{field:"userId",value:a}],"session",void 0),await k([{field:"userId",value:a}],"account",void 0),await j([{field:"id",value:a}],"user",void 0)},createSession:async(b,c,h,i)=>{let j=await (0,a2.u)().catch(()=>null),k=j?.headers||j?.request?.headers,{id:l,...m}=h||{},n=aG(j?.context.options??d,{}),o={ipAddress:(j?.request||j?.headers)&&ah(j?.request||j?.headers,j?.context.options)||"",userAgent:k?.get("user-agent")||"",...m,expiresAt:c?av(86400,"sec"):av(f,"sec"),userId:b,token:(0,ae.r)(32),createdAt:new Date,updatedAt:new Date,...n,...i?m:{}};return await g(o,"session",e?{fn:async c=>{let d=await e.get(`active-sessions-${b}`),f=[],g=Date.now();d&&(f=(f=(0,as.n)(d)||[]).filter(a=>a.expiresAt>g));let h=f.sort((a,b)=>a.expiresAt-b.expiresAt),i=h.at(-1)?.expiresAt;h.push({token:o.token,expiresAt:o.expiresAt.getTime()}),(!i||i<o.expiresAt.getTime())&&(i=o.expiresAt.getTime());let j=Math.max(Math.floor((i-g)/1e3),0);j>0&&await e.set(`active-sessions-${b}`,JSON.stringify(h),j);let k=await a.findOne({model:"user",where:[{field:"id",value:b}]}),l=Math.max(Math.floor((o.expiresAt.getTime()-g)/1e3),0);return l>0&&await e.set(o.token,JSON.stringify({session:c,user:k}),l),c},executeMainFn:d.session?.storeSessionInDatabase}:void 0)},findSession:async c=>{if(e){let a=await e.get(c);if(!a&&!d.session?.storeSessionInDatabase)return null;if(a){let c=(0,as.n)(a);return c?{session:aB(b.options,{...c.session,expiresAt:new Date(c.session.expiresAt),createdAt:new Date(c.session.createdAt),updatedAt:new Date(c.session.updatedAt)}),user:az(b.options,{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)})}:null}}let f=await (await (0,a1.t)(a)).findOne({model:"session",where:[{value:c,field:"token"}],join:{user:!0}});if(!f)return null;let{user:g,...h}=f;return g?{session:aB(b.options,h),user:az(b.options,g)}:null},findSessions:async b=>{if(e){let a=[];for(let c of b){let b=await e.get(c);if(b){let c=(0,as.n)(b);if(!c)return[];let d={session:{...c.session,expiresAt:new Date(c.session.expiresAt)},user:{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)}};a.push(d)}}return a}let c=await (await (0,a1.t)(a)).findMany({model:"session",where:[{field:"token",value:b,operator:"in"}],join:{user:!0}});return!c.length||c.some(a=>!a.user)?[]:c.map(a=>{let{user:b,...c}=a;return{session:c,user:b}})},updateSession:async(a,b)=>await h(b,[{field:"token",value:a}],"session",e?{async fn(b){let c=await e.get(a);if(!c)return null;{let a=(0,as.n)(c);return a?{...a.session,...b}:null}},executeMainFn:d.session?.storeSessionInDatabase}:void 0),deleteSession:async a=>{if(e){let f=await e.get(a);if(f){let{session:b}=(0,as.n)(f)??{};if(!b)return void c.error("Session not found in secondary storage");let d=b.userId,g=await e.get(`active-sessions-${d}`);if(g){let b=(0,as.n)(g)||[],c=Date.now(),f=b.filter(b=>b.expiresAt>c&&b.token!==a),h=f.sort((a,b)=>a.expiresAt-b.expiresAt).at(-1)?.expiresAt;f.length>0&&h&&h>Date.now()?await e.set(`active-sessions-${d}`,JSON.stringify(f),Math.floor((h-c)/1e3)):await e.delete(`active-sessions-${d}`)}else c.error("Active sessions list not found in secondary storage")}if(await e.delete(a),!d.session?.storeSessionInDatabase||b.options.session?.preserveSessionInDatabase)return}await j([{field:"token",value:a}],"session",void 0)},deleteAccounts:async a=>{await k([{field:"userId",value:a}],"account",void 0)},deleteAccount:async a=>{await j([{field:"id",value:a}],"account",void 0)},deleteSessions:async a=>{if(e){if("string"==typeof a){let b=await e.get(`active-sessions-${a}`),c=b?(0,as.n)(b):[];if(!c)return;for(let a of c)await e.delete(a.token);await e.delete(`active-sessions-${a}`)}else for(let b of a)await e.get(b)&&await e.delete(b);if(!d.session?.storeSessionInDatabase||b.options.session?.preserveSessionInDatabase)return}await k([{field:Array.isArray(a)?"token":"userId",value:a,operator:Array.isArray(a)?"in":void 0}],"session",void 0)},findOAuthUser:async(b,c,d)=>{let e=await (await (0,a1.t)(a)).findMany({model:"account",where:[{value:c,field:"accountId"}],join:{user:!0}}).then(a=>a.find(a=>a.providerId===d));if(e)if(e.user)return{user:e.user,accounts:[e]};else{let c=await (await (0,a1.t)(a)).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}]});return c?{user:c,accounts:[e]}:null}{let c=await (await (0,a1.t)(a)).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}]});return c?{user:c,accounts:await (await (0,a1.t)(a)).findMany({model:"account",where:[{value:c.id,field:"userId"}]})||[]}:null}},findUserByEmail:async(b,c)=>{let d=await (await (0,a1.t)(a)).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}],join:{...c?.includeAccounts?{account:!0}:{}}});if(!d)return null;let{account:e,...f}=d;return{user:f,accounts:e??[]}},findUserById:async b=>b?await (await (0,a1.t)(a)).findOne({model:"user",where:[{field:"id",value:b}]}):null,linkAccount:async a=>await g({createdAt:new Date,updatedAt:new Date,...a},"account",void 0),updateUser:async(a,b)=>{let c=await h(b,[{field:"id",value:a}],"user",void 0);return await l(c),await l(c),c},updateUserByEmail:async(a,b)=>{let c=await h(b,[{field:"email",value:a.toLowerCase()}],"user",void 0);return await l(c),await l(c),c},updatePassword:async(a,b)=>{await i({password:b},[{field:"userId",value:a},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async b=>await (await (0,a1.t)(a)).findMany({model:"account",where:[{field:"userId",value:b}]}),findAccount:async b=>await (await (0,a1.t)(a)).findOne({model:"account",where:[{field:"accountId",value:b}]}),findAccountByProviderId:async(b,c)=>await (await (0,a1.t)(a)).findOne({model:"account",where:[{field:"accountId",value:b},{field:"providerId",value:c}]}),findAccountByUserId:async b=>await (await (0,a1.t)(a)).findMany({model:"account",where:[{field:"userId",value:b}]}),updateAccount:async(a,b)=>await h(b,[{field:"id",value:a}],"account",void 0),createVerificationValue:async a=>await g({createdAt:new Date,updatedAt:new Date,...a},"verification",void 0),findVerificationValue:async b=>{let c=await (await (0,a1.t)(a)).findMany({model:"verification",where:[{field:"identifier",value:b}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return d.verification?.disableCleanup||await k([{field:"expiresAt",value:new Date,operator:"lt"}],"verification",void 0),c[0]},deleteVerificationValue:async a=>{await j([{field:"id",value:a}],"verification",void 0)},deleteVerificationByIdentifier:async a=>{await j([{field:"identifier",value:a}],"verification",void 0)},updateVerificationValue:async(a,b)=>await h(b,[{field:"id",value:a}],"verification",void 0)}};a.i(222157),a.s(["default",0,s],68075),a.i(68075),a.s(["$brand",()=>s.$brand,"$input",()=>s.$input,"$output",()=>s.$output,"NEVER",()=>s.NEVER,"TimePrecision",()=>s.TimePrecision,"ZodAny",()=>s.ZodAny,"ZodArray",()=>s.ZodArray,"ZodBase64",()=>s.ZodBase64,"ZodBase64URL",()=>s.ZodBase64URL,"ZodBigInt",()=>s.ZodBigInt,"ZodBigIntFormat",()=>s.ZodBigIntFormat,"ZodBoolean",()=>s.ZodBoolean,"ZodCIDRv4",()=>s.ZodCIDRv4,"ZodCIDRv6",()=>s.ZodCIDRv6,"ZodCUID",()=>s.ZodCUID,"ZodCUID2",()=>s.ZodCUID2,"ZodCatch",()=>s.ZodCatch,"ZodCodec",()=>s.ZodCodec,"ZodCustom",()=>s.ZodCustom,"ZodCustomStringFormat",()=>s.ZodCustomStringFormat,"ZodDate",()=>s.ZodDate,"ZodDefault",()=>s.ZodDefault,"ZodDiscriminatedUnion",()=>s.ZodDiscriminatedUnion,"ZodE164",()=>s.ZodE164,"ZodEmail",()=>s.ZodEmail,"ZodEmoji",()=>s.ZodEmoji,"ZodEnum",()=>s.ZodEnum,"ZodError",()=>s.ZodError,"ZodExactOptional",()=>s.ZodExactOptional,"ZodFile",()=>s.ZodFile,"ZodFirstPartyTypeKind",()=>s.ZodFirstPartyTypeKind,"ZodFunction",()=>s.ZodFunction,"ZodGUID",()=>s.ZodGUID,"ZodIPv4",()=>s.ZodIPv4,"ZodIPv6",()=>s.ZodIPv6,"ZodISODate",()=>s.ZodISODate,"ZodISODateTime",()=>s.ZodISODateTime,"ZodISODuration",()=>s.ZodISODuration,"ZodISOTime",()=>s.ZodISOTime,"ZodIntersection",()=>s.ZodIntersection,"ZodIssueCode",()=>s.ZodIssueCode,"ZodJWT",()=>s.ZodJWT,"ZodKSUID",()=>s.ZodKSUID,"ZodLazy",()=>s.ZodLazy,"ZodLiteral",()=>s.ZodLiteral,"ZodMAC",()=>s.ZodMAC,"ZodMap",()=>s.ZodMap,"ZodNaN",()=>s.ZodNaN,"ZodNanoID",()=>s.ZodNanoID,"ZodNever",()=>s.ZodNever,"ZodNonOptional",()=>s.ZodNonOptional,"ZodNull",()=>s.ZodNull,"ZodNullable",()=>s.ZodNullable,"ZodNumber",()=>s.ZodNumber,"ZodNumberFormat",()=>s.ZodNumberFormat,"ZodObject",()=>s.ZodObject,"ZodOptional",()=>s.ZodOptional,"ZodPipe",()=>s.ZodPipe,"ZodPrefault",()=>s.ZodPrefault,"ZodPromise",()=>s.ZodPromise,"ZodReadonly",()=>s.ZodReadonly,"ZodRealError",()=>s.ZodRealError,"ZodRecord",()=>s.ZodRecord,"ZodSet",()=>s.ZodSet,"ZodString",()=>s.ZodString,"ZodStringFormat",()=>s.ZodStringFormat,"ZodSuccess",()=>s.ZodSuccess,"ZodSymbol",()=>s.ZodSymbol,"ZodTemplateLiteral",()=>s.ZodTemplateLiteral,"ZodTransform",()=>s.ZodTransform,"ZodTuple",()=>s.ZodTuple,"ZodType",()=>s.ZodType,"ZodULID",()=>s.ZodULID,"ZodURL",()=>s.ZodURL,"ZodUUID",()=>s.ZodUUID,"ZodUndefined",()=>s.ZodUndefined,"ZodUnion",()=>s.ZodUnion,"ZodUnknown",()=>s.ZodUnknown,"ZodVoid",()=>s.ZodVoid,"ZodXID",()=>s.ZodXID,"ZodXor",()=>s.ZodXor,"_ZodString",()=>s._ZodString,"_default",()=>s._default,"_function",()=>s._function,"any",()=>s.any,"array",()=>s.array,"base64",()=>s.base64,"base64url",()=>s.base64url,"bigint",()=>s.bigint,"boolean",()=>s.boolean,"catch",()=>s.catch,"check",()=>s.check,"cidrv4",()=>s.cidrv4,"cidrv6",()=>s.cidrv6,"clone",()=>s.clone,"codec",()=>s.codec,"coerce",()=>s.coerce,"config",()=>s.config,"core",()=>s.core,"cuid",()=>s.cuid,"cuid2",()=>s.cuid2,"custom",()=>s.custom,"date",()=>s.date,"decode",()=>s.decode,"decodeAsync",()=>s.decodeAsync,"default",0,s,"describe",()=>s.describe,"discriminatedUnion",()=>s.discriminatedUnion,"e164",()=>s.e164,"email",()=>s.email,"emoji",()=>s.emoji,"encode",()=>s.encode,"encodeAsync",()=>s.encodeAsync,"endsWith",()=>s.endsWith,"enum",()=>s.enum,"exactOptional",()=>s.exactOptional,"file",()=>s.file,"flattenError",()=>s.flattenError,"float32",()=>s.float32,"float64",()=>s.float64,"formatError",()=>s.formatError,"fromJSONSchema",()=>s.fromJSONSchema,"function",()=>s.function,"getErrorMap",()=>s.getErrorMap,"globalRegistry",()=>s.globalRegistry,"gt",()=>s.gt,"gte",()=>s.gte,"guid",()=>s.guid,"hash",()=>s.hash,"hex",()=>s.hex,"hostname",()=>s.hostname,"httpUrl",()=>s.httpUrl,"includes",()=>s.includes,"instanceof",()=>s.instanceof,"int",()=>s.int,"int32",()=>s.int32,"int64",()=>s.int64,"intersection",()=>s.intersection,"ipv4",()=>s.ipv4,"ipv6",()=>s.ipv6,"iso",()=>s.iso,"json",()=>s.json,"jwt",()=>s.jwt,"keyof",()=>s.keyof,"ksuid",()=>s.ksuid,"lazy",()=>s.lazy,"length",()=>s.length,"literal",()=>s.literal,"locales",()=>s.locales,"looseObject",()=>s.looseObject,"looseRecord",()=>s.looseRecord,"lowercase",()=>s.lowercase,"lt",()=>s.lt,"lte",()=>s.lte,"mac",()=>s.mac,"map",()=>s.map,"maxLength",()=>s.maxLength,"maxSize",()=>s.maxSize,"meta",()=>s.meta,"mime",()=>s.mime,"minLength",()=>s.minLength,"minSize",()=>s.minSize,"multipleOf",()=>s.multipleOf,"nan",()=>s.nan,"nanoid",()=>s.nanoid,"nativeEnum",()=>s.nativeEnum,"negative",()=>s.negative,"never",()=>s.never,"nonnegative",()=>s.nonnegative,"nonoptional",()=>s.nonoptional,"nonpositive",()=>s.nonpositive,"normalize",()=>s.normalize,"null",()=>s.null,"nullable",()=>s.nullable,"nullish",()=>s.nullish,"number",()=>s.number,"object",()=>s.object,"optional",()=>s.optional,"overwrite",()=>s.overwrite,"parse",()=>s.parse,"parseAsync",()=>s.parseAsync,"partialRecord",()=>s.partialRecord,"pipe",()=>s.pipe,"positive",()=>s.positive,"prefault",()=>s.prefault,"preprocess",()=>s.preprocess,"prettifyError",()=>s.prettifyError,"promise",()=>s.promise,"property",()=>s.property,"readonly",()=>s.readonly,"record",()=>s.record,"refine",()=>s.refine,"regex",()=>s.regex,"regexes",()=>s.regexes,"registry",()=>s.registry,"safeDecode",()=>s.safeDecode,"safeDecodeAsync",()=>s.safeDecodeAsync,"safeEncode",()=>s.safeEncode,"safeEncodeAsync",()=>s.safeEncodeAsync,"safeParse",()=>s.safeParse,"safeParseAsync",()=>s.safeParseAsync,"set",()=>s.set,"setErrorMap",()=>s.setErrorMap,"size",()=>s.size,"slugify",()=>s.slugify,"startsWith",()=>s.startsWith,"strictObject",()=>s.strictObject,"string",()=>s.string,"stringFormat",()=>s.stringFormat,"stringbool",()=>s.stringbool,"success",()=>s.success,"superRefine",()=>s.superRefine,"symbol",()=>s.symbol,"templateLiteral",()=>s.templateLiteral,"toJSONSchema",()=>s.toJSONSchema,"toLowerCase",()=>s.toLowerCase,"toUpperCase",()=>s.toUpperCase,"transform",()=>s.transform,"treeifyError",()=>s.treeifyError,"trim",()=>s.trim,"tuple",()=>s.tuple,"uint32",()=>s.uint32,"uint64",()=>s.uint64,"ulid",()=>s.ulid,"undefined",()=>s.undefined,"union",()=>s.union,"unknown",()=>s.unknown,"uppercase",()=>s.uppercase,"url",()=>s.url,"util",()=>s.util,"uuid",()=>s.uuid,"uuidv4",()=>s.uuidv4,"uuidv6",()=>s.uuidv6,"uuidv7",()=>s.uuidv7,"void",()=>s.void,"xid",()=>s.xid,"xor",()=>s.xor,"z",0,s],344532);var a6=a.i(344532);function a7({fields:a,isClientSide:b}){let c=Object.keys(a).reduce((c,d)=>{let e,f=a[d];return!f||b&&!1===f.input||(e="json"===f.type?a6.json?a6.json():a6.any():"string[]"===f.type||"number[]"===f.type?a6.array("string[]"===f.type?a6.string():a6.number()):Array.isArray(f.type)?a6.any():a6[f.type](),f?.required===!1&&(e=e.optional()),f?.returned===!1)?c:{...c,[d]:e}},{});return a6.object(c)}function a8(a){let b=(0,bi.getAuthTables)(a),c={};for(let a in b){let d=b[a],e=d.fields,f={};if(Object.entries(e).forEach(([a,c])=>{if(f[c.fieldName||a]=c,c.references){let d=b[c.references.model];d&&(f[c.fieldName||a].references={...c.references,model:d.modelName,field:c.references.field})}}),c[d.modelName]){c[d.modelName].fields={...c[d.modelName].fields,...f};continue}c[d.modelName]={fields:f,order:d.order||1/0}}return c}var a9=a.i(297251),aV=aO,ba=ac,bb=a.i(919560),bc=a.i(280479);let bd={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};function be(a,b,c){if("string[]"===b||"number[]"===b)return a.toLowerCase().includes("json");let d=bd[c];return(Array.isArray(b)?d.string.map(a=>a.toLowerCase()):d[b].map(a=>a.toLowerCase())).includes(a.toLowerCase().split("(")[0].trim())}async function bf(a){try{let b=await bb.sql`SHOW search_path`.execute(a);if(b.rows[0]?.search_path)return b.rows[0].search_path.split(",").map(a=>a.trim()).map(a=>a.replace(/^["']|["']$/g,"")).filter(a=>!a.startsWith("$"))[0]||"public"}catch{}return"public"}async function bg(a){let b=a8(a),c=(0,ba.n)(a.logger),{kysely:d,databaseType:e}=await (0,a9.createKyselyAdapter)(a);e||(c.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),e="sqlite"),d||(c.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let f="public";if("postgres"===e){f=await bf(d),c.debug(`PostgreSQL migration: Using schema '${f}' (from search_path)`);try{(await bb.sql`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${f}
			`.execute(d)).rows[0]||c.warn(`Schema '${f}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(a){c.debug(`Could not verify schema existence: ${a instanceof Error?a.message:String(a)}`)}}let g=await d.introspection.getTables(),h=g;if("postgres"===e)try{let a=await bb.sql`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${f}
				AND table_type = 'BASE TABLE'
			`.execute(d),b=new Set(a.rows.map(a=>a.table_name));h=g.filter(a=>a.schema===f&&b.has(a.name)),c.debug(`Found ${h.length} table(s) in schema '${f}': ${h.map(a=>a.name).join(", ")||"(none)"}`)}catch(a){c.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${a instanceof Error?a.message:String(a)}`)}let i=[],j=[];for(let[a,d]of Object.entries(b)){let b=h.find(b=>b.name===a);if(!b){let b=i.findIndex(b=>b.table===a),c={table:a,fields:d.fields,order:d.order||1/0},e=i.findIndex(a=>(a.order||1/0)>c.order);-1===e?-1===b?i.push(c):i[b].fields={...i[b].fields,...d.fields}:i.splice(e,0,c);continue}let f={};for(let[g,h]of Object.entries(d.fields)){let d=b.columns.find(a=>a.name===g);if(!d){f[g]=h;continue}be(d.dataType,h.type,e)||c.warn(`Field ${g} in table ${a} has a different type in the database. Expected ${h.type} but got ${d.dataType}.`)}Object.keys(f).length>0&&j.push({table:a,fields:f,order:d.order||1/0})}let k=[],l=a.advanced?.database?.generateId==="uuid",m=a.advanced?.database?.useNumberId||a.advanced?.database?.generateId==="serial";function n(a,b){let c=a.type,d=e||"sqlite",f={string:{sqlite:"text",postgres:"text",mysql:a.unique?"varchar(255)":a.references?"varchar(36)":a.sortable||a.index?"varchar(255)":"text",mssql:a.unique||a.sortable?"varchar(255)":a.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:a.bigint?"bigint":"integer",postgres:a.bigint?"bigint":"integer",mysql:a.bigint?"bigint":"integer",mssql:a.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:bb.sql`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:m?bb.sql`integer GENERATED BY DEFAULT AS IDENTITY`:l?"uuid":"text",mysql:m?"integer":"varchar(36)",mssql:m?"integer":"varchar(36)",sqlite:m?"integer":"text"},foreignKeyId:{postgres:m?"integer":l?"uuid":"text",mysql:m?"integer":"varchar(36)",mssql:m?"integer":"varchar(36)",sqlite:m?"integer":"text"},"string[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},"number[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"}};if("id"===b||a.references?.field==="id")return"id"===b?f.id[d]:f.foreignKeyId[d];if(Array.isArray(c))return"text";if(!(c in f))throw Error(`Unsupported field type '${String(c)}' for field '${b}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: "string") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);return f[c][d]}let o=(0,bc.initGetModelName)({schema:(0,aV.t)(a),usePlural:!1}),p=(0,bc.initGetFieldName)({schema:(0,aV.t)(a),usePlural:!1});function q(a,b){try{return`${o(a)}.${p({model:a,field:b})}`}catch{return`${a}.${b}`}}if(j.length)for(let a of j)for(let[b,c]of Object.entries(a.fields)){let f=n(c,b),g=d.schema.alterTable(a.table);if(c.index){let c=d.schema.alterTable(a.table).addIndex(`${a.table}_${b}_idx`);k.push(c)}let h=g.addColumn(b,f,a=>(a=!1!==c.required?a.notNull():a,c.references&&(a=a.references(q(c.references.model,c.references.field)).onDelete(c.references.onDelete||"cascade")),c.unique&&(a=a.unique()),"date"===c.type&&"function"==typeof c.defaultValue&&("postgres"===e||"mysql"===e||"mssql"===e)&&(a="mysql"===e?a.defaultTo(bb.sql`CURRENT_TIMESTAMP(3)`):a.defaultTo(bb.sql`CURRENT_TIMESTAMP`)),a));k.push(h)}let r=[];if(a.advanced?.database?.useNumberId&&c.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead."),i.length)for(let a of i){let b=n({type:m?"number":"string"},"id"),c=d.schema.createTable(a.table).addColumn("id",b,a=>{if(m)return"postgres"===e?a.primaryKey().notNull():"sqlite"===e?a.primaryKey().notNull():"mssql"===e?a.identity().primaryKey().notNull():a.autoIncrement().primaryKey().notNull();return l&&"postgres"===e?a.primaryKey().defaultTo(bb.sql`pg_catalog.gen_random_uuid()`).notNull():a.primaryKey().notNull()});for(let[b,f]of Object.entries(a.fields)){let g=n(f,b);if(c=c.addColumn(b,g,a=>(a=!1!==f.required?a.notNull():a,f.references&&(a=a.references(q(f.references.model,f.references.field)).onDelete(f.references.onDelete||"cascade")),f.unique&&(a=a.unique()),"date"===f.type&&"function"==typeof f.defaultValue&&("postgres"===e||"mysql"===e||"mssql"===e)&&(a="mysql"===e?a.defaultTo(bb.sql`CURRENT_TIMESTAMP(3)`):a.defaultTo(bb.sql`CURRENT_TIMESTAMP`)),a)),f.index){let c=d.schema.createIndex(`${a.table}_${b}_${f.unique?"uidx":"idx"}`).on(a.table).columns([b]);r.push(f.unique?c.unique():c)}}k.push(c)}if(r.length)for(let a of r)k.push(a);return{toBeCreated:i,toBeAdded:j,runMigrations:async function(){for(let a of k)await a.execute()},compileMigrations:async function(){return k.map(a=>a.compile().sql).join(";\n\n")+";"}}}a.i(21190),a.s(["accountSchema",()=>aQ,"coreSchema",()=>aP,"getAuthTables",()=>aO.t,"rateLimitSchema",()=>aR,"sessionSchema",()=>aS,"userSchema",()=>aT,"verificationSchema",()=>aU],853277);var bh=a.i(853277),bi=((a,b)=>{let c={};for(var d in a)aI(c,d,{get:a[d],enumerable:!0});return b&&aI(c,Symbol.toStringTag,{value:"Module"}),c})({convertFromDB:()=>a0,convertToDB:()=>a_,createFieldAttribute:()=>a$,createInternalAdapter:()=>a5,getAdapter:()=>aZ,getBaseAdapter:()=>aX,getMigrations:()=>bg,getSchema:()=>a8,getWithHooks:()=>a3,matchType:()=>be,mergeSchema:()=>aH,parseAccountInput:()=>aF,parseAccountOutput:()=>aA,parseAdditionalUserInput:()=>aE,parseInputData:()=>aC,parseSessionInput:()=>aG,parseSessionOutput:()=>aB,parseUserInput:()=>aD,parseUserOutput:()=>az,toZodSchema:()=>a7});l&&(aI(bi,Symbol.toStringTag,{value:"Module"}),k&&aI(k,Symbol.toStringTag,{value:"Module"})),aM(bi,bh,"default"),k&&aM(k,bh,"default");var bj=a.i(149646),as=ad;function bk(a){let b=a.split("."),c=parseInt(b[b.length-1]||"0",10);return isNaN(c)?0:c}function bl(a,b){let c={};for(let d in a)c[d]={name:d,value:"",options:{...b,maxAge:0}};return c}let bm=a=>(b,c,d)=>{let e=function(a,b){let c={};for(let[d,e]of Object.entries(function(a){let b=a.headers?.get("cookie");if(!b)return{};let c={};for(let a of b.split("; ")){let[b,...d]=a.split("=");b&&d.length>0&&(c[b]=d.join("="))}return c}(b)))d.startsWith(a)&&(c[d]=e);return c}(b,d),f=d.context.logger;return{getValue:()=>Object.keys(e).sort((a,b)=>bk(a)-bk(b)).map(a=>e[a]).join(""),hasChunks:()=>Object.keys(e).length>0,chunk(d,g){let h=bl(e,c);for(let a in e)delete e[a];for(let i of function(a,b,c,d){let e=Math.ceil(b.value.length/3896);if(1===e)return c[b.name]=b.value,[b];let f=[];for(let a=0;a<e;a++){let d=`${b.name}.${a}`,e=3896*a,g=b.value.substring(e,e+3896);f.push({...b,name:d,value:g}),c[d]=g}return d.debug(`CHUNKING_${a.toUpperCase()}_COOKIE`,{message:`${a} cookie exceeds allowed 4096 bytes.`,emptyCookieSize:200,valueSize:b.value.length,chunkCount:e,chunks:f.map(a=>a.value.length+200)}),f}(a,{name:b,value:d,options:{...c,...g}},e,f))h[i.name]=i;return Object.values(h)},clean(){let a=bl(e,c);for(let a in e)delete e[a];return Object.values(a)},setCookies(a){for(let b of a)d.setCookie(b.name,b.value,b.options)}}},bn=bm("Session"),bo=bm("Account");function bp(a,b){let c=a.getCookie(b);if(c)return c;let d=[],e=a.headers?.get("cookie");if(!e)return null;let f={};for(let a of e.split("; ")){let[b,...c]=a.split("=");b&&c.length>0&&(f[b]=c.join("="))}for(let[a,c]of Object.entries(f))if(a.startsWith(b+".")){let b=parseInt(a.split(".").at(-1)||"0",10);isNaN(b)||d.push({index:b,value:c})}return d.length>0?(d.sort((a,b)=>a.index-b.index),d.map(a=>a.value).join("")):null}async function bq(a,b){let c=a.context.authCookies.accountData,d={maxAge:300,...c.options},e=await (0,bj.symmetricEncodeJWT)(b,a.context.secret,"better-auth-account",d.maxAge);if(e.length>4096){let b=bo(c.name,d,a),f=b.chunk(e,d);b.setCookies(f)}else{let b=bo(c.name,d,a);if(b.hasChunks()){let a=b.clean();b.setCookies(a)}a.setCookie(c.name,e,d)}}async function br(a){let b=bp(a,a.context.authCookies.accountData.name);if(b){let c=(0,as.n)(await (0,bj.symmetricDecodeJWT)(b,a.context.secret,"better-auth-account"));if(c)return c}return null}let bs=r.optional(r.object({disableCookieCache:s.coerce.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:s.coerce.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()})),bt=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;function bu(a){let b,c=bt.exec(a);if(!c||c[4]&&c[1])throw TypeError(`Invalid time string format: "${a}". Use formats like "7d", "30m", "1 hour", etc.`);let d=parseFloat(c[2]),e=c[3].toLowerCase();switch(e){case"years":case"year":case"yrs":case"yr":case"y":b=315576e5*d;break;case"months":case"month":case"mo":b=2592e6*d;break;case"weeks":case"week":case"w":b=6048e5*d;break;case"days":case"day":case"d":b=864e5*d;break;case"hours":case"hour":case"hrs":case"hr":case"h":b=36e5*d;break;case"minutes":case"minute":case"mins":case"min":case"m":b=6e4*d;break;case"seconds":case"second":case"secs":case"sec":case"s":b=1e3*d;break;default:throw TypeError(`Unknown time unit: "${e}"`)}return"-"===c[1]||"ago"===c[4]?-b:b}var bv=ac,bw=ac,as=ad,bx=a.i(500694);let by=new Map,bz={decode:(a,b="utf-8")=>(by.has(b)||by.set(b,new TextDecoder(b)),by.get(b).decode(a)),encode:new TextEncoder().encode};var bA=a.i(192702);let bB=(a="SHA-256",b="none")=>{let c={importKey:async(b,c)=>(0,D.getWebcryptoSubtle)().importKey("raw","string"==typeof b?new TextEncoder().encode(b):b,{name:"HMAC",hash:{name:a}},!1,[c]),sign:async(a,d)=>{"string"==typeof a&&(a=await c.importKey(a,"sign"));let e=await (0,D.getWebcryptoSubtle)().sign("HMAC",a,"string"==typeof d?new TextEncoder().encode(d):d);return"hex"===b?bA.hex.encode(e):"base64"===b||"base64url"===b||"base64urlnopad"===b?bx.base64Url.encode(e,{padding:"base64urlnopad"!==b}):e},verify:async(a,d,e)=>("string"==typeof a&&(a=await c.importKey(a,"verify")),"hex"===b&&(e=bA.hex.decode(e)),("base64"===b||"base64url"===b||"base64urlnopad"===b)&&(e=await bx.base64.decode(e)),(0,D.getWebcryptoSubtle)().verify("HMAC",a,"string"==typeof e?new TextEncoder().encode(e):e,"string"==typeof d?new TextEncoder().encode(d):d))};return c};function bC(a){let b=(a.advanced?.useSecureCookies!==void 0?a.advanced?.useSecureCookies:void 0!==a.baseURL?!!a.baseURL.startsWith("https://"):bw.f)?"__Secure-":"",c=!!a.advanced?.crossSubDomainCookies?.enabled,d=c?a.advanced?.crossSubDomainCookies?.domain||(a.baseURL?new URL(a.baseURL).hostname:void 0):void 0;if(c&&!d)throw new aY.BetterAuthError("baseURL is required when crossSubdomainCookies are enabled");return function(e,f={}){let g=a.advanced?.cookiePrefix||"better-auth",h=a.advanced?.cookies?.[e]?.name||`${g}.${e}`,i=a.advanced?.cookies?.[e]?.attributes;return{name:`${b}${h}`,attributes:{secure:!!b,sameSite:"lax",path:"/",httpOnly:!0,...c?{domain:d}:{},...a.advanced?.defaultCookieAttributes,...f,...i}}}}async function bD(a,b,c){if(a.context.options.session?.cookieCache?.enabled){let d,e=Object.entries(b.session).reduce((b,[c,d])=>{let e=a.context.options.session?.additionalFields?.[c];return e&&!1===e.returned||(b[c]=d),b},{}),f=az(a.context.options,b.user),g=a.context.options.session?.cookieCache?.version,h="1";if(g){if("string"==typeof g)h=g;else if("function"==typeof g){let a=g(b.session,b.user);h=a instanceof Promise?await a:a}}let i={session:e,user:f,updatedAt:Date.now(),version:h},j={...a.context.authCookies.sessionData.options,maxAge:c?void 0:a.context.authCookies.sessionData.options.maxAge},k=av(j.maxAge||60,"sec").getTime(),l=a.context.options.session?.cookieCache?.strategy||"compact";if((d="jwe"===l?await (0,bj.symmetricEncodeJWT)(i,a.context.secret,"better-auth-session",j.maxAge||300):"jwt"===l?await (0,bj.signJWT)(i,a.context.secret,j.maxAge||300):bx.base64Url.encode(JSON.stringify({session:i,expiresAt:k,signature:await bB("SHA-256","base64urlnopad").sign(a.context.secret,JSON.stringify({...i,expiresAt:k}))}),{padding:!1})).length>4093){let b=bn(a.context.authCookies.sessionData.name,j,a),c=b.chunk(d,j);b.setCookies(c)}else{let b=bn(a.context.authCookies.sessionData.name,j,a);if(b.hasChunks()){let a=b.clean();b.setCookies(a)}a.setCookie(a.context.authCookies.sessionData.name,d,j)}}}async function bE(a,b,c,d){let e=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret);c=void 0!==c?c:!!e;let f=a.context.authCookies.sessionToken.options,g=c?void 0:a.context.sessionConfig.expiresIn;await a.setSignedCookie(a.context.authCookies.sessionToken.name,b.session.token,a.context.secret,{...f,maxAge:g,...d}),c&&await a.setSignedCookie(a.context.authCookies.dontRememberToken.name,"true",a.context.secret,a.context.authCookies.dontRememberToken.options),await bD(a,b,c),a.context.setNewSession(b),a.context.options.secondaryStorage&&await a.context.secondaryStorage?.set(b.session.token,JSON.stringify({user:b.user,session:b.session}),Math.floor((new Date(b.session.expiresAt).getTime()-Date.now())/1e3))}function bF(a,b){if(a.setCookie(a.context.authCookies.sessionToken.name,"",{...a.context.authCookies.sessionToken.options,maxAge:0}),a.setCookie(a.context.authCookies.sessionData.name,"",{...a.context.authCookies.sessionData.options,maxAge:0}),a.context.options.account?.storeAccountCookie){a.setCookie(a.context.authCookies.accountData.name,"",{...a.context.authCookies.accountData.options,maxAge:0});let b=bo(a.context.authCookies.accountData.name,a.context.authCookies.accountData.options,a),c=b.clean();b.setCookies(c)}if("cookie"===a.context.oauthConfig.storeStateStrategy){let b=a.context.createAuthCookie("oauth_state");a.setCookie(b.name,"",{...b.attributes,maxAge:0})}let c=bn(a.context.authCookies.sessionData.name,a.context.authCookies.sessionData.options,a),d=c.clean();c.setCookies(d),b||a.setCookie(a.context.authCookies.dontRememberToken.name,"",{...a.context.authCookies.dontRememberToken.options,maxAge:0})}var bG=a.i(261703),bG=bG,as=ad;let bH=()=>am("/get-session",{method:"GET",operationId:"getSession",query:bs,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",nullable:!0,properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async a=>{try{let b=await a.getSignedCookie(a.context.authCookies.sessionToken.name,a.context.secret);if(!b)return null;let c=bp(a,a.context.authCookies.sessionData.name),d=null;if(c){let b=a.context.options.session?.cookieCache?.strategy||"compact";if("jwe"===b){let b=await (0,bj.symmetricDecodeJWT)(c,a.context.secret,"better-auth-session");if(b&&b.session&&b.user)d={session:{session:b.session,user:b.user,updatedAt:b.updatedAt,version:b.version},expiresAt:b.exp?1e3*b.exp:Date.now()};else{let b=a.context.authCookies.sessionData.name;return a.setCookie(b,"",{maxAge:0}),a.json(null)}}else if("jwt"===b){let b=await (0,bj.verifyJWT)(c,a.context.secret);if(b&&b.session&&b.user)d={session:{session:b.session,user:b.user,updatedAt:b.updatedAt,version:b.version},expiresAt:b.exp?1e3*b.exp:Date.now()};else{let b=a.context.authCookies.sessionData.name;return a.setCookie(b,"",{maxAge:0}),a.json(null)}}else{let b=(0,as.n)(bz.decode(bx.base64Url.decode(c)));if(b)if(await bB("SHA-256","base64urlnopad").verify(a.context.secret,JSON.stringify({...b.session,expiresAt:b.expiresAt}),b.signature))d=b;else{let b=a.context.authCookies.sessionData.name;return a.setCookie(b,"",{maxAge:0}),a.json(null)}}}let e=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret);if(d?.session&&a.context.options.session?.cookieCache?.enabled&&!a.query?.disableCookieCache){let b=d.session,c=a.context.options.session?.cookieCache?.version,e="1";if(c){if("string"==typeof c)e=c;else if("function"==typeof c){let a=c(b.session,b.user);e=a instanceof Promise?await a:a}}if((b.version||"1")!==e){let b=a.context.authCookies.sessionData.name;a.setCookie(b,"",{maxAge:0})}else{let c=new Date(b.session.expiresAt);if(d.expiresAt<Date.now()||c<new Date){let b=a.context.authCookies.sessionData.name;a.setCookie(b,"",{maxAge:0})}else{let c=a.context.sessionConfig.cookieRefreshCache;if(!1===c)return a.context.session=b,a.json({session:b.session,user:b.user});if(d.expiresAt-Date.now()<1e3*c.updateAge){let c=av(a.context.options.session?.cookieCache?.maxAge||300,"sec"),d={session:{...b.session,expiresAt:c},user:b.user,updatedAt:Date.now()};await bD(a,d,!1);let e=aB(a.context.options,{...d.session,expiresAt:new Date(d.session.expiresAt),createdAt:new Date(d.session.createdAt),updatedAt:new Date(d.session.updatedAt)}),f=az(a.context.options,{...d.user,createdAt:new Date(d.user.createdAt),updatedAt:new Date(d.user.updatedAt)});return a.context.session={session:e,user:f},a.json({session:e,user:f})}let e=aB(a.context.options,{...b.session,expiresAt:new Date(b.session.expiresAt),createdAt:new Date(b.session.createdAt),updatedAt:new Date(b.session.updatedAt)}),f=az(a.context.options,{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)});return a.context.session={session:e,user:f},a.json({session:e,user:f})}}}let f=await a.context.internalAdapter.findSession(b);if(a.context.session=f,!f||f.session.expiresAt<new Date)return bF(a),f&&await a.context.internalAdapter.deleteSession(f.session.token),a.json(null);if(e||a.query?.disableRefresh){let b=aB(a.context.options,f.session),c=az(a.context.options,f.user);return a.json({session:b,user:c})}let g=a.context.sessionConfig.expiresIn,h=a.context.sessionConfig.updateAge;if(f.session.expiresAt.valueOf()-1e3*g+1e3*h<=Date.now()&&(!a.query?.disableRefresh||!a.context.options.session?.disableSessionRefresh)){let b=await a.context.internalAdapter.updateSession(f.session.token,{expiresAt:av(a.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!b)return bF(a),a.json(null,{status:401});let c=(b.expiresAt.valueOf()-Date.now())/1e3;await bE(a,{session:b,user:f.user},!1,{maxAge:c});let d=aB(a.context.options,b),e=az(a.context.options,f.user);return a.json({session:d,user:e})}return await bD(a,f,!!e),a.json(f)}catch(b){throw a.context.logger.error("INTERNAL_SERVER_ERROR",b),new x("INTERNAL_SERVER_ERROR",{message:bG.n.FAILED_TO_GET_SESSION})}}),bI=async(a,b)=>{if(a.context.session)return a.context.session;let c=await bH()({...a,asResponse:!1,headers:a.headers,returnHeaders:!1,returnStatus:!1,query:{...b,...a.query}}).catch(a=>null);return a.context.session=c,c},bJ=ak(async a=>{let b=await bI(a);if(!b?.session)throw new x("UNAUTHORIZED");return{session:b}}),bK=ak(async a=>{let b=await bI(a,{disableCookieCache:!0});if(!b?.session)throw new x("UNAUTHORIZED");return{session:b}});ak(async a=>{let b=await bI(a);if(!b?.session&&(a.request||a.headers))throw new x("UNAUTHORIZED");return{session:b}});let bL=ak(async a=>{let b=await bI(a);if(!b?.session)throw new x("UNAUTHORIZED");if(0===a.context.sessionConfig.freshAge)return{session:b};let c=a.context.sessionConfig.freshAge,d=new Date(b.session.updatedAt||b.session.createdAt).getTime();if(!(Date.now()-d<1e3*c))throw new x("FORBIDDEN",{message:"Session is not fresh"});return{session:b}}),bM=am("/revoke-session",{method:"POST",body:r.object({token:r.string().meta({description:"The token to revoke"})}),use:[bK],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async a=>{let b=a.body.token;if((await a.context.internalAdapter.findSession(b))?.session.userId===a.context.session.user.id)try{await a.context.internalAdapter.deleteSession(b)}catch(b){throw a.context.logger.error(b&&"object"==typeof b&&"name"in b?b.name:"",b),new x("INTERNAL_SERVER_ERROR")}return a.json({status:!0})}),bN=am("/revoke-sessions",{method:"POST",use:[bK],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async a=>{try{await a.context.internalAdapter.deleteSessions(a.context.session.user.id)}catch(b){throw a.context.logger.error(b&&"object"==typeof b&&"name"in b?b.name:"",b),new x("INTERNAL_SERVER_ERROR")}return a.json({status:!0})}),bO=am("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[bK],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async a=>{let b=a.context.session;if(!b.user)throw new x("UNAUTHORIZED");let c=(await a.context.internalAdapter.listSessions(b.user.id)).filter(a=>a.expiresAt>new Date).filter(b=>b.token!==a.context.session.session.token);return await Promise.all(c.map(b=>a.context.internalAdapter.deleteSession(b.token))),a.json({status:!0})});function bP(a,b){return a&&b.options.account?.encryptOAuthTokens?(0,q.symmetricDecrypt)({key:b.secret,data:a}):a}function bQ(a,b){return b.options.account?.encryptOAuthTokens&&a?(0,q.symmetricEncrypt)({key:b.secret,data:a}):a}var bG=bG,bR=bG,bS=Object.defineProperty,bT=Object.defineProperties,bU=Object.getOwnPropertyDescriptors,bV=Object.getOwnPropertySymbols,bW=Object.prototype.hasOwnProperty,bX=Object.prototype.propertyIsEnumerable,bY=(a,b,c)=>b in a?bS(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,bZ=(a,b)=>{for(var c in b||(b={}))bW.call(b,c)&&bY(a,c,b[c]);if(bV)for(var c of bV(b))bX.call(b,c)&&bY(a,c,b[c]);return a},b$=(a,b)=>bT(a,bU(b)),b_=class extends Error{constructor(a,b,c){super(b||a.toString(),{cause:c}),this.status=a,this.statusText=b,this.error=c,Error.captureStackTrace(this,this.constructor)}},b0=async(a,b)=>{var c,d,e,f,g,h;let i=b||{},j={onRequest:[null==b?void 0:b.onRequest],onResponse:[null==b?void 0:b.onResponse],onSuccess:[null==b?void 0:b.onSuccess],onError:[null==b?void 0:b.onError],onRetry:[null==b?void 0:b.onRetry]};if(!b||!(null==b?void 0:b.plugins))return{url:a,options:i,hooks:j};for(let k of(null==b?void 0:b.plugins)||[]){if(k.init){let d=await (null==(c=k.init)?void 0:c.call(k,a.toString(),b));i=d.options||i,a=d.url}j.onRequest.push(null==(d=k.hooks)?void 0:d.onRequest),j.onResponse.push(null==(e=k.hooks)?void 0:e.onResponse),j.onSuccess.push(null==(f=k.hooks)?void 0:f.onSuccess),j.onError.push(null==(g=k.hooks)?void 0:g.onError),j.onRetry.push(null==(h=k.hooks)?void 0:h.onRetry)}return{url:a,options:i,hooks:j}},b1=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(){return this.options.delay}},b2=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(a){return Math.min(this.options.maxDelay,this.options.baseDelay*2**a)}},b3=async a=>{let b={},c=async a=>"function"==typeof a?await a():a;if(null==a?void 0:a.auth){if("Bearer"===a.auth.type){let d=await c(a.auth.token);if(!d)return b;b.authorization=`Bearer ${d}`}else if("Basic"===a.auth.type){let[d,e]=await Promise.all([c(a.auth.username),c(a.auth.password)]);if(!d||!e)return b;b.authorization=`Basic ${btoa(`${d}:${e}`)}`}else if("Custom"===a.auth.type){let[d,e]=await Promise.all([c(a.auth.prefix),c(a.auth.value)]);if(!e)return b;b.authorization=`${null!=d?d:""} ${e}`}}return b},b4=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function b5(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}function b6(a){try{return JSON.parse(a)}catch(b){return a}}async function b7(a){let b=new Headers(null==a?void 0:a.headers);for(let[c,d]of Object.entries(await b3(a)||{}))b.set(c,d);if(!b.has("content-type")){let c=b5(null==a?void 0:a.body)?"application/json":null;c&&b.set("content-type",c)}return b}var b8=class a extends Error{constructor(b,c){super(c||JSON.stringify(b,null,2)),this.issues=b,Object.setPrototypeOf(this,a.prototype)}};async function b9(a,b){let c=await a["~standard"].validate(b);if(c.issues)throw new b8(c.issues);return c.value}var ca=["get","post","put","patch","delete"],cb=async(a,b)=>{var c,d,e,f,g,h,i,j;let k,{hooks:l,url:m,options:n}=await b0(a,b),o=function(a){if(null==a?void 0:a.customFetchImpl)return a.customFetchImpl;if("u">typeof globalThis&&"function"==typeof globalThis.fetch)return globalThis.fetch;throw Error("No fetch implementation found")}(n),p=new AbortController,q=null!=(c=n.signal)?c:p.signal,r=function(a,b){let{baseURL:c,params:d,query:e}=b||{query:{},params:{},baseURL:""},f=a.startsWith("http")?a.split("/").slice(0,3).join("/"):c||"";if(a.startsWith("@")){let b=a.toString().split("@")[1].split("/")[0];ca.includes(b)&&(a=a.replace(`@${b}/`,"/"))}f.endsWith("/")||(f+="/");let[g,h]=a.replace(f,"").split("?"),i=new URLSearchParams(h);for(let[a,b]of Object.entries(e||{})){let c;if(null!=b){if("string"==typeof b)c=b;else if(Array.isArray(b)){for(let c of b)i.append(a,c);continue}else c=JSON.stringify(b);i.set(a,c)}}if(d)if(Array.isArray(d))for(let[a,b]of g.split("/").filter(a=>a.startsWith(":")).entries()){let c=d[a];g=g.replace(b,c)}else for(let[a,b]of Object.entries(d))g=g.replace(`:${a}`,String(b));(g=g.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(g=g.slice(1));let j=i.toString();return(j=j.length>0?`?${j}`.replace(/\+/g,"%20"):"",f.startsWith("http"))?new URL(`${g}${j}`,f):`${f}${g}${j}`}(m,n),s=function(a){if(!(null==a?void 0:a.body))return null;let b=new Headers(null==a?void 0:a.headers);if(b5(a.body)&&!b.has("content-type")){for(let[b,c]of Object.entries(null==a?void 0:a.body))c instanceof Date&&(a.body[b]=c.toISOString());return JSON.stringify(a.body)}return b.has("content-type")&&"application/x-www-form-urlencoded"===b.get("content-type")&&b5(a.body)?new URLSearchParams(a.body).toString():a.body}(n),t=await b7(n),u=function(a,b){var c;if(null==b?void 0:b.method)return b.method.toUpperCase();if(a.startsWith("@")){let d=null==(c=a.split("@")[1])?void 0:c.split("/")[0];return ca.includes(d)?d.toUpperCase():(null==b?void 0:b.body)?"POST":"GET"}return(null==b?void 0:b.body)?"POST":"GET"}(m,n),v=b$(bZ({},n),{url:r,headers:t,body:s,method:u,signal:q});for(let a of l.onRequest)if(a){let b=await a(v);"object"==typeof b&&null!==b&&(v=b)}("pipeTo"in v&&"function"==typeof v.pipeTo||"function"==typeof(null==(d=null==b?void 0:b.body)?void 0:d.pipe))&&!("duplex"in v)&&(v.duplex="half");let{clearTimeout:w}=(!(null==n?void 0:n.signal)&&(null==n?void 0:n.timeout)&&(k=setTimeout(()=>null==p?void 0:p.abort(),null==n?void 0:n.timeout)),{abortTimeout:k,clearTimeout:()=>{k&&clearTimeout(k)}}),x=await o(v.url,v);w();let y={response:x,request:v};for(let a of l.onResponse)if(a){let c=await a(b$(bZ({},y),{response:(null==(e=null==b?void 0:b.hookOptions)?void 0:e.cloneResponse)?x.clone():x}));c instanceof Response?x=c:"object"==typeof c&&null!==c&&(x=c.response)}if(x.ok){if("HEAD"===v.method)return{data:"",error:null};let a=function(a){let b=a.headers.get("content-type"),c=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!b)return"json";let d=b.split(";").shift()||"";return b4.test(d)?"json":c.has(d)||d.startsWith("text/")?"text":"blob"}(x),c={data:null,response:x,request:v};if("json"===a||"text"===a){let a=await x.text(),b=null!=(f=v.jsonParser)?f:b6;c.data=await b(a)}else c.data=await x[a]();for(let a of((null==v?void 0:v.output)&&v.output&&!v.disableValidation&&(c.data=await b9(v.output,c.data)),l.onSuccess))a&&await a(b$(bZ({},c),{response:(null==(g=null==b?void 0:b.hookOptions)?void 0:g.cloneResponse)?x.clone():x}));return(null==b?void 0:b.throw)?c.data:{data:c.data,error:null}}let z=null!=(h=null==b?void 0:b.jsonParser)?h:b6,A=await x.text(),B=function(a){try{return JSON.parse(a),!0}catch(a){return!1}}(A),C=B?await z(A):null,D={response:x,responseText:A,request:v,error:b$(bZ({},C),{status:x.status,statusText:x.statusText})};for(let a of l.onError)a&&await a(b$(bZ({},D),{response:(null==(i=null==b?void 0:b.hookOptions)?void 0:i.cloneResponse)?x.clone():x}));if(null==b?void 0:b.retry){let c=function(a){if("number"==typeof a)return new b1({type:"linear",attempts:a,delay:1e3});switch(a.type){case"linear":return new b1(a);case"exponential":return new b2(a);default:throw Error("Invalid retry strategy")}}(b.retry),d=null!=(j=b.retryAttempt)?j:0;if(await c.shouldAttemptRetry(d,x)){for(let a of l.onRetry)a&&await a(y);let e=c.getDelay(d);return await new Promise(a=>setTimeout(a,e)),await cb(a,b$(bZ({},b),{retryAttempt:d+1}))}}if(null==b?void 0:b.throw)throw new b_(x.status,x.statusText,B?C:A);return{data:null,error:b$(bZ({},C),{status:x.status,statusText:x.statusText})}},cc=a.i(509634),cd=a.i(289822),ce=a.i(972328);a.i(367191);var cf=a.i(83607),cg=a.i(513730);function ch(a){return(0,cg.isObject)(a)}class ci{#p;#q=new WeakMap;constructor(a){if(!function(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(ch)}(a))throw new ce.JWKSInvalid("JSON Web Key Set malformed");this.#p=structuredClone(a)}jwks(){return this.#p}async getKey(a,b){let{alg:c,kid:d}={...a,...b?.header},e=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new ce.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(c),f=this.#p.keys.filter(a=>{let b=e===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&("string"==typeof a.alg||"AKP"===e)&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv;break;case"Ed25519":case"EdDSA":b="Ed25519"===a.crv}return b}),{0:g,length:h}=f;if(0===h)throw new ce.JWKSNoMatchingKey;if(1!==h){let a=new ce.JWKSMultipleMatchingKeys,b=this.#q;throw a[Symbol.asyncIterator]=async function*(){for(let a of f)try{yield await cj(b,a,c)}catch{}},a}return cj(this.#q,g,c)}}async function cj(a,b,c){let d=a.get(b)||a.set(b,{}).get(b);if(void 0===d[c]){let a=await (0,cf.importJWK)({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new ce.JWKSInvalid("JSON Web Key Set members must be public keys");d[c]=a}return d[c]}function ck(a){let b=new ci(a),c=async(a,c)=>b.getKey(a,c);return Object.defineProperties(c,{jwks:{value:()=>structuredClone(b.jwks()),enumerable:!1,configurable:!1,writable:!1}}),c}function cl(a){let b;if("string"==typeof a){let c=a.split(".");(3===c.length||5===c.length)&&([b]=c)}else if("object"==typeof a&&a)if("protected"in a)b=a.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof b||!b)throw Error();let a=JSON.parse(cd.decoder.decode((0,cc.decode)(b)));if(!(0,cg.isObject)(a))throw Error();return a}catch{throw TypeError("Invalid Token or Protected Header formatting")}}var cm=a.i(709633);function cn(a){let b=a=>new Date(new Date().getTime()+1e3*a);return{tokenType:a.token_type,accessToken:a.access_token,refreshToken:a.refresh_token,accessTokenExpiresAt:a.expires_in?b(a.expires_in):void 0,refreshTokenExpiresAt:a.refresh_token_expires_in?b(a.refresh_token_expires_in):void 0,scopes:a?.scope?"string"==typeof a.scope?a.scope.split(" "):a.scope:[],idToken:a.id_token,raw:a}}async function co(a){let b=new TextEncoder().encode(a),c=await crypto.subtle.digest("SHA-256",b);return bx.base64Url.encode(new Uint8Array(c),{padding:!1})}async function cp({id:a,options:b,authorizationEndpoint:c,state:d,codeVerifier:e,scopes:f,claims:g,redirectURI:h,duration:i,prompt:j,accessType:k,responseType:l,display:m,loginHint:n,hd:o,responseMode:p,additionalParams:q,scopeJoiner:r}){let s=new URL(c);s.searchParams.set("response_type",l||"code");let t=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;if(s.searchParams.set("client_id",t),s.searchParams.set("state",d),f&&s.searchParams.set("scope",f.join(r||" ")),s.searchParams.set("redirect_uri",b.redirectURI||h),i&&s.searchParams.set("duration",i),m&&s.searchParams.set("display",m),n&&s.searchParams.set("login_hint",n),j&&s.searchParams.set("prompt",j),o&&s.searchParams.set("hd",o),k&&s.searchParams.set("access_type",k),p&&s.searchParams.set("response_mode",p),e){let a=await co(e);s.searchParams.set("code_challenge_method","S256"),s.searchParams.set("code_challenge",a)}if(g){let a=g.reduce((a,b)=>(a[b]=null,a),{});s.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...a}}))}return q&&Object.entries(q).forEach(([a,b])=>{s.searchParams.set(a,b)}),s}async function cq({refreshToken:a,options:b,tokenEndpoint:c,authentication:d,extraParams:e}){let{body:f,headers:g}=function({refreshToken:a,options:b,authentication:c,extraParams:d,resource:e}){let f=new URLSearchParams,g={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(f.set("grant_type","refresh_token"),f.set("refresh_token",a),"basic"===c){let a=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;a?g.authorization="Basic "+bx.base64.encode(`${a}:${b.clientSecret??""}`):g.authorization="Basic "+bx.base64.encode(`:${b.clientSecret??""}`)}else{let a=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;f.set("client_id",a),b.clientSecret&&f.set("client_secret",b.clientSecret)}if(e)if("string"==typeof e)f.append("resource",e);else for(let a of e)f.append("resource",a);if(d)for(let[a,b]of Object.entries(d))f.set(a,b);return{body:f,headers:g}}({refreshToken:a,options:b,authentication:d,extraParams:e}),{data:h,error:i}=await cb(c,{method:"POST",body:f,headers:g});if(i)throw i;let j={accessToken:h.access_token,refreshToken:h.refresh_token,tokenType:h.token_type,scopes:h.scope?.split(" "),idToken:h.id_token};return h.expires_in&&(j.accessTokenExpiresAt=new Date(new Date().getTime()+1e3*h.expires_in)),j}async function cr({code:a,codeVerifier:b,redirectURI:c,options:d,tokenEndpoint:e,authentication:f,deviceId:g,headers:h,additionalParams:i={},resource:j}){let{body:k,headers:l}=function({code:a,codeVerifier:b,redirectURI:c,options:d,authentication:e,deviceId:f,headers:g,additionalParams:h={},resource:i}){let j=new URLSearchParams,k={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...g};if(j.set("grant_type","authorization_code"),j.set("code",a),b&&j.set("code_verifier",b),d.clientKey&&j.set("client_key",d.clientKey),f&&j.set("device_id",f),j.set("redirect_uri",d.redirectURI||c),i)if("string"==typeof i)j.append("resource",i);else for(let a of i)j.append("resource",a);if("basic"===e){let a=Array.isArray(d.clientId)?d.clientId[0]:d.clientId;k.authorization=`Basic ${bx.base64.encode(`${a}:${d.clientSecret??""}`)}`}else{let a=Array.isArray(d.clientId)?d.clientId[0]:d.clientId;j.set("client_id",a),d.clientSecret&&j.set("client_secret",d.clientSecret)}for(let[a,b]of Object.entries(h))j.has(a)||j.append(a,b);return{body:j,headers:k}}({code:a,codeVerifier:b,redirectURI:c,options:d,authentication:f,deviceId:g,headers:h,additionalParams:i,resource:j}),{data:m,error:n}=await cb(e,{method:"POST",body:k,headers:l});if(n)throw n;return cn(m)}("u"<typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(b="jose/v6.1.3");let cs=Symbol();async function ct(a,b,c,d=fetch){let e=await d(a,{method:"GET",signal:c,redirect:"manual",headers:b}).catch(a=>{if("TimeoutError"===a.name)throw new ce.JWKSTimeout;throw a});if(200!==e.status)throw new ce.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await e.json()}catch{throw new ce.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}}let cu=Symbol();class cv{#r;#s;#t;#u;#v;#w;#x;#y;#z;#A;constructor(a,c){if(!(a instanceof URL))throw TypeError("url must be an instance of URL");this.#r=new URL(a.href),this.#s="number"==typeof c?.timeoutDuration?c?.timeoutDuration:5e3,this.#t="number"==typeof c?.cooldownDuration?c?.cooldownDuration:3e4,this.#u="number"==typeof c?.cacheMaxAge?c?.cacheMaxAge:6e5,this.#x=new Headers(c?.headers),b&&!this.#x.has("User-Agent")&&this.#x.set("User-Agent",b),this.#x.has("accept")||(this.#x.set("accept","application/json"),this.#x.append("accept","application/jwk-set+json")),this.#y=c?.[cs],c?.[cu]!==void 0&&(this.#A=c?.[cu],function(a,b){return!("object"!=typeof a||null===a||!("uat"in a)||"number"!=typeof a.uat||Date.now()-a.uat>=b)&&"jwks"in a&&!!(0,cg.isObject)(a.jwks)&&!!Array.isArray(a.jwks.keys)&&!!Array.prototype.every.call(a.jwks.keys,cg.isObject)}(c?.[cu],this.#u)&&(this.#v=this.#A.uat,this.#z=ck(this.#A.jwks)))}pendingFetch(){return!!this.#w}coolingDown(){return"number"==typeof this.#v&&Date.now()<this.#v+this.#t}fresh(){return"number"==typeof this.#v&&Date.now()<this.#v+this.#u}jwks(){return this.#z?.jwks()}async getKey(a,b){this.#z&&this.fresh()||await this.reload();try{return await this.#z(a,b)}catch(c){if(c instanceof ce.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),this.#z(a,b);throw c}}async reload(){this.#w&&("u">typeof WebSocketPair||"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"u">typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this.#w=void 0),this.#w||=ct(this.#r.href,this.#x,AbortSignal.timeout(this.#s),this.#y).then(a=>{this.#z=ck(a),this.#A&&(this.#A.uat=Date.now(),this.#A.jwks=a),this.#v=Date.now(),this.#w=void 0}).catch(a=>{throw this.#w=void 0,a}),await this.#w}}function cw(a){let b,c;if("string"!=typeof a)throw new ce.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new ce.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new ce.JWTInvalid("Invalid JWT");if(!d)throw new ce.JWTInvalid("JWTs must contain a payload");try{b=(0,cc.decode)(d)}catch{throw new ce.JWTInvalid("Failed to base64url decode the payload")}try{c=JSON.parse(cd.decoder.decode(b))}catch{throw new ce.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,cg.isObject)(c))throw new ce.JWTInvalid("Invalid JWT Claims Set");return c}let cx=async a=>{let{data:b}=await cb("https://appleid.apple.com/auth/keys");if(!b?.keys)throw new x("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await (0,cf.importJWK)(c,c.alg)},cy=async(a,b,c)=>{let d=`https://cognito-idp.${b}.amazonaws.com/${c}/.well-known/jwks.json`;try{let{data:b}=await cb(d);if(!b?.keys)throw new x("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await (0,cf.importJWK)(c,c.alg)}catch(a){throw ac.i.error("Failed to fetch Cognito public key:",a),a}},cz=(a="")=>a.split("://").map(a=>a.replace(/\/{2,}/g,"/")).join("://"),cA=async a=>{let{data:b}=await cb("https://www.googleapis.com/oauth2/v3/certs");if(!b?.keys)throw new x("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await (0,cf.importJWK)(c,c.alg)},cB={apple:a=>({id:"apple",name:"Apple",async createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["email","name"];return a.scope&&e.push(...a.scope),c&&e.push(...c),await cp({id:"apple",options:a,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:e,state:b,redirectURI:d,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://appleid.apple.com/auth/token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let{kid:d,alg:e}=cl(b);if(!d||!e)return!1;let{payload:f}=await (0,cm.jwtVerify)(b,await cx(d),{algorithms:[e],issuer:"https://appleid.apple.com",audience:a.audience&&a.audience.length?a.audience:a.appBundleIdentifier?a.appBundleIdentifier:a.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(a=>{void 0!==f[a]&&(f[a]=!!f[a])}),(!c||f.nonce===c)&&!!f},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=cw(b.idToken);if(!c)return null;let d=b.user?`${b.user.name?.firstName} ${b.user.name?.lastName}`:c.name||c.email,e="boolean"==typeof c.email_verified?c.email_verified:"true"===c.email_verified,f={...c,name:d},g=await a.mapProfileToUser?.(f);return{user:{id:c.sub,name:f.name,emailVerified:e,email:c.email,...g},data:f}},options:a}),atlassian:a=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw ac.i.error("Client Id and Secret are required for Atlassian"),new bR.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new bR.t("codeVerifier is required for Atlassian");let f=a.disableDefaultScope?[]:["read:jira-user","offline_access"];return a.scope&&f.push(...a.scope),c&&f.push(...c),cp({id:"atlassian",options:a,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e,additionalParams:{audience:"api.atlassian.com"},prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return null;try{let{data:c}=await cb("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.account_id,name:c.name,email:c.email,image:c.picture,emailVerified:!1,...d},data:c}}catch(a){return ac.i.error("Failed to fetch user info from Figma:",a),null}},options:a}),cognito:a=>{if(!a.domain||!a.region||!a.userPoolId)throw ac.i.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new bR.t("DOMAIN_AND_REGION_REQUIRED");let b=a.domain.replace(/^https?:\/\//,""),c=`https://${b}/oauth2/authorize`,d=`https://${b}/oauth2/token`,e=`https://${b}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f}){if(!a.clientId)throw ac.i.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new bR.t("CLIENT_ID_AND_SECRET_REQUIRED");if(a.requireClientSecret&&!a.clientSecret)throw ac.i.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new bR.t("CLIENT_SECRET_REQUIRED");let g=a.disableDefaultScope?[]:["openid","profile","email"];a.scope&&g.push(...a.scope),d&&g.push(...d);let h=await cp({id:"cognito",options:{...a},authorizationEndpoint:c,scopes:g,state:b,codeVerifier:e,redirectURI:f,prompt:a.prompt}),i=h.searchParams.get("scope");if(i){h.searchParams.delete("scope");let a=encodeURIComponent(i),b=h.toString(),c=b.includes("?")?"&":"?";return new URL(`${b}${c}scope=${a}`)}return h},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>cr({code:b,codeVerifier:c,redirectURI:e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:d}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);try{let{kid:d,alg:e}=cl(b);if(!d||!e)return!1;let f=await cy(d,a.region,a.userPoolId),g=`https://cognito-idp.${a.region}.amazonaws.com/${a.userPoolId}`,{payload:h}=await (0,cm.jwtVerify)(b,f,{algorithms:[e],issuer:g,audience:a.clientId,maxTokenAge:"1h"});if(c&&h.nonce!==c)return!1;return!0}catch(a){return ac.i.error("Failed to verify ID token:",a),!1}},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(b.idToken)try{let c=cw(b.idToken);if(!c)return null;let d=c.name||c.given_name||c.username||c.email,e={...c,name:d},f=await a.mapProfileToUser?.(e);return{user:{id:c.sub,name:e.name,email:c.email,image:c.picture,emailVerified:c.email_verified,...f},data:e}}catch(a){ac.i.error("Failed to decode ID token:",a)}if(b.accessToken)try{let{data:c}=await cb(e,{headers:{Authorization:`Bearer ${b.accessToken}`}});if(c){let b=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.given_name||c.username,email:c.email,image:c.picture,emailVerified:c.email_verified,...b},data:c}}}catch(a){ac.i.error("Failed to fetch user info from Cognito:",a)}return null},options:a}},discord:a=>({id:"discord",name:"Discord",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["identify","email"];c&&e.push(...c),a.scope&&e.push(...a.scope);let f=e.includes("bot")&&void 0!==a.permissions?`&permissions=${a.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${e.join("+")}&response_type=code&client_id=${a.clientId}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}&prompt=${a.prompt||"none"}${f}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>cr({code:b,redirectURI:c,options:a,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;if(null===c.avatar)c.image_url=`https://cdn.discordapp.com/embed/avatars/${"0"===c.discriminator?Number(BigInt(c.id)>>BigInt(22))%6:parseInt(c.discriminator)%5}.png`;else{let a=c.avatar.startsWith("a_")?"gif":"png";c.image_url=`https://cdn.discordapp.com/avatars/${c.id}/${c.avatar}.${a}`}let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.global_name||c.username||"",email:c.email,emailVerified:c.verified,image:c.image_url,...e},data:c}},options:a}),facebook:a=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:b,scopes:c,redirectURI:d,loginHint:e}){let f=a.disableDefaultScope?[]:["email","public_profile"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await cp({id:"facebook",options:a,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:f,state:b,redirectURI:d,loginHint:e,additionalParams:a.configId?{config_id:a.configId}:{}})},validateAuthorizationCode:async({code:b,redirectURI:c})=>cr({code:b,redirectURI:c,options:a,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);if(3===b.split(".").length)try{var d;let e,f,{payload:g}=await (0,cm.jwtVerify)(b,(d=new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/"),e=new cv(d,void 0),f=async(a,b)=>e.getKey(a,b),Object.defineProperties(f,{coolingDown:{get:()=>e.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>e.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>e.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>e.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>e.jwks(),enumerable:!0,configurable:!1,writable:!1}}),f),{algorithms:["RS256"],audience:a.clientId,issuer:"https://www.facebook.com"});if(c&&g.nonce!==c)return!1;return!!g}catch{return!1}return!0},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(b.idToken&&3===b.idToken.split(".").length){let c=cw(b.idToken),d={id:c.sub,name:c.name,email:c.email,picture:{data:{url:c.picture,height:100,width:100,is_silhouette:!1}}},e=await a.mapProfileToUser?.({...d,email_verified:!1});return{user:{...d,emailVerified:!1,...e},data:c}}let{data:c,error:d}=await cb("https://graph.facebook.com/me?fields="+["id","name","email","picture",...a?.fields||[]].join(","),{auth:{type:"Bearer",token:b.accessToken}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name,email:c.email,image:c.picture.data.url,emailVerified:c.email_verified,...e},data:c}},options:a}),figma:a=>({id:"figma",name:"Figma",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw ac.i.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new bR.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new bR.t("codeVerifier is required for Figma");let f=a.disableDefaultScope?[]:["file_read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await cp({id:"figma",options:a,authorizationEndpoint:"https://www.figma.com/oauth",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://www.figma.com/api/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);try{let{data:c}=await cb("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return ac.i.error("Failed to fetch user from Figma"),null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.handle,email:c.email,image:c.img_url,emailVerified:!1,...d},data:c}}catch(a){return ac.i.error("Failed to fetch user info from Figma:",a),null}},options:a}),github:a=>({id:"github",name:"GitHub",createAuthorizationURL({state:b,scopes:c,loginHint:d,codeVerifier:e,redirectURI:f}){let g=a.disableDefaultScope?[]:["read:user","user:email"];return a.scope&&g.push(...a.scope),c&&g.push(...c),cp({id:"github",options:a,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:g,state:b,codeVerifier:e,redirectURI:f,loginHint:d,prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://github.com/login/oauth/access_token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${b.accessToken}`}});if(d)return null;let{data:e}=await cb("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${b.accessToken}`,"User-Agent":"better-auth"}});!c.email&&e&&(c.email=(e.find(a=>a.primary)??e[0])?.email);let f=e?.find(a=>a.email===c.email)?.verified??!1,g=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name||c.login,email:c.email,image:c.avatar_url,emailVerified:f,...g},data:c}},options:a}),microsoft:a=>{let b=a.tenantId||"common",c=a.authority||"https://login.microsoftonline.com",d=`${c}/${b}/oauth2/v2.0/authorize`,e=`${c}/${b}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(b){let c=a.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return a.scope&&c.push(...a.scope),b.scopes&&c.push(...b.scopes),cp({id:"microsoft",options:a,authorizationEndpoint:d,state:b.state,codeVerifier:b.codeVerifier,scopes:c,redirectURI:b.redirectURI,prompt:a.prompt,loginHint:b.loginHint})},validateAuthorizationCode:({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:e}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=cw(b.idToken),d=a.profilePhotoSize||48;await cb(`https://graph.microsoft.com/v1.0/me/photos/${d}x${d}/$value`,{headers:{Authorization:`Bearer ${b.accessToken}`},async onResponse(b){if(!a.disableProfilePhoto&&b.response.ok)try{let a=await b.response.clone().arrayBuffer();c.picture=`data:image/jpeg;base64, ${bx.base64.encode(a)}`}catch(a){ac.i.error(a&&"object"==typeof a&&"name"in a?a.name:"",a)}}});let e=await a.mapProfileToUser?.(c),f=void 0!==c.email_verified?c.email_verified:!!(c.email&&(c.verified_primary_email?.includes(c.email)||c.verified_secondary_email?.includes(c.email)));return{user:{id:c.sub,name:c.name,email:c.email,image:c.picture,emailVerified:f,...e},data:c}},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>{let c=a.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return a.scope&&c.push(...a.scope),cq({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},extraParams:{scope:c.join(" ")},tokenEndpoint:e})},options:a}},google:a=>({id:"google",name:"Google",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e,loginHint:f,display:g}){if(!a.clientId||!a.clientSecret)throw ac.i.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new bR.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new bR.t("codeVerifier is required for Google");let h=a.disableDefaultScope?[]:["email","profile","openid"];return a.scope&&h.push(...a.scope),c&&h.push(...c),await cp({id:"google",options:a,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:h,state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt,accessType:a.accessType,display:g||a.display,loginHint:f,hd:a.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let{kid:d,alg:e}=cl(b);if(!d||!e)return!1;let{payload:f}=await (0,cm.jwtVerify)(b,await cA(d),{algorithms:[e],issuer:["https://accounts.google.com","accounts.google.com"],audience:a.clientId,maxTokenAge:"1h"});return!c||f.nonce===c},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=cw(b.idToken),d=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name,email:c.email,image:c.picture,emailVerified:c.email_verified,...d},data:c}},options:a}),huggingface:a=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),cp({id:"huggingface",options:a,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.preferred_username,email:c.email,image:c.picture,emailVerified:c.email_verified??!1,...e},data:c}},options:a}),slack:a=>({id:"slack",name:"Slack",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["openid","profile","email"];c&&e.push(...c),a.scope&&e.push(...a.scope);let f=new URL("https://slack.com/openid/connect/authorize");return f.searchParams.set("scope",e.join(" ")),f.searchParams.set("response_type","code"),f.searchParams.set("client_id",a.clientId),f.searchParams.set("redirect_uri",a.redirectURI||d),f.searchParams.set("state",b),f},validateAuthorizationCode:async({code:b,redirectURI:c})=>cr({code:b,redirectURI:c,options:a,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c["https://slack.com/user_id"],name:c.name||"",email:c.email,emailVerified:c.email_verified,image:c.picture||c["https://slack.com/user_image_512"],...e},data:c}},options:a}),spotify:a=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["user-read-email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),cp({id:"spotify",options:a,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.display_name,email:c.email,image:c.images[0]?.url,emailVerified:!1,...e},data:c}},options:a}),twitch:a=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["user:read:email","openid"];return a.scope&&e.push(...a.scope),c&&e.push(...c),cp({id:"twitch",redirectURI:d,options:a,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:e,state:b,claims:a.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:b,redirectURI:c})=>cr({code:b,redirectURI:c,options:a,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let c=b.idToken;if(!c)return ac.i.error("No idToken found in token"),null;let d=cw(c),e=await a.mapProfileToUser?.(d);return{user:{id:d.sub,name:d.preferred_username,email:d.email,image:d.picture,emailVerified:d.email_verified,...e},data:d}},options:a}),twitter:a=>({id:"twitter",name:"Twitter",createAuthorizationURL(b){let c=a.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return a.scope&&c.push(...a.scope),b.scopes&&c.push(...b.scopes),cp({id:"twitter",options:a,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:c,state:b.state,codeVerifier:b.codeVerifier,redirectURI:b.redirectURI})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,authentication:"basic",redirectURI:d,options:a,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let{data:e,error:f}=await cb("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}}),g=!1;!f&&e?.data?.confirmed_email&&(c.data.email=e.data.confirmed_email,g=!0);let h=await a.mapProfileToUser?.(c);return{user:{id:c.data.id,name:c.data.name,email:c.data.email||c.data.username||null,image:c.data.profile_image_url,emailVerified:g,...h},data:c}},options:a}),dropbox:a=>({id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:b,scopes:c,codeVerifier:d,redirectURI:e})=>{let f=a.disableDefaultScope?[]:["account_info.read"];a.scope&&f.push(...a.scope),c&&f.push(...c);let g={};return a.accessType&&(g.token_access_type=a.accessType),await cp({id:"dropbox",options:a,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:f,state:b,redirectURI:e,codeVerifier:d,additionalParams:g})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>await cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.account_id,name:c.name?.display_name,email:c.email,emailVerified:c.email_verified||!1,image:c.profile_photo_url,...e},data:c}},options:a}),kick:a=>({id:"kick",name:"Kick",createAuthorizationURL({state:b,scopes:c,redirectURI:d,codeVerifier:e}){let f=a.disableDefaultScope?[]:["user:read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),cp({id:"kick",redirectURI:d,options:a,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:f,codeVerifier:e,state:b})},validateAuthorizationCode:async({code:b,redirectURI:c,codeVerifier:d})=>cr({code:b,redirectURI:c,options:a,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:"https://id.kick.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=c.data[0],f=await a.mapProfileToUser?.(e);return{user:{id:e.user_id,name:e.name,email:e.email,image:e.profile_picture,emailVerified:!1,...f},data:e}},options:a}),linear:a=>{let b="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),cp({id:"linear",options:a,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d})},validateAuthorizationCode:async({code:c,redirectURI:d})=>cr({code:c,redirectURI:d,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>cq({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(d||!c?.data?.viewer)return null;let e=c.data.viewer,f=await a.mapProfileToUser?.(e);return{user:{id:c.data.viewer.id,name:c.data.viewer.name,email:c.data.viewer.email,image:c.data.viewer.avatarUrl,emailVerified:!1,...f},data:e}},options:a}},linkedin:a=>{let b="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:b,scopes:c,redirectURI:d,loginHint:e})=>{let f=a.disableDefaultScope?[]:["profile","email","openid"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await cp({id:"linkedin",options:a,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:f,state:b,loginHint:e,redirectURI:d})},validateAuthorizationCode:async({code:c,redirectURI:d})=>await cr({code:c,redirectURI:d,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>cq({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name,email:c.email,emailVerified:c.email_verified||!1,image:c.picture,...e},data:c}},options:a}},gitlab:a=>{let b,{authorizationEndpoint:c,tokenEndpoint:d,userinfoEndpoint:e}=(b=a.issuer||"https://gitlab.com",{authorizationEndpoint:cz(`${b}/oauth/authorize`),tokenEndpoint:cz(`${b}/oauth/token`),userinfoEndpoint:cz(`${b}/api/v4/user`)}),f="gitlab";return{id:f,name:"Gitlab",createAuthorizationURL:async({state:b,scopes:d,codeVerifier:e,loginHint:g,redirectURI:h})=>{let i=a.disableDefaultScope?[]:["read_user"];return a.scope&&i.push(...a.scope),d&&i.push(...d),await cp({id:f,options:a,authorizationEndpoint:c,scopes:i,state:b,redirectURI:h,codeVerifier:e,loginHint:g})},validateAuthorizationCode:async({code:b,redirectURI:c,codeVerifier:e})=>cr({code:b,redirectURI:c,options:a,codeVerifier:e,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb(e,{headers:{authorization:`Bearer ${b.accessToken}`}});if(d||"active"!==c.state||c.locked)return null;let f=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name??c.username,email:c.email,image:c.avatar_url,emailVerified:c.email_verified??!1,...f},data:c}},options:a}},tiktok:a=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["user.info.profile"];return a.scope&&e.push(...a.scope),c&&e.push(...c),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${e.join(",")}&response_type=code&client_key=${a.clientKey}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>cr({code:b,redirectURI:a.redirectURI||c,options:{clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientSecret:a.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:a.clientKey}}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://open.tiktokapis.com/v2/user/info/?fields=open_id,avatar_large_url,display_name,username",{headers:{authorization:`Bearer ${b.accessToken}`}});return d?null:{user:{email:c.data.user.email||c.data.user.username,id:c.data.user.open_id,name:c.data.user.display_name||c.data.user.username,image:c.data.user.avatar_large_url,emailVerified:!1},data:c}},options:a}),reddit:a=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["identity"];return a.scope&&e.push(...a.scope),c&&e.push(...c),cp({id:"reddit",options:a,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:e,state:b,redirectURI:d,duration:a.duration})},validateAuthorizationCode:async({code:b,redirectURI:c})=>{let d=new URLSearchParams({grant_type:"authorization_code",code:b,redirect_uri:a.redirectURI||c}),{data:e,error:f}=await cb("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${bx.base64.encode(`${a.clientId}:${a.clientSecret}`)}`},body:d.toString()});if(f)throw f;return cn(e)},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${b.accessToken}`,"User-Agent":"better-auth"}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name,email:c.oauth_client_id,emailVerified:c.has_verified_email,image:c.icon_img?.split("?")[0],...e},data:c}},options:a}),roblox:a=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["openid","profile"];return a.scope&&e.push(...a.scope),c&&e.push(...c),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${e.join("+")}&response_type=code&client_id=${a.clientId}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}&prompt=${a.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>cr({code:b,redirectURI:a.redirectURI||c,options:a,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.nickname||c.preferred_username||"",image:c.picture,email:c.preferred_username||null,emailVerified:!1,...e},data:{...c}}},options:a}),salesforce:a=>{let b=(a.environment??"production")==="sandbox",c=a.loginUrl?`https://${a.loginUrl}/services/oauth2/authorize`:b?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",d=a.loginUrl?`https://${a.loginUrl}/services/oauth2/token`:b?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",e=a.loginUrl?`https://${a.loginUrl}/services/oauth2/userinfo`:b?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f}){if(!a.clientId||!a.clientSecret)throw ac.i.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new bR.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!e)throw new bR.t("codeVerifier is required for Salesforce");let g=a.disableDefaultScope?[]:["openid","email","profile"];return a.scope&&g.push(...a.scope),d&&g.push(...d),cp({id:"salesforce",options:a,authorizationEndpoint:c,scopes:g,state:b,codeVerifier:e,redirectURI:a.redirectURI||f})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>cr({code:b,codeVerifier:c,redirectURI:a.redirectURI||e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);try{let{data:c}=await cb(e,{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return ac.i.error("Failed to fetch user info from Salesforce"),null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.user_id,name:c.name,email:c.email,image:c.photos?.picture||c.photos?.thumbnail,emailVerified:c.email_verified??!1,...d},data:c}}catch(a){return ac.i.error("Failed to fetch user info from Salesforce:",a),null}},options:a}},vk:a=>({id:"vk",name:"VK",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["email","phone"];return a.scope&&f.push(...a.scope),c&&f.push(...c),cp({id:"vk",options:a,authorizationEndpoint:"https://id.vk.com/authorize",scopes:f,state:b,redirectURI:e,codeVerifier:d})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d,deviceId:e})=>cr({code:b,codeVerifier:c,redirectURI:a.redirectURI||d,options:a,deviceId:e,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return null;let c=new URLSearchParams({access_token:b.accessToken,client_id:a.clientId}).toString(),{data:d,error:e}=await cb("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(e)return null;let f=await a.mapProfileToUser?.(d);return d.user.email||f?.email?{user:{id:d.user.user_id,first_name:d.user.first_name,last_name:d.user.last_name,email:d.user.email,image:d.user.avatar,emailVerified:!1,birthday:d.user.birthday,sex:d.user.sex,name:`${d.user.first_name} ${d.user.last_name}`,...f},data:d}:null},options:a}),zoom:a=>{let b={pkce:!0,...a};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:a,redirectURI:c,codeVerifier:d})=>{let e=new URLSearchParams({response_type:"code",redirect_uri:b.redirectURI?b.redirectURI:c,client_id:b.clientId,state:a});if(b.pkce){let a=await co(d);e.set("code_challenge_method","S256"),e.set("code_challenge",a)}let f=new URL("https://zoom.us/oauth/authorize");return f.search=e.toString(),f},validateAuthorizationCode:async({code:a,redirectURI:c,codeVerifier:d})=>cr({code:a,redirectURI:b.redirectURI||c,codeVerifier:d,options:b,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),refreshAccessToken:b.refreshAccessToken?b.refreshAccessToken:async a=>cq({refreshToken:a,options:{clientId:b.clientId,clientKey:b.clientKey,clientSecret:b.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(a){if(b.getUserInfo)return b.getUserInfo(a);let{data:c,error:d}=await cb("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${a.accessToken}`}});if(d)return null;let e=await b.mapProfileToUser?.(c);return{user:{id:c.id,name:c.display_name,image:c.pic_url,email:c.email,emailVerified:!!c.verified,...e},data:{...c}}}}},notion:a=>{let b="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=(a.disableDefaultScope,[]);return a.scope&&f.push(...a.scope),c&&f.push(...c),cp({id:"notion",options:a,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:c,redirectURI:d})=>cr({code:c,redirectURI:d,options:a,tokenEndpoint:b,authentication:"basic"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>cq({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${b.accessToken}`,"Notion-Version":"2022-06-28"}});if(d||!c)return null;let e=c.bot?.owner?.user;if(!e)return null;let f=await a.mapProfileToUser?.(e);return{user:{id:e.id,name:e.name||"Notion User",email:e.person?.email||null,image:e.avatar_url,emailVerified:!1,...f},data:e}},options:a}},kakao:a=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return a.scope&&e.push(...a.scope),c&&e.push(...c),cp({id:"kakao",options:a,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:e,state:b,redirectURI:d})},validateAuthorizationCode:async({code:b,redirectURI:c})=>cr({code:b,redirectURI:c,options:a,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c)return null;let e=await a.mapProfileToUser?.(c),f=c.kakao_account||{},g=f.profile||{};return{user:{id:String(c.id),name:g.nickname||f.name||void 0,email:f.email,image:g.profile_image_url||g.thumbnail_image_url,emailVerified:!!f.is_email_valid&&!!f.is_email_verified,...e},data:c}},options:a}),naver:a=>({id:"naver",name:"Naver",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["profile","email"];return a.scope&&e.push(...a.scope),c&&e.push(...c),cp({id:"naver",options:a,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:e,state:b,redirectURI:d})},validateAuthorizationCode:async({code:b,redirectURI:c})=>cr({code:b,redirectURI:c,options:a,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c||"00"!==c.resultcode)return null;let e=await a.mapProfileToUser?.(c),f=c.response||{};return{user:{id:f.id,name:f.name||f.nickname,email:f.email,image:f.profile_image,emailVerified:!1,...e},data:c}},options:a}),line:a=>{let b="https://api.line.me/oauth2/v2.1/token";return{id:"line",name:"LINE",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e,loginHint:f}){let g=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&g.push(...a.scope),c&&g.push(...c),await cp({id:"line",options:a,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:g,state:b,codeVerifier:d,redirectURI:e,loginHint:f})},validateAuthorizationCode:async({code:c,codeVerifier:d,redirectURI:e})=>cr({code:c,codeVerifier:d,redirectURI:e,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>cq({refreshToken:c,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:b}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let d=new URLSearchParams;d.set("id_token",b),d.set("client_id",a.clientId),c&&d.set("nonce",c);let{data:e,error:f}=await cb("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:d});return!f&&!!e&&e.aud===a.clientId&&(!e.nonce||e.nonce===c)},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let c=null;if(b.idToken)try{c=cw(b.idToken)}catch{}if(!c){let{data:a}=await cb("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${b.accessToken}`}});c=a||null}if(!c)return null;let d=await a.mapProfileToUser?.(c),e=c.sub||c.userId,f=c.name||c.displayName,g=c.picture||c.pictureUrl||void 0;return{user:{id:e,name:f,email:c.email,image:g,emailVerified:!1,...d},data:c}},options:a}},paybin:a=>{let b=a.issuer||"https://idp.paybin.io",c=`${b}/oauth2/authorize`,d=`${b}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f,loginHint:g}){if(!a.clientId||!a.clientSecret)throw ac.i.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new bR.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!e)throw new bR.t("codeVerifier is required for Paybin");let h=a.disableDefaultScope?[]:["openid","email","profile"];return a.scope&&h.push(...a.scope),d&&h.push(...d),await cp({id:"paybin",options:a,authorizationEndpoint:c,scopes:h,state:b,codeVerifier:e,redirectURI:f,prompt:a.prompt,loginHint:g})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>cr({code:b,codeVerifier:c,redirectURI:e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=cw(b.idToken),d=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.preferred_username||(c.email?c.email.split("@")[0]:"User")||"User",email:c.email,image:c.picture,emailVerified:c.email_verified||!1,...d},data:c}},options:a}},paypal:a=>{let b="sandbox"===(a.environment||"sandbox"),c=b?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",d=b?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",e=b?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:b,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw ac.i.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new bR.t("CLIENT_ID_AND_SECRET_REQUIRED");return await cp({id:"paypal",options:a,authorizationEndpoint:c,scopes:[],state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt})},validateAuthorizationCode:async({code:b,redirectURI:c})=>{let e=bx.base64.encode(`${a.clientId}:${a.clientSecret}`);try{let a=await cb(d,{method:"POST",headers:{Authorization:`Basic ${e}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:b,redirect_uri:c}).toString()});if(!a.data)throw new bR.t("FAILED_TO_GET_ACCESS_TOKEN");let f=a.data;return{accessToken:f.access_token,refreshToken:f.refresh_token,accessTokenExpiresAt:f.expires_in?new Date(Date.now()+1e3*f.expires_in):void 0,idToken:f.id_token}}catch(a){throw ac.i.error("PayPal token exchange failed:",a),new bR.t("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>{let c=bx.base64.encode(`${a.clientId}:${a.clientSecret}`);try{let a=await cb(d,{method:"POST",headers:{Authorization:`Basic ${c}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:b}).toString()});if(!a.data)throw new bR.t("FAILED_TO_REFRESH_ACCESS_TOKEN");let e=a.data;return{accessToken:e.access_token,refreshToken:e.refresh_token,accessTokenExpiresAt:e.expires_in?new Date(Date.now()+1e3*e.expires_in):void 0}}catch(a){throw ac.i.error("PayPal token refresh failed:",a),new bR.t("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);try{return!!cw(b).sub}catch(a){return ac.i.error("Failed to verify PayPal ID token:",a),!1}},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return ac.i.error("Access token is required to fetch PayPal user info"),null;try{let c=await cb(`${e}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${b.accessToken}`,Accept:"application/json"}});if(!c.data)return ac.i.error("Failed to fetch user info from PayPal"),null;let d=c.data,f=await a.mapProfileToUser?.(d);return{user:{id:d.user_id,name:d.name,email:d.email,image:d.picture,emailVerified:d.email_verified,...f},data:d}}catch(a){return ac.i.error("Failed to fetch user info from PayPal:",a),null}},options:a}},polar:a=>({id:"polar",name:"Polar",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),cp({id:"polar",options:a,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>cq({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.public_name||c.username,email:c.email,image:c.avatar_url,emailVerified:c.email_verified??!1,...e},data:c}},options:a}),vercel:a=>({id:"vercel",name:"Vercel",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f;if(!d)throw new bR.t("codeVerifier is required for Vercel");return(void 0!==a.scope||void 0!==c)&&(f=[],a.scope&&f.push(...a.scope),c&&f.push(...c)),cp({id:"vercel",options:a,authorizationEndpoint:"https://vercel.com/oauth/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>cr({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.vercel.com/login/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await cb("https://api.vercel.com/login/oauth/userinfo",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name??c.preferred_username,email:c.email,image:c.picture,emailVerified:c.email_verified??!1,...e},data:c}},options:a})},cC=Object.keys(cB),cD=r.enum(cC).or(r.string()),cE=am("/list-accounts",{method:"GET",use:[bJ],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async a=>{let b=a.context.session,c=await a.context.internalAdapter.findAccounts(b.user.id);return a.json(c.map(a=>({id:a.id,providerId:a.providerId,createdAt:a.createdAt,updatedAt:a.updatedAt,accountId:a.accountId,userId:a.userId,scopes:a.scope?.split(",")||[]})))}),cF=am("/link-social",{method:"POST",requireHeaders:!0,body:r.object({callbackURL:r.string().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:cD,idToken:r.object({token:r.string(),nonce:r.string().optional(),accessToken:r.string().optional(),refreshToken:r.string().optional(),scopes:r.array(r.string()).optional()}).optional(),requestSignUp:r.boolean().optional(),scopes:r.array(r.string()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:r.string().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:r.boolean().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:r.record(r.string(),r.any()).optional()}),use:[bJ],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async a=>{let b=a.context.session,c=a.context.socialProviders.find(b=>b.id===a.body.provider);if(!c)throw a.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:a.body.provider}),new x("NOT_FOUND",{message:bG.n.PROVIDER_NOT_FOUND});if(a.body.idToken){if(!c.verifyIdToken)throw a.context.logger.error("Provider does not support id token verification",{provider:a.body.provider}),new x("NOT_FOUND",{message:bG.n.ID_TOKEN_NOT_SUPPORTED});let{token:d,nonce:e}=a.body.idToken;if(!await c.verifyIdToken(d,e))throw a.context.logger.error("Invalid id token",{provider:a.body.provider}),new x("UNAUTHORIZED",{message:bG.n.INVALID_TOKEN});let f=await c.getUserInfo({idToken:d,accessToken:a.body.idToken.accessToken,refreshToken:a.body.idToken.refreshToken});if(!f||!f?.user)throw a.context.logger.error("Failed to get user info",{provider:a.body.provider}),new x("UNAUTHORIZED",{message:bG.n.FAILED_TO_GET_USER_INFO});let g=String(f.user.id);if(!f.user.email)throw a.context.logger.error("User email not found",{provider:a.body.provider}),new x("UNAUTHORIZED",{message:bG.n.USER_EMAIL_NOT_FOUND});if((await a.context.internalAdapter.findAccounts(b.user.id)).find(a=>a.providerId===c.id&&a.accountId===g))return a.json({url:"",status:!0,redirect:!1});if(!a.context.options.account?.accountLinking?.trustedProviders?.includes(c.id)&&!f.user.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)throw new x("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(f.user.email!==b.user.email&&a.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new x("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await a.context.internalAdapter.createAccount({userId:b.user.id,providerId:c.id,accountId:g,accessToken:a.body.idToken.accessToken,idToken:d,refreshToken:a.body.idToken.refreshToken,scope:a.body.idToken.scopes?.join(",")})}catch{throw new x("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(a.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await a.context.internalAdapter.updateUser(b.user.id,{name:f.user?.name,image:f.user?.image})}catch(a){console.warn("Could not update user - "+a.toString())}return a.json({url:"",status:!0,redirect:!1})}let d=await _(a,{userId:b.user.id,email:b.user.email},a.body.additionalData),e=await c.createAuthorizationURL({state:d.state,codeVerifier:d.codeVerifier,redirectURI:`${a.context.baseURL}/callback/${c.id}`,scopes:a.body.scopes});return a.json({url:e.toString(),redirect:!a.body.disableRedirect})}),cG=am("/unlink-account",{method:"POST",body:r.object({providerId:r.string(),accountId:r.string().optional()}),use:[bL],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async a=>{let{providerId:b,accountId:c}=a.body,d=await a.context.internalAdapter.findAccounts(a.context.session.user.id);if(1===d.length&&!a.context.options.account?.accountLinking?.allowUnlinkingAll)throw new x("BAD_REQUEST",{message:bG.n.FAILED_TO_UNLINK_LAST_ACCOUNT});let e=d.find(a=>c?a.accountId===c&&a.providerId===b:a.providerId===b);if(!e)throw new x("BAD_REQUEST",{message:bG.n.ACCOUNT_NOT_FOUND});return await a.context.internalAdapter.deleteAccount(e.id),a.json({status:!0})}),cH=am("/get-access-token",{method:"POST",body:r.object({providerId:r.string().meta({description:"The provider ID for the OAuth provider"}),accountId:r.string().meta({description:"The account ID associated with the refresh token"}).optional(),userId:r.string().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async a=>{let b,{providerId:c,accountId:d,userId:e}=a.body||{},f=a.request,g=await bI(a);if(f&&!g)throw a.error("UNAUTHORIZED");let h=g?.user?.id||e;if(!h)throw a.error("UNAUTHORIZED");if(!a.context.socialProviders.find(a=>a.id===c))throw new x("BAD_REQUEST",{message:`Provider ${c} is not supported.`});let i=await br(a);if(!(b=i&&c===i.providerId&&(!d||i.id===d)?i:(await a.context.internalAdapter.findAccounts(h)).find(a=>d?a.id===d&&a.providerId===c:a.providerId===c)))throw new x("BAD_REQUEST",{message:"Account not found"});let j=a.context.socialProviders.find(a=>a.id===c);if(!j)throw new x("BAD_REQUEST",{message:`Provider ${c} not found.`});try{let c=null,d=b.accessTokenExpiresAt&&new Date(b.accessTokenExpiresAt).getTime()-Date.now()<5e3;if(b.refreshToken&&d&&j.refreshAccessToken){let d=await bP(b.refreshToken,a.context);c=await j.refreshAccessToken(d);let e={accessToken:await bQ(c.accessToken,a.context),accessTokenExpiresAt:c.accessTokenExpiresAt,refreshToken:await bQ(c.refreshToken,a.context),refreshTokenExpiresAt:c.refreshTokenExpiresAt},f=null;b.id&&(f=await a.context.internalAdapter.updateAccount(b.id,e)),a.context.options.account?.storeAccountCookie&&await bq(a,{...b,...f??e})}let e={accessToken:c?.accessToken??await bP(b.accessToken??"",a.context),accessTokenExpiresAt:c?.accessTokenExpiresAt??b.accessTokenExpiresAt??void 0,scopes:b.scope?.split(",")??[],idToken:c?.idToken??b.idToken??void 0};return a.json(e)}catch(a){throw new x("BAD_REQUEST",{message:"Failed to get a valid access token",cause:a})}}),cI=am("/refresh-token",{method:"POST",body:r.object({providerId:r.string().meta({description:"The provider ID for the OAuth provider"}),accountId:r.string().meta({description:"The account ID associated with the refresh token"}).optional(),userId:r.string().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async a=>{let b,c,{providerId:d,accountId:e,userId:f}=a.body,g=a.request,h=await bI(a);if(g&&!h)throw a.error("UNAUTHORIZED");let i=h?.user?.id||f;if(!i)throw new x("BAD_REQUEST",{message:"Either userId or session is required"});let j=a.context.socialProviders.find(a=>a.id===d);if(!j)throw new x("BAD_REQUEST",{message:`Provider ${d} not found.`});if(!j.refreshAccessToken)throw new x("BAD_REQUEST",{message:`Provider ${d} does not support token refreshing.`});let k=await br(a);if(!(b=k&&(!d||d===k?.providerId)?k:(await a.context.internalAdapter.findAccounts(i)).find(a=>e?a.id===e&&a.providerId===d:a.providerId===d)))throw new x("BAD_REQUEST",{message:"Account not found"});if(!(c=k&&d===k.providerId?k.refreshToken??void 0:b.refreshToken??void 0))throw new x("BAD_REQUEST",{message:"Refresh token not found"});try{let e=await bP(c,a.context),f=await j.refreshAccessToken(e);if(b.id){let c={...b||{},accessToken:await bQ(f.accessToken,a.context),refreshToken:await bQ(f.refreshToken,a.context),accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")||b.scope,idToken:f.idToken||b.idToken};await a.context.internalAdapter.updateAccount(b.id,c)}return k&&d===k.providerId&&a.context.options.account?.storeAccountCookie&&await bq(a,{...k,accessToken:await bQ(f.accessToken,a.context),refreshToken:await bQ(f.refreshToken,a.context),accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")||k.scope,idToken:f.idToken||k.idToken}),a.json({accessToken:f.accessToken,refreshToken:f.refreshToken,accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")||b.scope,idToken:f.idToken||b.idToken,providerId:b.providerId,accountId:b.accountId})}catch(a){throw new x("BAD_REQUEST",{message:"Failed to refresh access token",cause:a})}}),cJ=am("/account-info",{method:"GET",use:[bJ],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:r.optional(r.object({accountId:r.string().meta({description:"The provider given account id for which to get the account info"}).optional()}))},async a=>{let b,c=a.query?.accountId;if(c){let d=await a.context.internalAdapter.findAccount(c);d&&(b=d)}else if(a.context.options.account?.storeAccountCookie){let c=await br(a);c&&(b=c)}if(!b||b.userId!==a.context.session.user.id)throw new x("BAD_REQUEST",{message:"Account not found"});let d=a.context.socialProviders.find(a=>a.id===b.providerId);if(!d)throw new x("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${b.providerId} but it is not configured`});let e=await cH({...a,method:"POST",body:{accountId:b.id,providerId:b.providerId},returnHeaders:!1,returnStatus:!1});if(!e.accessToken)throw new x("BAD_REQUEST",{message:"Access token not found"});let f=await d.getUserInfo({...e,accessToken:e.accessToken});return a.json(f)});async function cK(a,b,c,d=3600,e){return await (0,bj.signJWT)({email:b.toLowerCase(),updateTo:c,...e},a,d)}async function cL(a,b){if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new x("BAD_REQUEST",{message:"Verification email isn't enabled"});let c=await cK(a.context.secret,b.email,void 0,a.context.options.emailVerification?.expiresIn),d=a.body.callbackURL?encodeURIComponent(a.body.callbackURL):encodeURIComponent("/"),e=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${d}`;await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:b,url:e,token:c},a.request))}let cM=am("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:r.object({email:r.email().meta({description:"The email to send the verification email to"}),callbackURL:r.string().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async a=>{if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new x("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:b}=a.body,c=await bI(a);if(!c){let c=await a.context.internalAdapter.findUserByEmail(b);return c?await cL(a,c.user):await cK(a.context.secret,b,void 0,a.context.options.emailVerification?.expiresIn),a.json({status:!0})}if(c?.user.emailVerified)throw new x("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(c?.user.email!==b)throw new x("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await cL(a,c.user),a.json({status:!0})}),cN=am("/verify-email",{method:"GET",operationId:"verifyEmail",query:r.object({token:r.string().meta({description:"The token to verify the email"}),callbackURL:r.string().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[ao(a=>a.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async a=>{let b;function c(b){if(a.query.callbackURL){if(a.query.callbackURL.includes("?"))throw a.redirect(`${a.query.callbackURL}&error=${b}`);throw a.redirect(`${a.query.callbackURL}?error=${b}`)}throw new x("UNAUTHORIZED",{message:b})}let{token:d}=a.query;try{b=await (0,cm.jwtVerify)(d,new TextEncoder().encode(a.context.secret),{algorithms:["HS256"]})}catch(a){if(a instanceof ce.JWTExpired)return c("token_expired");return c("invalid_token")}let e=r.object({email:r.email(),updateTo:r.string().optional(),requestType:r.string().optional()}).parse(b.payload),f=await a.context.internalAdapter.findUserByEmail(e.email);if(!f)return c("user_not_found");if(e.updateTo){let b=await bI(a);if(b&&b.user.email!==e.email)return c("unauthorized");if("change-email-confirmation"===e.requestType){let b=await cK(a.context.secret,e.email,e.updateTo,a.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),c=a.query.callbackURL?encodeURIComponent(a.query.callbackURL):encodeURIComponent("/"),d=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${c}`;if(a.context.options.emailVerification?.sendVerificationEmail&&await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:{...f.user,email:e.updateTo},url:d,token:b},a.request)),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0})}if(!b){let c=await a.context.internalAdapter.createSession(f.user.id);if(!c)throw new x("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});b={session:c,user:f.user}}if("change-email-verification"===e.requestType){let c=await a.context.internalAdapter.updateUserByEmail(e.email,{email:e.updateTo,emailVerified:!0});if(await bE(a,{session:b.session,user:{...b.user,email:e.updateTo,emailVerified:!0}}),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:c})}let d=await a.context.internalAdapter.updateUserByEmail(e.email,{email:e.updateTo,emailVerified:!1}),g=await cK(a.context.secret,e.updateTo),h=a.query.callbackURL?encodeURIComponent(a.query.callbackURL):encodeURIComponent("/");if(a.context.options.emailVerification?.sendVerificationEmail&&await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:d,url:`${a.context.baseURL}/verify-email?token=${g}&callbackURL=${h}`,token:g},a.request)),await bE(a,{session:b.session,user:{...b.user,email:e.updateTo,emailVerified:!1}}),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:{id:d.id,email:d.email,name:d.name,image:d.image,emailVerified:d.emailVerified,createdAt:d.createdAt,updatedAt:d.updatedAt}})}if(f.user.emailVerified){if(a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:null})}a.context.options.emailVerification?.onEmailVerification&&await a.context.options.emailVerification.onEmailVerification(f.user,a.request);let g=await a.context.internalAdapter.updateUserByEmail(e.email,{emailVerified:!0});if(a.context.options.emailVerification?.afterEmailVerification&&await a.context.options.emailVerification.afterEmailVerification(g,a.request),a.context.options.emailVerification?.autoSignInAfterVerification){let b=await bI(a);if(b&&b.user.email===e.email)await bE(a,{session:b.session,user:{...b.user,emailVerified:!0}});else{let b=await a.context.internalAdapter.createSession(f.user.id);if(!b)throw new x("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await bE(a,{session:b,user:{...f.user,emailVerified:!0}})}}if(a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:null})});var af=ac;async function cO(a,b){let{userInfo:c,account:d,callbackURL:e,disableSignUp:f,overrideUserInfo:g}=b,h=await a.context.internalAdapter.findOAuthUser(c.email.toLowerCase(),d.accountId,d.providerId).catch(b=>{aW.logger.error("Better auth was unable to query your database.\nError: ",b);let c=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${c}?error=internal_server_error`)}),i=h?.user,j=!i;if(h){let e=h.accounts.find(a=>a.providerId===d.providerId&&a.accountId===d.accountId);if(e){if(a.context.options.account?.updateAccountOnSignIn!==!1){let b=Object.fromEntries(Object.entries({idToken:d.idToken,accessToken:await bQ(d.accessToken,a.context),refreshToken:await bQ(d.refreshToken,a.context),accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scope}).filter(([a,b])=>void 0!==b));a.context.options.account?.storeAccountCookie&&await bq(a,{...d,...b}),Object.keys(b).length>0&&await a.context.internalAdapter.updateAccount(e.id,b)}c.emailVerified&&!h.user.emailVerified&&c.email.toLowerCase()===h.user.email&&await a.context.internalAdapter.updateUser(h.user.id,{emailVerified:!0})}else{let e=a.context.options.account?.accountLinking?.trustedProviders;if(!(b.isTrustedProvider||e?.includes(d.providerId))&&!c.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)return(0,af.d)()&&aW.logger.warn(`User already exist but account isn't linked to ${d.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await a.context.internalAdapter.linkAccount({providerId:d.providerId,accountId:c.id.toString(),userId:h.user.id,accessToken:await bQ(d.accessToken,a.context),refreshToken:await bQ(d.refreshToken,a.context),idToken:d.idToken,accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scope})}catch(a){return aW.logger.error("Unable to link account",a),{error:"unable to link account",data:null}}c.emailVerified&&!h.user.emailVerified&&c.email.toLowerCase()===h.user.email&&await a.context.internalAdapter.updateUser(h.user.id,{emailVerified:!0})}if(g){let{id:b,...d}=c;i=await a.context.internalAdapter.updateUser(h.user.id,{...d,email:c.email.toLowerCase(),emailVerified:c.email.toLowerCase()===h.user.email&&h.user.emailVerified||c.emailVerified})}}else{if(f)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:b,...f}=c,g={accessToken:await bQ(d.accessToken,a.context),refreshToken:await bQ(d.refreshToken,a.context),idToken:d.idToken,accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scope,providerId:d.providerId,accountId:c.id.toString()},{user:h,account:j}=await a.context.internalAdapter.createOAuthUser({...f,email:c.email.toLowerCase()},g);if(i=h,a.context.options.account?.storeAccountCookie&&await bq(a,j),!c.emailVerified&&i&&a.context.options.emailVerification?.sendOnSignUp&&a.context.options.emailVerification?.sendVerificationEmail){let b=await cK(a.context.secret,i.email,void 0,a.context.options.emailVerification?.expiresIn),c=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${e}`;await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:i,url:c,token:b},a.request))}}catch(a){if(aW.logger.error(a),a instanceof x)return{error:a.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!i)return{error:"unable to create user",data:null,isRegister:!1};let k=await a.context.internalAdapter.createSession(i.id);return k?{data:{session:k,user:i},error:null,isRegister:j}:{error:"unable to create session",data:null,isRegister:!1}}var as=ad;let cP=r.object({code:r.string().optional(),error:r.string().optional(),device_id:r.string().optional(),error_description:r.string().optional(),state:r.string().optional(),user:r.string().optional()}),cQ=am("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:cP.optional(),query:cP.optional(),metadata:{...ab,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async a=>{let b,c,d,e=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;if("POST"===a.method){let b=a.body?cP.parse(a.body):{},c=a.query?cP.parse(a.query):{},d=cP.parse({...b,...c}),e=new URLSearchParams;for(let[a,b]of Object.entries(d))null!=b&&e.set(a,String(b));let f=`${a.context.baseURL}/callback/${a.params.id}?${e.toString()}`;throw a.redirect(f)}try{if("GET"===a.method)b=cP.parse(a.query);else if("POST"===a.method)b=cP.parse(a.body);else throw Error("Unsupported method")}catch(b){throw a.context.logger.error("INVALID_CALLBACK_REQUEST",b),a.redirect(`${e}?error=invalid_callback_request`)}let{code:f,error:g,state:h,error_description:i,device_id:j}=b;if(!h){a.context.logger.error("State not found",g);let b=`${e}${e.includes("?")?"&":"?"}state=state_not_found`;throw a.redirect(b)}let{codeVerifier:k,callbackURL:l,link:m,errorURL:n,newUserURL:o,requestSignUp:p}=await aa(a);function q(b,c){let d=n??e,f=new URLSearchParams({error:b});c&&f.set("error_description",c);let g=`${d}${d.includes("?")?"&":"?"}${f.toString()}`;throw a.redirect(g)}if(g&&q(g,i),!f)throw a.context.logger.error("Code not found"),q("no_code");let r=a.context.socialProviders.find(b=>b.id===a.params.id);if(!r)throw a.context.logger.error("Oauth provider with id",a.params.id,"not found"),q("oauth_provider_not_found");try{c=await r.validateAuthorizationCode({code:f,codeVerifier:k,deviceId:j,redirectURI:`${a.context.baseURL}/callback/${r.id}`})}catch(b){throw a.context.logger.error("",b),q("invalid_code")}let s=await r.getUserInfo({...c,user:a.body?.user?(0,as.n)(a.body.user):void 0}).then(a=>a?.user);if(!s)return a.context.logger.error("Unable to get user info"),q("unable_to_get_user_info");if(!l)throw a.context.logger.error("No callback URL found"),q("no_callback_url");if(m){let b;if(!a.context.options.account?.accountLinking?.trustedProviders?.includes(r.id)&&!s.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)return a.context.logger.error("Unable to link account - untrusted provider"),q("unable_to_link_account");if(s.email!==m.email&&a.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return q("email_doesn't_match");let d=await a.context.internalAdapter.findAccount(String(s.id));if(d){if(d.userId.toString()!==m.userId.toString())return q("account_already_linked_to_different_user");let b=Object.fromEntries(Object.entries({accessToken:await bQ(c.accessToken,a.context),refreshToken:await bQ(c.refreshToken,a.context),idToken:c.idToken,accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scopes?.join(",")}).filter(([a,b])=>void 0!==b));await a.context.internalAdapter.updateAccount(d.id,b)}else if(!await a.context.internalAdapter.createAccount({userId:m.userId,providerId:r.id,accountId:String(s.id),...c,accessToken:await bQ(c.accessToken,a.context),refreshToken:await bQ(c.refreshToken,a.context),scope:c.scopes?.join(",")}))return q("unable_to_link_account");try{b=l.toString()}catch{b=l}throw a.redirect(b)}if(!s.email)return a.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),q("email_not_found");let t={providerId:r.id,accountId:String(s.id),...c,scope:c.scopes?.join(",")},u=await cO(a,{userInfo:{...s,id:String(s.id),email:s.email,name:s.name||s.email},account:t,callbackURL:l,disableSignUp:r.disableImplicitSignUp&&!p||r.options?.disableSignUp,overrideUserInfo:r.options?.overrideUserInfoOnSignIn});if(u.error)return a.context.logger.error(u.error.split(" ").join("_")),q(u.error.split(" ").join("_"));let{session:v,user:w}=u.data;await bE(a,{session:v,user:w});try{d=(u.isRegister&&o||l).toString()}catch{d=u.isRegister&&o||l}throw a.redirect(d)});var bw=ac;function cR(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}let cS=am("/error",{method:"GET",metadata:{...ab,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async a=>{let b=new URL(a.request?.url||""),c=b.searchParams.get("error")||"UNKNOWN",d=b.searchParams.get("error_description")||null,e=/^[\'A-Za-z0-9_-]+$/.test(c||"")?c:"UNKNOWN",f=d?cR(d):null,g=new URLSearchParams;g.set("error",e),d&&g.set("error_description",d);let h=a.context.options,i=h.onAPIError?.errorURL;return i?new Response(null,{status:302,headers:{Location:`${i}${i.includes("?")?"&":"?"}${g.toString()}`}}):bw.f&&!h.onAPIError?.customizeDefaultErrorPage?new Response(null,{status:302,headers:{Location:`/?${g.toString()}`}}):new Response(((a,b="Unknown",c=null)=>{let d=a.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${d?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${d?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${d?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${d?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${d?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${d?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${d?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${d?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${d?.colors?.primary||"black"};
        --primary-foreground: ${d?.colors?.primaryForeground||"white"};
        --background: ${d?.colors?.background||"white"};
        --foreground: ${d?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${d?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${d?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${d?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${d?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${d?.colors?.primary||"white"};
          --primary-foreground: ${d?.colors?.primaryForeground||"black"};
          --background: ${d?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${d?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${d?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${d?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${d?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${d?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${d?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${d?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${d?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${d?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${d?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${d?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${d?.disableTitleBorder?"transparent":d?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${d?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${cR(b)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${!c?`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/errors/${encodeURIComponent(b)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`:c}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/errors/${encodeURIComponent(b)}?askai=${encodeURIComponent(`What does the error code ${b} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`})(a.context.options,e,f),{headers:{"Content-Type":"text/html"}})}),cT=am("/ok",{method:"GET",metadata:{...ab,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async a=>a.json({ok:!0}));var ae=ad,bG=bG;function cU(a,b,c){let d=b?new URL(b,a.baseURL):new URL(`${a.baseURL}/error`);return c&&Object.entries(c).forEach(([a,b])=>d.searchParams.set(a,b)),d.href}let cV=am("/request-password-reset",{method:"POST",body:r.object({email:r.email().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:r.string().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"requestPasswordReset",description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async a=>{if(!a.context.options.emailAndPassword?.sendResetPassword)throw a.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new x("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:b,redirectTo:c}=a.body,d=await a.context.internalAdapter.findUserByEmail(b,{includeAccounts:!0});if(!d)return(0,ae.r)(24),await a.context.internalAdapter.findVerificationValue("dummy-verification-token"),a.context.logger.error("Reset Password: User not found",{email:b}),a.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let e=av(a.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),f=(0,ae.r)(24);await a.context.internalAdapter.createVerificationValue({value:d.user.id,identifier:`reset-password:${f}`,expiresAt:e});let g=c?encodeURIComponent(c):"",h=`${a.context.baseURL}/reset-password/${f}?callbackURL=${g}`;return await a.context.runInBackgroundOrAwait(a.context.options.emailAndPassword.sendResetPassword({user:d.user,url:h,token:f},a.request)),a.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),cW=am("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:r.object({callbackURL:r.string().meta({description:"The URL to redirect the user to reset their password"})}),use:[ao(a=>a.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async a=>{var b,c;let d,{token:e}=a.params,{callbackURL:f}=a.query;if(!e||!f)throw a.redirect(cU(a.context,f,{error:"INVALID_TOKEN"}));let g=await a.context.internalAdapter.findVerificationValue(`reset-password:${e}`);if(!g||g.expiresAt<new Date)throw a.redirect(cU(a.context,f,{error:"INVALID_TOKEN"}));throw a.redirect((b=a.context,c={token:e},d=new URL(f,b.baseURL),c&&Object.entries(c).forEach(([a,b])=>d.searchParams.set(a,b)),d.href))}),cX=am("/reset-password",{method:"POST",operationId:"resetPassword",query:r.object({token:r.string().optional()}).optional(),body:r.object({newPassword:r.string().meta({description:"The new password to set"}),token:r.string().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async a=>{let b=a.body.token||a.query?.token;if(!b)throw new x("BAD_REQUEST",{message:bG.n.INVALID_TOKEN});let{newPassword:c}=a.body,d=a.context.password?.config.minPasswordLength,e=a.context.password?.config.maxPasswordLength;if(c.length<d)throw new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_SHORT});if(c.length>e)throw new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_LONG});let f=`reset-password:${b}`,g=await a.context.internalAdapter.findVerificationValue(f);if(!g||g.expiresAt<new Date)throw new x("BAD_REQUEST",{message:bG.n.INVALID_TOKEN});let h=g.value,i=await a.context.password.hash(c);if((await a.context.internalAdapter.findAccounts(h)).find(a=>"credential"===a.providerId)?await a.context.internalAdapter.updatePassword(h,i):await a.context.internalAdapter.createAccount({userId:h,providerId:"credential",password:i,accountId:h}),await a.context.internalAdapter.deleteVerificationValue(g.id),a.context.options.emailAndPassword?.onPasswordReset){let b=await a.context.internalAdapter.findUserById(h);b&&await a.context.options.emailAndPassword.onPasswordReset({user:b},a.request)}return a.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await a.context.internalAdapter.deleteSessions(h),a.json({status:!0})});var bG=bG;let cY=r.object({callbackURL:r.string().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:r.string().optional(),errorCallbackURL:r.string().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:cD,disableRedirect:r.boolean().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:r.optional(r.object({token:r.string().meta({description:"ID token from the provider"}),nonce:r.string().meta({description:"Nonce used to generate the token"}).optional(),accessToken:r.string().meta({description:"Access token from the provider"}).optional(),refreshToken:r.string().meta({description:"Refresh token from the provider"}).optional(),expiresAt:r.number().meta({description:"Expiry date of the token"}).optional()})),scopes:r.array(r.string()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:r.boolean().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:r.string().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:r.record(r.string(),r.any()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),cZ=am("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async a=>{let b=await a.getSignedCookie(a.context.authCookies.sessionToken.name,a.context.secret);if(b)try{await a.context.internalAdapter.deleteSession(b)}catch(b){a.context.logger.error("Failed to delete session from database",b)}return bF(a),a.json({success:!0})});var a4=ai,af=ac,bG=bG;let c$=r.object({name:r.string().nonempty(),email:r.email(),password:r.string().nonempty(),image:r.string().optional(),callbackURL:r.string().optional(),rememberMe:r.boolean().optional()}).and(r.record(r.string(),r.any()));var bG=bG;let c_=r.record(r.string().meta({description:"Field name must be a string"}),r.any()),c0=am("/change-password",{method:"POST",operationId:"changePassword",body:r.object({newPassword:r.string().meta({description:"The new password to set"}),currentPassword:r.string().meta({description:"The current password is required"}),revokeOtherSessions:r.boolean().meta({description:"Must be a boolean value"}).optional()}),use:[bK],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async a=>{let{newPassword:b,currentPassword:c,revokeOtherSessions:d}=a.body,e=a.context.session,f=a.context.password.config.minPasswordLength;if(b.length<f)throw a.context.logger.error("Password is too short"),new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_SHORT});let g=a.context.password.config.maxPasswordLength;if(b.length>g)throw a.context.logger.error("Password is too long"),new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_LONG});let h=(await a.context.internalAdapter.findAccounts(e.user.id)).find(a=>"credential"===a.providerId&&a.password);if(!h||!h.password)throw new x("BAD_REQUEST",{message:bG.n.CREDENTIAL_ACCOUNT_NOT_FOUND});let i=await a.context.password.hash(b);if(!await a.context.password.verify({hash:h.password,password:c}))throw new x("BAD_REQUEST",{message:bG.n.INVALID_PASSWORD});await a.context.internalAdapter.updateAccount(h.id,{password:i});let j=null;if(d){await a.context.internalAdapter.deleteSessions(e.user.id);let b=await a.context.internalAdapter.createSession(e.user.id);if(!b)throw new x("INTERNAL_SERVER_ERROR",{message:bG.n.FAILED_TO_GET_SESSION});await bE(a,{session:b,user:e.user}),j=b.token}return a.json({token:j,user:{id:e.user.id,email:e.user.email,name:e.user.name,image:e.user.image,emailVerified:e.user.emailVerified,createdAt:e.user.createdAt,updatedAt:e.user.updatedAt}})}),c1=am({method:"POST",body:r.object({newPassword:r.string().meta({description:"The new password to set is required"})}),use:[bK]},async a=>{let{newPassword:b}=a.body,c=a.context.session,d=a.context.password.config.minPasswordLength;if(b.length<d)throw a.context.logger.error("Password is too short"),new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_SHORT});let e=a.context.password.config.maxPasswordLength;if(b.length>e)throw a.context.logger.error("Password is too long"),new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_LONG});let f=(await a.context.internalAdapter.findAccounts(c.user.id)).find(a=>"credential"===a.providerId&&a.password),g=await a.context.password.hash(b);if(!f)return await a.context.internalAdapter.linkAccount({userId:c.user.id,providerId:"credential",accountId:c.user.id,password:g}),a.json({status:!0});throw new x("BAD_REQUEST",{message:"user already has a password"})}),c2=am("/delete-user",{method:"POST",use:[bK],body:r.object({callbackURL:r.string().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:r.string().meta({description:"The password of the user is required to delete the user"}).optional(),token:r.string().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async a=>{if(!a.context.options.user?.deleteUser?.enabled)throw a.context.logger.error("Delete user is disabled. Enable it in the options"),new x("NOT_FOUND");let b=a.context.session;if(a.body.password){let c=(await a.context.internalAdapter.findAccounts(b.user.id)).find(a=>"credential"===a.providerId&&a.password);if(!c||!c.password)throw new x("BAD_REQUEST",{message:bG.n.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await a.context.password.verify({hash:c.password,password:a.body.password}))throw new x("BAD_REQUEST",{message:bG.n.INVALID_PASSWORD})}if(a.body.token)return await c3({...a,query:{token:a.body.token}}),a.json({success:!0,message:"User deleted"});if(a.context.options.user.deleteUser?.sendDeleteAccountVerification){let c=(0,p.generateRandomString)(32,"0-9","a-z");await a.context.internalAdapter.createVerificationValue({value:b.user.id,identifier:`delete-account-${c}`,expiresAt:new Date(Date.now()+1e3*(a.context.options.user.deleteUser?.deleteTokenExpiresIn||86400))});let d=`${a.context.baseURL}/delete-user/callback?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;return await a.context.runInBackgroundOrAwait(a.context.options.user.deleteUser.sendDeleteAccountVerification({user:b.user,url:d,token:c},a.request)),a.json({success:!0,message:"Verification email sent"})}if(!a.body.password&&0!==a.context.sessionConfig.freshAge){let c=new Date(b.session.createdAt).getTime(),d=1e3*a.context.sessionConfig.freshAge;if(Date.now()-c>1e3*d)throw new x("BAD_REQUEST",{message:bG.n.SESSION_EXPIRED})}let c=a.context.options.user.deleteUser?.beforeDelete;c&&await c(b.user,a.request),await a.context.internalAdapter.deleteUser(b.user.id),await a.context.internalAdapter.deleteSessions(b.user.id),bF(a);let d=a.context.options.user.deleteUser?.afterDelete;return d&&await d(b.user,a.request),a.json({success:!0,message:"User deleted"})}),c3=am("/delete-user/callback",{method:"GET",query:r.object({token:r.string().meta({description:"The token to verify the deletion request"}),callbackURL:r.string().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[ao(a=>a.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async a=>{if(!a.context.options.user?.deleteUser?.enabled)throw a.context.logger.error("Delete user is disabled. Enable it in the options"),new x("NOT_FOUND");let b=await bI(a);if(!b)throw new x("NOT_FOUND",{message:bG.n.FAILED_TO_GET_USER_INFO});let c=await a.context.internalAdapter.findVerificationValue(`delete-account-${a.query.token}`);if(!c||c.expiresAt<new Date||c.value!==b.user.id)throw new x("NOT_FOUND",{message:bG.n.INVALID_TOKEN});let d=a.context.options.user.deleteUser?.beforeDelete;d&&await d(b.user,a.request),await a.context.internalAdapter.deleteUser(b.user.id),await a.context.internalAdapter.deleteSessions(b.user.id),await a.context.internalAdapter.deleteAccounts(b.user.id),await a.context.internalAdapter.deleteVerificationValue(c.id),bF(a);let e=a.context.options.user.deleteUser?.afterDelete;if(e&&await e(b.user,a.request),a.query.callbackURL)throw a.redirect(a.query.callbackURL||"/");return a.json({success:!0,message:"User deleted"})}),c4=am("/change-email",{method:"POST",body:r.object({newEmail:r.email().meta({description:"The new email address to set must be a valid email address"}),callbackURL:r.string().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[bK],metadata:{openapi:{operationId:"changeEmail",responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async a=>{if(!a.context.options.user?.changeEmail?.enabled)throw a.context.logger.error("Change email is disabled."),new x("BAD_REQUEST",{message:"Change email is disabled"});let b=a.body.newEmail.toLowerCase();if(b===a.context.session.user.email)throw a.context.logger.error("Email is the same"),new x("BAD_REQUEST",{message:"Email is the same"});if(await a.context.internalAdapter.findUserByEmail(b))throw a.context.logger.error("Email already exists"),new x("UNPROCESSABLE_ENTITY",{message:bG.n.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(!0!==a.context.session.user.emailVerified&&a.context.options.user.changeEmail.updateEmailWithoutVerification){if(await a.context.internalAdapter.updateUserByEmail(a.context.session.user.email,{email:b}),await bE(a,{session:a.context.session.session,user:{...a.context.session.user,email:b}}),a.context.options.emailVerification?.sendVerificationEmail){let c=await cK(a.context.secret,b,void 0,a.context.options.emailVerification?.expiresIn),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:{...a.context.session.user,email:b},url:d,token:c},a.request))}return a.json({status:!0})}if(a.context.session.user.emailVerified&&(a.context.options.user.changeEmail.sendChangeEmailConfirmation||a.context.options.user.changeEmail.sendChangeEmailVerification)){let c=await cK(a.context.secret,a.context.session.user.email,b,a.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`,e=a.context.options.user.changeEmail.sendChangeEmailConfirmation||a.context.options.user.changeEmail.sendChangeEmailVerification;return e&&await a.context.runInBackgroundOrAwait(e({user:a.context.session.user,newEmail:b,url:d,token:c},a.request)),a.json({status:!0})}if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new x("BAD_REQUEST",{message:"Verification email isn't enabled"});let c=await cK(a.context.secret,a.context.session.user.email,b,a.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;return await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:{...a.context.session.user,email:b},url:d,token:c},a.request)),a.json({status:!0})});function c5(a){if(null===a||"object"!=typeof a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.iterator in a)&&(!(Symbol.toStringTag in a)||"[object Module]"===Object.prototype.toString.call(a))}function c6(a){return(...b)=>b.reduce((b,c)=>(function a(b,c,d=".",e){if(!c5(c))return a(b,{},d,e);let f=Object.assign({},c);for(let c in b){if("__proto__"===c||"constructor"===c)continue;let g=b[c];null!=g&&(e&&e(f,c,g,d)||(Array.isArray(g)&&Array.isArray(f[c])?f[c]=[...g,...f[c]]:c5(g)&&c5(f[c])?f[c]=a(g,f[c],(d?`${d}.`:"")+c.toString(),e):f[c]=g))}return f})(b,c,"",a),{})}let c7=c6();c6((a,b,c)=>{if(void 0!==a[b]&&"function"==typeof c)return a[b]=c(a[b]),!0}),c6((a,b,c)=>{if(Array.isArray(a[b])&&"function"==typeof c)return a[b]=c(a[b]),!0});let c8=c6((a,b,c)=>{if(Array.isArray(a[b])&&Array.isArray(c))return a[b]=c,!0});async function c9(a,b){let c={};for(let d of b)if(d.matcher(a)){let b=await d.handler({...a,returnHeaders:!1}).catch(b=>{throw b instanceof x&&(0,ac.a)(a.context.logger.level,"debug")&&(b.stack=b.errorStack),b});if(b&&"object"==typeof b){if("context"in b&&"object"==typeof b.context){let{headers:a,...d}=b.context;a instanceof Headers&&(c.headers?a.forEach((a,b)=>{c.headers?.set(b,a)}):c.headers=a),c=c8(d,c);continue}return b}}return{context:c}}async function da(a,b){for(let c of b)if(c.matcher(a)){let b=await c.handler(a).catch(b=>{if(b instanceof x)return(0,ac.a)(a.context.logger.level,"debug")&&(b.stack=b.errorStack),{response:b,headers:b.headers?new Headers(b.headers):null};throw b});b.headers&&b.headers.forEach((b,c)=>{a.context.responseHeaders?"set-cookie"===c.toLowerCase()?a.context.responseHeaders.append(c,b):a.context.responseHeaders.set(c,b):a.context.responseHeaders=new Headers({[c]:b})}),b.response&&(a.context.returned=b.response)}return{response:a.context.returned,headers:a.context.responseHeaders}}function db(a,b){let c=b.plugins?.reduce((a,b)=>({...a,...b.endpoints}),{})??{},d=b.plugins?.map(b=>b.middlewares?.map(b=>{let c=async c=>{let d=await a;return b.middleware({...c,context:{...d,...c.context}})};return c.options=b.middleware.options,{path:b.path,middleware:c}})).filter(a=>void 0!==a).flat()||[];return{api:function(a,b){let c={};for(let[d,e]of Object.entries(a))c[d]=async a=>{let c=async()=>{let c=await b,d={...a,context:{...c,returned:void 0,responseHeaders:void 0,session:null},path:e.path,headers:a?.headers?new Headers(a?.headers):void 0};return(0,ai.f)(d,async()=>{let{beforeHooks:b,afterHooks:f}=function(a){let b=a.options.plugins||[],c=[],d=[];a.options.hooks?.before&&c.push({matcher:()=>!0,handler:a.options.hooks.before}),a.options.hooks?.after&&d.push({matcher:()=>!0,handler:a.options.hooks.after});let e=b.map(a=>{if(a.hooks?.before)return a.hooks.before}).filter(a=>void 0!==a).flat(),f=b.map(a=>{if(a.hooks?.after)return a.hooks.after}).filter(a=>void 0!==a).flat();return e.length&&c.push(...e),f.length&&d.push(...f),{beforeHooks:c,afterHooks:d}}(c),g=await c9(d,b);if("context"in g&&g.context&&"object"==typeof g.context){let{headers:a,...b}=g.context;a&&a.forEach((a,b)=>{d.headers.set(b,a)}),d=c8(b,d)}else if(g)return a?.asResponse?C(g,{headers:a?.headers}):a?.returnHeaders?{headers:a?.headers,response:g}:g;d.asResponse=!1,d.returnHeaders=!0,d.returnStatus=!0;let h=await (0,ai.f)(d,()=>e(d)).catch(a=>{if(a instanceof x)return{response:a,status:a.statusCode,headers:a.headers?new Headers(a.headers):null};throw a});if(h&&h instanceof Response)return h;d.context.returned=h.response,d.context.responseHeaders=h.headers;let i=await da(d,f);if(i.response&&(h.response=i.response),h.response instanceof x&&(0,ac.a)(c.logger.level,"debug")&&(h.response.stack=h.response.errorStack),h.response instanceof x&&!a?.asResponse)throw h.response;return a?.asResponse?C(h.response,{headers:h.headers,status:h.status}):a?.returnHeaders?a?.returnStatus?{headers:h.headers,response:h.response,status:h.status}:{headers:h.headers,response:h.response}:a?.returnStatus?{response:h.response,status:h.status}:h.response})};return await (0,ai.c)()?c():(0,ai.l)(new WeakMap,c)},c[d].path=e.path,c[d].options=e.options;return c}({signInSocial:am("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:cY,metadata:{$Infer:{body:{},returned:{}},openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async a=>{let b=a.context.socialProviders.find(b=>b.id===a.body.provider);if(!b)throw a.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:a.body.provider}),new x("NOT_FOUND",{message:bG.n.PROVIDER_NOT_FOUND});if(a.body.idToken){if(!b.verifyIdToken)throw a.context.logger.error("Provider does not support id token verification",{provider:a.body.provider}),new x("NOT_FOUND",{message:bG.n.ID_TOKEN_NOT_SUPPORTED});let{token:c,nonce:d}=a.body.idToken;if(!await b.verifyIdToken(c,d))throw a.context.logger.error("Invalid id token",{provider:a.body.provider}),new x("UNAUTHORIZED",{message:bG.n.INVALID_TOKEN});let e=await b.getUserInfo({idToken:c,accessToken:a.body.idToken.accessToken,refreshToken:a.body.idToken.refreshToken});if(!e||!e?.user)throw a.context.logger.error("Failed to get user info",{provider:a.body.provider}),new x("UNAUTHORIZED",{message:bG.n.FAILED_TO_GET_USER_INFO});if(!e.user.email)throw a.context.logger.error("User email not found",{provider:a.body.provider}),new x("UNAUTHORIZED",{message:bG.n.USER_EMAIL_NOT_FOUND});let f=await cO(a,{userInfo:{...e.user,email:e.user.email,id:String(e.user.id),name:e.user.name||"",image:e.user.image,emailVerified:e.user.emailVerified||!1},account:{providerId:b.id,accountId:String(e.user.id),accessToken:a.body.idToken.accessToken},callbackURL:a.body.callbackURL,disableSignUp:b.disableImplicitSignUp&&!a.body.requestSignUp||b.disableSignUp});if(f.error)throw new x("UNAUTHORIZED",{message:f.error});return await bE(a,f.data),a.json({redirect:!1,token:f.data.session.token,url:void 0,user:az(a.context.options,f.data.user)})}let{codeVerifier:c,state:d}=await _(a,void 0,a.body.additionalData),e=await b.createAuthorizationURL({state:d,codeVerifier:c,redirectURI:`${a.context.baseURL}/callback/${b.id}`,scopes:a.body.scopes,loginHint:a.body.loginHint});return a.json({url:e.toString(),redirect:!a.body.disableRedirect})}),callbackOAuth:cQ,getSession:bH(),signOut:cZ,signUpEmail:am("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",body:c$,metadata:{$Infer:{body:{},returned:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async a=>(0,a4.i)(a.context.adapter,async()=>{let b;if(!a.context.options.emailAndPassword?.enabled||a.context.options.emailAndPassword?.disableSignUp)throw new x("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let c=a.body,{name:d,email:e,password:f,image:g,callbackURL:h,rememberMe:i,...j}=c;if(!r.email().safeParse(e).success)throw new x("BAD_REQUEST",{message:bG.n.INVALID_EMAIL});let k=a.context.password.config.minPasswordLength;if(f.length<k)throw a.context.logger.error("Password is too short"),new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_SHORT});let l=a.context.password.config.maxPasswordLength;if(f.length>l)throw a.context.logger.error("Password is too long"),new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_LONG});if((await a.context.internalAdapter.findUserByEmail(e))?.user)throw a.context.logger.info(`Sign-up attempt for existing email: ${e}`),new x("UNPROCESSABLE_ENTITY",{message:bG.n.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let m=await a.context.password.hash(f);try{let c=aD(a.context.options,j,"create");if(!(b=await a.context.internalAdapter.createUser({email:e.toLowerCase(),name:d,image:g,...c,emailVerified:!1})))throw new x("BAD_REQUEST",{message:bG.n.FAILED_TO_CREATE_USER})}catch(b){if((0,af.d)()&&a.context.logger.error("Failed to create user",b),b instanceof x)throw b;throw a.context.logger?.error("Failed to create user",b),new x("UNPROCESSABLE_ENTITY",{message:bG.n.FAILED_TO_CREATE_USER})}if(!b)throw new x("UNPROCESSABLE_ENTITY",{message:bG.n.FAILED_TO_CREATE_USER});if(await a.context.internalAdapter.linkAccount({userId:b.id,providerId:"credential",accountId:b.id,password:m}),a.context.options.emailVerification?.sendOnSignUp||a.context.options.emailAndPassword.requireEmailVerification){let d=await cK(a.context.secret,b.email,void 0,a.context.options.emailVerification?.expiresIn),e=c.callbackURL?encodeURIComponent(c.callbackURL):encodeURIComponent("/"),f=`${a.context.baseURL}/verify-email?token=${d}&callbackURL=${e}`;a.context.options.emailVerification?.sendVerificationEmail&&await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:b,url:f,token:d},a.request))}if(!1===a.context.options.emailAndPassword.autoSignIn||a.context.options.emailAndPassword.requireEmailVerification)return a.json({token:null,user:az(a.context.options,b)});let n=await a.context.internalAdapter.createSession(b.id,!1===i);if(!n)throw new x("BAD_REQUEST",{message:bG.n.FAILED_TO_CREATE_SESSION});return await bE(a,{session:n,user:b},!1===i),a.json({token:n.token,user:az(a.context.options,b)})})),signInEmail:am("/sign-in/email",{method:"POST",operationId:"signInEmail",body:r.object({email:r.string().meta({description:"Email of the user"}),password:r.string().meta({description:"Password of the user"}),callbackURL:r.string().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:r.boolean().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{$Infer:{body:{},returned:{}},openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"string",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async a=>{if(!a.context.options?.emailAndPassword?.enabled)throw a.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new x("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:b,password:c}=a.body;if(!r.email().safeParse(b).success)throw new x("BAD_REQUEST",{message:bG.n.INVALID_EMAIL});let d=await a.context.internalAdapter.findUserByEmail(b,{includeAccounts:!0});if(!d)throw await a.context.password.hash(c),a.context.logger.error("User not found",{email:b}),new x("UNAUTHORIZED",{message:bG.n.INVALID_EMAIL_OR_PASSWORD});let e=d.accounts.find(a=>"credential"===a.providerId);if(!e)throw await a.context.password.hash(c),a.context.logger.error("Credential account not found",{email:b}),new x("UNAUTHORIZED",{message:bG.n.INVALID_EMAIL_OR_PASSWORD});let f=e?.password;if(!f)throw await a.context.password.hash(c),a.context.logger.error("Password not found",{email:b}),new x("UNAUTHORIZED",{message:bG.n.INVALID_EMAIL_OR_PASSWORD});if(!await a.context.password.verify({hash:f,password:c}))throw a.context.logger.error("Invalid password"),new x("UNAUTHORIZED",{message:bG.n.INVALID_EMAIL_OR_PASSWORD});if(a.context.options?.emailAndPassword?.requireEmailVerification&&!d.user.emailVerified){if(!a.context.options?.emailVerification?.sendVerificationEmail)throw new x("FORBIDDEN",{message:bG.n.EMAIL_NOT_VERIFIED});if(a.context.options?.emailVerification?.sendOnSignIn){let b=await cK(a.context.secret,d.user.email,void 0,a.context.options.emailVerification?.expiresIn),c=a.body.callbackURL?encodeURIComponent(a.body.callbackURL):encodeURIComponent("/"),e=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${c}`;await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:d.user,url:e,token:b},a.request))}throw new x("FORBIDDEN",{message:bG.n.EMAIL_NOT_VERIFIED})}let g=await a.context.internalAdapter.createSession(d.user.id,!1===a.body.rememberMe);if(!g)throw a.context.logger.error("Failed to create session"),new x("UNAUTHORIZED",{message:bG.n.FAILED_TO_CREATE_SESSION});return await bE(a,{session:g,user:d.user},!1===a.body.rememberMe),a.json({redirect:!!a.body.callbackURL,token:g.token,url:a.body.callbackURL,user:az(a.context.options,d.user)})}),resetPassword:cX,verifyEmail:cN,sendVerificationEmail:cM,changeEmail:c4,changePassword:c0,setPassword:c1,updateUser:am("/update-user",{method:"POST",operationId:"updateUser",body:c_,use:[bJ],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user",nullable:!0}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async a=>{let b=a.body;if("object"!=typeof b||Array.isArray(b))throw new x("BAD_REQUEST",{message:"Body must be an object"});if(b.email)throw new x("BAD_REQUEST",{message:bG.n.EMAIL_CAN_NOT_BE_UPDATED});let{name:c,image:d,...e}=b,f=a.context.session,g=aD(a.context.options,e,"update");if(void 0===d&&void 0===c&&0===Object.keys(g).length)throw new x("BAD_REQUEST",{message:"No fields to update"});let h=await a.context.internalAdapter.updateUser(f.user.id,{name:c,image:d,...g})??{...f.user,...void 0!==c&&{name:c},...void 0!==d&&{image:d},...g};return await bE(a,{session:f.session,user:h}),a.json({status:!0})}),deleteUser:c2,requestPasswordReset:cV,requestPasswordResetCallback:cW,listSessions:am("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[bJ],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async a=>{try{let b=(await a.context.internalAdapter.listSessions(a.context.session.user.id)).filter(a=>a.expiresAt>new Date);return a.json(b)}catch(b){throw a.context.logger.error(b),a.error("INTERNAL_SERVER_ERROR")}}),revokeSession:bM,revokeSessions:bN,revokeOtherSessions:bO,linkSocialAccount:cF,listUserAccounts:cE,deleteUserCallback:c3,unlinkAccount:cG,refreshToken:cI,getAccessToken:cH,accountInfo:cJ,...c,ok:cT,error:cS},a),middlewares:d}}var dc=a.i(769417),ae=ad;function dd(a,b="/api/auth"){try{let b=new URL(a);if("http:"!==b.protocol&&"https:"!==b.protocol)throw new aY.BetterAuthError(`Invalid base URL: ${a}. URL must include 'http://' or 'https://'`)}catch(b){if(b instanceof aY.BetterAuthError)throw b;throw new aY.BetterAuthError(`Invalid base URL: ${a}. Please provide a valid base URL.`,String(b))}if(function(a){try{return"/"!==(new URL(a).pathname.replace(/\/+$/,"")||"/")}catch{throw new aY.BetterAuthError(`Invalid base URL: ${a}. Please provide a valid base URL.`)}}(a))return a;let c=a.replace(/\/+$/,"");return b&&"/"!==b?(b=b.startsWith("/")?b:`/${b}`,`${c}${b}`):c}function de(a,b){return!!a&&""!==a.trim()&&("proto"===b?"http"===a||"https"===a:"host"===b&&![/\.\./,/\0/,/[\s]/,/^[.]/,/[<>'"]/,/javascript:/i,/file:/i,/data:/i].some(b=>b.test(a))&&(/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(a)||/^(\d{1,3}\.){3}\d{1,3}(:[0-9]{1,5})?$/.test(a)||/^\[[0-9a-fA-F:]+\](:[0-9]{1,5})?$/.test(a)||/^localhost(:[0-9]{1,5})?$/i.test(a)))}function df(a,b,c,d,e){if(a)return dd(a,b);if(!1!==d){let a=bv.c.BETTER_AUTH_URL||bv.c.NEXT_PUBLIC_BETTER_AUTH_URL||bv.c.PUBLIC_BETTER_AUTH_URL||bv.c.NUXT_PUBLIC_BETTER_AUTH_URL||bv.c.NUXT_PUBLIC_AUTH_URL||("/"!==bv.c.BASE_URL?bv.c.BASE_URL:void 0);if(a)return dd(a,b)}let f=c?.headers.get("x-forwarded-host"),g=c?.headers.get("x-forwarded-proto");if(f&&g&&e&&de(g,"proto")&&de(f,"host"))try{return dd(`${g}://${f}`,b)}catch(a){}if(c){let a=dg(c.url);if(!a)throw new aY.BetterAuthError("Could not get origin from request. Please provide a valid base URL.");return dd(a,b)}}function dg(a){try{let b=new URL(a);return"null"===b.origin?null:b.origin}catch{return null}}let dh="better-auth-secret-12345678901234567890";function di(a){return!!a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof a.then}async function dj(a,b){let c=(await b.context.internalAdapter.findAccounts(a))?.find(a=>"credential"===a.providerId),d=c?.password;if(!c||!d||!b.body.password)throw new x("BAD_REQUEST",{message:"No password credential found"});if(!await b.context.password.verify({hash:d,password:b.body.password}))throw new x("BAD_REQUEST",{message:"Invalid password"});return!0}var bv=ac;async function dk(a){let b=a.options,c=b.plugins||[],d=a,e=[];for(let a of c)if(a.init){let c,f=a.init(d);if("object"==typeof(c=di(f)?await f:f)){if(c.options){let{databaseHooks:a,...d}=c.options;a&&e.push(a),b=c7(b,d)}c.context&&(d={...d,...c.context})}}return e.push(b.databaseHooks),d.internalAdapter=a5(d.adapter,{options:b,logger:d.logger,hooks:e.filter(a=>void 0!==a),generateId:d.generateId}),d.options=b,{context:d}}async function dl(a,b){let c=df(a.baseURL,a.basePath),d=c?[new URL(c).origin]:[];a.trustedOrigins&&(Array.isArray(a.trustedOrigins)&&d.push(...a.trustedOrigins),"function"==typeof a.trustedOrigins&&d.push(...await a.trustedOrigins(b)));let e=bv.c.BETTER_AUTH_TRUSTED_ORIGINS;if(e&&d.push(...e.split(",")),d.filter(a=>!a).length)throw new aY.BetterAuthError("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return d}var aV=aO,ba=ac,bv=ac,bw=ac,ag=ac,bv=ac,ag=ac,dm=a.i(699685),dn=a.i(285078);async function dp(){if(c)return c;try{let a="u">typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!a)return;let[{default:b},{default:d}]=await Promise.all([Function("mm","return import(mm)")("fs/promises"),Function("mm","return import(mm)")("path")]),e=await b.readFile(d.join(a,"package.json"),"utf-8");return c=JSON.parse(e)}catch{}}async function dq(a){if(c)return c.dependencies?.[a]||c.devDependencies?.[a]||c.peerDependencies?.[a];try{let b="u">typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!b)throw Error("no-cwd");let[{default:c},{default:d}]=await Promise.all([Function("mm","return import(mm)")("fs/promises"),Function("mm","return import(mm)")("path")]),e=d.join(b,"node_modules",a,"package.json"),f=await c.readFile(e,"utf-8");return JSON.parse(f).version||await dr(a)||void 0}catch{}return await dr(a)}async function dr(a){let b=await dp();if(b)return({...b.dependencies,...b.devDependencies,...b.peerDependencies})[a]}async function ds(){return(await dp())?.name}let dt={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function du(){for(let[a,b]of Object.entries(dt)){let c=await dq(a);if(c)return{name:b,version:c}}}let dv={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function dw(){for(let[a,b]of Object.entries(dv)){let c=await dq(a);if(c)return{name:b,version:c}}}function dx(){let a=(...a)=>a.some(a=>!!bv.c[a]);return a("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent?"cloudflare":a("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":a("NETLIFY","NETLIFY_URL")?"netlify":a("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":a("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":a("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":a("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":a("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":a("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":a("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":a("DYNO","HEROKU_APP_NAME")?"heroku":a("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":a("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function dy(){try{if("cloudflare"===dx())return"cloudflare";let a=await Function("mm","return import(mm)")("os"),b=a.cpus();return{deploymentVendor:dx(),systemPlatform:a.platform(),systemRelease:a.release(),systemArchitecture:a.arch(),cpuCount:b.length,cpuModel:b.length?b[0].model:null,cpuSpeed:b.length?b[0].speed:null,memory:a.totalmem(),isWSL:await dC(),isDocker:await dB(),isTTY:"u">typeof process&&process.stdout?process.stdout.isTTY:null}}catch{return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}async function dz(){if("cloudflare"===dx())return!1;try{return(await Function("mm","return import(mm)")("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function dA(){if("cloudflare"===dx())return!1;try{return(await Function("mm","return import(mm)")("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function dB(){return"cloudflare"!==dx()&&(void 0===d&&(d=await dz()||await dA()),d)}async function dC(){try{if("cloudflare"===dx()||"u"<typeof process||process?.platform!=="linux")return!1;let a=await Function("mm","return import(mm)")("fs");if((await Function("mm","return import(mm)")("os")).release().toLowerCase().includes("microsoft")){if(await dE())return!1;return!0}return!!a.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!await dE()}catch{return!1}}let dD=async()=>{if("cloudflare"===dx())return!1;try{return(await Function("mm","return import(mm)")("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function dE(){return void 0===e&&(e=await dD()||await dB()),e}async function dF(a){let b=await (0,dm.createHash)("SHA-256").digest(a);return bx.base64.encode(b)}let dG=null;async function dH(a){if(dG)return dG;let b=await ds();return b?dG=await dF(a?a+b:b):a?dG=await dF(a):dG=(0,dn.createRandomStringGenerator)("a-z","A-Z","0-9")(32)}async function dI(a,b){let c,d=a.telemetry?.debug||(0,ac.l)("BETTER_AUTH_TELEMETRY_DEBUG",!1),e=ac.s.BETTER_AUTH_TELEMETRY_ENDPOINT,f=async a=>{b?.customTrack?await b.customTrack(a).catch(aW.logger.error):d?aW.logger.info("telemetry event",JSON.stringify(a,null,2)):await cb(e,{method:"POST",body:a}).catch(aW.logger.error)},g=async()=>{let c=a.telemetry?.enabled!==void 0&&a.telemetry.enabled;return((0,ac.l)("BETTER_AUTH_TELEMETRY",!1)||c)&&(b?.skipTestCheck||!(0,ag.p)())},h=await g();h&&(c=await dH(a.baseURL),f({type:"init",payload:{config:{database:b?.database,adapter:b?.adapter,emailVerification:{sendVerificationEmail:!!a.emailVerification?.sendVerificationEmail,sendOnSignUp:!!a.emailVerification?.sendOnSignUp,sendOnSignIn:!!a.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!a.emailVerification?.autoSignInAfterVerification,expiresIn:a.emailVerification?.expiresIn,onEmailVerification:!!a.emailVerification?.onEmailVerification,afterEmailVerification:!!a.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!a.emailAndPassword?.enabled,disableSignUp:!!a.emailAndPassword?.disableSignUp,requireEmailVerification:!!a.emailAndPassword?.requireEmailVerification,maxPasswordLength:a.emailAndPassword?.maxPasswordLength,minPasswordLength:a.emailAndPassword?.minPasswordLength,sendResetPassword:!!a.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:a.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!a.emailAndPassword?.onPasswordReset,password:{hash:!!a.emailAndPassword?.password?.hash,verify:!!a.emailAndPassword?.password?.verify},autoSignIn:!!a.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!a.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(a.socialProviders||{}).map(b=>{let c=a.socialProviders?.[b];return c?{id:b,mapProfileToUser:!!c.mapProfileToUser,disableDefaultScope:!!c.disableDefaultScope,disableIdTokenSignIn:!!c.disableIdTokenSignIn,disableImplicitSignUp:c.disableImplicitSignUp,disableSignUp:c.disableSignUp,getUserInfo:!!c.getUserInfo,overrideUserInfoOnSignIn:!!c.overrideUserInfoOnSignIn,prompt:c.prompt,verifyIdToken:!!c.verifyIdToken,scope:c.scope,refreshAccessToken:!!c.refreshAccessToken}:{}}),plugins:a.plugins?.map(a=>a.id.toString()),user:{modelName:a.user?.modelName,fields:a.user?.fields,additionalFields:a.user?.additionalFields,changeEmail:{enabled:a.user?.changeEmail?.enabled,sendChangeEmailVerification:!!a.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:a.verification?.modelName,disableCleanup:a.verification?.disableCleanup,fields:a.verification?.fields},session:{modelName:a.session?.modelName,additionalFields:a.session?.additionalFields,cookieCache:{enabled:a.session?.cookieCache?.enabled,maxAge:a.session?.cookieCache?.maxAge,strategy:a.session?.cookieCache?.strategy},disableSessionRefresh:a.session?.disableSessionRefresh,expiresIn:a.session?.expiresIn,fields:a.session?.fields,freshAge:a.session?.freshAge,preserveSessionInDatabase:a.session?.preserveSessionInDatabase,storeSessionInDatabase:a.session?.storeSessionInDatabase,updateAge:a.session?.updateAge},account:{modelName:a.account?.modelName,fields:a.account?.fields,encryptOAuthTokens:a.account?.encryptOAuthTokens,updateAccountOnSignIn:a.account?.updateAccountOnSignIn,accountLinking:{enabled:a.account?.accountLinking?.enabled,trustedProviders:a.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:a.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:a.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!a.hooks?.after,before:!!a.hooks?.before},secondaryStorage:!!a.secondaryStorage,advanced:{cookiePrefix:!!a.advanced?.cookiePrefix,cookies:!!a.advanced?.cookies,crossSubDomainCookies:{domain:!!a.advanced?.crossSubDomainCookies?.domain,enabled:a.advanced?.crossSubDomainCookies?.enabled,additionalCookies:a.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!a.advanced?.database?.useNumberId||a.advanced?.database?.generateId==="serial",generateId:a.advanced?.database?.generateId,defaultFindManyLimit:a.advanced?.database?.defaultFindManyLimit},useSecureCookies:a.advanced?.useSecureCookies,ipAddress:{disableIpTracking:a.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:a.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:a.advanced?.disableCSRFCheck,cookieAttributes:{expires:a.advanced?.defaultCookieAttributes?.expires,secure:a.advanced?.defaultCookieAttributes?.secure,sameSite:a.advanced?.defaultCookieAttributes?.sameSite,domain:!!a.advanced?.defaultCookieAttributes?.domain,path:a.advanced?.defaultCookieAttributes?.path,httpOnly:a.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:a.trustedOrigins?.length,rateLimit:{storage:a.rateLimit?.storage,modelName:a.rateLimit?.modelName,window:a.rateLimit?.window,customStorage:!!a.rateLimit?.customStorage,enabled:a.rateLimit?.enabled,max:a.rateLimit?.max},onAPIError:{errorURL:a.onAPIError?.errorURL,onError:!!a.onAPIError?.onError,throw:a.onAPIError?.throw},logger:{disabled:a.logger?.disabled,level:a.logger?.level,log:!!a.logger?.log},databaseHooks:{user:{create:{after:!!a.databaseHooks?.user?.create?.after,before:!!a.databaseHooks?.user?.create?.before},update:{after:!!a.databaseHooks?.user?.update?.after,before:!!a.databaseHooks?.user?.update?.before}},session:{create:{after:!!a.databaseHooks?.session?.create?.after,before:!!a.databaseHooks?.session?.create?.before},update:{after:!!a.databaseHooks?.session?.update?.after,before:!!a.databaseHooks?.session?.update?.before}},account:{create:{after:!!a.databaseHooks?.account?.create?.after,before:!!a.databaseHooks?.account?.create?.before},update:{after:!!a.databaseHooks?.account?.update?.after,before:!!a.databaseHooks?.account?.update?.before}},verification:{create:{after:!!a.databaseHooks?.verification?.create?.after,before:!!a.databaseHooks?.verification?.create?.before},update:{after:!!a.databaseHooks?.verification?.update?.after,before:!!a.databaseHooks?.verification?.update?.before}}}},runtime:"u">typeof Deno?{name:"deno",version:Deno?.version?.deno??null}:"u">typeof Bun?{name:"bun",version:Bun?.version??null}:"u">typeof process&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null},database:await du(),framework:await dw(),environment:"production"===(0,ac.u)("NODE_ENV")?"production":"false"!==bv.c.CI&&("BUILD_ID"in bv.c||"BUILD_NUMBER"in bv.c||"CI"in bv.c||"CI_APP_ID"in bv.c||"CI_BUILD_ID"in bv.c||"CI_BUILD_NUMBER"in bv.c||"CI_NAME"in bv.c||"CONTINUOUS_INTEGRATION"in bv.c||"RUN_ID"in bv.c)?"ci":(0,ag.p)()?"test":"development",systemInfo:await dy(),packageManager:function(){let a=bv.c.npm_config_user_agent;if(!a)return;let b=a.split(" ")[0],c=b.lastIndexOf("/"),d=b.substring(0,c);return{name:"npminstall"===d?"cnpm":d,version:b.substring(c+1)}}()},anonymousId:c}));return{publish:async b=>{h&&(c||(c=await dH(a.baseURL)),await f({type:b.type,payload:b.payload,anonymousId:c}))}}}async function dJ(a,b,c){var d,e;let f,g,h,i,j,k,l,m;b.database||(b=c7(b,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}}));let n=b.plugins||[],o=(d=b,d.advanced?.crossSubDomainCookies?.enabled,[]),p=(0,ba.n)(b.logger),q=df(b.baseURL,b.basePath);q||p.warn("[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.");let r=b.secret||bv.c.BETTER_AUTH_SECRET||bv.c.AUTH_SECRET||dh,s=r===dh;if(!(0,ag.p)()){let a;if(s&&bw.f)throw new aY.BetterAuthError("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.");if(!r)throw new aY.BetterAuthError("BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).");if(r.length<32)throw new aY.BetterAuthError("Invalid BETTER_AUTH_SECRET: must be at least 32 characters long for adequate security. Generate one with `npx @better-auth/cli secret` or `openssl rand -base64 32`.");120>(0===(a=new Set(r).size)?0:Math.log2(Math.pow(a,r.length)))&&p.warn("[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.")}!function(a,b){let c=new Map;a.plugins?.forEach(a=>{if(a.endpoints){for(let[b,d]of Object.entries(a.endpoints))if(d&&"path"in d&&"string"==typeof d.path){let e=d.path,f=[];d.options&&"method"in d.options&&(Array.isArray(d.options.method)?f=d.options.method:"string"==typeof d.options.method&&(f=[d.options.method])),0===f.length&&(f=["*"]),c.has(e)||c.set(e,[]),c.get(e).push({pluginId:a.id,endpointKey:b,methods:f})}}});let d=[];for(let[a,b]of c.entries())if(b.length>1){let c=new Map,e=!1;for(let a of b)for(let d of a.methods)c.has(d)||c.set(d,[]),c.get(d).push(a.pluginId),c.get(d).length>1&&(e=!0),"*"===d&&b.length>1?e=!0:"*"!==d&&c.has("*")&&(e=!0);if(e){let e=[...new Set(b.map(a=>a.pluginId))],f=[];for(let[a,d]of c.entries())(d.length>1||"*"===a&&b.length>1||"*"!==a&&c.has("*"))&&f.push(a);d.push({path:a,plugins:e,conflictingMethods:f})}}if(d.length>0){let a=d.map(a=>`  - "${a.path}" [${a.conflictingMethods.join(", ")}] used by plugins: ${a.plugins.join(", ")}`).join("\n");b.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${a}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}(b={...b,secret:r,baseURL:q?new URL(q).origin:"",basePath:b.basePath||"/api/auth",plugins:n.concat(o)},p);let t=(h=(g=bC(e=b))("session_token",{maxAge:e.session?.expiresIn||Math.round(bu("7d")/1e3)}),i=g("session_data",{maxAge:e.session?.cookieCache?.maxAge||300}),j=g("account_data",{maxAge:e.session?.cookieCache?.maxAge||300}),k=g("dont_remember"),{sessionToken:{name:h.name,options:h.attributes},sessionData:{name:i.name,options:i.attributes},dontRememberToken:{name:k.name,options:k.attributes},accountData:{name:j.name,options:j.attributes}}),u=(0,aV.t)(b),v=Object.entries(b.socialProviders||{}).map(([a,b])=>{if(null==b||!1===b.enabled)return null;b.clientId||p.warn(`Social provider ${a} is missing clientId or clientSecret`);let c=cB[a](b);return c.disableImplicitSignUp=b.disableImplicitSignUp,c}).filter(a=>null!==a),w=({model:a,size:c})=>"function"==typeof b.advanced?.generateId?b.advanced.generateId({model:a,size:c}):"function"==typeof b?.advanced?.database?.generateId?b.advanced.database.generateId({model:a,size:c}):(0,ae.r)(c),{publish:x}=await dI(b,{adapter:a.id,database:"function"==typeof b.database?"adapter":c(b.database)}),y={appName:b.appName||"Better Auth",socialProviders:v,options:b,oauthConfig:{storeStateStrategy:b.account?.storeStateStrategy||(b.database?"database":"cookie"),skipStateCookieCheck:!!b.account?.skipStateCookieCheck},tables:u,trustedOrigins:await dl(b),isTrustedOrigin:(a,b)=>y.trustedOrigins.some(c=>((a,b,c)=>{if(a.startsWith("/"))return!!c?.allowRelativePaths&&a.startsWith("/")&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(a);if(b.includes("*")||b.includes("?")){if(b.includes("://"))return ar(b)(dg(a)||a);let c=function(a){try{return new URL(a).host}catch{return null}}(a);return!!c&&ar(b)(c)}let d=function(a){try{return new URL(a).protocol}catch{return null}}(a);return"http:"!==d&&"https:"!==d&&d?a.startsWith(b):b===dg(a)})(a,c,b)),baseURL:q||"",sessionConfig:{updateAge:b.session?.updateAge!==void 0?b.session.updateAge:86400,expiresIn:b.session?.expiresIn||604800,freshAge:b.session?.freshAge===void 0?86400:b.session.freshAge,cookieRefreshCache:(l=b.session?.cookieCache?.refreshCache,m=b.session?.cookieCache?.maxAge||300,(b.database||b.secondaryStorage)&&l?(p.warn("[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache`  remove it from your config to silence this warning."),!1):!1!==l&&void 0!==l&&(!0===l?{enabled:!0,updateAge:Math.floor(.2*m)}:{enabled:!0,updateAge:void 0!==l.updateAge?l.updateAge:Math.floor(.2*m)}))},secret:r,rateLimit:{...b.rateLimit,enabled:b.rateLimit?.enabled??bw.f,window:b.rateLimit?.window||10,max:b.rateLimit?.max||100,storage:b.rateLimit?.storage||(b.secondaryStorage?"secondary-storage":"memory")},authCookies:t,logger:p,generateId:w,session:null,secondaryStorage:b.secondaryStorage,password:{hash:b.emailAndPassword?.password?.hash||dc.hashPassword,verify:b.emailAndPassword?.password?.verify||dc.verifyPassword,config:{minPasswordLength:b.emailAndPassword?.minPasswordLength||8,maxPasswordLength:b.emailAndPassword?.maxPasswordLength||128},checkPassword:dj},setNewSession(a){this.newSession=a},newSession:null,adapter:a,internalAdapter:a5(a,{options:b,logger:p,hooks:b.databaseHooks?[b.databaseHooks]:[],generateId:w}),createAuthCookie:bC(b),async runMigrations(){throw new aY.BetterAuthError("runMigrations will be set by the specific init implementation")},publishTelemetry:x,skipCSRFCheck:!!b.advanced?.disableCSRFCheck,skipOriginCheck:b.advanced?.disableOriginCheck!==void 0?b.advanced.disableOriginCheck:!!(0,ag.p)(),runInBackground:b.advanced?.backgroundTasks?.handler??(a=>{a.catch(()=>{})}),async runInBackgroundOrAwait(a){try{b.advanced?.backgroundTasks?.handler?a instanceof Promise&&b.advanced.backgroundTasks.handler(a.catch(a=>{p.error("Failed to run background task:",a)})):await a}catch(a){p.error("Failed to run background task:",a)}}},z=dk(y);return di(z)?{context:f}=await z:{context:f}=z,f}let dK=async a=>{let b=await aZ(a),c=await dJ(b,a,a=>(0,a9.getKyselyDatabaseType)(a)||"unknown");return c.runMigrations=async function(){if(!a.database||"updateMany"in a.database)throw new aY.BetterAuthError("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:b}=await bg(a);await b()},c};var bG=bG,a1=ai;function dL(a){return{newRole:a=>{var b;return{authorize(a,c="AND"){let d=!1;for(let[e,f]of Object.entries(a)){let a=b[e];if(!a)return{success:!1,error:`You are not allowed to access resource: ${e}`};if(Array.isArray(f))d=f.every(b=>a.includes(b));else if("object"==typeof f)d="OR"===f.connector?f.actions.some(b=>a.includes(b)):f.actions.every(b=>a.includes(b));else throw new aY.BetterAuthError("Invalid access control request");if(d&&"OR"===c)return{success:d};if(!d&&"AND"===c)return{success:!1,error:`unauthorized to access resource "${e}"`}}return d?{success:d}:{success:!1,error:"Not authorized"}},statements:b=a}},statements:a}}let dM=dL({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]}),dN={admin:dM.newRole({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]}),user:dM.newRole({user:[],session:[]})},dO=async a=>{let b=a.context.returned;return b?b instanceof Response?200!==b.status?null:await b.clone().json():b instanceof x?null:b:null};var dP=ad;let dQ=(0,dP.i)({FAILED_TO_CREATE_USER:"Failed to create user",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",YOU_CANNOT_BAN_YOURSELF:"You cannot ban yourself",YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE:"You are not allowed to change users role",YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS:"You are not allowed to create users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS:"You are not allowed to list users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS:"You are not allowed to list users sessions",YOU_ARE_NOT_ALLOWED_TO_BAN_USERS:"You are not allowed to ban users",YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS:"You are not allowed to impersonate users",YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS:"You are not allowed to revoke users sessions",YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS:"You are not allowed to delete users",YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD:"You are not allowed to set users password",BANNED_USER:"You have been banned from this application",YOU_ARE_NOT_ALLOWED_TO_GET_USER:"You are not allowed to get user",NO_DATA_TO_UPDATE:"No data to update",YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS:"You are not allowed to update users",YOU_CANNOT_REMOVE_YOURSELF:"You cannot remove yourself",YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE:"You are not allowed to set a non-existent role value",YOU_CANNOT_IMPERSONATE_ADMINS:"You cannot impersonate admins",INVALID_ROLE_TYPE:"Invalid role type"}),dR=a=>{if(a.userId&&a.options?.adminUserIds?.includes(a.userId))return!0;if(!a.permissions&&!a.permission)return!1;let b=(a.role||a.options?.defaultRole||"user").split(","),c=a.options?.roles||dN;for(let d of b)if(c[d]?.authorize(a.permission??a.permissions)?.success)return!0;return!1};var bG=bG;let dS=ak(async a=>{let b=await bI(a);if(!b)throw new x("UNAUTHORIZED");return{session:b}});function dT(a){return Array.isArray(a)?a.join(","):a}let dU=r.object({userId:s.coerce.string().meta({description:"The user id"}),role:r.union([r.string().meta({description:"The role to set. `admin` or `user` by default"}),r.array(r.string().meta({description:"The roles to set. `admin` or `user` by default"}))]).meta({description:"The role to set, this can be a string or an array of strings. Eg: `admin` or `[admin, user]`"})}),dV=r.object({id:r.string().meta({description:"The id of the User"})}),dW=r.object({email:r.string().meta({description:"The email of the user"}),password:r.string().meta({description:"The password of the user"}),name:r.string().meta({description:"The name of the user"}),role:r.union([r.string().meta({description:"The role of the user"}),r.array(r.string().meta({description:"The roles of user"}))]).optional().meta({description:'A string or array of strings representing the roles to apply to the new user. Eg: "user"'}),data:r.record(r.string(),r.any()).optional().meta({description:"Extra fields for the user. Including custom additional fields."})}),dX=r.object({userId:s.coerce.string().meta({description:"The user id"}),data:r.record(r.any(),r.any()).meta({description:"The user data to update"})}),dY=r.object({searchValue:r.string().optional().meta({description:'The value to search for. Eg: "some name"'}),searchField:r.enum(["email","name"]).meta({description:'The field to search in, defaults to email. Can be `email` or `name`. Eg: "name"'}).optional(),searchOperator:r.enum(["contains","starts_with","ends_with"]).meta({description:'The operator to use for the search. Can be `contains`, `starts_with` or `ends_with`. Eg: "contains"'}).optional(),limit:r.string().meta({description:"The number of users to return"}).or(r.number()).optional(),offset:r.string().meta({description:"The offset to start from"}).or(r.number()).optional(),sortBy:r.string().meta({description:"The field to sort by"}).optional(),sortDirection:r.enum(["asc","desc"]).meta({description:"The direction to sort by"}).optional(),filterField:r.string().meta({description:"The field to filter by"}).optional(),filterValue:r.string().meta({description:"The value to filter by"}).or(r.number()).or(r.boolean()).optional(),filterOperator:r.enum(["eq","ne","lt","lte","gt","gte","contains"]).meta({description:"The operator to use for the filter"}).optional()}),dZ=r.object({userId:s.coerce.string().meta({description:"The user id"})}),d$=r.object({userId:s.coerce.string().meta({description:"The user id"})}),d_=r.object({userId:s.coerce.string().meta({description:"The user id"}),banReason:r.string().meta({description:"The reason for the ban"}).optional(),banExpiresIn:r.number().meta({description:"The number of seconds until the ban expires"}).optional()}),d0=r.object({userId:s.coerce.string().meta({description:"The user id"})}),d1=r.object({sessionToken:r.string().meta({description:"The session token"})}),d2=r.object({userId:s.coerce.string().meta({description:"The user id"})}),d3=r.object({userId:s.coerce.string().meta({description:"The user id"})}),d4=r.object({newPassword:r.string().nonempty("newPassword cannot be empty").meta({description:"The new password"}),userId:s.coerce.string().nonempty("userId cannot be empty").meta({description:"The user id"})}),d5=r.object({userId:s.coerce.string().optional().meta({description:'The user id. Eg: "user-id"'}),role:r.string().optional().meta({description:'The role to check permission for. Eg: "admin"'})}).and(r.union([r.object({permission:r.record(r.string(),r.array(r.string())),permissions:r.undefined()}),r.object({permission:r.undefined(),permissions:r.record(r.string(),r.array(r.string()))})])),d6={user:{fields:{role:{type:"string",required:!1,input:!1},banned:{type:"boolean",defaultValue:!1,required:!1,input:!1},banReason:{type:"string",required:!1,input:!1},banExpires:{type:"date",required:!1,input:!1}}},session:{fields:{impersonatedBy:{type:"string",required:!1}}}};var dP=ad;(0,dP.i)({INVALID_EMAIL_FORMAT:"Email was not generated in a valid format",FAILED_TO_CREATE_USER:"Failed to create user",COULD_NOT_CREATE_SESSION:"Could not create session",ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY:"Anonymous users cannot sign in again anonymously"});var ae=ad,as=ad;r.object({key:r.string().meta({description:"The key to verify"}),permissions:r.record(r.string(),r.array(r.string())).meta({description:"The permissions to verify."}).optional()});var ae=ad,as=ad;r.object({name:r.string().meta({description:"Name of the Api Key"}).optional(),expiresIn:r.number().meta({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable().default(null),userId:s.coerce.string().meta({description:'User Id of the user that the Api Key belongs to. server-only. Eg: "user-id"'}).optional(),prefix:r.string().meta({description:"Prefix of the Api Key"}).regex(/^[a-zA-Z0-9_-]+$/,{message:"Invalid prefix format, must be alphanumeric and contain only underscores and hyphens."}).optional(),remaining:r.number().meta({description:"Remaining number of requests. Server side only"}).min(0).optional().nullable().default(null),metadata:r.any().optional(),refillAmount:r.number().meta({description:"Amount to refill the remaining count of the Api Key. server-only. Eg: 100"}).min(1).optional(),refillInterval:r.number().meta({description:"Interval to refill the Api Key in milliseconds. server-only. Eg: 1000"}).optional(),rateLimitTimeWindow:r.number().meta({description:"The duration in milliseconds where each request is counted. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 1000"}).optional(),rateLimitMax:r.number().meta({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100"}).optional(),rateLimitEnabled:r.boolean().meta({description:"Whether the key has rate limiting enabled. server-only. Eg: true"}).optional(),permissions:r.record(r.string(),r.array(r.string())).meta({description:"Permissions of the Api Key."}).optional()}),r.object({keyId:r.string().meta({description:"The id of the Api Key"})});var as=ad;r.object({id:r.string().meta({description:"The id of the Api Key"})});var as=ad;r.object({keyId:r.string().meta({description:"The id of the Api Key"}),userId:s.coerce.string().meta({description:'The id of the user which the api key belongs to. server-only. Eg: "some-user-id"'}).optional(),name:r.string().meta({description:"The name of the key"}).optional(),enabled:r.boolean().meta({description:"Whether the Api Key is enabled or not"}).optional(),remaining:r.number().meta({description:"The number of remaining requests"}).min(1).optional(),refillAmount:r.number().meta({description:"The refill amount"}).optional(),refillInterval:r.number().meta({description:"The refill interval"}).optional(),metadata:r.any().optional(),expiresIn:r.number().meta({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable(),rateLimitEnabled:r.boolean().meta({description:"Whether the key has rate limiting enabled."}).optional(),rateLimitTimeWindow:r.number().meta({description:"The duration in milliseconds where each request is counted. server-only. Eg: 1000"}).optional(),rateLimitMax:r.number().meta({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100"}).optional(),permissions:r.record(r.string(),r.array(r.string())).meta({description:"Update the permissions on the API Key. server-only."}).optional().nullable()});var dP=ad;(0,dP.i)({INVALID_METADATA_TYPE:"metadata must be an object or undefined",REFILL_AMOUNT_AND_INTERVAL_REQUIRED:"refillAmount is required when refillInterval is provided",REFILL_INTERVAL_AND_AMOUNT_REQUIRED:"refillInterval is required when refillAmount is provided",USER_BANNED:"User is banned",UNAUTHORIZED_SESSION:"Unauthorized or invalid session",KEY_NOT_FOUND:"API Key not found",KEY_DISABLED:"API Key is disabled",KEY_EXPIRED:"API Key has expired",USAGE_EXCEEDED:"API Key has reached its usage limit",KEY_NOT_RECOVERABLE:"API Key is not recoverable",EXPIRES_IN_IS_TOO_SMALL:"The expiresIn is smaller than the predefined minimum value.",EXPIRES_IN_IS_TOO_LARGE:"The expiresIn is larger than the predefined maximum value.",INVALID_REMAINING:"The remaining count is either too large or too small.",INVALID_PREFIX_LENGTH:"The prefix length is either too large or too small.",INVALID_NAME_LENGTH:"The name length is either too large or too small.",METADATA_DISABLED:"Metadata is disabled.",RATE_LIMIT_EXCEEDED:"Rate limit exceeded.",NO_VALUES_TO_UPDATE:"No values to update.",KEY_DISABLED_EXPIRATION:"Custom key expiration values are disabled.",INVALID_API_KEY:"Invalid API key.",INVALID_USER_ID_FROM_API_KEY:"The user id from the API key is invalid.",INVALID_API_KEY_GETTER_RETURN_TYPE:"API Key getter returned an invalid key type. Expected string.",SERVER_ONLY_PROPERTY:"The property you're trying to set can only be set from the server auth instance only.",FAILED_TO_UPDATE_API_KEY:"Failed to update API key",NAME_REQUIRED:"API Key name is required."});var dP=ad;(0,dP.i)({VERIFICATION_FAILED:"Captcha verification failed",MISSING_RESPONSE:"Missing CAPTCHA response",UNKNOWN_ERROR:"Something went wrong"}),(0,dP.i)({MISSING_SECRET_KEY:"Missing secret key",SERVICE_UNAVAILABLE:"CAPTCHA service unavailable"}),r.optional(r.object({disableCookieCache:r.boolean().meta({description:"Disable cookie cache and fetch session from database"}).or(r.string().transform(a=>"true"===a)).optional(),disableRefresh:r.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));var dP=ad;let d7=(0,dP.i)({INVALID_DEVICE_CODE:"Invalid device code",EXPIRED_DEVICE_CODE:"Device code has expired",EXPIRED_USER_CODE:"User code has expired",AUTHORIZATION_PENDING:"Authorization pending",ACCESS_DENIED:"Access denied",INVALID_USER_CODE:"Invalid user code",DEVICE_CODE_ALREADY_PROCESSED:"Device code already processed",POLLING_TOO_FREQUENTLY:"Polling too frequently",USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_SESSION:"Failed to create session",INVALID_DEVICE_CODE_STATUS:"Invalid device code status",AUTHENTICATION_REQUIRED:"Authentication required"});r.object({client_id:r.string().meta({description:"The client ID of the application"}),scope:r.string().meta({description:"Space-separated list of scopes"}).optional()}),r.object({error:r.enum(["invalid_request","invalid_client"]).meta({description:"Error code"}),error_description:r.string().meta({description:"Detailed error description"})}),r.object({grant_type:r.literal("urn:ietf:params:oauth:grant-type:device_code").meta({description:"The grant type for device flow"}),device_code:r.string().meta({description:"The device verification code"}),client_id:r.string().meta({description:"The client ID of the application"})}),r.object({error:r.enum(["authorization_pending","slow_down","expired_token","access_denied","invalid_request","invalid_grant"]).meta({description:"Error code"}),error_description:r.string().meta({description:"Detailed error description"})}),am("/device",{method:"GET",query:r.object({user_code:r.string().meta({description:"The user code to verify"})}),error:r.object({error:r.enum(["invalid_request"]).meta({description:"Error code"}),error_description:r.string().meta({description:"Detailed error description"})}),metadata:{openapi:{description:"Verify user code and get device authorization status",responses:{200:{description:"Device authorization status",content:{"application/json":{schema:{type:"object",properties:{user_code:{type:"string",description:"The user code to verify"},status:{type:"string",enum:["pending","approved","denied"],description:"Current status of the device authorization"}}}}}}}}}},async a=>{let{user_code:b}=a.query,c=b.replace(/-/g,""),d=await a.context.adapter.findOne({model:"deviceCode",where:[{field:"userCode",value:c}]});if(!d)throw new x("BAD_REQUEST",{error:"invalid_request",error_description:d7.INVALID_USER_CODE});if(d.expiresAt<new Date)throw new x("BAD_REQUEST",{error:"expired_token",error_description:d7.EXPIRED_USER_CODE});return a.json({user_code:b,status:d.status})}),am("/device/approve",{method:"POST",body:r.object({userCode:r.string().meta({description:"The user code to approve"})}),error:r.object({error:r.enum(["invalid_request","expired_token","device_code_already_processed"]).meta({description:"Error code"}),error_description:r.string().meta({description:"Detailed error description"})}),requireHeaders:!0,metadata:{openapi:{description:"Approve device authorization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async a=>{let b=await bI(a);if(!b)throw new x("UNAUTHORIZED",{error:"unauthorized",error_description:d7.AUTHENTICATION_REQUIRED});let{userCode:c}=a.body,d=c.replace(/-/g,""),e=await a.context.adapter.findOne({model:"deviceCode",where:[{field:"userCode",value:d}]});if(!e)throw new x("BAD_REQUEST",{error:"invalid_request",error_description:d7.INVALID_USER_CODE});if(e.expiresAt<new Date)throw new x("BAD_REQUEST",{error:"expired_token",error_description:d7.EXPIRED_USER_CODE});if("pending"!==e.status)throw new x("BAD_REQUEST",{error:"invalid_request",error_description:d7.DEVICE_CODE_ALREADY_PROCESSED});return await a.context.adapter.update({model:"deviceCode",where:[{field:"id",value:e.id}],update:{status:"approved",userId:b.user.id}}),a.json({success:!0})}),am("/device/deny",{method:"POST",body:r.object({userCode:r.string().meta({description:"The user code to deny"})}),error:r.object({error:r.enum(["invalid_request","expired_token"]).meta({description:"Error code"}),error_description:r.string().meta({description:"Detailed error description"})}),metadata:{openapi:{description:"Deny device authorization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async a=>{let{userCode:b}=a.body,c=b.replace(/-/g,""),d=await a.context.adapter.findOne({model:"deviceCode",where:[{field:"userCode",value:c}]});if(!d)throw new x("BAD_REQUEST",{error:"invalid_request",error_description:d7.INVALID_USER_CODE});if(d.expiresAt<new Date)throw new x("BAD_REQUEST",{error:"expired_token",error_description:d7.EXPIRED_USER_CODE});if("pending"!==d.status)throw new x("BAD_REQUEST",{error:"invalid_request",error_description:d7.DEVICE_CODE_ALREADY_PROCESSED});return await a.context.adapter.update({model:"deviceCode",where:[{field:"id",value:d.id}],update:{status:"denied"}}),a.json({success:!0})}),r.object({id:r.string(),deviceCode:r.string(),userCode:r.string(),userId:r.string().optional(),expiresAt:r.date(),status:r.string(),lastPolledAt:r.date().optional(),pollingInterval:r.number().optional(),clientId:r.string().optional(),scope:r.string().optional()});let d8=r.custom(a=>{if("string"!=typeof a)return!1;try{return bu(a),!0}catch{return!1}},{message:"Invalid time string format. Use formats like '30m', '5s', '1h', etc."});r.object({expiresIn:d8.default("30m").describe("Time in seconds until the device code expires. Use formats like '30m', '5s', '1h', etc."),interval:d8.default("5s").describe("Time in seconds between polling attempts. Use formats like '30m', '5s', '1h', etc."),deviceCodeLength:r.number().int().positive().default(40).describe("Length of the device code to be generated. Default is 40 characters."),userCodeLength:r.number().int().positive().default(8).describe("Length of the user code to be generated. Default is 8 characters."),generateDeviceCode:r.custom(a=>"function"==typeof a,{message:"generateDeviceCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a device code. If not provided, a default random string generator will be used."),generateUserCode:r.custom(a=>"function"==typeof a,{message:"generateUserCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a user code. If not provided, a default random string generator will be used."),validateClient:r.custom(a=>"function"==typeof a,{message:"validateClient must be a function that returns a boolean or a promise that resolves to a boolean."}).optional().describe("Function to validate the client ID. If not provided, no validation will be performed."),onDeviceAuthRequest:r.custom(a=>"function"==typeof a,{message:"onDeviceAuthRequest must be a function that returns void or a promise that resolves to void."}).optional().describe("Function to handle device authorization requests. If not provided, no additional actions will be taken."),verificationUri:r.string().optional().describe("The URI where users verify their device code. Can be an absolute URL (https://example.com/device) or relative path (/custom-path). This will be returned as verification_uri in the device code response. If not provided, defaults to /device."),schema:r.custom(()=>!0)}),a.i(39758);var bG=bG,dP=ad;let d9=["email-verification","sign-in","forget-password"];(0,dP.i)({OTP_EXPIRED:"OTP expired",INVALID_OTP:"Invalid OTP",TOO_MANY_ATTEMPTS:"Too many attempts"}),r.object({email:r.string({}).meta({description:"Email address to send the OTP"}),type:r.enum(d9).meta({description:"Type of the OTP"})}),r.object({email:r.string({}).meta({description:"Email address to send the OTP"}),type:r.enum(d9).meta({required:!0,description:"Type of the OTP"})}),r.object({email:r.string({}).meta({description:"Email address the OTP was sent to"}),type:r.enum(d9).meta({required:!0,description:"Type of the OTP"})}),r.object({email:r.string().meta({description:"Email address the OTP was sent to"}),type:r.enum(d9).meta({required:!0,description:"Type of the OTP"}),otp:r.string().meta({required:!0,description:"OTP to verify"})}),r.object({email:r.string({}).meta({description:"Email address to verify"}),otp:r.string().meta({required:!0,description:"OTP to verify"})}),r.object({email:r.string({}).meta({description:"Email address to sign in"}),otp:r.string().meta({required:!0,description:"OTP sent to the email"})}),r.object({email:r.string().meta({description:"Email address to send the OTP"})}),r.object({email:r.string().meta({description:"Email address to reset the password"}),otp:r.string().meta({description:"OTP sent to the email"}),password:r.string().meta({description:"New password"})});var dP=ad;(0,dP.i)({INVALID_OAUTH_CONFIGURATION:"Invalid OAuth configuration",TOKEN_URL_NOT_FOUND:"Invalid OAuth configuration. Token URL not found.",PROVIDER_CONFIG_NOT_FOUND:"No config found for provider",PROVIDER_ID_REQUIRED:"Provider ID is required",INVALID_OAUTH_CONFIG:"Invalid OAuth configuration.",SESSION_REQUIRED:"Session is required"});var bG=bG;r.object({providerId:r.string().meta({description:"The provider ID for the OAuth provider"}),callbackURL:r.string().meta({description:"The URL to redirect to after sign in"}).optional(),errorCallbackURL:r.string().meta({description:"The URL to redirect to if an error occurs"}).optional(),newUserCallbackURL:r.string().meta({description:'The URL to redirect to after login if the user is new. Eg: "/welcome"'}).optional(),disableRedirect:r.boolean().meta({description:"Disable redirect"}).optional(),scopes:r.array(r.string()).meta({description:"Scopes to be passed to the provider authorization request."}).optional(),requestSignUp:r.boolean().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider. Eg: false"}).optional(),additionalData:r.record(r.string(),r.any()).optional()}),r.object({code:r.string().meta({description:"The OAuth2 code"}).optional(),error:r.string().meta({description:"The error message, if any"}).optional(),error_description:r.string().meta({description:"The error description, if any"}).optional(),state:r.string().meta({description:"The state parameter from the OAuth2 request"}).optional()}),r.object({providerId:r.string(),callbackURL:r.string(),scopes:r.array(r.string()).meta({description:"Additional scopes to request when linking the account"}).optional(),errorCallbackURL:r.string().meta({description:"The URL to redirect to if there is an error during the link process"}).optional()});var a2=ai,dP=ad;(0,dP.i)({PASSWORD_COMPROMISED:"The password you entered has been compromised. Please choose a different password."}),a.i(36447),a.i(604924);var a2=ai;r.object({payload:r.record(r.string(),r.any()),overrideOptions:r.record(r.string(),r.any()).optional()}),r.object({token:r.string(),issuer:r.string().optional()}),r.object({email:r.email().meta({description:"Email address to send the magic link"}),name:r.string().meta({description:'User display name. Only used if the user is registering for the first time. Eg: "my-name"'}).optional(),callbackURL:r.string().meta({description:"URL to redirect after magic link verification"}).optional(),newUserCallbackURL:r.string().meta({description:"URL to redirect after new user signup. Only used if the user is registering for the first time."}).optional(),errorCallbackURL:r.string().meta({description:"URL to redirect after error."}).optional()}),r.object({token:r.string().meta({description:"Verification token"}),callbackURL:r.string().meta({description:'URL to redirect after magic link verification, if not provided the user will be redirected to the root URL. Eg: "/dashboard"'}).optional(),errorCallbackURL:r.string().meta({description:"URL to redirect after error."}).optional(),newUserCallbackURL:r.string().meta({description:"URL to redirect after new user signup. Only used if the user is registering for the first time."}).optional()}),r.object({clientId:r.string(),clientSecret:r.string().optional(),type:r.enum(["web","native","user-agent-based","public"]),name:r.string(),icon:r.string().optional(),metadata:r.string().optional(),disabled:r.boolean().optional().default(!1),redirectUrls:r.string(),userId:r.string().optional(),createdAt:r.date(),updatedAt:r.date()});var a2=ai;r.object({accept:r.boolean(),consent_code:r.string().optional().nullish()}),r.record(r.any(),r.any()),r.object({redirect_uris:r.array(r.string()).meta({description:'A list of redirect URIs. Eg: ["https://client.example.com/callback"]'}),token_endpoint_auth_method:r.enum(["none","client_secret_basic","client_secret_post"]).meta({description:'The authentication method for the token endpoint. Eg: "client_secret_basic"'}).default("client_secret_basic").optional(),grant_types:r.array(r.enum(["authorization_code","implicit","password","client_credentials","refresh_token","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])).meta({description:'The grant types supported by the application. Eg: ["authorization_code"]'}).default(["authorization_code"]).optional(),response_types:r.array(r.enum(["code","token"])).meta({description:'The response types supported by the application. Eg: ["code"]'}).default(["code"]).optional(),client_name:r.string().meta({description:'The name of the application. Eg: "My App"'}).optional(),client_uri:r.string().meta({description:'The URI of the application. Eg: "https://client.example.com"'}).optional(),logo_uri:r.string().meta({description:'The URI of the application logo. Eg: "https://client.example.com/logo.png"'}).optional(),scope:r.string().meta({description:'The scopes supported by the application. Separated by spaces. Eg: "profile email"'}).optional(),contacts:r.array(r.string()).meta({description:'The contact information for the application. Eg: ["admin@example.com"]'}).optional(),tos_uri:r.string().meta({description:'The URI of the application terms of service. Eg: "https://client.example.com/tos"'}).optional(),policy_uri:r.string().meta({description:'The URI of the application privacy policy. Eg: "https://client.example.com/policy"'}).optional(),jwks_uri:r.string().meta({description:'The URI of the application JWKS. Eg: "https://client.example.com/jwks"'}).optional(),jwks:r.record(r.any(),r.any()).meta({description:'The JWKS of the application. Eg: {"keys": [{"kty": "RSA", "alg": "RS256", "use": "sig", "n": "...", "e": "..."}]}'}).optional(),metadata:r.record(r.any(),r.any()).meta({description:'The metadata of the application. Eg: {"key": "value"}'}).optional(),software_id:r.string().meta({description:'The software ID of the application. Eg: "my-software"'}).optional(),software_version:r.string().meta({description:'The software version of the application. Eg: "1.0.0"'}).optional(),software_statement:r.string().meta({description:"The software statement of the application."}).optional()});var bw=ac;r.object({redirect_uris:r.array(r.string()),token_endpoint_auth_method:r.enum(["none","client_secret_basic","client_secret_post"]).default("client_secret_basic").optional(),grant_types:r.array(r.enum(["authorization_code","implicit","password","client_credentials","refresh_token","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])).default(["authorization_code"]).optional(),response_types:r.array(r.enum(["code","token"])).default(["code"]).optional(),client_name:r.string().optional(),client_uri:r.string().optional(),logo_uri:r.string().optional(),scope:r.string().optional(),contacts:r.array(r.string()).optional(),tos_uri:r.string().optional(),policy_uri:r.string().optional(),jwks_uri:r.string().optional(),jwks:r.record(r.string(),r.any()).optional(),metadata:r.record(r.any(),r.any()).optional(),software_id:r.string().optional(),software_version:r.string().optional(),software_statement:r.string().optional()}),r.record(r.any(),r.any());var dP=ad;(0,dP.i)({INVALID_SESSION_TOKEN:"Invalid session token"}),r.object({sessionToken:r.string().meta({description:"The session token to set as active"})}),r.object({sessionToken:r.string().meta({description:"The session token to revoke"})});var bv=ac;r.object({callbackURL:r.string().meta({description:"The URL to redirect to after the proxy"}),cookies:r.string().meta({description:"The cookies to set after the proxy"})}),r.object({idToken:r.string().meta({description:"Google ID token, which the client obtains from the One Tap API"})}),r.object({token:r.string().meta({description:'The token to verify. Eg: "some-token"'})});var a1=ai;let ea=dL({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]});ea.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"],ac:["create","read","update","delete"]}),ea.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]}),ea.newRole({organization:[],member:[],invitation:[],team:[],ac:["read"]}),ak(async()=>({})),ak({use:[bJ]},async a=>({session:a.context.session}));var dP=ad;(0,dP.i)({YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION:"You are not allowed to create a new organization",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS:"You have reached the maximum number of organizations",ORGANIZATION_ALREADY_EXISTS:"Organization already exists",ORGANIZATION_SLUG_ALREADY_TAKEN:"Organization slug already taken",ORGANIZATION_NOT_FOUND:"Organization not found",USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION:"User is not a member of the organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION:"You are not allowed to update this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION:"You are not allowed to delete this organization",NO_ACTIVE_ORGANIZATION:"No active organization",USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION:"User is already a member of this organization",MEMBER_NOT_FOUND:"Member not found",ROLE_NOT_FOUND:"Role not found",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM:"You are not allowed to create a new team",TEAM_ALREADY_EXISTS:"Team already exists",TEAM_NOT_FOUND:"Team not found",YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER:"You cannot leave the organization as the only owner",YOU_CANNOT_LEAVE_THE_ORGANIZATION_WITHOUT_AN_OWNER:"You cannot leave the organization without an owner",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER:"You are not allowed to delete this member",YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION:"You are not allowed to invite users to this organization",USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION:"User is already invited to this organization",INVITATION_NOT_FOUND:"Invitation not found",YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION:"You are not the recipient of the invitation",EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION:"Email verification required before accepting or rejecting invitation",YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION:"You are not allowed to cancel this invitation",INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION:"Inviter is no longer a member of the organization",YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE:"You are not allowed to invite a user with this role",FAILED_TO_RETRIEVE_INVITATION:"Failed to retrieve invitation",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS:"You have reached the maximum number of teams",UNABLE_TO_REMOVE_LAST_TEAM:"Unable to remove last team",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER:"You are not allowed to update this member",ORGANIZATION_MEMBERSHIP_LIMIT_REACHED:"Organization membership limit reached",YOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to create teams in this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to delete teams in this organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM:"You are not allowed to update this team",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_TEAM:"You are not allowed to delete this team",INVITATION_LIMIT_REACHED:"Invitation limit reached",TEAM_MEMBER_LIMIT_REACHED:"Team member limit reached",USER_IS_NOT_A_MEMBER_OF_THE_TEAM:"User is not a member of the team",YOU_CAN_NOT_ACCESS_THE_MEMBERS_OF_THIS_TEAM:"You are not allowed to list the members of this team",YOU_DO_NOT_HAVE_AN_ACTIVE_TEAM:"You do not have an active team",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM_MEMBER:"You are not allowed to create a new member",YOU_ARE_NOT_ALLOWED_TO_REMOVE_A_TEAM_MEMBER:"You are not allowed to remove a team member",YOU_ARE_NOT_ALLOWED_TO_ACCESS_THIS_ORGANIZATION:"You are not allowed to access this organization as an owner",YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION:"You are not a member of this organization",MISSING_AC_INSTANCE:"Dynamic Access Control requires a pre-defined ac instance on the server auth plugin. Read server logs for more information",YOU_MUST_BE_IN_AN_ORGANIZATION_TO_CREATE_A_ROLE:"You must be in an organization to create a role",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE:"You are not allowed to create a role",YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE:"You are not allowed to update a role",YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE:"You are not allowed to delete a role",YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE:"You are not allowed to read a role",YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE:"You are not allowed to list a role",YOU_ARE_NOT_ALLOWED_TO_GET_A_ROLE:"You are not allowed to get a role",TOO_MANY_ROLES:"This organization has too many roles",INVALID_RESOURCE:"The provided permission includes an invalid resource",ROLE_NAME_IS_ALREADY_TAKEN:"That role name is already taken",CANNOT_DELETE_A_PRE_DEFINED_ROLE:"Cannot delete a pre-defined role"}),r.object({organizationId:r.string().optional().meta({description:"The id of the organization to create the role in. If not provided, the user's active organization will be used."}),role:r.string().meta({description:"The name of the role to create"}),permission:r.record(r.string(),r.array(r.string())).meta({description:"The permission to assign to the role"})}),r.object({organizationId:r.string().optional().meta({description:"The id of the organization to create the role in. If not provided, the user's active organization will be used."})}).and(r.union([r.object({roleName:r.string().nonempty().meta({description:"The name of the role to delete"})}),r.object({roleId:r.string().nonempty().meta({description:"The id of the role to delete"})})])),r.object({organizationId:r.string().optional().meta({description:"The id of the organization to list roles for. If not provided, the user's active organization will be used."})}).optional(),r.object({organizationId:r.string().optional().meta({description:"The id of the organization to read a role for. If not provided, the user's active organization will be used."})}).and(r.union([r.object({roleName:r.string().nonempty().meta({description:"The name of the role to read"})}),r.object({roleId:r.string().nonempty().meta({description:"The id of the role to read"})})])).optional(),r.union([r.object({roleName:r.string().nonempty().meta({description:"The name of the role to update"})}),r.object({roleId:r.string().nonempty().meta({description:"The id of the role to update"})})]);var bG=bG;r.object({email:r.string().meta({description:"The email address of the user to invite"}),role:r.union([r.string().meta({description:"The role to assign to the user"}),r.array(r.string().meta({description:"The roles to assign to the user"}))]).meta({description:'The role(s) to assign to the user. It can be `admin`, `member`, owner. Eg: "member"'}),organizationId:r.string().meta({description:"The organization ID to invite the user to"}).optional(),resend:r.boolean().meta({description:"Resend the invitation email, if the user is already invited. Eg: true"}).optional(),teamId:r.union([r.string().meta({description:"The team ID to invite the user to"}).optional(),r.array(r.string()).meta({description:"The team IDs to invite the user to"}).optional()])}),r.object({invitationId:r.string().meta({description:"The ID of the invitation to accept"})}),r.object({invitationId:r.string().meta({description:"The ID of the invitation to reject"})}),r.object({invitationId:r.string().meta({description:"The ID of the invitation to cancel"})}),r.object({id:r.string().meta({description:"The ID of the invitation to get"})}),r.object({organizationId:r.string().meta({description:"The ID of the organization to list invitations for"}).optional()}).optional();var bG=bG;r.object({userId:s.coerce.string().meta({description:'The user Id which represents the user to be added as a member. If `null` is provided, then it\'s expected to provide session headers. Eg: "user-id"'}),role:r.union([r.string(),r.array(r.string())]).meta({description:'The role(s) to assign to the new member. Eg: ["admin", "sale"]'}),organizationId:r.string().meta({description:'An optional organization ID to pass. If not provided, will default to the user\'s active organization. Eg: "org-id"'}).optional(),teamId:r.string().meta({description:'An optional team ID to add the member to. Eg: "team-id"'}).optional()}),r.object({memberIdOrEmail:r.string().meta({description:"The ID or email of the member to remove"}),organizationId:r.string().meta({description:'The ID of the organization to remove the member from. If not provided, the active organization will be used. Eg: "org-id"'}).optional()}),r.object({role:r.union([r.string(),r.array(r.string())]).meta({description:'The new role to be applied. This can be a string or array of strings representing the roles. Eg: ["admin", "sale"]'}),memberId:r.string().meta({description:'The member id to apply the role update to. Eg: "member-id"'}),organizationId:r.string().meta({description:'An optional organization ID which the member is a part of to apply the role update. If not provided, you must provide session headers to get the active organization. Eg: "organization-id"'}).optional()}),r.object({organizationId:r.string().meta({description:'The organization Id for the member to leave. Eg: "organization-id"'})}),r.object({userId:r.string().meta({description:"The user ID to get the role for. If not provided, will default to the current user's"}).optional(),organizationId:r.string().meta({description:'The organization ID to list members for. If not provided, will default to the user\'s active organization. Eg: "organization-id"'}).optional(),organizationSlug:r.string().meta({description:'The organization slug to list members for. If not provided, will default to the user\'s active organization. Eg: "organization-slug"'}).optional()}).optional(),r.object({name:r.string().min(1).meta({description:"The name of the organization"}),slug:r.string().min(1).meta({description:"The slug of the organization"}),userId:s.coerce.string().meta({description:'The user id of the organization creator. If not provided, the current user will be used. Should only be used by admins or when called by the server. server-only. Eg: "user-id"'}).optional(),logo:r.string().meta({description:"The logo of the organization"}).optional(),metadata:r.record(r.string(),r.any()).meta({description:"The metadata of the organization"}).optional(),keepCurrentActiveOrganization:r.boolean().meta({description:"Whether to keep the current active organization active after creating a new one. Eg: true"}).optional()}),r.object({slug:r.string().meta({description:'The organization slug to check. Eg: "my-org"'})}),r.object({name:r.string().min(1).meta({description:"The name of the organization"}).optional(),slug:r.string().min(1).meta({description:"The slug of the organization"}).optional(),logo:r.string().meta({description:"The logo of the organization"}).optional(),metadata:r.record(r.string(),r.any()).meta({description:"The metadata of the organization"}).optional()}),r.object({organizationId:r.string().meta({description:"The organization id to delete"})}),r.optional(r.object({organizationId:r.string().meta({description:"The organization id to get"}).optional(),organizationSlug:r.string().meta({description:"The organization slug to get"}).optional(),membersLimit:r.number().or(r.string().transform(a=>parseInt(a))).meta({description:"The limit of members to get. By default, it uses the membershipLimit option which defaults to 100."}).optional()})),r.object({organizationId:r.string().meta({description:'The organization id to set as active. It can be null to unset the active organization. Eg: "org-id"'}).nullable().optional(),organizationSlug:r.string().meta({description:'The organization slug to set as active. It can be null to unset the active organization if organizationId is not provided. Eg: "org-slug"'}).optional()});var ae=ad;let eb=r.string(),ec=r.enum(["pending","accepted","rejected","canceled"]).default("pending");r.object({id:r.string().default(ae.r),name:r.string(),slug:r.string(),logo:r.string().nullish().optional(),metadata:r.record(r.string(),r.unknown()).or(r.string().transform(a=>JSON.parse(a))).optional(),createdAt:r.date()}),r.object({id:r.string().default(ae.r),organizationId:r.string(),userId:s.coerce.string(),role:eb,createdAt:r.date().default(()=>new Date)}),r.object({id:r.string().default(ae.r),organizationId:r.string(),email:r.string(),role:eb,status:ec,teamId:r.string().nullish(),inviterId:r.string(),expiresAt:r.date(),createdAt:r.date().default(()=>new Date)}),r.object({id:r.string().default(ae.r),name:r.string().min(1),organizationId:r.string(),createdAt:r.date(),updatedAt:r.date().optional()}),r.object({id:r.string().default(ae.r),teamId:r.string(),userId:r.string(),createdAt:r.date().default(()=>new Date)}),r.object({id:r.string().default(ae.r),organizationId:r.string(),role:r.string(),permission:r.record(r.string(),r.array(r.string())),createdAt:r.date().default(()=>new Date),updatedAt:r.date().optional()});let ed=["admin","member","owner"];r.union([r.enum(ed),r.array(r.enum(ed))]),r.object({name:r.string().meta({description:'The name of the team. Eg: "my-team"'}),organizationId:r.string().meta({description:'The organization ID which the team will be created in. Defaults to the active organization. Eg: "organization-id"'}).optional()}),r.object({teamId:r.string().meta({description:'The team ID of the team to remove. Eg: "team-id"'}),organizationId:r.string().meta({description:'The organization ID which the team falls under. If not provided, it will default to the user\'s active organization. Eg: "organization-id"'}).optional()}),r.optional(r.object({organizationId:r.string().meta({description:'The organization ID which the teams are under to list. Defaults to the users active organization. Eg: "organization-id"'}).optional()})),r.object({teamId:r.string().meta({description:"The team id to set as active. It can be null to unset the active team"}).nullable().optional()}),r.optional(r.object({teamId:r.string().optional().meta({description:"The team whose members we should return. If this is not provided the members of the current active team get returned."})})),r.object({teamId:r.string().meta({description:"The team the user should be a member of."}),userId:s.coerce.string().meta({description:"The user Id which represents the user to be added as a member."})}),r.object({teamId:r.string().meta({description:"The team the user should be removed from."}),userId:s.coerce.string().meta({description:"The user which should be removed from the team."})}),r.object({organizationId:r.string().optional()}).and(r.union([r.object({permission:r.record(r.string(),r.array(r.string())),permissions:r.undefined()}),r.object({permission:r.undefined(),permissions:r.record(r.string(),r.array(r.string()))})]));var dP=ad;(0,dP.i)({INVALID_PHONE_NUMBER:"Invalid phone number",PHONE_NUMBER_EXIST:"Phone number already exists",PHONE_NUMBER_NOT_EXIST:"phone number isn't registered",INVALID_PHONE_NUMBER_OR_PASSWORD:"Invalid phone number or password",UNEXPECTED_ERROR:"Unexpected error",OTP_NOT_FOUND:"OTP not found",OTP_EXPIRED:"OTP expired",INVALID_OTP:"Invalid OTP",PHONE_NUMBER_NOT_VERIFIED:"Phone number not verified",PHONE_NUMBER_CANNOT_BE_UPDATED:"Phone number cannot be updated",SEND_OTP_NOT_IMPLEMENTED:"sendOTP not implemented",TOO_MANY_ATTEMPTS:"Too many attempts"});var bG=bG;r.object({phoneNumber:r.string().meta({description:'Phone number to sign in. Eg: "+1234567890"'}),password:r.string().meta({description:"Password to use for sign in."}),rememberMe:r.boolean().meta({description:"Remember the session. Eg: true"}).optional()}),r.object({phoneNumber:r.string().meta({description:'Phone number to send OTP. Eg: "+1234567890"'})}),r.object({phoneNumber:r.string().meta({description:'Phone number to verify. Eg: "+1234567890"'}),code:r.string().meta({description:'OTP code. Eg: "123456"'}),disableSession:r.boolean().meta({description:"Disable session creation after verification. Eg: false"}).optional(),updatePhoneNumber:r.boolean().meta({description:"Check if there is a session and update the phone number. Eg: true"}).optional()}),r.object({phoneNumber:r.string()}),r.object({otp:r.string().meta({description:'The one time password to reset the password. Eg: "123456"'}),phoneNumber:r.string().meta({description:'The phone number to the account which intends to reset the password for. Eg: "+1234567890"'}),newPassword:r.string().meta({description:'The new password. Eg: "new-and-secure-password"'})});var ee=a.i(584082),ef=a.i(92727);let eg=BigInt(0),eh=BigInt(1),ei=BigInt(2),ej=BigInt(7),ek=BigInt(256),el=BigInt(113),em=[],en=[],eo=[];for(let a=0,b=eh,c=1,d=0;a<24;a++){[c,d]=[d,(2*c+3*d)%5],em.push(2*(5*d+c)),en.push((a+1)*(a+2)/2%64);let e=eg;for(let a=0;a<7;a++)(b=(b<<eh^(b>>ej)*el)%ek)&ei&&(e^=eh<<(eh<<BigInt(a))-eh);eo.push(e)}let ep=(0,ef.split)(eo,!0),eq=ep[0],er=ep[1];r.object({walletAddress:r.string().regex(/^0[xX][a-fA-F0-9]{40}$/i).length(42),chainId:r.number().int().positive().max(0x7fffffff).optional().default(1)});var dP=ad;(0,dP.i)({OTP_NOT_ENABLED:"OTP not enabled",OTP_HAS_EXPIRED:"OTP has expired",TOTP_NOT_ENABLED:"TOTP not enabled",TWO_FACTOR_NOT_ENABLED:"Two factor isn't enabled",BACKUP_CODES_NOT_ENABLED:"Backup codes aren't enabled",INVALID_BACKUP_CODE:"Invalid backup code",INVALID_CODE:"Invalid code",TOO_MANY_ATTEMPTS_REQUEST_NEW_CODE:"Too many attempts. Please request a new code.",INVALID_TWO_FACTOR_COOKIE:"Invalid two factor cookie"});var as=ad;r.object({code:r.string().meta({description:'A backup code to verify. Eg: "123456"'}),disableSession:r.boolean().meta({description:"If true, the session cookie will not be set."}).optional(),trustDevice:r.boolean().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"}).optional()}),r.object({userId:s.coerce.string().meta({description:'The user ID to view all backup codes. Eg: "user-id"'})}),r.object({password:r.string().meta({description:"The users password."})});var bG=bG;r.object({code:r.string().meta({description:'The otp code to verify. Eg: "012345"'}),trustDevice:r.boolean().optional().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"})}),r.object({trustDevice:r.boolean().optional().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"})}).optional();var bG=bG;r.object({secret:r.string().meta({description:"The secret to generate the TOTP code"})}),r.object({password:r.string().meta({description:"User password"})}),r.object({code:r.string().meta({description:'The otp code to verify. Eg: "012345"'}),trustDevice:r.boolean().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"}).optional()});var bG=bG;r.object({password:r.string().meta({description:"User password"}),issuer:r.string().meta({description:"Custom issuer for the TOTP URI"}).optional()}),r.object({password:r.string().meta({description:"User password"})});var dP=ad;(0,dP.i)({INVALID_USERNAME_OR_PASSWORD:"Invalid username or password",EMAIL_NOT_VERIFIED:"Email not verified",UNEXPECTED_ERROR:"Unexpected error",USERNAME_IS_ALREADY_TAKEN:"Username is already taken. Please try another.",USERNAME_TOO_SHORT:"Username is too short",USERNAME_TOO_LONG:"Username is too long",INVALID_USERNAME:"Username is invalid",INVALID_DISPLAY_USERNAME:"Display username is invalid"});var bG=bG;r.object({username:r.string().meta({description:"The username of the user"}),password:r.string().meta({description:"The password of the user"}),rememberMe:r.boolean().meta({description:"Remember the user session"}).optional(),callbackURL:r.string().meta({description:"The URL to redirect to after email verification"}).optional()}),r.object({username:r.string().meta({description:"The username to check"})});let es=((a,b)=>{let c=b(a),{api:d}=db(c,a);return{handler:async b=>{let d=await c,e=d.options.basePath||"/api/auth";if(!d.options.baseURL){let a=df(void 0,e,b,void 0,d.options.advanced?.trustedProxyHeaders);if(a)d.baseURL=a,d.options.baseURL=dg(d.baseURL)||void 0;else throw new aY.BetterAuthError("Could not get base URL from request. Please provide a valid base URL.")}d.trustedOrigins=await dl(d.options,b);let{handler:f}=((a,b)=>{let{api:c,middlewares:d}=db(a,b),e=new URL(a.baseURL).pathname;return((a,b)=>{if(!b?.openapi?.disabled){let c={path:"/api/reference",...b?.openapi};a.openapi=P(c.path,{method:"GET"},async b=>{let d,e;return new Response((d=await V(a),e=c.scalar,`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(d)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${e?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(e.logo)}`:void 0} ,
	   	theme: ${e?.theme||"saturn"},
        metaData: {
			title: ${e?.title||"Open API Reference"},
			description: ${e?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`),{headers:{"Content-Type":"text/html"}})})}let c=X(),d=X();for(let b of Object.values(a))if(!(!b.options||!b.path||b.options?.metadata?.SERVER_ONLY))for(let a of Array.isArray(b.options?.method)?b.options.method:[b.options?.method])$(c,a,b.path,b);if(b?.routerMiddleware?.length)for(let{path:a,middleware:c}of b.routerMiddleware)$(d,"*",a,c);let e=async a=>{let e=new URL(a.url),f=e.pathname,g=b?.basePath&&"/"!==b.basePath?f.split(b.basePath).reduce((a,c,d)=>(0!==d&&(d>1?a.push(`${b.basePath}${c}`):a.push(c)),a),[]).join(""):e.pathname;if(!g?.length||/\/{2,}/.test(g))return new Response(null,{status:404,statusText:"Not Found"});let h=function(a,b="",c,d){47===c.charCodeAt(c.length-1)&&(c=c.slice(0,-1));let e=a.static[c];if(e&&e.methods){let a=e.methods[b]||e.methods[""];if(void 0!==a)return a[0]}let f=Y(c),g=function a(b,c,d,e,f){if(f===e.length){if(c.methods){let a=c.methods[d]||c.methods[""];if(a)return a}if(c.param&&c.param.methods){let a=c.param.methods[d]||c.param.methods[""];if(a){let b=a[0].paramsMap;if(b?.[b?.length-1]?.[2])return a}}if(c.wildcard&&c.wildcard.methods){let a=c.wildcard.methods[d]||c.wildcard.methods[""];if(a){let b=a[0].paramsMap;if(b?.[b?.length-1]?.[2])return a}}return}let g=e[f];if(c.static){let h=c.static[g];if(h){let c=a(b,h,d,e,f+1);if(c)return c}}if(c.param){let h=a(b,c.param,d,e,f+1);if(h){if(c.param.hasRegexParam){let a=h.find(a=>a.paramsRegexp[f]?.test(g))||h.find(a=>!a.paramsRegexp[f]);return a?[a]:void 0}return h}}if(c.wildcard&&c.wildcard.methods)return c.wildcard.methods[d]||c.wildcard.methods[""]}(a,a.root,b,f,0)?.[0];if(void 0!==g)return{data:g.data,params:g.paramsMap?Z(f,g.paramsMap):void 0}}(c,a.method,g);if(g.endsWith("/")!==h?.data?.path?.endsWith("/")&&!b?.skipTrailingSlashes||!h?.data)return new Response(null,{status:404,statusText:"Not Found"});let i={};e.searchParams.forEach((a,b)=>{b in i?Array.isArray(i[b])?i[b].push(a):i[b]=[i[b],a]:i[b]=a});let j=h.data;try{let c=j.options.metadata?.allowedMediaTypes||b?.allowedMediaTypes,e={path:g,method:a.method,headers:a.headers,params:h.params?JSON.parse(JSON.stringify(h.params)):{},request:a,body:j.options.disableBody?void 0:await z(j.options.cloneRequest?a.clone():a,c),query:i,_flag:"router",asResponse:!0,context:b?.routerContext},f=function(a,b="",c,d){47===c.charCodeAt(c.length-1)&&(c=c.slice(0,-1));let e=Y(c);return(function a(b,c,d,e,f,g=[]){let h=e[f];if(c.wildcard&&c.wildcard.methods){let a=c.wildcard.methods[d]||c.wildcard.methods[""];a&&g.push(...a)}if(c.param&&(a(b,c.param,d,e,f+1,g),f===e.length&&c.param.methods)){let a=c.param.methods[d]||c.param.methods[""];if(a){let b=a[0].paramsMap;b?.[b?.length-1]?.[2]&&g.push(...a)}}let i=c.static?.[h];if(i&&a(b,i,d,e,f+1,g),f===e.length&&c.methods){let a=c.methods[d]||c.methods[""];a&&g.push(...a)}return g})(a,a.root,b,e,0).map(a=>({data:a.data,params:a.paramsMap?Z(e,a.paramsMap):void 0}))}(d,"*",g);if(f?.length)for(let{data:a,params:b}of f){let c=await a({...e,params:b,asResponse:!1});if(c instanceof Response)return c}return await j(e)}catch(a){if(b?.onError)try{let c=await b.onError(a);if(c instanceof Response)return C(c)}catch(a){if(A(a))return C(a);throw a}if(b?.throwError)throw a;if(A(a))return C(a);return console.error("# SERVER_ERROR: ",a),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async a=>{let c=await b?.onRequest?.(a);if(c instanceof Response)return c;let d=await e(c instanceof Request?c:a),f=await b?.onResponse?.(d);return f instanceof Response?f:d},endpoints:a}})(c,{routerContext:a,openapi:{disabled:!0},basePath:e,routerMiddleware:[{path:"/**",middleware:an},...d],allowedMediaTypes:["application/json"],async onRequest(b){let c=a.options.disabledPaths||[],d=new URL(b.url).pathname.replace(/\/+$/,"")||"/",f="/"===e?d:d.startsWith(e)?d.slice(e.length).replace(/\/+$/,"")||"/":d;if(c.includes(f))return new Response("Not Found",{status:404});for(let c of a.options.plugins||[])if(c.onRequest){let d=await c.onRequest(b,a);if(d&&"response"in d)return d.response;if(d&&"request"in d){let b=await au(d.request,a);if(b)return b;return d.request}}return au(b,a)},async onResponse(b){for(let c of a.options.plugins||[])if(c.onResponse){let d=await c.onResponse(b,a);if(d)return d.response}return b},onError(c){if(c instanceof x&&"FOUND"===c.status)return;if(b.onAPIError?.throw)throw c;if(b.onAPIError?.onError)return void b.onAPIError.onError(c,a);let d=b.logger?.level,e="error"===d||"warn"===d||"debug"===d?aW.logger:void 0;if(b.logger?.disabled!==!0){if(c&&"object"==typeof c&&"message"in c&&"string"==typeof c.message&&(c.message.includes("no column")||c.message.includes("column")||c.message.includes("relation")||c.message.includes("table")||c.message.includes("does not exist")))return void a.logger?.error(c.message);c instanceof x?("INTERNAL_SERVER_ERROR"===c.status&&a.logger.error(c.status,c),e?.error(c.message)):a.logger?.error(c&&"object"==typeof c&&"name"in c?c.name:"",c)}}})})(d,a);return(0,ai.r)(d.adapter,()=>f(b))},api:d,options:a,$context:c,$ERROR_CODES:{...a.plugins?.reduce((a,b)=>b.$ERROR_CODES?{...a,...b.$ERROR_CODES}:a,{}),...bG.n}}})({database:(m=a.i(231191).prisma,n={provider:"postgresql"},g=null,h=a=>({getFieldName:b,getModelName:c,getFieldAttributes:d,getDefaultModelName:e,schema:f})=>{let g=(a,d,g)=>{if(!a&&!g)return;let i={};if(a)for(let c of a)i[b({model:d,field:c})]=!0;if(g){if(!a){let a=f[e(d)]?.fields||{};for(let c of(a.id={type:"string"},Object.keys(a)))i[b({model:d,field:c})]=!0}for(let[a,b]of Object.entries(g)){let e=h(d,c(a),f);"one-to-one"===b.relation?i[e]=!0:i[e]={take:b.limit}}}return i},h=(a,b,d)=>{try{let f=e(a),g=e(b),h=c(b).toLowerCase(),i=Object.entries(d[g]?.fields||{}).filter(([a,b])=>b.references&&e(b.references.model)===f);if(i.length>0){let[a,b]=i[0];return b?.unique===!0||!0===n.usePlural?h:`${h}s`}if((i=Object.entries(d[f]?.fields||{}).filter(([a,b])=>b.references&&e(b.references.model)===g)).length>0)return h}catch{}return`${c(b).toLowerCase()}s`};function i(a){switch(a){case"starts_with":return"startsWith";case"ends_with":return"endsWith";case"ne":return"not";case"not_in":return"notIn";default:return a}}let j=({action:a,model:c,where:d})=>{if(!d||!d.length)return{};let e=a=>{let d=b({model:c,field:a.field});if("ne"===a.operator&&null===a.value)return{};if(("in"===a.operator||"not_in"===a.operator)&&Array.isArray(a.value)){let b=a.value.filter(a=>null!=a);if(0===b.length)if("in"===a.operator)return{AND:[{[d]:{equals:"__never__"}},{[d]:{not:"__never__"}}]};else return{};return{[d]:{[i(a.operator)]:b}}}return"eq"!==a.operator&&a.operator?{[d]:{[i(a.operator)]:a.value}}:{[d]:a.value}};if("delete"===a){let a=d.find(a=>"id"===a.field);if(a){let f=b({model:c,field:"id"}),g=e(a),h=d.filter(a=>"id"!==a.field);if(0===h.length)return g;let i=h.filter(a=>"AND"===a.connector||!a.connector),j=h.filter(a=>"OR"===a.connector),k=i.map(a=>e(a)),l=j.map(a=>e(a)),m={};return f in g?m[f]=g[f]:Object.assign(m,g),k.length>0&&(m.AND=k),l.length>0&&(m.OR=l),m}}if(1===d.length){let a=d[0];if(!a)return;return e(a)}let f=d.filter(a=>"AND"===a.connector||!a.connector),g=d.filter(a=>"OR"===a.connector),h=f.map(a=>e(a)),j=g.map(a=>e(a));return{...h.length?{AND:h}:{},...j.length?{OR:j}:{}}};return{async create({model:b,data:c,select:d}){if(!a[b])throw new aY.BetterAuthError(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await a[b].create({data:c,select:g(d,b)})},async findOne({model:b,where:d,select:e,join:i}){let k=j({model:b,where:d,action:"findOne"});if(!a[b])throw new aY.BetterAuthError(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let l=new Map;for(let a of Object.keys(i??{})){let d=h(b,a,f);l.set(d,c(a))}let m=g(e,b,i),n=await a[b].findFirst({where:k,select:m});if(i&&n)for(let[a,b]of l.entries())a!==b&&a in n&&(n[b]=n[a],delete n[a]);return n},async findMany({model:d,where:e,limit:i,offset:k,sortBy:l,join:m}){let n=j({model:d,where:e,action:"findMany"});if(!a[d])throw new aY.BetterAuthError(`Model ${d} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let o=new Map;if(m)for(let[a,b]of Object.entries(m)){let b=h(d,a,f);o.set(b,c(a))}let p=g(void 0,d,m),q=await a[d].findMany({where:n,take:i||100,skip:k||0,...l?.field?{orderBy:{[b({model:d,field:l.field})]:"desc"===l.direction?"desc":"asc"}}:{},select:p});if(m&&Array.isArray(q))for(let a of q)for(let[b,c]of o.entries())b!==c&&b in a&&(a[c]=a[b],delete a[b]);return q},async count({model:b,where:c}){let d=j({model:b,where:c,action:"count"});if(!a[b])throw new aY.BetterAuthError(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await a[b].count({where:d})},async update({model:b,where:c,update:d}){if(!a[b])throw new aY.BetterAuthError(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let e=j({model:b,where:c,action:"update"});return await a[b].update({where:e,data:d})},async updateMany({model:b,where:c,update:d}){if(!a[b])throw new aY.BetterAuthError(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let e=j({model:b,where:c,action:"updateMany"}),f=await a[b].updateMany({where:e,data:d});return f?f.count:0},async delete({model:b,where:c}){if(!a[b])throw new aY.BetterAuthError(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let d=j({model:b,where:c,action:"delete"});try{await a[b].delete({where:d})}catch(a){if(a?.meta?.cause==="Record to delete does not exist.")return;console.log(a)}},async deleteMany({model:b,where:c}){let d=j({model:b,where:c,action:"deleteMany"}),e=await a[b].deleteMany({where:d});return e?e.count:0},options:n}},i=null,i={config:{adapterId:"prisma",adapterName:"Prisma Adapter",usePlural:n.usePlural??!1,debugLogs:n.debugLogs??!1,supportsUUIDs:"postgresql"===n.provider,supportsArrays:"postgresql"===n.provider||"mongodb"===n.provider,transaction:!!n.transaction&&(a=>m.$transaction(b=>a((0,bc.createAdapterFactory)({config:i.config,adapter:h(b)})(g))))},adapter:h(m)},j=(0,bc.createAdapterFactory)(i),a=>(g=a,j(a))),emailAndPassword:{enabled:!0,disableSignUp:!0},socialProviders:{google:{enabled:!0,clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET},microsoft:{enabled:!0,clientId:process.env.MICROSOFT_CLIENT_ID,clientSecret:process.env.MICROSOFT_CLIENT_SECRET}},user:{additionalFields:{role:{type:"string",required:!1,defaultValue:"STUDENT"},institutionId:{type:"string",required:!1},onboardingCompleted:{type:"boolean",required:!1,defaultValue:!1,input:!1}}},plugins:[(a=>{let b={defaultRole:a?.defaultRole??"user",adminRoles:a?.adminRoles??["admin"],bannedUserMessage:a?.bannedUserMessage??"You have been banned from this application. Please contact support if you believe this is an error.",...a};if(a?.adminRoles){let b=(Array.isArray(a.adminRoles)?a.adminRoles:[...a.adminRoles.split(",")]).filter(b=>!Object.keys(a?.roles||dN).map(a=>a.toLowerCase()).includes(b.toLowerCase()));if(b.length>0)throw new aY.BetterAuthError(`Invalid admin roles: ${b.join(", ")}. Admin roles must be defined in the 'roles' configuration.`)}return{id:"admin",init:()=>({options:{databaseHooks:{user:{create:{before:async b=>({data:{role:a?.defaultRole??"user",...b}})}},session:{create:{async before(a,c){if(!c)return;let d=await c.context.internalAdapter.findUserById(a.userId);if(d.banned){if(d.banExpires&&new Date(d.banExpires).getTime()<Date.now())return void await c.context.internalAdapter.updateUser(a.userId,{banned:!1,banReason:null,banExpires:null});if(c&&(c.path.startsWith("/callback")||c.path.startsWith("/oauth2/callback"))){let a=c.context.options.onAPIError?.errorURL||`${c.context.baseURL}/error`;throw c.redirect(`${a}?error=banned&error_description=${b.bannedUserMessage}`)}throw new x("FORBIDDEN",{message:b.bannedUserMessage,code:"BANNED_USER"})}}}}}}}),hooks:{after:[{matcher:a=>"/list-sessions"===a.path,handler:ak(async a=>{let b=await dO(a);if(!b)return;let c=b.filter(a=>!a.impersonatedBy);return a.json(c)})}]},endpoints:{setRole:am("/admin/set-role",{method:"POST",body:dU,requireHeaders:!0,use:[dS],metadata:{openapi:{operationId:"setUserRole",summary:"Set the role of a user",description:"Set the role of a user",responses:{200:{description:"User role updated",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},async a=>{if(!dR({userId:a.context.session.user.id,role:a.context.session.user.role,options:b,permissions:{user:["set-role"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE});let c=b.roles;if(c){for(let b of Array.isArray(a.body.role)?a.body.role:[a.body.role])if(!c[b])throw new x("BAD_REQUEST",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE})}let d=await a.context.internalAdapter.updateUser(a.body.userId,{role:dT(a.body.role)});return a.json({user:d})}),getUser:am("/admin/get-user",{method:"GET",query:dV,use:[dS],metadata:{openapi:{operationId:"getUser",summary:"Get an existing user",description:"Get an existing user",responses:{200:{description:"User",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async a=>{let{id:c}=a.query;if(!dR({userId:a.context.session.user.id,role:a.context.session.user.role,options:b,permissions:{user:["get"]}}))throw a.error("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_GET_USER,code:"YOU_ARE_NOT_ALLOWED_TO_GET_USER"});let d=await a.context.internalAdapter.findUserById(c);if(!d)throw new x("NOT_FOUND",{message:bG.n.USER_NOT_FOUND});return az(a.context.options,d)}),createUser:am("/admin/create-user",{method:"POST",body:dW,metadata:{openapi:{operationId:"createUser",summary:"Create a new user",description:"Create a new user",responses:{200:{description:"User created",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},async a=>{let c=await bI(a);if(!c&&(a.request||a.headers))throw a.error("UNAUTHORIZED");if(c&&!dR({userId:c.user.id,role:c.user.role,options:b,permissions:{user:["create"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS});let d=a.body.email.toLowerCase();if(!r.email().safeParse(d).success)throw new x("BAD_REQUEST",{message:bG.n.INVALID_EMAIL});if(await a.context.internalAdapter.findUserByEmail(d))throw new x("BAD_REQUEST",{message:dQ.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let e=await a.context.internalAdapter.createUser({email:d,name:a.body.name,role:(a.body.role&&dT(a.body.role))??b?.defaultRole??"user",...a.body.data});if(!e)throw new x("INTERNAL_SERVER_ERROR",{message:dQ.FAILED_TO_CREATE_USER});let f=await a.context.password.hash(a.body.password);return await a.context.internalAdapter.linkAccount({accountId:e.id,providerId:"credential",password:f,userId:e.id}),a.json({user:e})}),adminUpdateUser:am("/admin/update-user",{method:"POST",body:dX,use:[dS],metadata:{openapi:{operationId:"updateUser",summary:"Update a user",description:"Update a user's details",responses:{200:{description:"User updated",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async a=>{if(!dR({userId:a.context.session.user.id,role:a.context.session.user.role,options:b,permissions:{user:["update"]}}))throw a.error("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS,code:"YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS"});if(0===Object.keys(a.body.data).length)throw new x("BAD_REQUEST",{message:dQ.NO_DATA_TO_UPDATE});if(Object.prototype.hasOwnProperty.call(a.body.data,"role")){if(!dR({userId:a.context.session.user.id,role:a.context.session.user.role,options:b,permissions:{user:["set-role"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE});let c=a.body.data.role,d=Array.isArray(c)?c:[c];for(let a of d){if("string"!=typeof a)throw new x("BAD_REQUEST",{message:dQ.INVALID_ROLE_TYPE});if(b.roles&&!b.roles[a])throw new x("BAD_REQUEST",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE})}a.body.data.role=dT(d)}let c=await a.context.internalAdapter.updateUser(a.body.userId,a.body.data);return a.json(c)}),listUsers:am("/admin/list-users",{method:"GET",use:[dS],query:dY,metadata:{openapi:{operationId:"listUsers",summary:"List users",description:"List users",responses:{200:{description:"List of users",content:{"application/json":{schema:{type:"object",properties:{users:{type:"array",items:{$ref:"#/components/schemas/User"}},total:{type:"number"},limit:{type:"number"},offset:{type:"number"}},required:["users","total"]}}}}}}}},async a=>{let c=a.context.session;if(!dR({userId:a.context.session.user.id,role:c.user.role,options:b,permissions:{user:["list"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS});let d=[];a.query?.searchValue&&d.push({field:a.query.searchField||"email",operator:a.query.searchOperator||"contains",value:a.query.searchValue}),a.query?.filterValue&&d.push({field:a.query.filterField||"email",operator:a.query.filterOperator||"eq",value:a.query.filterValue});try{let b=await a.context.internalAdapter.listUsers(Number(a.query?.limit)||void 0,Number(a.query?.offset)||void 0,a.query?.sortBy?{field:a.query.sortBy,direction:a.query.sortDirection||"asc"}:void 0,d.length?d:void 0),c=await a.context.internalAdapter.countTotalUsers(d.length?d:void 0);return a.json({users:b,total:c,limit:Number(a.query?.limit)||void 0,offset:Number(a.query?.offset)||void 0})}catch{return a.json({users:[],total:0})}}),listUserSessions:am("/admin/list-user-sessions",{method:"POST",use:[dS],body:dZ,metadata:{openapi:{operationId:"listUserSessions",summary:"List user sessions",description:"List user sessions",responses:{200:{description:"List of user sessions",content:{"application/json":{schema:{type:"object",properties:{sessions:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}}}},async a=>{let c=a.context.session;if(!dR({userId:a.context.session.user.id,role:c.user.role,options:b,permissions:{session:["list"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS});return{sessions:await a.context.internalAdapter.listSessions(a.body.userId)}}),unbanUser:am("/admin/unban-user",{method:"POST",body:d$,use:[dS],metadata:{openapi:{operationId:"unbanUser",summary:"Unban a user",description:"Unban a user",responses:{200:{description:"User unbanned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async a=>{let c=a.context.session;if(!dR({userId:a.context.session.user.id,role:c.user.role,options:b,permissions:{user:["ban"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});let d=await a.context.internalAdapter.updateUser(a.body.userId,{banned:!1,banExpires:null,banReason:null,updatedAt:new Date});return a.json({user:d})}),banUser:am("/admin/ban-user",{method:"POST",body:d_,use:[dS],metadata:{openapi:{operationId:"banUser",summary:"Ban a user",description:"Ban a user",responses:{200:{description:"User banned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async a=>{let c=a.context.session;if(!dR({userId:a.context.session.user.id,role:c.user.role,options:b,permissions:{user:["ban"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});if(!await a.context.internalAdapter.findUserById(a.body.userId))throw new x("NOT_FOUND",{message:bG.n.USER_NOT_FOUND});if(a.body.userId===a.context.session.user.id)throw new x("BAD_REQUEST",{message:dQ.YOU_CANNOT_BAN_YOURSELF});let d=await a.context.internalAdapter.updateUser(a.body.userId,{banned:!0,banReason:a.body.banReason||b?.defaultBanReason||"No reason",banExpires:a.body.banExpiresIn?av(a.body.banExpiresIn,"sec"):b?.defaultBanExpiresIn?av(b.defaultBanExpiresIn,"sec"):void 0,updatedAt:new Date});return await a.context.internalAdapter.deleteSessions(a.body.userId),a.json({user:d})}),impersonateUser:am("/admin/impersonate-user",{method:"POST",body:d0,use:[dS],metadata:{openapi:{operationId:"impersonateUser",summary:"Impersonate a user",description:"Impersonate a user",responses:{200:{description:"Impersonation session created",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}}}}}}}}}},async a=>{if(!dR({userId:a.context.session.user.id,role:a.context.session.user.role,options:b,permissions:{user:["impersonate"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS});let c=await a.context.internalAdapter.findUserById(a.body.userId);if(!c)throw new x("NOT_FOUND",{message:"User not found"});let d=(Array.isArray(b.adminRoles)?b.adminRoles:b.adminRoles?.split(",")||[]).map(a=>a.trim()),e=(c.role||b.defaultRole||"user").split(",");if(!0!==b.allowImpersonatingAdmins&&(e.some(a=>d.includes(a))||b.adminUserIds?.includes(c.id)))throw new x("FORBIDDEN",{message:dQ.YOU_CANNOT_IMPERSONATE_ADMINS});let f=await a.context.internalAdapter.createSession(c.id,!0,{impersonatedBy:a.context.session.user.id,expiresAt:b?.impersonationSessionDuration?av(b.impersonationSessionDuration,"sec"):av(3600,"sec")},!0);if(!f)throw new x("INTERNAL_SERVER_ERROR",{message:dQ.FAILED_TO_CREATE_USER});let g=a.context.authCookies;bF(a);let h=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret),i=a.context.createAuthCookie("admin_session");return await a.setSignedCookie(i.name,`${a.context.session.session.token}:${h||""}`,a.context.secret,g.sessionToken.options),await bE(a,{session:f,user:c},!0),a.json({session:f,user:c})}),stopImpersonating:am("/admin/stop-impersonating",{method:"POST",requireHeaders:!0},async a=>{let b=await bI(a);if(!b)throw new x("UNAUTHORIZED");if(!b.session.impersonatedBy)throw new x("BAD_REQUEST",{message:"You are not impersonating anyone"});let c=await a.context.internalAdapter.findUserById(b.session.impersonatedBy);if(!c)throw new x("INTERNAL_SERVER_ERROR",{message:"Failed to find user"});let d=a.context.createAuthCookie("admin_session").name,e=await a.getSignedCookie(d,a.context.secret);if(!e)throw new x("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});let[f,g]=e?.split(":"),h=await a.context.internalAdapter.findSession(f);if(!h||h.session.userId!==c.id)throw new x("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});return await a.context.internalAdapter.deleteSession(b.session.token),await bE(a,h,!!g),await a.setSignedCookie(d,"",a.context.secret,{...a.context.authCookies.sessionToken.options,maxAge:0}),a.json(h)}),revokeUserSession:am("/admin/revoke-user-session",{method:"POST",body:d1,use:[dS],metadata:{openapi:{operationId:"revokeUserSession",summary:"Revoke a user session",description:"Revoke a user session",responses:{200:{description:"Session revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async a=>{let c=a.context.session;if(!dR({userId:a.context.session.user.id,role:c.user.role,options:b,permissions:{session:["revoke"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await a.context.internalAdapter.deleteSession(a.body.sessionToken),a.json({success:!0})}),revokeUserSessions:am("/admin/revoke-user-sessions",{method:"POST",body:d2,use:[dS],metadata:{openapi:{operationId:"revokeUserSessions",summary:"Revoke all user sessions",description:"Revoke all user sessions",responses:{200:{description:"Sessions revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async a=>{let c=a.context.session;if(!dR({userId:a.context.session.user.id,role:c.user.role,options:b,permissions:{session:["revoke"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await a.context.internalAdapter.deleteSessions(a.body.userId),a.json({success:!0})}),removeUser:am("/admin/remove-user",{method:"POST",body:d3,use:[dS],metadata:{openapi:{operationId:"removeUser",summary:"Remove a user",description:"Delete a user and all their sessions and accounts. Cannot be undone.",responses:{200:{description:"User removed",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async a=>{let c=a.context.session;if(!dR({userId:a.context.session.user.id,role:c.user.role,options:b,permissions:{user:["delete"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS});if(a.body.userId===a.context.session.user.id)throw new x("BAD_REQUEST",{message:dQ.YOU_CANNOT_REMOVE_YOURSELF});if(!await a.context.internalAdapter.findUserById(a.body.userId))throw new x("NOT_FOUND",{message:"User not found"});return await a.context.internalAdapter.deleteUser(a.body.userId),a.json({success:!0})}),setUserPassword:am("/admin/set-user-password",{method:"POST",body:d4,use:[dS],metadata:{openapi:{operationId:"setUserPassword",summary:"Set a user's password",description:"Set a user's password",responses:{200:{description:"Password set",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async a=>{if(!dR({userId:a.context.session.user.id,role:a.context.session.user.role,options:b,permissions:{user:["set-password"]}}))throw new x("FORBIDDEN",{message:dQ.YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD});let{newPassword:c,userId:d}=a.body,e=a.context.password.config.minPasswordLength;if(c.length<e)throw a.context.logger.error("Password is too short"),new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_SHORT});let f=a.context.password.config.maxPasswordLength;if(c.length>f)throw a.context.logger.error("Password is too long"),new x("BAD_REQUEST",{message:bG.n.PASSWORD_TOO_LONG});let g=await a.context.password.hash(c);return await a.context.internalAdapter.updatePassword(d,g),a.json({status:!0})}),userHasPermission:am("/admin/has-permission",{method:"POST",body:d5,metadata:{openapi:{description:"Check if the user has permission",requestBody:{content:{"application/json":{schema:{type:"object",properties:{permission:{type:"object",description:"The permission to check",deprecated:!0},permissions:{type:"object",description:"The permission to check"}},required:["permissions"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{error:{type:"string"},success:{type:"boolean"}},required:["success"]}}}}}},$Infer:{body:{}}}},async a=>{if(!a.body?.permission&&!a.body?.permissions)throw new x("BAD_REQUEST",{message:"invalid permission check. no permission(s) were passed."});let c=await bI(a);if(!c&&(a.request||a.headers))throw new x("UNAUTHORIZED");if(!c&&!a.body.userId&&!a.body.role)throw new x("BAD_REQUEST",{message:"user id or role is required"});let d=c?.user||(a.body.role?{id:a.body.userId||"",role:a.body.role}:null)||await a.context.internalAdapter.findUserById(a.body.userId);if(!d)throw new x("BAD_REQUEST",{message:"user not found"});let e=dR({userId:d.id,role:d.role,options:b,permissions:a.body.permissions??a.body.permission});return a.json({error:null,success:e})})},$ERROR_CODES:dQ,schema:aH(d6,b.schema),options:a}})({adminRoles:["ADMIN"],defaultRole:"STUDENT",adminUserIds:["jvp0LDpaCm0Y2VpUVP75vCNQnDioEdpm"]})]},dK);a.s(["auth",0,es],409223)},563681,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={RequestCookies:function(){return f.RequestCookies},ResponseCookies:function(){return f.ResponseCookies},stringifyCookie:function(){return f.stringifyCookie}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(536226)},751409,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReflectAdapter",{enumerable:!0,get:function(){return d}});class d{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}},4712,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ActionDidNotRevalidate:function(){return f},ActionDidRevalidateDynamicOnly:function(){return h},ActionDidRevalidateStaticAndDynamic:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=0,g=1,h=2},114896,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={MutableRequestCookiesAdapter:function(){return o},ReadonlyRequestCookiesError:function(){return j},RequestCookiesAdapter:function(){return k},appendMutableCookies:function(){return n},areCookiesMutableInCurrentPhase:function(){return q},createCookiesWithMutableAccessCheck:function(){return p},getModifiedCookieValues:function(){return m},responseCookiesToRequestCookies:function(){return s}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(563681),g=a.r(751409),h=a.r(556704),i=a.r(4712);class j extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new j}}class k{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return j.callable;default:return g.ReflectAdapter.get(a,b,c)}}})}}let l=Symbol.for("next.mutated.cookies");function m(a){let b=a[l];return b&&Array.isArray(b)&&0!==b.length?b:[]}function n(a,b){let c=m(b);if(0===c.length)return!1;let d=new f.ResponseCookies(a),e=d.getAll();for(let a of c)d.set(a);for(let a of e)d.set(a);return!0}class o{static wrap(a,b){let c=new f.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let d=[],e=new Set,j=()=>{let a=h.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=i.ActionDidRevalidateStaticAndDynamic),d=c.getAll().filter(a=>e.has(a.name)),b){let a=[];for(let b of d){let c=new f.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},k=new Proxy(c,{get(a,b,c){switch(b){case l:return d;case"delete":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),k}finally{j()}};case"set":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),k}finally{j()}};default:return g.ReflectAdapter.get(a,b,c)}}});return k}}function p(a){let b=new Proxy(a.mutableCookies,{get(c,d,e){switch(d){case"delete":return function(...d){return r(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return r(a,"cookies().set"),c.set(...d),b};default:return g.ReflectAdapter.get(c,d,e)}}});return b}function q(a){return"action"===a.phase}function r(a,b){if(!q(a))throw new j}function s(a){let b=new f.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},608018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return i}});let d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=e(void 0);if(c&&c.has(a))return c.get(a);var d={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(d,g,h):d[g]=a[g]}return d.default=a,c&&c.set(a,d),d}(a.r(800717));function e(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}let f={current:null},g="function"==typeof d.cache?d.cache:a=>a,h=console.error;function i(a){return function(...b){h(a(...b))}}g(a=>{try{h(f.current)}finally{f.current=null}})},786309,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isRequestAPICallableInsideAfter:function(){return j},throwForSearchParamsAccessInUseCache:function(){return i},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(760312),g=a.r(324725);function h(a,b){throw Object.defineProperty(new f.StaticGenBailoutError(`Route ${a} with \`dynamic = "error"\` couldn't be rendered statically because it used ${b}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function i(a,b){let c=Object.defineProperty(Error(`Route ${a.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(c,b),a.invalidDynamicUsageError??=c,c}function j(){let a=g.afterTaskAsyncStorage.getStore();return(null==a?void 0:a.rootTaskSpawnPhase)==="action"}},728340,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},531382,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(950640),h=a.r(728340);var i=((d={})[d.Before=1]="Before",d[d.Static=2]="Static",d[d.Runtime=3]="Runtime",d[d.Dynamic=4]="Dynamic",d[d.Abandoned=5]="Abandoned",d);class j{constructor(a=null,b){this.abortSignal=a,this.hasRuntimePrefetch=b,this.currentStage=1,this.staticInterruptReason=null,this.runtimeInterruptReason=null,this.staticStageEndTime=1/0,this.runtimeStageEndTime=1/0,this.runtimeStageListeners=[],this.dynamicStageListeners=[],this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),this.mayAbandon=!1,a&&(a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<3&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),(this.currentStage<4||5===this.currentStage)&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0}),this.mayAbandon=!0)}onStage(a,b){if(this.currentStage>=a)b();else if(3===a)this.runtimeStageListeners.push(b);else if(4===a)this.dynamicStageListeners.push(b);else throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}canSyncInterrupt(){if(1===this.currentStage)return!1;let a=this.hasRuntimePrefetch?4:3;return this.currentStage<a}syncInterruptCurrentStageWithReason(a){if(1!==this.currentStage){if(this.mayAbandon)return this.abandonRenderImpl();switch(this.currentStage){case 2:this.staticInterruptReason=a,this.advanceStage(4);return;case 3:this.hasRuntimePrefetch&&(this.runtimeInterruptReason=a,this.advanceStage(4));return}}}getStaticInterruptReason(){return this.staticInterruptReason}getRuntimeInterruptReason(){return this.runtimeInterruptReason}getStaticStageEndTime(){return this.staticStageEndTime}getRuntimeStageEndTime(){return this.runtimeStageEndTime}abandonRender(){if(!this.mayAbandon)throw Object.defineProperty(new g.InvariantError("`abandonRender` called on a stage controller that cannot be abandoned."),"__NEXT_ERROR_CODE",{value:"E938",enumerable:!1,configurable:!0});this.abandonRenderImpl()}abandonRenderImpl(){let{currentStage:a}=this;switch(a){case 2:this.currentStage=5,this.resolveRuntimeStage();return;case 3:this.currentStage=5;return}}advanceStage(a){if(a<=this.currentStage)return;let b=this.currentStage;if(this.currentStage=a,b<3&&a>=3&&(this.staticStageEndTime=performance.now()+performance.timeOrigin,this.resolveRuntimeStage()),b<4&&a>=4){this.runtimeStageEndTime=performance.now()+performance.timeOrigin,this.resolveDynamicStage();return}}resolveRuntimeStage(){let a=this.runtimeStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.runtimeStagePromise.resolve()}resolveDynamicStage(){let a=this.dynamicStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.dynamicStagePromise.resolve()}getStagePromise(a){switch(a){case 3:return this.runtimeStagePromise.promise;case 4:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},381740,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"cookies",{enumerable:!0,get:function(){return n}});let d=a.r(114896),e=a.r(563681),f=a.r(556704),g=a.r(832319),h=a.r(660384),i=a.r(760312),j=a.r(13091),k=a.r(608018),l=a.r(786309),m=a.r(950640);function n(){let a="cookies",b=f.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(b.forceStatic)return p(d.RequestCookiesAdapter.seal(new e.RequestCookies(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,n),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var k=b,q=c;let g=o.get(q);if(g)return g;let r=(0,j.makeHangingPromise)(q.renderSignal,k.route,"`cookies()`");return o.set(q,r),r;case"prerender-client":let s="`cookies`";throw Object.defineProperty(new m.InvariantError(`${s} must not be used within a Client Component. Next.js should be preventing ${s} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,h.delayUntilRuntimeStage)(c,p(c.cookies));case"private-cache":return p(c.cookies);case"request":return(0,h.trackDynamicDataInDynamicRender)(c),p((0,d.areCookiesMutableInCurrentPhase)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.throwForMissingRequestStore)(a)}a.r(531382);let o=new WeakMap;function p(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),c}(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},329927,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HeadersAdapter:function(){return h},ReadonlyHeadersError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(751409);class g extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new g}}class h extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,d){if("symbol"==typeof c)return f.ReflectAdapter.get(b,c,d);let e=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===e);if(void 0!==g)return f.ReflectAdapter.get(b,g,d)},set(b,c,d,e){if("symbol"==typeof c)return f.ReflectAdapter.set(b,c,d,e);let g=c.toLowerCase(),h=Object.keys(a).find(a=>a.toLowerCase()===g);return f.ReflectAdapter.set(b,h??c,d,e)},has(b,c){if("symbol"==typeof c)return f.ReflectAdapter.has(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0!==e&&f.ReflectAdapter.has(b,e)},deleteProperty(b,c){if("symbol"==typeof c)return f.ReflectAdapter.deleteProperty(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0===e||f.ReflectAdapter.deleteProperty(b,e)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return g.callable;default:return f.ReflectAdapter.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new h(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}},35754,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"headers",{enumerable:!0,get:function(){return m}});let d=a.r(329927),e=a.r(556704),f=a.r(832319),g=a.r(660384),h=a.r(760312),i=a.r(13091),j=a.r(608018),k=a.r(786309),l=a.r(950640);function m(){let a="headers",b=e.workAsyncStorage.getStore(),c=f.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,k.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(b.forceStatic)return o(d.HeadersAdapter.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":var j=b,p=c;let e=n.get(p);if(e)return e;let f=(0,i.makeHangingPromise)(p.renderSignal,j.route,"`headers()`");return n.set(p,f),f;case"prerender-client":let q="`headers`";throw Object.defineProperty(new l.InvariantError(`${q} must not be used within a client component. Next.js should be preventing ${q} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,g.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,g.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,g.delayUntilRuntimeStage)(c,o(c.headers));case"private-cache":return o(c.headers);case"request":return(0,g.trackDynamicDataInDynamicRender)(c),o(c.headers)}}(0,f.throwForMissingRequestStore)(a)}a.r(531382);let n=new WeakMap;function o(a){let b=n.get(a);if(b)return b;let c=Promise.resolve(a);return n.set(a,c),c}(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},551125,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"draftMode",{enumerable:!0,get:function(){return k}});let d=a.r(832319),e=a.r(556704),f=a.r(660384),g=a.r(608018),h=a.r(760312),i=a.r(696556),j=a.r(950640);function k(){let a=e.workAsyncStorage.getStore(),b=d.workUnitAsyncStorage.getStore();switch((!a||!b)&&(0,d.throwForMissingRequestStore)("draftMode"),b.type){case"prerender-runtime":return(0,f.delayUntilRuntimeStage)(b,l(b.draftMode,a));case"request":return l(b.draftMode,a);case"cache":case"private-cache":case"unstable-cache":let c=(0,d.getDraftModeProviderForCacheScope)(a,b);if(c)return l(c,a);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return l(null,a);default:return b}}function l(a,b){let c=n.get(a??m);return c||Promise.resolve(new o(a))}a.r(751409);let m={},n=new WeakMap;class o{constructor(a){this._provider=a}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){p("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){p("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function p(a,b){let c=e.workAsyncStorage.getStore(),g=d.workUnitAsyncStorage.getStore();if(c){if((null==g?void 0:g.phase)==="after")throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(c.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(g)switch(g.type){case"cache":case"private-cache":{let d=Object.defineProperty(Error(`Route ${c.route} used "${a}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(d,b),c.invalidDynamicUsageError??=d,d}case"unstable-cache":throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let b=Object.defineProperty(Error(`Route ${c.route} used ${a} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,f.abortAndThrowOnSynchronousRequestDataAccess)(c.route,a,b,g)}case"prerender-client":let d="`draftMode`";throw Object.defineProperty(new j.InvariantError(`${d} must not be used within a Client Component. Next.js should be preventing ${d} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,f.postponeWithTracking)(c.route,a,g.dynamicTracking);case"prerender-legacy":g.revalidate=0;let e=Object.defineProperty(new i.DynamicServerError(`Route ${c.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.dynamicUsageDescription=a,c.dynamicUsageStack=e.stack,e;case"request":(0,f.trackDynamicDataInDynamicRender)(g)}}}(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},905246,(a,b,c)=>{b.exports.cookies=a.r(381740).cookies,b.exports.headers=a.r(35754).headers,b.exports.draftMode=a.r(551125).draftMode}];

//# sourceMappingURL=_b7fbf7aa._.js.map