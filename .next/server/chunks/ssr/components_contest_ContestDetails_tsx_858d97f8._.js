module.exports=[299208,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50522),e=a.i(943108),f=a.i(613749),g=a.i(167453),h=a.i(281193),h=h,i=a.i(823292),j=a.i(238246),k=a.i(50944),l=a.i(603314),m=a.i(170106);let n=(0,m.default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var o=a.i(177156);let p=(0,m.default)("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);var q=a.i(732860),r=a.i(533441),s=a.i(633508),t=a.i(405050);let u=(0,t.createServerReference)("60d3252bd45f48968dec686bb41d7abb72b2b3fa40",t.callServer,void 0,t.findSourceMapURL,"startContestSession"),v=(0,t.createServerReference)("60e4bb3f837a3366538a85855a444a9a4c1f3ce841",t.callServer,void 0,t.findSourceMapURL,"verifyContestPassword");var w=a.i(497895);let x=[{icon:n,title:"Fullscreen Enforced",description:"The contest runs in fullscreen. Exiting may be flagged."},{icon:o.Eye,title:"Focus Tracking",description:"Tab switching and window blurring are monitored."},{icon:p,title:"Input Restricted",description:"Copy-paste and developer tools are disabled."},{icon:l.Shield,title:"Proctored Environment",description:"suspicious activity is logged for review."}];function y({contestId:a,contestTitle:d,requiresPassword:g,isOpen:h,onClose:j,onStart:k}){let[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)("RULES"),[t,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{h&&(g?p("PASSWORD"):p("RULES"),A(!1),y(""),n(!1))},[h,g]);let B=async()=>{if(!t)return void i.toast.error("Enter the contest password");n(!0);try{let b=await v(a,t);b.success?(p("RULES"),i.toast.success("Access granted")):i.toast.error(b.error||"Incorrect password")}catch{i.toast.error("Verification failed")}finally{n(!1)}},C=async()=>{if(z){n(!0);try{let b=await u(a,t);if(!b.success){i.toast.error(b.error||"Could not start session"),n(!1);return}try{await document.documentElement.requestFullscreen()}catch(a){console.warn("Fullscreen failed",a)}i.toast.success("Good luck!"),k(b.sessionId)}catch{i.toast.error("Failed to initialize contest"),n(!1)}}};return h?(0,b.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/80 backdrop-blur-md transition-opacity",onClick:j}),(0,b.jsxs)("div",{className:"relative bg-white dark:bg-[#0a0a0a] w-full max-w-md rounded-3xl shadow-2xl border border-gray-100 dark:border-[#262626] overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[(0,b.jsxs)("div",{className:"px-8 pt-8 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex gap-2",children:[1,2,3].map(a=>{if(a>(g?3:2))return null;let c=!1;g?(1===a&&"PASSWORD"===o&&(c=!0),2===a&&"RULES"===o&&(c=!0),3===a&&"CONFIRM"===o&&(c=!0)):(1===a&&"RULES"===o&&(c=!0),2===a&&"CONFIRM"===o&&(c=!0));let d=g?1===a&&"PASSWORD"!==o||2===a&&"CONFIRM"===o:1===a&&"CONFIRM"===o;return(0,b.jsx)("div",{className:(0,w.cn)("h-1 rounded-full transition-all duration-300",c?"w-8 bg-orange-600":d?"w-2 bg-orange-200 dark:bg-orange-900":"w-2 bg-gray-100 dark:bg-[#262626]")},a)})}),(0,b.jsx)("button",{onClick:j,className:"p-2 -mr-2 text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:(0,b.jsx)(s.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-8 min-h-[400px] flex flex-col",children:["PASSWORD"===o&&(0,b.jsxs)("div",{className:"flex-1 flex flex-col animate-in slide-in-from-right-8 duration-300",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-50 dark:bg-[#1a1a1a] rounded-2xl flex items-center justify-center mb-6",children:(0,b.jsx)(e.Lock,{className:"w-6 h-6 text-gray-900 dark:text-white"})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Private Contest"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter the access code to join."})]}),(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsx)("input",{type:"password",value:t,onChange:a=>y(a.target.value),onKeyDown:a=>"Enter"===a.key&&B(),placeholder:"Password",autoFocus:!0,className:"w-full bg-gray-50 dark:bg-[#141414] border-gray-200 dark:border-[#262626] rounded-xl px-4 py-4 text-center text-2xl font-bold tracking-widest focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 outline-none transition-all placeholder:text-gray-300 dark:text-white dark:placeholder:text-gray-700"})}),(0,b.jsx)("div",{className:"mt-auto pt-8",children:(0,b.jsxs)("button",{onClick:B,disabled:!t||m,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-black py-4 rounded-xl font-bold text-sm tracking-wide hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",children:[m?"Verifying...":"Continue",!m&&(0,b.jsx)(q.ArrowRight,{className:"w-4 h-4"})]})})]}),"RULES"===o&&(0,b.jsxs)("div",{className:"flex-1 flex flex-col animate-in slide-in-from-right-8 duration-300",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Contest Rules"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Strict proctoring is active."})]}),(0,b.jsx)("div",{className:"space-y-6",children:x.map((a,c)=>{let d=a.icon;return(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 shrink-0 rounded-full bg-gray-50 dark:bg-[#1a1a1a] flex items-center justify-center",children:(0,b.jsx)(d,{className:"w-5 h-5 text-gray-900 dark:text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed mt-0.5",children:a.description})]})]},c)})}),(0,b.jsx)("div",{className:"mt-auto pt-8",children:(0,b.jsxs)("button",{onClick:()=>p("CONFIRM"),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-black py-4 rounded-xl font-bold text-sm tracking-wide hover:opacity-90 transition-opacity flex items-center justify-center gap-2",children:["I Understand",(0,b.jsx)(q.ArrowRight,{className:"w-4 h-4"})]})})]}),"CONFIRM"===o&&(0,b.jsxs)("div",{className:"flex-1 flex flex-col animate-in slide-in-from-right-8 duration-300",children:[(0,b.jsxs)("button",{onClick:()=>p("RULES"),className:"mb-6 flex items-center gap-2 text-sm text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors w-fit",children:[(0,b.jsx)(f.ChevronLeft,{className:"w-4 h-4"}),"Back"]}),(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-500/20 mx-auto rounded-full flex items-center justify-center mb-6 animate-pulse",children:(0,b.jsx)(l.Shield,{className:"w-8 h-8 text-orange-600 dark:text-orange-500"})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Ready to Start?"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm max-w-[260px] mx-auto",children:"Once you begin, your screen will be monitored. Violations may lead to disqualification."})]}),(0,b.jsx)("div",{className:"bg-gray-50 dark:bg-[#141414] border border-gray-100 dark:border-[#262626] rounded-xl p-4 mb-6",children:(0,b.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,b.jsxs)("div",{className:"relative flex items-center mt-0.5",children:[(0,b.jsx)("input",{type:"checkbox",checked:z,onChange:a=>A(a.target.checked),className:"peer h-5 w-5 appearance-none rounded-md border-2 border-gray-300 dark:border-gray-600 checked:border-orange-500 checked:bg-orange-500 transition-all"}),(0,b.jsx)(r.Check,{className:"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100"})]}),(0,b.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 select-none leading-relaxed",children:"I verify that I am the registered participant and I agree to follow all contest rules honestly."})]})}),(0,b.jsx)("div",{className:"mt-auto",children:(0,b.jsx)("button",{onClick:C,disabled:!z||m,className:"w-full bg-linear-to-r from-orange-600 to-orange-500 text-white py-4 rounded-xl font-bold text-sm tracking-wide hover:shadow-lg hover:shadow-orange-500/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,b.jsxs)(b.Fragment,{children:["Enter Contest",(0,b.jsx)(q.ArrowRight,{className:"w-4 h-4"})]})})})]})]})]})]}):null}var z=a.i(73570);let A=(0,m.default)("shield-x",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);var B=a.i(756468),C=a.i(641710);let D=(0,t.createServerReference)("78c1cd378517a292ad03dee9242ae6d4c6eb499f21",t.callServer,void 0,t.findSourceMapURL,"logContestViolation"),E=(0,t.createServerReference)("4050b6d7261e7a6fa97816d9dd7891742fa5be61cf",t.callServer,void 0,t.findSourceMapURL,"getParticipationStatus"),F=[{key:"c",ctrl:!0,shift:!1},{key:"v",ctrl:!0,shift:!1},{key:"x",ctrl:!0,shift:!1},{key:"u",ctrl:!0,shift:!1},{key:"s",ctrl:!0,shift:!1},{key:"p",ctrl:!0,shift:!1},{key:"i",ctrl:!0,shift:!0},{key:"j",ctrl:!0,shift:!0},{key:"c",ctrl:!0,shift:!0},{key:"F12",ctrl:!1,shift:!1}];function G({contestId:a,sessionId:d,onAutoSubmit:f,onBlocked:g,paused:h=!1}){let[i,j]=(0,c.useState)({total:0,isFlagged:!1,isBlocked:!1,tempBlockedUntil:null,permanentlyBlocked:!1}),[k,l]=(0,c.useState)(!1),[m,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(0),v=(0,c.useRef)(!1),w=(0,c.useRef)(null),x=(0,c.useRef)(0),y=(0,c.useRef)(!1),G=(0,c.useRef)(!1),H=(0,c.useRef)(!1),I=(0,c.useRef)(!1);(0,c.useEffect)(()=>{I.current=m},[m]);let J=(0,c.useCallback)(()=>{let a=Date.now();return!h&&!y.current&&!r&&!(a-x.current<2e3)},[r,h]),K=(0,c.useCallback)(async(b,c)=>{if(v.current&&!G.current&&!H.current){if((q(c),l(!0),!["KEYBOARD_SHORTCUT","COPY_PASTE"].includes(b))&&J()){y.current=!0,x.current=Date.now();try{let d=await D(a,b,c);if(d.success){let a={total:d.totalViolations||0,isFlagged:d.isFlagged||!1,isBlocked:d.isBlocked||!1,tempBlockedUntil:d.tempBlockedUntil||null,permanentlyBlocked:d.permanentlyBlocked||!1};if(j(a),d.permanentlyBlocked)s(!0),g?.();else if(d.tempBlockedUntil){s(!0);let a=new Date(d.tempBlockedUntil).getTime()-Date.now();u(Math.max(0,Math.floor(a/1e3)))}}}catch(a){console.error("Failed to log violation:",a)}finally{y.current=!1}}}},[a,J,f,g]);return(0,c.useEffect)(()=>{a&&(async()=>{let b=await E(a);if(b.success&&b.participation){let a=b.participation,c={total:a.totalViolations||0,isFlagged:a.isFlagged||!1,isBlocked:!1,tempBlockedUntil:null,permanentlyBlocked:!1};if(a.permanentlyBlocked)c.isBlocked=!0,c.permanentlyBlocked=!0,s(!0),g?.();else if(a.tempBlockedUntil){let b=new Date(a.tempBlockedUntil);b>new Date&&(c.isBlocked=!0,c.tempBlockedUntil=a.tempBlockedUntil,s(!0),u(Math.max(0,Math.floor((b.getTime()-Date.now())/1e3))))}else a.isBlocked&&(c.isBlocked=!0,s(!0));j(c)}})()},[a,g]),(0,c.useEffect)(()=>{if(t<=0)return;let a=setInterval(()=>{u(a=>a<=1?(s(!1),j(a=>({...a,isBlocked:!1,tempBlockedUntil:null})),0):a-1)},1e3);return()=>clearInterval(a)},[t>0]),(0,c.useEffect)(()=>{let b;if(!a||!d)return;let c=setTimeout(()=>{v.current=!0,document.fullscreenElement||G.current||(o(!0),I.current=!0)},3e3);try{w.current=new BroadcastChannel(`contest-${a}`),w.current.postMessage({type:"ping",sessionId:d}),w.current.onmessage=a=>{"ping"===a.data.type&&a.data.sessionId!==d&&(K("MULTI_TAB","Contest opened in multiple tabs"),w.current?.postMessage({type:"conflict",sessionId:d})),"conflict"===a.data.type&&a.data.sessionId!==d&&K("MULTI_TAB","Contest opened in multiple tabs")}}catch(a){console.warn("BroadcastChannel not supported")}let e=()=>{v.current&&(document.fullscreenElement||K("FULLSCREEN_EXIT","You exited fullscreen mode"))};document.addEventListener("fullscreenchange",e);let f=a=>{if(v.current)return a.preventDefault(),K("COPY_PASTE",`${a.type.charAt(0).toUpperCase()+a.type.slice(1)} is not allowed`),!1};document.addEventListener("copy",f),document.addEventListener("cut",f),document.addEventListener("paste",f);let g=a=>{if(v.current){if(F.some(b=>{let c=a.key.toLowerCase()===b.key.toLowerCase(),d=a.ctrlKey===b.ctrl||a.metaKey===b.ctrl,e=a.shiftKey===b.shift;return c&&d&&e}))return a.preventDefault(),a.stopPropagation(),K("KEYBOARD_SHORTCUT",`Blocked shortcut: ${a.ctrlKey?"Ctrl+":""}${a.shiftKey?"Shift+":""}${a.key}`),!1;("F5"===a.key||"r"===a.key.toLowerCase()&&(a.ctrlKey||a.metaKey))&&(G.current=!0)}};document.addEventListener("keydown",g,!0);let i=()=>{v.current&&document.hidden&&K("TAB_SWITCH","You switched away from the contest tab")},j=()=>{v.current&&K("TAB_SWITCH","Window lost focus")};document.addEventListener("visibilitychange",i),window.addEventListener("blur",j);let l=0,m=()=>{let a=Date.now();if(!(a-l<2e3)){if((l=a,v.current)&&!h&&!y.current&&!r&&!k&&!I.current&&!document.fullscreenElement&&!G.current)return void K("FULLSCREEN_EXIT","You must stay in fullscreen mode")}};document.addEventListener("mousedown",m),document.addEventListener("keydown",m),document.addEventListener("touchstart",m);let n=()=>{if(!v.current)return;let a=window.outerWidth-window.innerWidth,b=window.outerHeight-window.innerHeight;(a>160||b>160)&&K("DEVTOOLS_OPEN","Developer tools detected")},p=()=>{clearTimeout(b),b=setTimeout(n,500)};window.addEventListener("resize",p);let q=a=>(a.preventDefault(),!1);document.addEventListener("contextmenu",q);let s=a=>{let b=a.target.closest("a");if(b){let a=b.getAttribute("href");a&&(a.startsWith("/")||a.startsWith(window.location.origin))&&(H.current=!0,setTimeout(()=>{H.current=!1},2e3))}};document.addEventListener("click",s,!0);let t=a=>{G.current=!0};window.addEventListener("beforeunload",t);let u=a=>(a.preventDefault(),!1);return document.addEventListener("dragover",u),document.addEventListener("drop",u),()=>{clearTimeout(c),clearTimeout(b),w.current?.close(),document.removeEventListener("fullscreenchange",e),document.removeEventListener("copy",f),document.removeEventListener("cut",f),document.removeEventListener("paste",f),document.removeEventListener("keydown",g,!0),document.removeEventListener("visibilitychange",i),window.removeEventListener("blur",j),window.removeEventListener("resize",p),document.removeEventListener("mousedown",m),document.removeEventListener("keydown",m),document.removeEventListener("touchstart",m),document.removeEventListener("contextmenu",q),document.removeEventListener("click",s,!0),window.removeEventListener("beforeunload",t),document.removeEventListener("dragover",u),document.removeEventListener("drop",u)}},[a,d,K]),i.total,(0,b.jsxs)(b.Fragment,{children:[(r||k)&&(0,b.jsx)("div",{className:"fixed inset-0 z-9999 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-[#141414] rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden border border-orange-100 dark:border-orange-500/20 transform transition-all scale-100",children:[(0,b.jsx)("div",{className:`h-2 w-full ${i.permanentlyBlocked?"bg-red-500":"bg-orange-500"}`}),(0,b.jsxs)("div",{className:"p-6 md:p-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-start md:items-center",children:[(0,b.jsx)("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center shrink-0 shadow-sm ${i.permanentlyBlocked?"bg-red-50 dark:bg-red-500/10 text-red-500":"bg-orange-50 dark:bg-orange-500/10 text-orange-500"}`,children:i.permanentlyBlocked?(0,b.jsx)(B.Ban,{className:"w-8 h-8"}):t>0?(0,b.jsx)(C.Clock,{className:"w-8 h-8 animate-pulse"}):r?(0,b.jsx)(e.Lock,{className:"w-8 h-8"}):(0,b.jsx)(z.AlertTriangle,{className:"w-8 h-8"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white leading-tight",children:i.permanentlyBlocked?"Contest Session Terminated":t>0?"Temporary Suspension":"Violation Detected"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 font-medium text-sm",children:i.permanentlyBlocked?"Multiple violations detected. Your session has been permanently blocked.":t>0?"Please wait for the timer to expire before continuing.":p||"This action is prohibited during the contest."})]})]}),t>0&&(0,b.jsxs)("div",{className:"mt-8 p-6 bg-orange-50 dark:bg-orange-500/10 rounded-xl border border-orange-100 dark:border-orange-500/20 flex flex-col items-center justify-center",children:[(0,b.jsx)("span",{className:"text-xs font-bold text-orange-400 uppercase tracking-widest mb-2",children:"Access Resumes In"}),(0,b.jsxs)("div",{className:"text-5xl font-black text-orange-500 font-mono tracking-tighter tabular-nums",children:[Math.floor(t/60),":",String(t%60).padStart(2,"0")]})]}),!i.permanentlyBlocked&&t<=0&&(0,b.jsxs)("div",{className:"mt-8 space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end",children:[(0,b.jsx)("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Warning Level"}),(0,b.jsxs)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[i.total," ",(0,b.jsxs)("span",{className:"text-gray-400 font-normal",children:["/ ",6]})]})]}),(0,b.jsx)("div",{className:"h-3 bg-gray-100 dark:bg-[#1a1a1a] rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full transition-all duration-500 ease-out ${i.total>=4?"bg-red-500":"bg-orange-500"}`,style:{width:`${Math.min(i.total/6*100,100)}%`}})}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Low Risk"}),i.total>=4?(0,b.jsx)("span",{className:"text-red-500 font-medium",children:"Critical Risk"}):(0,b.jsx)("span",{className:"text-orange-500 font-medium",children:"Caution"})]})]}),(0,b.jsx)("div",{className:"mt-8",children:!i.permanentlyBlocked&&t<=0?(0,b.jsx)("button",{onClick:()=>{(async()=>{try{document.fullscreenElement||await document.documentElement.requestFullscreen(),l(!1)}catch(a){}})()},className:"w-full py-4 bg-gray-900 dark:bg-white text-white dark:text-black rounded-xl font-bold hover:bg-gray-800 dark:hover:bg-gray-200 transition-all transform active:scale-[0.98] shadow-lg shadow-gray-200 dark:shadow-none",children:"Acknowledge & Continue"}):t>0?(0,b.jsx)("button",{disabled:!0,className:"w-full py-4 bg-gray-100 dark:bg-[#1a1a1a] text-gray-400 dark:text-gray-600 rounded-xl font-bold cursor-not-allowed",children:"Suspended"}):(0,b.jsx)("button",{className:"w-full py-4 bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-500 rounded-xl font-bold border border-red-100 dark:border-red-500/20 cursor-not-allowed",children:"Contact Administrator"})})]})]})}),m&&!r&&!k&&(0,b.jsx)("div",{className:"fixed inset-0 z-10000 flex items-center justify-center bg-black/60 backdrop-blur-md",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden border-2 border-orange-500 animate-in fade-in zoom-in duration-300",children:[(0,b.jsxs)("div",{className:"bg-orange-600 px-6 py-4 flex items-center gap-3",children:[(0,b.jsx)(n,{className:"w-6 h-6 text-white"}),(0,b.jsx)("h2",{className:"text-lg font-bold text-white uppercase tracking-wider",children:"Fullscreen Required"})]}),(0,b.jsxs)("div",{className:"p-6 text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-orange-50 dark:bg-orange-500/10 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(A,{className:"w-10 h-10 text-orange-500"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Re-activate Proctoring"}),(0,b.jsx)("p",{className:"text-gray-600 mb-8 text-sm",children:"To continue your contest session, you must re-enter fullscreen mode. This is required for proctoring accuracy."}),(0,b.jsxs)("button",{onClick:()=>{document.documentElement.requestFullscreen().then(()=>o(!1)).catch(()=>{})},className:"w-full py-4 bg-orange-600 text-white rounded-xl font-black uppercase tracking-widest hover:bg-orange-700 transition-all shadow-lg shadow-orange-200 flex items-center justify-center gap-3 group",children:[(0,b.jsx)(n,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),"Go Full Screen"]}),(0,b.jsx)("p",{className:"text-[10px] text-gray-400 mt-4 font-medium uppercase tracking-tighter",children:"Do not attempt to stay in windowed mode"})]})]})}),(0,b.jsxs)("div",{className:"fixed top-4 right-4 z-100 flex items-center gap-2 px-3 py-2 bg-white dark:bg-[#141414] border border-gray-200 dark:border-[#262626] rounded-lg shadow-sm",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,b.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:"Proctored"}),i.total>0&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-orange-100 dark:bg-orange-500/10 text-orange-700 dark:text-orange-400 rounded text-xs font-semibold",children:i.total})]})]})}function H({contestId:a,allowedPaths:b}){let d=(0,k.useRouter)(),e=(0,k.usePathname)(),f=(0,c.useRef)(e);return(0,c.useEffect)(()=>{if(!a)return;let c=()=>{window.history.pushState(null,"",window.location.href)};c();let g=b=>{b.preventDefault(),c(),D(a,"NAVIGATION_ATTEMPT","Attempted to use browser back/forward")};window.addEventListener("popstate",g);let h=c=>{let d=c.target.closest("a");if(d){let e=d.getAttribute("href");if(e&&"#"!==e&&""!==e.trim()&&!e.startsWith("javascript:")&&!b.some(a=>e.startsWith(a)))return c.preventDefault(),c.stopPropagation(),D(a,"NAVIGATION_ATTEMPT",`Attempted to navigate to: ${e}`),!1}};return document.addEventListener("click",h,!0),e!==f.current&&(b.some(a=>e?.startsWith(a))||(D(a,"NAVIGATION_ATTEMPT",`Unexpected navigation to: ${e}`),d.replace(f.current||"/"))),()=>{window.removeEventListener("popstate",g),document.removeEventListener("click",h,!0)}},[a,e,b,d]),null}let I=(0,t.createServerReference)("40f1b84b507cbed77bbd694a76ce511a8893db67cb",t.callServer,void 0,t.findSourceMapURL,"finishContestAction");function J({contest:a,user:l}){let m=(0,k.useRouter)(),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(a.hasAcceptedRules||!1),[v,w]=(0,c.useState)(!1),x=a.isFinished||!1,[z,A]=(0,c.useState)(a.sessionId||null);(0,c.useEffect)(()=>{console.log("[ContestProtection Debug]",{hasAcceptedRules:t,sessionId:z,isFinished:x,willRenderProtection:t&&z&&!x})},[t,z,x,a.canManage]);let B=new Date,C=new Date(a.startTime),D=new Date(a.endTime),E=B>=C,F=B>D,[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(""),N=async()=>{if("end"!==L.toLowerCase())return void i.toast.error("Please type 'end' to confirm");w(!0);try{(await I(a.id)).success?(i.toast.success("Contest submitted successfully!"),m.push("/")):(i.toast.error("Failed to submit contest"),w(!1))}catch(a){console.error(a),i.toast.error("Something went wrong"),w(!1)}K(!1)};(0,c.useEffect)(()=>{x||(localStorage.getItem(`contest-rules-${a.id}`),t||E&&!F&&s(!0))},[a.id,E,F,t,x]),(0,c.useEffect)(()=>{let a=setInterval(()=>{let b=new Date,c=(E?D:C).getTime()-b.getTime();if(c<=0){o(E?"Contest Ended":"Starting Now"),clearInterval(a);return}let d=Math.floor(c/864e5),e=Math.floor(c%864e5/36e5),f=Math.floor(c%36e5/6e4),g=Math.floor(c%6e4/1e3);o(`${d>0?`${d}d `:""}${e.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`)},1e3);return()=>clearInterval(a)},[E,C,D]);let O=Math.ceil(a.problems.length/20),P=(p-1)*20,Q=a.problems.slice(P,P+20);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{contestId:a.id,contestTitle:a.title,requiresPassword:a.requiresPassword,isOpen:r,onClose:()=>s(!1),onStart:b=>{localStorage.setItem(`contest-rules-${a.id}`,"true"),u(!0),s(!1),A(b),window.location.reload()}}),t&&z&&!x&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(G,{contestId:a.id,sessionId:z,paused:v||J}),(0,b.jsx)(H,{contestId:a.id,allowedPaths:["/problems/",`/contest/${a.id}`]})]}),(0,b.jsx)("div",{className:"min-h-screen bg-white dark:bg-[#0a0a0a] py-8",children:(0,b.jsxs)("div",{className:"w-full max-w-7xl mx-auto px-4 md:px-6",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-[#262626] text-gray-700 dark:text-gray-300",children:a.visibility}),x?(0,b.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400",children:"Completed"}):F?(0,b.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-500/20 text-gray-700 dark:text-gray-400",children:"Ended"}):E?(0,b.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-400",children:"Live"}):(0,b.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400",children:"Upcoming"})]}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:a.title}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:a.description||"Test your skills in this competitive programming arena."})]}),x&&(0,b.jsxs)("div",{className:"mb-8 p-6 bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-100 dark:border-emerald-500/20 rounded-2xl flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-emerald-100 dark:bg-emerald-500/20 rounded-xl flex items-center justify-center shrink-0",children:(0,b.jsx)(g.CheckCircle2,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-emerald-900 dark:text-emerald-400",children:"Contest Session Completed"}),(0,b.jsx)("p",{className:"text-emerald-700 dark:text-emerald-500 text-sm",children:"You have successfully ended your session. Your submissions have been recorded and you can view the final standings once the contest ends."})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-6 mb-6 pb-6 border-b border-gray-200 dark:border-[#262626] text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Start:"}),(0,b.jsx)("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:C.toLocaleString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"End:"}),(0,b.jsx)("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:D.toLocaleString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Problems:"}),(0,b.jsx)("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:a._count.problems})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Time:"}),(0,b.jsx)("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium font-mono",children:n})]}),(0,b.jsxs)("div",{className:"ml-auto flex gap-2",children:[t&&E&&!F&&!x&&(0,b.jsxs)("button",{onClick:()=>{K(!0)},className:"px-4 py-2 bg-red-600 text-white rounded text-sm font-medium hover:bg-red-700 transition-colors flex items-center gap-2 shadow-lg shadow-red-500/20",children:[(0,b.jsx)(g.CheckCircle2,{className:"w-4 h-4"}),"End Contest"]}),F&&(0,b.jsx)(j.default,{href:`/contest/${a.id}/standings`,className:"px-4 py-2 bg-orange-600 text-white rounded text-sm font-medium hover:bg-orange-700 transition-colors shadow-lg shadow-orange-500/20",children:"Leaderboard"})]})]}),E||a.canManage?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-6 py-4 border-b border-gray-100 dark:border-[#262626] text-[11px] font-bold text-gray-400 uppercase tracking-widest",children:[(0,b.jsx)("div",{className:"col-span-1",children:"#"}),(0,b.jsx)("div",{className:"col-span-6 md:col-span-7",children:"Title"}),(0,b.jsx)("div",{className:"col-span-3 md:col-span-2",children:"Difficulty"}),(0,b.jsx)("div",{className:"col-span-2 md:col-span-2",children:"Status"})]}),(0,b.jsx)("div",{className:"mt-2",children:Q.map((c,f)=>{let h=P+f,k=(t||a.canManage||!E||F)&&(!x||a.canManage),l=c.isSolved;return(0,b.jsxs)(j.default,{href:k&&(E||a.canManage)&&!l?`/problems/${c.problem.slug}?contestId=${a.id}`:"#",onClick:b=>{if(x&&!a.canManage){b.preventDefault(),i.toast.error("Contest session ended",{description:"You have already completed this contest."});return}if(l){b.preventDefault(),i.toast.success("Problem Solved!",{description:"You have already completed this challenge. Great job!"});return}k||!E||F||(b.preventDefault(),s(!0))},className:`grid grid-cols-12 gap-4 px-6 py-4 rounded-xl items-center transition-all duration-200 ${k&&(E||a.canManage)&&!l?"hover:bg-gray-50/50 dark:hover:bg-[#1a1a1a] cursor-pointer":l?"opacity-75 bg-emerald-50/30 dark:bg-emerald-500/5 cursor-not-allowed":"opacity-50 cursor-not-allowed"}`,children:[(0,b.jsx)("div",{className:"col-span-1 text-sm text-gray-500 dark:text-gray-400 font-medium",children:h+1}),(0,b.jsxs)("div",{className:"col-span-6 md:col-span-7 font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[(0,b.jsx)("span",{className:`truncate ${k&&!l?"hover:text-orange-600 transition-colors":""}`,children:c.problem.title}),l&&(0,b.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 text-[10px] font-bold uppercase tracking-wider flex items-center gap-1",children:[(0,b.jsx)(g.CheckCircle2,{className:"w-3 h-3"}),"Solved"]})]}),(0,b.jsx)("div",{className:"col-span-3 md:col-span-2",children:(0,b.jsx)("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${(a=>{switch(a){case"EASY":return"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400";case"MEDIUM":return"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-400";case"HARD":return"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400";default:return"bg-gray-100 dark:bg-gray-500/20 text-gray-700 dark:text-gray-400"}})(c.problem.difficulty)}`,children:"MEDIUM"===c.problem.difficulty?"Med.":c.problem.difficulty.charAt(0)+c.problem.difficulty.slice(1).toLowerCase()})}),(0,b.jsx)("div",{className:"col-span-2 md:col-span-2 text-sm text-gray-500 dark:text-gray-400",children:l?(0,b.jsx)(g.CheckCircle2,{className:"w-5 h-5 text-emerald-500"}):k&&(E||a.canManage)?(0,b.jsx)(d.ChevronRight,{className:"w-5 h-5 text-gray-400"}):(0,b.jsx)(e.Lock,{className:"w-4 h-4 text-gray-400"})})]},c.problem.id)})}),O>1&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-12 mb-8",children:[(0,b.jsx)("button",{onClick:()=>q(a=>Math.max(1,a-1)),disabled:1===p,className:`p-2 border border-gray-200 dark:border-[#262626] rounded transition-colors ${1===p?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a]"}`,children:(0,b.jsx)(f.ChevronLeft,{className:"w-4 h-4"})}),Array.from({length:O},(a,b)=>b+1).map(a=>(0,b.jsx)("button",{onClick:()=>q(a),className:`w-9 h-9 rounded text-sm font-medium transition-colors ${p===a?"bg-orange-600 text-white":"border border-gray-200 dark:border-[#262626] text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a]"}`,children:a},a)),(0,b.jsx)("button",{onClick:()=>q(a=>Math.min(O,a+1)),disabled:p===O,className:`p-2 border border-gray-200 dark:border-[#262626] rounded transition-colors ${p===O?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a]"}`,children:(0,b.jsx)(d.ChevronRight,{className:"w-4 h-4"})})]})]}):(0,b.jsxs)("div",{className:"text-center py-20 border border-gray-200 dark:border-[#262626] rounded-lg bg-white dark:bg-[#141414]",children:[(0,b.jsx)(e.Lock,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Problems Locked"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Problems will be revealed when the contest starts."})]})]})}),J&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-[#141414] rounded-xl shadow-2xl w-full max-w-md p-6 border border-gray-100 dark:border-[#262626] transform scale-100 transition-all",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4 text-red-600 dark:text-red-400",children:[(0,b.jsx)(h.default,{className:"w-8 h-8"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"End Contest Session?"})]}),(0,b.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to end your session? You will ",(0,b.jsx)("strong",{children:"NOT"})," be able to re-enter or solve more problems after this.",(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),"Type ",(0,b.jsx)("span",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:"end"})," below to confirm."]}),(0,b.jsx)("input",{type:"text",placeholder:"Type 'end' to confirm",value:L,onChange:a=>M(a.target.value),className:"w-full px-4 py-3 border border-gray-200 dark:border-[#262626] rounded-lg mb-6 bg-gray-50 dark:bg-[#1a1a1a] focus:bg-white dark:focus:bg-[#0a0a0a] focus:ring-2 focus:ring-red-500/20 focus:border-red-500 outline-none transition-all font-mono text-center uppercase tracking-widest placeholder:normal-case placeholder:tracking-normal text-gray-900 dark:text-gray-100",autoFocus:!0}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{K(!1),M("")},className:"flex-1 px-4 py-3 border border-gray-200 dark:border-[#262626] rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:N,disabled:"end"!==L.toLowerCase()||v,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-red-500/20",children:v?"Ending...":"End Contest"})]})]})})]})}a.s(["default",()=>J],299208)}];

//# sourceMappingURL=components_contest_ContestDetails_tsx_858d97f8._.js.map