module.exports=[871626,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(405050);let e=(0,d.createServerReference)("8053ef532fb41c6359c04a7f723b56e161407ad14a",d.callServer,void 0,d.findSourceMapURL,"getCourseAllocations"),f=(0,d.createServerReference)("606ba5e2787fb77b3f798f01271c02f40d553ffc8e",d.callServer,void 0,d.findSourceMapURL,"updateYearAllocations");var g=a.i(823292);function h(){let[a,d]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)({}),n=["DSA","SQL"],o=[1,2,3,4];async function p(){i(!0);let a=await e();if(a.success&&a.allocations){d(a.allocations);let b={};o.forEach(c=>{b[c]=a.allocations.filter(a=>a.year===c).map(a=>a.domain)}),m(b)}i(!1)}(0,c.useEffect)(()=>{p()},[]);let q=async a=>{k(!0);let b=l[a]||[],c=await f(a,b);c.success?(g.toast.success(`Year ${a} allocations updated successfully`),await p()):g.toast.error(c.error||"Failed to update allocations"),k(!1)};return h?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a] flex items-center justify-center transition-colors",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading allocations..."})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a] py-8 px-4 sm:px-6 lg:px-8 transition-colors",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Course Allocation Management"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Allocate courses to different academic years. Students will only see courses allocated to their year."})]}),(0,b.jsx)("div",{className:"space-y-6",children:o.map(a=>(0,b.jsxs)("div",{className:"bg-white dark:bg-[#141414] rounded-lg shadow-sm border border-gray-200 dark:border-[#262626] p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Year ",a]}),(0,b.jsx)("button",{onClick:()=>q(a),disabled:j,className:"px-4 py-2 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Saving...":"Save"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:n.map(c=>{let d=(l[a]||[]).includes(c);return(0,b.jsx)("button",{onClick:()=>{m(b=>{let d=b[a]||[],e=d.includes(c)?d.filter(a=>a!==c):[...d,c];return{...b,[a]:e}})},className:`p-4 rounded-lg border-2 transition-all text-left ${d?"border-orange-500 bg-orange-50 dark:bg-orange-500/10":"border-gray-200 dark:border-[#333] bg-white dark:bg-[#1a1a1a] hover:border-gray-300 dark:hover:border-[#444]"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:c}),d&&(0,b.jsx)("svg",{className:"w-5 h-5 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})},c)})})]},a))}),(0,b.jsx)("div",{className:"mt-8 bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/20 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-500 dark:text-blue-400 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("div",{className:"ml-3",children:(0,b.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,b.jsx)("strong",{children:"Note:"})," Students will only see courses allocated to their academic year. Admins, teachers, institution managers, and contest managers can view all courses regardless of allocations."]})})]})})]})})}a.s(["default",()=>h],871626)}];

//# sourceMappingURL=app_%28main%29_admin_course-allocation_page_tsx_e7401b83._.js.map