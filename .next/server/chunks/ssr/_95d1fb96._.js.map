{"version":3,"sources":["../../../../node_modules/next/src/shared/lib/deployment-id.ts","../../../../node_modules/next/src/client/use-merged-ref.ts","../../../../node_modules/next/src/shared/lib/utils/warn-once.ts","../../../../node_modules/lucide-react/src/icons/user.ts","../../../../actions/institution/data%3Abfbe8f%20%3Ctext/javascript%3E","../../../../app/invite/%5Bcode%5D/InviteCard.tsx"],"sourcesContent":["// This could also be a variable instead of a function, but some unit tests want to change the ID at\n// runtime. Even though that would never happen in a real deployment.\nexport function getDeploymentId(): string | undefined {\n  return process.env.NEXT_DEPLOYMENT_ID\n}\n\nexport function getDeploymentIdQueryOrEmptyString(): string {\n  let deploymentId = getDeploymentId()\n  if (deploymentId) {\n    return `?dpl=${deploymentId}`\n  }\n  return ''\n}\n","import { useCallback, useRef, type Ref } from 'react'\n\n// This is a compatibility hook to support React 18 and 19 refs.\n// In 19, a cleanup function from refs may be returned.\n// In 18, returning a cleanup function creates a warning.\n// Since we take userspace refs, we don't know ahead of time if a cleanup function will be returned.\n// This implements cleanup functions with the old behavior in 18.\n// We know refs are always called alternating with `null` and then `T`.\n// So a call with `null` means we need to call the previous cleanup functions.\nexport function useMergedRef<TElement>(\n  refA: Ref<TElement>,\n  refB: Ref<TElement>\n): Ref<TElement> {\n  const cleanupA = useRef<(() => void) | null>(null)\n  const cleanupB = useRef<(() => void) | null>(null)\n\n  // NOTE: In theory, we could skip the wrapping if only one of the refs is non-null.\n  // (this happens often if the user doesn't pass a ref to Link/Form/Image)\n  // But this can cause us to leak a cleanup-ref into user code (previously via `<Link legacyBehavior>`),\n  // and the user might pass that ref into ref-merging library that doesn't support cleanup refs\n  // (because it hasn't been updated for React 19)\n  // which can then cause things to blow up, because a cleanup-returning ref gets called with `null`.\n  // So in practice, it's safer to be defensive and always wrap the ref, even on React 19.\n  return useCallback(\n    (current: TElement | null): void => {\n      if (current === null) {\n        const cleanupFnA = cleanupA.current\n        if (cleanupFnA) {\n          cleanupA.current = null\n          cleanupFnA()\n        }\n        const cleanupFnB = cleanupB.current\n        if (cleanupFnB) {\n          cleanupB.current = null\n          cleanupFnB()\n        }\n      } else {\n        if (refA) {\n          cleanupA.current = applyRef(refA, current)\n        }\n        if (refB) {\n          cleanupB.current = applyRef(refB, current)\n        }\n      }\n    },\n    [refA, refB]\n  )\n}\n\nfunction applyRef<TElement>(\n  refA: NonNullable<Ref<TElement>>,\n  current: TElement\n) {\n  if (typeof refA === 'function') {\n    const cleanup = refA(current)\n    if (typeof cleanup === 'function') {\n      return cleanup\n    } else {\n      return () => refA(null)\n    }\n  } else {\n    refA.current = current\n    return () => {\n      refA.current = null\n    }\n  }\n}\n","let warnOnce = (_: string) => {}\nif (process.env.NODE_ENV !== 'production') {\n  const warnings = new Set<string>()\n  warnOnce = (msg: string) => {\n    if (!warnings.has(msg)) {\n      console.warn(msg)\n    }\n    warnings.add(msg)\n  }\n}\n\nexport { warnOnce }\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n];\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('user', __iconNode);\n\nexport default User;\n","/* __next_internal_action_entry_do_not_use__ [{\"40db331a51f0237eb2b7f839067004b96a1aac8adf\":\"acceptInvite\"},\"actions/institution/invite.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_5=/*#__PURE__*/createServerReference(\"40db331a51f0237eb2b7f839067004b96a1aac8adf\",callServer,void 0,findSourceMapURL,\"acceptInvite\");export{$$RSC_SERVER_ACTION_5 as acceptInvite};","\"use client\";\n\nimport { acceptInvite } from \"@/actions/institution/invite\";\nimport { User } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport Link from \"next/link\";\n\ninterface InviteCardProps {\n    invite: {\n        role: \"ADMIN\" | \"INSTITUTION_MANAGER\" | \"TEACHER\" | \"CONTEST_MANAGER\" | \"STUDENT\";\n        institutionName: string;\n        institutionLogo: string | null;\n        institutionId: string;\n        code: string;\n    };\n    code: string;\n    user: any;\n}\n\nexport default function InviteCard({ invite, code, user }: InviteCardProps) {\n    const [isLoading, setIsLoading] = useState(false);\n    const router = useRouter();\n\n    const isAlreadyMember = user?.institutionId === invite.institutionId;\n\n    const handleAccept = async () => {\n        setIsLoading(true);\n        try {\n            const res = await acceptInvite(code);\n            if (res.success) {\n                toast.success(`Welcome to ${res.institutionName}!`);\n                if (res.onboardingCompleted) {\n                    router.push(\"/dashboard/institution\");\n                } else {\n                    router.push(\"/onboarding\");\n                }\n            } else {\n                toast.error(res.error || \"Failed to join institution\");\n            }\n        } catch (err) {\n            toast.error(\"An unexpected error occurred\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    if (!user) {\n        return (\n            <div className=\"bg-white dark:bg-[#141414] border border-gray-200 dark:border-[#262626] rounded-3xl p-8 shadow-2xl shadow-gray-200/50 dark:shadow-none text-center\">\n                <div className=\"w-20 h-20 bg-gray-50 dark:bg-[#1a1a1a] rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-inner border border-gray-100 dark:border-[#262626]\">\n                    {invite.institutionLogo ? (\n                        <img src={invite.institutionLogo} alt={invite.institutionName} className=\"w-12 h-12 object-contain\" referrerPolicy=\"no-referrer\" />\n                    ) : (\n                        <span className=\"text-2xl font-black text-gray-300 dark:text-gray-600 uppercase\">\n                            {invite.institutionName[0]}\n                        </span>\n                    )}\n                </div>\n\n                <h2 className=\"text-2xl font-black text-gray-900 dark:text-white mb-2\">\n                    {invite.institutionName}\n                </h2>\n                <p className=\"text-gray-500 dark:text-gray-400 text-sm mb-8\">\n                    has invited you to join as a <span className=\"text-orange-600 dark:text-orange-400 font-bold lowercase\">{invite.role.replace('_', ' ')}</span>\n                </p>\n\n                <div className=\"space-y-4\">\n                    <Link\n                        href={`/signin?callbackUrl=/invite/${code}`}\n                        className=\"block w-full py-4 bg-gray-900 dark:bg-white text-white dark:text-black font-bold rounded-xl text-center hover:opacity-90 transition-opacity\"\n                    >\n                        Sign in to Accept\n                    </Link>\n                    <Link\n                        href={`/signup?callbackUrl=/invite/${code}`}\n                        className=\"block w-full py-4 bg-gray-50 dark:bg-[#1a1a1a] text-gray-900 dark:text-white font-bold rounded-xl text-center hover:bg-gray-100 dark:hover:bg-[#262626] transition-colors border border-gray-200 dark:border-[#333]\"\n                    >\n                        Create Account\n                    </Link>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"bg-white dark:bg-[#141414] border border-gray-200 dark:border-[#262626] rounded-3xl p-8 shadow-2xl shadow-gray-200/50 dark:shadow-none text-center\">\n             <div className=\"w-20 h-20 bg-gray-50 dark:bg-[#1a1a1a] rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-inner border border-gray-100 dark:border-[#262626] relative\">\n                {invite.institutionLogo ? (\n                    <img src={invite.institutionLogo} alt={invite.institutionName} className=\"w-12 h-12 object-contain\" referrerPolicy=\"no-referrer\" />\n                ) : (\n                    <span className=\"text-2xl font-black text-gray-300 dark:text-gray-600 uppercase\">\n                        {invite.institutionName[0]}\n                    </span>\n                )}\n                <div className=\"absolute -bottom-2 -right-2 bg-green-500 text-white p-1.5 rounded-full border-4 border-white dark:border-[#141414]\">\n                    <User className=\"w-3 h-3\" />\n                </div>\n            </div>\n\n            <h2 className=\"text-2xl font-black text-gray-900 dark:text-white mb-2\">\n                {isAlreadyMember ? \"Already Joined\" : `Join ${invite.institutionName}`}\n            </h2>\n            <p className=\"text-gray-500 dark:text-gray-400 text-sm mb-8 px-4\">\n                {isAlreadyMember\n                    ? `You are already a member of ${invite.institutionName}.`\n                    : <>You are about to join <strong>{invite.institutionName}</strong> as a <span className=\"text-orange-600 dark:text-orange-400 font-bold lowercase\">{invite.role.replace('_', ' ')}</span>.</>\n                }\n            </p>\n\n            <div className=\"bg-gray-50 dark:bg-[#1a1a1a] rounded-xl p-4 mb-8 flex items-center gap-3 text-left\">\n                <div className=\"w-10 h-10 rounded-full bg-gray-200 dark:bg-[#262626] flex items-center justify-center overflow-hidden\">\n                    {user.image ? <img src={user.image} alt=\"\" className=\"w-full h-full object-cover\" referrerPolicy=\"no-referrer\" /> : user.name?.[0]}\n                </div>\n                <div>\n                    <div className=\"text-xs font-bold text-gray-500 uppercase\">Signed in as</div>\n                    <div className=\"font-bold text-gray-900 dark:text-white text-sm\">{user.email}</div>\n                </div>\n            </div>\n\n            <button\n                onClick={isAlreadyMember ? () => router.push(\"/dashboard\") : handleAccept}\n                disabled={isLoading}\n                className={`w-full py-4 ${isAlreadyMember ? \"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white\" : \"bg-orange-600 text-white hover:bg-orange-700 shadow-lg shadow-orange-500/20\"} font-bold rounded-xl transition-colors disabled:opacity-50 flex items-center justify-center gap-2`}\n            >\n                {isLoading ? \"Joining...\" : (isAlreadyMember ? \"Go to Dashboard\" : \"Accept Invite\")}\n            </button>\n\n            <p className=\"mt-4 text-[10px] text-gray-400\">\n                By joining, you grant {invite.institutionName} access to your performance data.\n            </p>\n        </div>\n    );\n}\n"],"names":["getDeploymentId","getDeploymentIdQueryOrEmptyString","process","env","NEXT_DEPLOYMENT_ID","deploymentId","useMergedRef","refA","refB","cleanupA","useRef","cleanupB","useCallback","current","cleanupFnA","cleanupFnB","applyRef","cleanup","warnOnce","_","NODE_ENV","warnings","Set","msg","has","console","warn","add"],"mappings":"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","ignoreList":[0,1,2,3]}