module.exports=[369895,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(915618),e=a.i(941675),f=a.i(167453),g=a.i(50522);let h=(0,a.i(170106).default)("chart-no-axes-column",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]]);var i=a.i(256711),j=a.i(50944),k=a.i(965733),l=a.i(205522),m=a.i(340695),n=a.i(667937),n=n,o=a.i(596221),p=a.i(587532),q=a.i(633508),r=a.i(823292),s=a.i(405050);let t=(0,s.createServerReference)("60d524aa91b2de3b64624b26cd3282f84a727e5525",s.callServer,void 0,s.findSourceMapURL,"createAssignment");var u=a.i(788197);function v({isOpen:a,onClose:e,classroomId:f,onSuccess:g}){let h=(0,j.useRouter)(),[i,s]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)([]),J=async a=>{if(C(a),a.length<2)return void E([]);G(!0);try{let b=(await (0,u.searchProblems)(a)).problems||[],c=new Set(H.map(a=>a.id));E(b.filter(a=>!c.has(a.id)))}catch(a){console.error("Search failed",a)}finally{G(!1)}},K=async()=>{if(!i.trim())return r.toast.error("Title is required");if(0===H.length)return r.toast.error("Select at least one problem");A(!0);try{let a=await t(f,{title:i,description:v,dueDate:x?new Date(x):void 0,problemIds:H.map(a=>a.id)});a.success?(r.toast.success("Assignment created!"),s(""),w(""),y(""),I([]),h.refresh(),g()):r.toast.error(a.error||"Failed to create assignment")}catch(a){r.toast.error("Something went wrong")}finally{A(!1)}};return(0,b.jsx)(k.Dialog,{open:a,onOpenChange:a=>!a&&e(),children:(0,b.jsxs)("div",{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsx)(k.DialogTitle,{children:"Create Assignment"})}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Assignment Title"}),(0,b.jsx)(l.Input,{value:i,onChange:a=>s(a.target.value),placeholder:"e.g. Week 1: Array Basics"})]}),(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description (Optional)"}),(0,b.jsx)("textarea",{value:v,onChange:a=>w(a.target.value),placeholder:"Instructions for students...",className:"flex min-h-[80px] w-full rounded-md border border-gray-200 dark:border-[#333] bg-white dark:bg-[#1a1a1a] px-3 py-2 text-sm ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Due Date & Time (Optional)"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.default,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)("input",{type:"datetime-local",value:x,onChange:a=>y(a.target.value),className:"flex h-10 w-full rounded-md border border-gray-200 dark:border-[#333] bg-white dark:bg-[#1a1a1a] pl-10 pr-3 py-2 text-sm ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-orange-500"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Problems (",H.length,")"]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,b.jsx)(l.Input,{value:B,onChange:a=>J(a.target.value),placeholder:"Search for problems to add...",className:"pl-9"}),F&&(0,b.jsx)("div",{className:"absolute right-3 top-3",children:(0,b.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin text-gray-400"})}),D.length>0&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-[#1a1a1a] border border-gray-200 dark:border-[#333] rounded-lg shadow-lg max-h-60 overflow-y-auto",children:D.map(a=>(0,b.jsxs)("button",{onClick:()=>{!H.some(b=>b.id===a.id)&&(I([...H,a]),E(D.filter(b=>b.id!==a.id)),C(""))},className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-[#262626] flex items-center justify-between group",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a.title}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[a.difficulty," â€¢ ",a.domain]})]}),(0,b.jsx)(d.Plus,{className:"w-4 h-4 text-gray-400 group-hover:text-orange-500"})]},a.id))})]}),H.length>0?(0,b.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:H.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-[#1f1f1f] rounded-lg border border-gray-100 dark:border-[#333] group",children:[(0,b.jsxs)("div",{className:"text-xs font-bold text-gray-400 w-6",children:["#",c+1]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,b.jsx)("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase ${"EASY"===a.difficulty?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"MEDIUM"===a.difficulty?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:a.difficulty}),(0,b.jsx)("span",{className:"text-[10px] text-gray-500",children:a.domain})]})]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void I(H.filter(a=>a.id!==b))},className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:(0,b.jsx)(q.X,{className:"w-4 h-4"})})]},a.id))}):(0,b.jsx)("div",{className:"text-center py-8 border-2 border-dashed border-gray-200 dark:border-[#262626] rounded-xl text-gray-500 text-sm",children:"No problems selected yet"})]})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(m.Button,{variant:"outline",onClick:e,disabled:z,children:"Cancel"}),(0,b.jsxs)(m.Button,{onClick:K,disabled:z||0===H.length,className:"bg-orange-600 hover:bg-orange-700 text-white",children:[z&&(0,b.jsx)(o.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Create Assignment"]})]})]})})}let w=(0,s.createServerReference)("701a6d25d4b7468b20f730dbbc9ce71c7fadc6147a",s.callServer,void 0,s.findSourceMapURL,"getClassroomAssignments"),x=(0,s.createServerReference)("40fdc27308612ef878f36ea6cbc4122bd532597346",s.callServer,void 0,s.findSourceMapURL,"refreshClassroomAssignments");var y=a.i(400210),z=a.i(992258),A=a.i(284505);let B=(0,s.createServerReference)("7863e699dcd438e59c52bc1d0a63ef9f1103a9a11a",s.callServer,void 0,s.findSourceMapURL,"getTeacherAssignmentAnalytics");var C=a.i(571987);function D({assignmentId:a,classroomId:d,onBack:e}){let[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,n]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let b=await B(a,d);b&&"analytics"in b?h(b.analytics||[]):Array.isArray(b)?h(b):h([])}catch(a){console.error("Failed to fetch analytics",a)}finally{j(!1)}})()},[a,d]);let o=g.filter(a=>a.student.name?.toLowerCase().includes(k.toLowerCase())||a.student.email?.toLowerCase().includes(k.toLowerCase()));if(i)return(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading analytics..."});let q=g.length,r=g.filter(a=>a.hasCompletedAll).length,s=q>0?g.reduce((a,b)=>a+b.completionPercentage,0)/q:0;return(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full",children:(0,b.jsx)(y.ArrowLeft,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Assignment Analytics"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Track student progress and submissions"})]})]}),(0,b.jsxs)(m.Button,{onClick:()=>{let a=new Blob([["Student Name,Email,Completed Problems,Total Problems,Completion %,Status",...g.map(a=>[a.student.name||"Unknown",a.student.email,a.completedCount,a.totalCount,`${a.completionPercentage.toFixed(1)}%`,a.hasCompletedAll?"Completed":"In Progress"]).map(a=>a.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a"),c=URL.createObjectURL(a);b.setAttribute("href",c),b.setAttribute("download","assignment_report.csv"),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b)},variant:"outline",className:"gap-2",children:[(0,b.jsx)(A.Download,{className:"w-4 h-4"}),"Export CSV"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"p-6 bg-white dark:bg-[#1a1a1a] border border-gray-100 dark:border-[#262626] rounded-xl shadow-sm",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Completion Rate"}),(0,b.jsxs)("div",{className:"text-3xl font-black text-gray-900 dark:text-white",children:[Math.round(r/q*100)||0,"%"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:[r," of ",q," students completed all problems"]})]}),(0,b.jsxs)("div",{className:"p-6 bg-white dark:bg-[#1a1a1a] border border-gray-100 dark:border-[#262626] rounded-xl shadow-sm",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Avg. Progress"}),(0,b.jsxs)("div",{className:"text-3xl font-black text-gray-900 dark:text-white",children:[Math.round(s),"%"]}),(0,b.jsx)("div",{className:"h-1.5 mt-3 bg-gray-100 dark:bg-[#333] rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-orange-500 rounded-full transition-all",style:{width:`${s}%`}})})]}),(0,b.jsxs)("div",{className:"p-6 bg-white dark:bg-[#1a1a1a] border border-gray-100 dark:border-[#262626] rounded-xl shadow-sm",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Pending"}),(0,b.jsx)("div",{className:"text-3xl font-black text-orange-600 dark:text-orange-500",children:q-r}),(0,b.jsx)("div",{className:"text-xs text-gray-400 mt-2",children:"Students still working"})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-[#1a1a1a] border border-gray-100 dark:border-[#262626] rounded-xl overflow-hidden shadow-sm",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-gray-50 dark:border-[#262626] flex items-center justify-between gap-4",children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-900 dark:text-white",children:["Student Progress (",o.length,")"]}),(0,b.jsxs)("div",{className:"relative w-64",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsx)(l.Input,{placeholder:"Search students...",value:k,onChange:a=>n(a.target.value),className:"pl-9 h-9"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50/50 dark:bg-[#202020]",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 font-medium",children:"Student"}),(0,b.jsx)("th",{className:"px-6 py-3 font-medium",children:"Progress"}),(0,b.jsx)("th",{className:"px-6 py-3 font-medium text-center",children:"Solved"}),(0,b.jsx)("th",{className:"px-6 py-3 font-medium text-right",children:"Status"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-50 dark:divide-[#262626]",children:o.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-[#1f1f1f] transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-[#333] overflow-hidden flex items-center justify-center text-[10px] font-bold text-gray-500",children:a.student.image?(0,b.jsx)(C.default,{src:a.student.image,alt:a.student.name||"",width:32,height:32,className:"object-cover"}):a.student.name?.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:a.student.name||"Unknown"}),(0,b.jsxs)("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[(0,b.jsx)(z.Mail,{className:"w-3 h-3"}),a.student.email]})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 w-1/3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`h-2 flex-1 rounded-full overflow-hidden ${a.hasCompletedAll?"bg-green-100 dark:bg-green-900/20":"bg-gray-100 dark:bg-[#333]"}`,children:(0,b.jsx)("div",{className:`h-full rounded-full transition-all ${a.hasCompletedAll?"bg-green-500":"bg-orange-500"}`,style:{width:`${a.completionPercentage}%`}})}),(0,b.jsxs)("span",{className:"text-xs font-bold w-9 text-right",children:[Math.round(a.completionPercentage),"%"]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-center",children:(0,b.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-[#333] dark:text-gray-300",children:[a.completedCount," / ",a.totalCount]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:a.hasCompletedAll?(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700 dark:bg-green-500/10 dark:text-green-400",children:[(0,b.jsx)(f.CheckCircle2,{className:"w-3.5 h-3.5"}),"Done"]}):(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-orange-50 text-orange-700 dark:bg-orange-500/10 dark:text-orange-400",children:[(0,b.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 animate-pulse"}),"Pending"]})})]},a.student.id))})]})})]})]})}var E=a.i(238246);function F({classroomId:a,isTeacher:j}){let[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,s]=(0,c.useState)(null),t=async()=>{try{let b=await w(a);l(b.assignments||[])}catch(a){console.error("Failed to fetch assignments",a),r.toast.error("Failed to load assignments")}finally{n(!1)}},u=async()=>{try{let b=await x(a);l(b)}catch(a){console.error("Failed to refresh assignments",a)}};return((0,c.useEffect)(()=>{t()},[a]),q&&j)?(0,b.jsx)(D,{assignmentId:q,classroomId:a,onBack:()=>s(null)}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Assignments"}),j&&(0,b.jsxs)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-orange-600 text-white text-sm font-bold rounded-lg hover:bg-orange-700 flex items-center gap-2 transition-colors",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4"}),"Create Assignment"]})]}),m?(0,b.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading assignments..."}):0===k.length?(0,b.jsxs)("div",{className:"text-center py-16 bg-gray-50 border border-gray-100 dark:bg-[#1a1a1a] dark:border-[#262626] rounded-2xl",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-500/10 rounded-full flex items-center justify-center mx-auto mb-4 text-orange-600 dark:text-orange-500",children:(0,b.jsx)(e.Calendar,{className:"w-8 h-8"})}),(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"No assignments yet"}),(0,b.jsx)("p",{className:"text-gray-500 max-w-md mx-auto mb-6",children:j?"Create your first assignment to track student progress on specific problems.":"Your teacher hasn't posted any assignments yet."}),j&&(0,b.jsx)("button",{onClick:()=>p(!0),className:"px-6 py-3 bg-white border border-gray-200 text-gray-900 hover:bg-gray-50 text-sm font-bold rounded-lg transition-colors",children:"Create Assignment"})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(a=>(0,b.jsxs)("div",{className:"bg-white dark:bg-[#1a1a1a] border border-gray-100 dark:border-[#262626] rounded-xl p-6 hover:shadow-lg transition-all group relative cursor-pointer",onClick:()=>{j&&s(a.id)},children:[!j&&(0,b.jsx)(E.default,{href:`/my-assignments/${a.id}`,className:"absolute inset-0 z-10"}),(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsx)("div",{className:"p-3 bg-orange-50 dark:bg-orange-500/10 rounded-lg text-orange-600 dark:text-orange-500",children:(0,b.jsx)(f.CheckCircle2,{className:"w-6 h-6"})}),a.dueDate&&(0,b.jsxs)("span",{className:"text-xs font-bold text-gray-400 bg-gray-50 dark:bg-[#262626] px-2 py-1 rounded",children:["Due ",(0,i.format)(new Date(a.dueDate),"MMM d")]})]}),(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 group-hover:text-orange-600 transition-colors",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-6 line-clamp-2 min-h-[40px]",children:a.description||"No description provided"}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50 dark:border-[#262626]",children:[(0,b.jsxs)("span",{className:"text-xs font-bold text-gray-500",children:[a._count.problems," Problems"]}),j?(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs font-bold text-orange-600 hover:underline",children:[(0,b.jsx)(h,{className:"w-3 h-3"}),"View Analytics"]}):(0,b.jsxs)("span",{className:"flex items-center gap-1 text-xs font-bold text-gray-900 dark:text-white group-hover:translate-x-1 transition-transform",children:["Start",(0,b.jsx)(g.ChevronRight,{className:"w-3 h-3"})]})]})]},a.id))}),j&&(0,b.jsx)(v,{isOpen:o,onClose:()=>p(!1),classroomId:a,onSuccess:()=>{p(!1),u()}})]})}a.s(["AssignmentsTab",()=>F],369895)},816382,a=>{a.n(a.i(369895))}];

//# sourceMappingURL=components_classroom_assignments_AssignmentsTab_tsx_210a13e2._.js.map