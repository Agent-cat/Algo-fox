{"version":3,"sources":["../../../lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst prismaClientSingleton = () => {\n    return new PrismaClient({\n        log: process.env.NODE_ENV === 'development' ? ['error', 'warn'] : ['error'],\n    }).$extends({\n        query: {\n            $allModels: {\n                async $allOperations({ operation, model, args, query }) {\n                    const start = performance.now();\n                    const result = await query(args);\n                    const end = performance.now();\n\n                    // Warn about slow queries (>1 second)\n                    if (end - start > 1000) {\n                        console.warn(`Slow query: ${model}.${operation} took ${(end - start).toFixed(2)}ms`);\n                    }\n\n                    return result;\n                },\n            },\n        },\n    });\n};\n\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>;\n\ndeclare global {\n    var prisma_fox: PrismaClientSingleton | undefined;\n}\n\nconst prisma = globalThis.prisma_fox ?? prismaClientSingleton();\n\nexport { prisma };\n\nif (process.env.NODE_ENV !== \"production\") globalThis.prisma_fox = prisma;\n"],"names":[],"mappings":"0JAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QA+BA,IAAM,EAAS,WAAW,UAAU,EA5BzB,EA4B6B,EA5BzB,EAAA,YAAY,CAAC,CACpB,IAAkE,CAA7D,AAA8D,QAAQ,AAC/E,GAAG,QAAQ,CAAC,CACR,MAAO,CACH,UAH0C,CAG9B,CACR,MAAM,eAAe,WAAE,CAAS,OAAE,CAAK,MAAE,CAAI,OAAE,CAAK,CAAE,EAClD,IAAM,EAAQ,YAAY,GAAG,GACvB,EAAS,MAAM,EAAM,GACrB,EAAM,YAAY,GAAG,GAO3B,OAJI,EAAM,EAAQ,KACd,CADoB,OACZ,IAAI,CAAC,CAAC,YAAY,EAAE,EAAM,CAAC,EAAE,EAAU,MAAM,EAAE,AAAC,GAAM,CAAA,CAAK,CAAE,OAAO,CAAC,GAAG,EAAE,CAAC,EAGhF,CACX,CACJ,CACJ,CACJ"}