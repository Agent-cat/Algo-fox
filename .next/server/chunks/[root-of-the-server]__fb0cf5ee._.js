module.exports=[709254,(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={},l={RequestCookies:()=>m,ResponseCookies:()=>g,parseCookie:()=>d,parseSetCookie:()=>p,stringifyCookie:()=>u};for(var c in l)n(s,c,{get:l[c],enumerable:!0});function u(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function d(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function p(e){if(!e)return;let[[t,r],...n]=d(e),{domain:i,expires:o,httponly:a,maxage:s,path:l,samesite:c,secure:u,partitioned:p,priority:m}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var g,y,v={name:t,value:decodeURIComponent(r),domain:i,...o&&{expires:new Date(o)},...a&&{httpOnly:!0},..."string"==typeof s&&{maxAge:Number(s)},path:l,...c&&{sameSite:f.includes(g=(g=c).toLowerCase())?g:void 0},...u&&{secure:!0},...m&&{priority:h.includes(y=(y=m).toLowerCase())?y:void 0},...p&&{partitioned:!0}};let e={};for(let t in v)v[t]&&(e[t]=v[t]);return e}}t.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var f=["strict","lax","none"],h=["low","medium","high"],m=class{constructor(e){this._parsed=new Map,this._headers=e;const t=e.get("cookie");if(t)for(const[e,r]of d(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>u(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>u(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},g=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;const i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(const e of Array.isArray(i)?i:function(e){if(!e)return[];var t,r,n,i,o,a=[],s=0;function l(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,o=!1;l();)if(","===(r=e.charAt(s))){for(n=s,s+=1,l(),i=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(o=!0,s=i,a.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!o||s>=e.length)&&a.push(e.substring(t,e.length))}return a}(i)){const t=p(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=u(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(u).join("; ")}}},331387,(e,t,r)=>{(()=>{"use strict";let r,n,i,o,a;var s,l,c,u,d,p,f,h,m,g,y,v,b,w,_,E,x={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(223),i=r(172),o=r(930),a="context",s=new n.NoopContextManager;class l{static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(a,e,o.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(a)||s}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(a,o.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(56),i=r(912),o=r(957),a=r(172);class s{constructor(){function e(e){return function(...t){let r=(0,a.getGlobal)("diag");if(r)return r[e](...t)}}const t=this;t.setLogger=(e,r={logLevel:o.DiagLogLevel.INFO})=>{var n,s,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=e.stack)?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let c=(0,a.getGlobal)("diag"),u=(0,i.createLogLevelDiagLogger)(null!=(s=r.logLevel)?s:o.DiagLogLevel.INFO,e);if(c&&!r.suppressOverrideMessage){let e=null!=(l=Error().stack)?l:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${e}`),u.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,a.registerGlobal)("diag",u,t,!0)},t.disable=()=>{(0,a.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new s),this._instance}}t.DiagAPI=s},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(660),i=r(172),o=r(930),a="metrics";class s{static getInstance(){return this._instance||(this._instance=new s),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(a,e,o.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(a)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(a,o.DiagAPI.instance())}}t.MetricsAPI=s},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(172),i=r(874),o=r(194),a=r(277),s=r(369),l=r(930),c="propagation",u=new i.NoopTextMapPropagator;class d{constructor(){this.createBaggage=s.createBaggage,this.getBaggage=a.getBaggage,this.getActiveBaggage=a.getActiveBaggage,this.setBaggage=a.setBaggage,this.deleteBaggage=a.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(c,e,l.DiagAPI.instance())}inject(e,t,r=o.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=o.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(c,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(c)||u}}t.PropagationAPI=d},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(172),i=r(846),o=r(139),a=r(607),s=r(930),l="trace";class c{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=o.wrapSpanContext,this.isSpanContextValid=o.isSpanContextValid,this.deleteSpan=a.deleteSpan,this.getSpan=a.getSpan,this.getActiveSpan=a.getActiveSpan,this.getSpanContext=a.getSpanContext,this.setSpan=a.setSpan,this.setSpanContext=a.setSpanContext}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(l,this._proxyTracerProvider,s.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(l,s.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=c},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(491),i=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function o(e){return e.getValue(i)||void 0}t.getBaggage=o,t.getActiveBaggage=function(){return o(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(i,t)},t.deleteBaggage=function(e){return e.deleteValue(i)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(930),i=r(993),o=r(830),a=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(a.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:o.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(780);t.NoopContextManager=class{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(172);function i(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return i("debug",this._namespace,e)}error(...e){return i("error",this._namespace,e)}info(...e){return i("info",this._namespace,e)}warn(...e){return i("warn",this._namespace,e)}verbose(...e){return i("verbose",this._namespace,e)}}},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];t.DiagConsoleLogger=class{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,(r=t.DiagLogLevel||(t.DiagLogLevel={}))[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(200),i=r(521),o=r(130),a=i.VERSION.split(".")[0],s=Symbol.for(`opentelemetry.js.api.${a}`),l=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var o;let a=l[s]=null!=(o=l[s])?o:{version:i.VERSION};if(!n&&a[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(a.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${a.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return a[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null==(t=l[s])?void 0:t.version;if(n&&(0,o.isCompatible)(n))return null==(r=l[s])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=l[s];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(521),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function o(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=o.prerelease)return function(t){return t===e};function a(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return a(e);let s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease||o.major!==s.major)return a(e);if(0===o.major)return o.minor===s.minor&&o.patch<=s.patch?(t.add(e),!0):a(e);return o.minor<=s.minor?(t.add(e),!0):a(e)}}t._makeCompatibilityCheck=o,t.isCompatible=o(n.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,(r=t.ValueType||(t.ValueType={}))[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class o extends n{add(e,t){}}t.NoopUpDownCounterMetric=o;class a extends n{record(e,t){}}t.NoopHistogramMetric=a;class s{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=s;class l extends s{}t.NoopObservableCounterMetric=l;class c extends s{}t.NoopObservableGaugeMetric=c;class u extends s{}t.NoopObservableUpDownCounterMetric=u,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new a,t.NOOP_UP_DOWN_COUNTER_METRIC=new o,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new c,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new u,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(102);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},200:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46),t)},651:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:e.g},46:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0,t.NoopTextMapPropagator=class{inject(e,t){}extract(e,t){return e}fields(){return[]}}},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(476);t.NonRecordingSpan=class{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(491),i=r(607),o=r(403),a=r(139),s=n.ContextAPI.getInstance();t.NoopTracer=class{startSpan(e,t,r=s.active()){var n;if(null==t?void 0:t.root)return new o.NonRecordingSpan;let l=r&&(0,i.getSpanContext)(r);return"object"==typeof(n=l)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&(0,a.isSpanContextValid)(l)?new o.NonRecordingSpan(l):new o.NonRecordingSpan}startActiveSpan(e,t,r,n){let o,a,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(o=t,l=r):(o=t,a=r,l=n);let c=null!=a?a:s.active(),u=this.startSpan(e,o,c),d=(0,i.setSpan)(c,u);return s.with(d,l,void 0,u)}}},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(614);t.NoopTracerProvider=class{getTracer(e,t,r){return new n.NoopTracer}}},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=new(r(614)).NoopTracer;t.ProxyTracer=class{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(125),i=new(r(124)).NoopTracerProvider;t.ProxyTracerProvider=class{getTracer(e,t,r){var i;return null!=(i=this.getDelegateTracer(e,t,r))?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)}}},996:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,(r=t.SamplingDecision||(t.SamplingDecision={}))[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(780),i=r(403),o=r(491),a=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function s(e){return e.getValue(a)||void 0}function l(e,t){return e.setValue(a,t)}t.getSpan=s,t.getActiveSpan=function(){return s(o.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(a)},t.setSpanContext=function(e,t){return l(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=s(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(564);class i{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf("=");if(-1!==i){let o=r.slice(0,i),a=r.slice(i+1,t.length);(0,n.validateKey)(o)&&(0,n.validateValue)(a)&&e.set(o,a)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new i;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=i},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,o=RegExp(`^(?:${n}|${i})$`),a=/^[ -~]{0,255}[!-~]$/,s=/,|=/;t.validateKey=function(e){return o.test(e)},t.validateValue=function(e){return a.test(e)&&!s.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(325);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,(r=t.SpanKind||(t.SpanKind={}))[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(476),i=r(403),o=/^([0-9a-f]{32})$/i,a=/^[0-9a-f]{16}$/i;function s(e){return o.test(e)&&e!==n.INVALID_TRACEID}function l(e){return a.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=s,t.isValidSpanId=l,t.isSpanContextValid=function(e){return s(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},847:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"},475:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,(r=t.TraceFlags||(t.TraceFlags={}))[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},S={};function k(e){var t=S[e];if(void 0!==t)return t.exports;var r=S[e]={exports:{}},n=!0;try{x[e].call(r.exports,r,r.exports,k),n=!1}finally{n&&delete S[e]}return r.exports}k.ab="/ROOT/node_modules/next/dist/compiled/@opentelemetry/api/";var A={};Object.defineProperty(A,"__esModule",{value:!0}),A.trace=A.propagation=A.metrics=A.diag=A.context=A.INVALID_SPAN_CONTEXT=A.INVALID_TRACEID=A.INVALID_SPANID=A.isValidSpanId=A.isValidTraceId=A.isSpanContextValid=A.createTraceState=A.TraceFlags=A.SpanStatusCode=A.SpanKind=A.SamplingDecision=A.ProxyTracerProvider=A.ProxyTracer=A.defaultTextMapSetter=A.defaultTextMapGetter=A.ValueType=A.createNoopMeter=A.DiagLogLevel=A.DiagConsoleLogger=A.ROOT_CONTEXT=A.createContextKey=A.baggageEntryMetadataFromString=void 0,s=k(369),Object.defineProperty(A,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return s.baggageEntryMetadataFromString}}),l=k(780),Object.defineProperty(A,"createContextKey",{enumerable:!0,get:function(){return l.createContextKey}}),Object.defineProperty(A,"ROOT_CONTEXT",{enumerable:!0,get:function(){return l.ROOT_CONTEXT}}),c=k(972),Object.defineProperty(A,"DiagConsoleLogger",{enumerable:!0,get:function(){return c.DiagConsoleLogger}}),u=k(957),Object.defineProperty(A,"DiagLogLevel",{enumerable:!0,get:function(){return u.DiagLogLevel}}),d=k(102),Object.defineProperty(A,"createNoopMeter",{enumerable:!0,get:function(){return d.createNoopMeter}}),p=k(901),Object.defineProperty(A,"ValueType",{enumerable:!0,get:function(){return p.ValueType}}),f=k(194),Object.defineProperty(A,"defaultTextMapGetter",{enumerable:!0,get:function(){return f.defaultTextMapGetter}}),Object.defineProperty(A,"defaultTextMapSetter",{enumerable:!0,get:function(){return f.defaultTextMapSetter}}),h=k(125),Object.defineProperty(A,"ProxyTracer",{enumerable:!0,get:function(){return h.ProxyTracer}}),m=k(846),Object.defineProperty(A,"ProxyTracerProvider",{enumerable:!0,get:function(){return m.ProxyTracerProvider}}),g=k(996),Object.defineProperty(A,"SamplingDecision",{enumerable:!0,get:function(){return g.SamplingDecision}}),y=k(357),Object.defineProperty(A,"SpanKind",{enumerable:!0,get:function(){return y.SpanKind}}),v=k(847),Object.defineProperty(A,"SpanStatusCode",{enumerable:!0,get:function(){return v.SpanStatusCode}}),b=k(475),Object.defineProperty(A,"TraceFlags",{enumerable:!0,get:function(){return b.TraceFlags}}),w=k(98),Object.defineProperty(A,"createTraceState",{enumerable:!0,get:function(){return w.createTraceState}}),_=k(139),Object.defineProperty(A,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(A,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(A,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}}),E=k(476),Object.defineProperty(A,"INVALID_SPANID",{enumerable:!0,get:function(){return E.INVALID_SPANID}}),Object.defineProperty(A,"INVALID_TRACEID",{enumerable:!0,get:function(){return E.INVALID_TRACEID}}),Object.defineProperty(A,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return E.INVALID_SPAN_CONTEXT}}),r=k(67),Object.defineProperty(A,"context",{enumerable:!0,get:function(){return r.context}}),n=k(506),Object.defineProperty(A,"diag",{enumerable:!0,get:function(){return n.diag}}),i=k(886),Object.defineProperty(A,"metrics",{enumerable:!0,get:function(){return i.metrics}}),o=k(939),Object.defineProperty(A,"propagation",{enumerable:!0,get:function(){return o.propagation}}),a=k(845),Object.defineProperty(A,"trace",{enumerable:!0,get:function(){return a.trace}}),A.default={context:r.context,diag:n.diag,metrics:i.metrics,propagation:o.propagation,trace:a.trace},t.exports=A})()},262712,(e,t,r)=>{(()=>{"use strict";"u">typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/next/dist/compiled/cookie/");var e,r,n,i,o={};o.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var i={},o=t.split(n),a=(r||{}).decode||e,s=0;s<o.length;s++){var l=o[s],c=l.indexOf("=");if(!(c<0)){var u=l.substr(0,c).trim(),d=l.substr(++c,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==i[u]&&(i[u]=function(e,t){try{return t(e)}catch(t){return e}}(d,a))}}return i},o.serialize=function(e,t,n){var o=n||{},a=o.encode||r;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var s=a(t);if(s&&!i.test(s))throw TypeError("argument val is invalid");var l=e+"="+s;if(null!=o.maxAge){var c=o.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(o.domain){if(!i.test(o.domain))throw TypeError("option domain is invalid");l+="; Domain="+o.domain}if(o.path){if(!i.test(o.path))throw TypeError("option path is invalid");l+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(l+="; HttpOnly"),o.secure&&(l+="; Secure"),o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l},e=decodeURIComponent,r=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,t.exports=o})()},447413,(e,t,r)=>{(()=>{"use strict";let e,r,n,i,o;var a={993:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var s=new i(n,o||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=Array(o);i<o;i++)a[i]=n[i].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,a),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(p=1,l=Array(d-1);p<d;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},213:e=>{e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},574:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){let o=i/2|0,a=n+o;0>=r(e[a],t)?(n=++a,i-=o+1):i=o}return n}},821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(574);t.default=class{constructor(){this._queue=[]}enqueue(e,t){let r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);let i=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,r)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}},816:(e,t,r)=>{let n=r(213);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}let o=(e,t,r)=>new Promise((o,a)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void o(e);let s=setTimeout(()=>{if("function"==typeof r){try{o(r())}catch(e){a(e)}return}let n="string"==typeof r?r:`Promise timed out after ${t} milliseconds`,s=r instanceof Error?r:new i(n);"function"==typeof e.cancel&&e.cancel(),a(s)},t);n(e.then(o,a),()=>{clearTimeout(s)})});e.exports=o,e.exports.default=o,e.exports.TimeoutError=i}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}},n=!0;try{a[e](r,r.exports,l),n=!1}finally{n&&delete s[e]}return r.exports}l.ab="/ROOT/node_modules/next/dist/compiled/p-queue/";var c={};Object.defineProperty(c,"__esModule",{value:!0}),e=l(993),r=l(816),n=l(821),i=()=>{},o=new r.TimeoutError,c.default=class extends e{constructor(e){var t,r,o,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=i,this._resolveIdle=i,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!=(r=null==(t=e.intervalCap)?void 0:t.toString())?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!=(a=null==(o=e.interval)?void 0:o.toString())?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=i,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=i,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,i)=>{let a=async()=>{this._pendingCount++,this._intervalCount++;try{let a=void 0===this._timeout&&void 0===t.timeout?e():r.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&i(o)});n(await a)}catch(e){i(e)}this._next()};this._queue.enqueue(a,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}},t.exports=c})()},478500,(e,t,r)=>{t.exports=e.x("node:async_hooks",()=>require("node:async_hooks"))},22947,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={getTestReqInfo:function(){return l},withRequest:function(){return s}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=new(e.r(478500)).AsyncLocalStorage;function a(e,t){let r=t.header(e,"next-test-proxy-port");if(!r)return;let n=t.url(e);return{url:n,proxyPort:Number(r),testData:t.header(e,"next-test-data")||""}}function s(e,t,r){let n=a(e,t);return n?o.run(n,r):r()}function l(e,t){let r=o.getStore();return r||(e&&t?a(e,t):void 0)}},49883,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={handleFetch:function(){return l},interceptFetch:function(){return c},reader:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(22947),a={url:e=>e.url,header:(e,t)=>e.headers.get(t)};async function s(e,t){let{url:r,method:n,headers:i,body:o,cache:a,credentials:s,integrity:l,mode:c,redirect:u,referrer:d,referrerPolicy:p}=t;return{testData:e,api:"fetch",request:{url:r,method:n,headers:[...Array.from(i),["next-test-stack",function(){let e=(Error().stack??"").split("\n");for(let t=1;t<e.length;t++)if(e[t].length>0){e=e.slice(t);break}return(e=(e=(e=e.filter(e=>!e.includes("/next/dist/"))).slice(0,5)).map(e=>e.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:o?Buffer.from(await t.arrayBuffer()).toString("base64"):null,cache:a,credentials:s,integrity:l,mode:c,redirect:u,referrer:d,referrerPolicy:p}}}async function l(e,t){let r=(0,o.getTestReqInfo)(t,a);if(!r)return e(t);let{testData:n,proxyPort:i}=r,l=await s(n,t),c=await e(`http://localhost:${i}`,{method:"POST",body:JSON.stringify(l),next:{internal:!0}});if(!c.ok)throw Object.defineProperty(Error(`Proxy request failed: ${c.status}`),"__NEXT_ERROR_CODE",{value:"E146",enumerable:!1,configurable:!0});let u=await c.json(),{api:d}=u;switch(d){case"continue":return e(t);case"abort":case"unhandled":throw Object.defineProperty(Error(`Proxy request aborted [${t.method} ${t.url}]`),"__NEXT_ERROR_CODE",{value:"E145",enumerable:!1,configurable:!0});case"fetch":return function(e){let{status:t,headers:r,body:n}=e.response;return new Response(n?Buffer.from(n,"base64"):null,{status:t,headers:new Headers(r)})}(u);default:return d}}function c(t){return e.g.fetch=function(e,r){var n;return(null==r||null==(n=r.next)?void 0:n.internal)?t(e,r):l(t,new Request(e,r))},()=>{e.g.fetch=t}}},376532,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={interceptTestApis:function(){return s},wrapRequestHandler:function(){return l}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(22947),a=e.r(49883);function s(){return(0,a.interceptFetch)(e.g.fetch)}function l(e){return(t,r)=>(0,o.withRequest)(t,a.reader,()=>e(t,r))}},512953,(e,t,r)=>{"use strict";function n(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"detectDomainLocale",{enumerable:!0,get:function(){return n}})},157520,(e,t,r)=>{"use strict";function n(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removeTrailingSlash",{enumerable:!0,get:function(){return n}})},952799,(e,t,r)=>{"use strict";function n(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parsePath",{enumerable:!0,get:function(){return n}})},511959,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(952799);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:o}=(0,n.parsePath)(e);return`${t}${r}${i}${o}`}},130652,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathSuffix",{enumerable:!0,get:function(){return i}});let n=e.r(952799);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:o}=(0,n.parsePath)(e);return`${r}${t}${i}${o}`}},886984,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"pathHasPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(952799);function i(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},399256,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLocale",{enumerable:!0,get:function(){return o}});let n=e.r(511959),i=e.r(886984);function o(e,t,r,o){if(!t||t===r)return e;let a=e.toLowerCase();return!o&&((0,i.pathHasPrefix)(a,"/api")||(0,i.pathHasPrefix)(a,`/${t.toLowerCase()}`))?e:(0,n.addPathPrefix)(e,`/${t}`)}},16107,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"formatNextPathnameInfo",{enumerable:!0,get:function(){return s}});let n=e.r(157520),i=e.r(511959),o=e.r(130652),a=e.r(399256);function s(e){let t=(0,a.addLocale)(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=(0,n.removeTrailingSlash)(t)),e.buildId&&(t=(0,o.addPathSuffix)((0,i.addPathPrefix)(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=(0,i.addPathPrefix)(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:(0,o.addPathSuffix)(t,"/"):(0,n.removeTrailingSlash)(t)}},26729,(e,t,r)=>{"use strict";function n(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getHostname",{enumerable:!0,get:function(){return n}})},996045,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"normalizeLocalePath",{enumerable:!0,get:function(){return i}});let n=new WeakMap;function i(e,t){let r;if(!t)return{pathname:e};let i=n.get(t);i||(i=t.map(e=>e.toLowerCase()),n.set(t,i));let o=e.split("/",2);if(!o[1])return{pathname:e};let a=o[1].toLowerCase(),s=i.indexOf(a);return s<0?{pathname:e}:(r=t[s],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}},92624,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removePathPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(886984);function i(e,t){if(!(0,n.pathHasPrefix)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}},107657,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getNextPathnameInfo",{enumerable:!0,get:function(){return a}});let n=e.r(996045),i=e.r(92624),o=e.r(886984);function a(e,t){let{basePath:r,i18n:a,trailingSlash:s}=t.nextConfig??{},l={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):s};r&&(0,o.pathHasPrefix)(l.pathname,r)&&(l.pathname=(0,i.removePathPrefix)(l.pathname,r),l.basePath=r);let c=l.pathname;if(l.pathname.startsWith("/_next/data/")&&l.pathname.endsWith(".json")){let e=l.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");l.buildId=e[0],c="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(l.pathname=c)}if(a){let e=t.i18nProvider?t.i18nProvider.analyze(l.pathname):(0,n.normalizeLocalePath)(l.pathname,a.locales);l.locale=e.detectedLocale,l.pathname=e.pathname??l.pathname,!e.detectedLocale&&l.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(c):(0,n.normalizeLocalePath)(c,a.locales)).detectedLocale&&(l.locale=e.detectedLocale)}return l}},761400,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextURL",{enumerable:!0,get:function(){return u}});let n=e.r(512953),i=e.r(16107),o=e.r(26729),a=e.r(107657),s=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function l(e,t){return new URL(String(e).replace(s,"localhost"),t&&String(t).replace(s,"localhost"))}let c=Symbol("NextURLInternal");class u{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[c]={url:l(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,i,s;let l=(0,a.getNextPathnameInfo)(this[c].url.pathname,{nextConfig:this[c].options.nextConfig,parseData:!0,i18nProvider:this[c].options.i18nProvider}),u=(0,o.getHostname)(this[c].url,this[c].options.headers);this[c].domainLocale=this[c].options.i18nProvider?this[c].options.i18nProvider.detectDomainLocale(u):(0,n.detectDomainLocale)(null==(t=this[c].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,u);let d=(null==(r=this[c].domainLocale)?void 0:r.defaultLocale)||(null==(s=this[c].options.nextConfig)||null==(i=s.i18n)?void 0:i.defaultLocale);this[c].url.pathname=l.pathname,this[c].defaultLocale=d,this[c].basePath=l.basePath??"",this[c].buildId=l.buildId,this[c].locale=l.locale??d,this[c].trailingSlash=l.trailingSlash}formatPathname(){return(0,i.formatNextPathnameInfo)({basePath:this[c].basePath,buildId:this[c].buildId,defaultLocale:this[c].options.forceLocale?void 0:this[c].defaultLocale,locale:this[c].locale,pathname:this[c].url.pathname,trailingSlash:this[c].trailingSlash})}formatSearch(){return this[c].url.search}get buildId(){return this[c].buildId}set buildId(e){this[c].buildId=e}get locale(){return this[c].locale??""}set locale(e){var t,r;if(!this[c].locale||!(null==(r=this[c].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[c].locale=e}get defaultLocale(){return this[c].defaultLocale}get domainLocale(){return this[c].domainLocale}get searchParams(){return this[c].url.searchParams}get host(){return this[c].url.host}set host(e){this[c].url.host=e}get hostname(){return this[c].url.hostname}set hostname(e){this[c].url.hostname=e}get port(){return this[c].url.port}set port(e){this[c].url.port=e}get protocol(){return this[c].url.protocol}set protocol(e){this[c].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[c].url=l(e),this.analyze()}get origin(){return this[c].url.origin}get pathname(){return this[c].url.pathname}set pathname(e){this[c].url.pathname=e}get hash(){return this[c].url.hash}set hash(e){this[c].url.hash=e}get search(){return this[c].url.search}set search(e){this[c].url.search=e}get password(){return this[c].url.password}set password(e){this[c].url.password=e}get username(){return this[c].url.username}set username(e){this[c].url.username=e}get basePath(){return this[c].basePath}set basePath(e){this[c].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new u(String(this),this[c].options)}}},430009,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ACTION_SUFFIX:function(){return g},APP_DIR_ALIAS:function(){return j},CACHE_ONE_YEAR:function(){return T},DOT_NEXT_ALIAS:function(){return D},ESLINT_DEFAULT_DIRS:function(){return ei},GSP_NO_RETURNED_VALUE:function(){return Q},GSSP_COMPONENT_MEMBER_ERROR:function(){return et},GSSP_NO_RETURNED_VALUE:function(){return X},HTML_CONTENT_TYPE_HEADER:function(){return a},INFINITE_CACHE:function(){return O},INSTRUMENTATION_HOOK_FILENAME:function(){return P},JSON_CONTENT_TYPE_HEADER:function(){return s},MATCHED_PATH_HEADER:function(){return u},MIDDLEWARE_FILENAME:function(){return R},MIDDLEWARE_LOCATION_REGEXP:function(){return $},NEXT_BODY_SUFFIX:function(){return b},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return I},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return _},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return E},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return A},NEXT_CACHE_TAGS_HEADER:function(){return w},NEXT_CACHE_TAG_MAX_ITEMS:function(){return S},NEXT_CACHE_TAG_MAX_LENGTH:function(){return k},NEXT_DATA_SUFFIX:function(){return y},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return c},NEXT_META_SUFFIX:function(){return v},NEXT_QUERY_PARAM_PREFIX:function(){return l},NEXT_RESUME_HEADER:function(){return x},NON_STANDARD_NODE_ENV:function(){return er},PAGES_DIR_ALIAS:function(){return N},PRERENDER_REVALIDATE_HEADER:function(){return d},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return p},PROXY_FILENAME:function(){return U},PROXY_LOCATION_REGEXP:function(){return C},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return V},ROOT_DIR_ALIAS:function(){return L},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return q},RSC_ACTION_ENCRYPTION_ALIAS:function(){return H},RSC_ACTION_PROXY_ALIAS:function(){return B},RSC_ACTION_VALIDATE_ALIAS:function(){return M},RSC_CACHE_WRAPPER_ALIAS:function(){return Z},RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS:function(){return F},RSC_MOD_REF_PROXY_ALIAS:function(){return z},RSC_SEGMENTS_DIR_SUFFIX:function(){return f},RSC_SEGMENT_SUFFIX:function(){return h},RSC_SUFFIX:function(){return m},SERVER_PROPS_EXPORT_ERROR:function(){return Y},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return K},SERVER_PROPS_SSG_CONFLICT:function(){return G},SERVER_RUNTIME:function(){return eo},SSG_FALLBACK_EXPORT_ERROR:function(){return en},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return W},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return J},TEXT_PLAIN_CONTENT_TYPE_HEADER:function(){return o},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return ee},WEBPACK_LAYERS:function(){return el},WEBPACK_RESOURCE_QUERIES:function(){return ec},WEB_SOCKET_MAX_RECONNECTIONS:function(){return ea}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="text/plain",a="text/html; charset=utf-8",s="application/json; charset=utf-8",l="nxtP",c="nxtI",u="x-matched-path",d="x-prerender-revalidate",p="x-prerender-revalidate-if-generated",f=".segments",h=".segment.rsc",m=".rsc",g=".action",y=".json",v=".meta",b=".body",w="x-next-cache-tags",_="x-next-revalidated-tags",E="x-next-revalidate-tag-token",x="next-resume",S=128,k=256,A=1024,I="_N_T_",T=31536e3,O=0xfffffffe,R="middleware",$=`(?:src/)?${R}`,U="proxy",C=`(?:src/)?${U}`,P="instrumentation",N="private-next-pages",D="private-dot-next",L="private-next-root-dir",j="private-next-app-dir",z="private-next-rsc-mod-ref-proxy",M="private-next-rsc-action-validate",B="private-next-rsc-server-reference",Z="private-next-rsc-cache-wrapper",F="private-next-rsc-track-dynamic-import",H="private-next-rsc-action-encryption",q="private-next-rsc-action-client-wrapper",V="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",W="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",K="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",G="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",J="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",Y="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",Q="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",X="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",ee="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",et="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",er='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',en="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",ei=["app","pages","components","lib","src"],eo={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ea=12,es={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},el={...es,GROUP:{builtinReact:[es.reactServerComponents,es.actionBrowser],serverOnly:[es.reactServerComponents,es.actionBrowser,es.instrument,es.middleware],neutralTarget:[es.apiNode,es.apiEdge],clientOnly:[es.serverSideRendering,es.appPagesBrowser],bundled:[es.reactServerComponents,es.actionBrowser,es.serverSideRendering,es.appPagesBrowser,es.shared,es.instrument,es.middleware],appPages:[es.reactServerComponents,es.serverSideRendering,es.appPagesBrowser,es.actionBrowser]}},ec={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},341296,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={fromNodeOutgoingHttpHeaders:function(){return a},normalizeNextQueryParam:function(){return u},splitCookiesString:function(){return s},toNodeOutgoingHttpHeaders:function(){return l},validateURL:function(){return c}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(430009);function a(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function s(e){var t,r,n,i,o,a=[],s=0;function l(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,o=!1;l();)if(","===(r=e.charAt(s))){for(n=s,s+=1,l(),i=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(o=!0,s=i,a.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!o||s>=e.length)&&a.push(e.substring(t,e.length))}return a}function l(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...s(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function c(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function u(e){for(let t of[o.NEXT_QUERY_PARAM_PREFIX,o.NEXT_INTERCEPTION_MARKER_PREFIX])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}},243241,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={PageSignatureError:function(){return o},RemovedPageError:function(){return a},RemovedUAError:function(){return s}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});class o extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class a extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class s extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},677312,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={RequestCookies:function(){return o.RequestCookies},ResponseCookies:function(){return o.ResponseCookies},stringifyCookie:function(){return o.stringifyCookie}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(709254)},775447,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={INTERNALS:function(){return c},NextRequest:function(){return u}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(761400),a=e.r(341296),s=e.r(243241),l=e.r(677312),c=Symbol("internal request");class u extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);(0,a.validateURL)(r),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(r,t);const n=new o.NextURL(r,{headers:(0,a.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig});this[c]={cookies:new l.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[c].cookies}get nextUrl(){return this[c].nextUrl}get page(){throw new s.RemovedPageError}get ua(){throw new s.RemovedUAError}get url(){return this[c].url}}},508126,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReflectAdapter",{enumerable:!0,get:function(){return n}});class n{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},909052,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextResponse",{enumerable:!0,get:function(){return d}});let n=e.r(677312),i=e.r(761400),o=e.r(341296),a=e.r(508126),s=e.r(677312),l=Symbol("internal response"),c=new Set([301,302,303,307,308]);function u(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class d extends Response{constructor(e,t={}){super(e,t);const r=this.headers,c=new Proxy(new s.ResponseCookies(r),{get(e,i,o){switch(i){case"delete":case"set":return(...o)=>{let a=Reflect.apply(e[i],e,o),l=new Headers(r);return a instanceof s.ResponseCookies&&r.set("x-middleware-set-cookie",a.getAll().map(e=>(0,n.stringifyCookie)(e)).join(",")),u(t,l),a};default:return a.ReflectAdapter.get(e,i,o)}}});this[l]={cookies:c,url:t.url?new i.NextURL(t.url,{headers:(0,o.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[l].cookies}static json(e,t){let r=Response.json(e,t);return new d(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!c.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,o.validateURL)(e)),new d(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,o.validateURL)(e)),u(t,r),new d(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),u(e,t),new d(null,{...e,headers:t})}}},302075,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ImageResponse",{enumerable:!0,get:function(){return n}})},506992,(e,t,r)=>{var n={226:function(t,r){!function(n,i){"use strict";var o="function",a="undefined",s="object",l="string",c="major",u="model",d="name",p="type",f="vendor",h="version",m="architecture",g="console",y="mobile",v="tablet",b="smarttv",w="wearable",_="embedded",E="Amazon",x="Apple",S="ASUS",k="BlackBerry",A="Browser",I="Chrome",T="Firefox",O="Google",R="Huawei",$="Microsoft",U="Motorola",C="Opera",P="Samsung",N="Sharp",D="Sony",L="Xiaomi",j="Zebra",z="Facebook",M="Chromium OS",B="Mac OS",Z=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},F=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},H=function(e,t){return typeof e===l&&-1!==q(t).indexOf(q(e))},q=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,350)},W=function(e,t){for(var r,n,i,a,l,c,u=0;u<t.length&&!l;){var d=t[u],p=t[u+1];for(r=n=0;r<d.length&&!l&&d[r];)if(l=d[r++].exec(e))for(i=0;i<p.length;i++)c=l[++n],typeof(a=p[i])===s&&a.length>0?2===a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):void 0:this[a[0]]=c?a[1].call(this,c,a[2]):void 0:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):void 0):this[a]=c||void 0;u+=2}},K=function(e,t){for(var r in t)if(typeof t[r]===s&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(H(t[r][n],e))return"?"===r?void 0:r}else if(H(t[r],e))return"?"===r?void 0:r;return e},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,h],[/opios[\/ ]+([\w\.]+)/i],[h,[d,C+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[d,C]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[d,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[h,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+A],h],[/\bfocus\/([\w\.]+)/i],[h,[d,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[d,C+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[d,C+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[d,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[h,[d,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+A]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+A],h],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,z],h],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[h,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[d,I+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,I+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[d,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[h,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[d,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,h],[/(cobalt)\/([\w\.]+)/i],[d,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,q]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[f,P],[p,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[f,P],[p,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[f,x],[p,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,x],[p,v]],[/(macintosh);/i],[u,[f,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[f,N],[p,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[f,R],[p,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[f,R],[p,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[f,L],[p,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[f,L],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[f,"OPPO"],[p,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[f,"Vivo"],[p,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[f,"Realme"],[p,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[f,U],[p,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[f,U],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[f,"LG"],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[f,"LG"],[p,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[f,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[f,"Nokia"],[p,y]],[/(pixel c)\b/i],[u,[f,O],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[f,O],[p,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,D],[p,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[f,D],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[f,"OnePlus"],[p,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[f,E],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[f,E],[p,y]],[/(playbook);[-\w\),; ]+(rim)/i],[u,f,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[f,k],[p,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[f,S],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[f,S],[p,y]],[/(nexus 9)/i],[u,[f,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[u,/_/g," "],[p,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[f,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[f,"Meizu"],[p,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,u,[p,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,u,[p,v]],[/(surface duo)/i],[u,[f,$],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[f,"Fairphone"],[p,y]],[/(u304aa)/i],[u,[f,"AT&T"],[p,y]],[/\bsie-(\w*)/i],[u,[f,"Siemens"],[p,y]],[/\b(rct\w+) b/i],[u,[f,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[u,[f,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[u,[f,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[f,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[u,[f,"NuVision"],[p,v]],[/\b(k88) b/i],[u,[f,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[u,[f,"ZTE"],[p,y]],[/\b(gen\d{3}) b.+49h/i],[u,[f,"Swiss"],[p,y]],[/\b(zur\d{3}) b/i],[u,[f,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[u,[f,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],u,[p,v]],[/\b(ns-?\w{0,9}) b/i],[u,[f,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[f,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],u,[p,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],u,[p,y]],[/\b(ph-1) /i],[u,[f,"Essential"],[p,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[f,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[u,[f,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[u,[f,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[u,[f,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[f,u,[p,y]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,$],[p,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,j],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,j],[p,y]],[/smart-tv.+(samsung)/i],[f,[p,b]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,P],[p,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,"LG"],[p,b]],[/(apple) ?tv/i],[f,[u,x+" TV"],[p,b]],[/crkey/i],[[u,I+"cast"],[f,O],[p,b]],[/droid.+aft(\w)( bui|\))/i],[u,[f,E],[p,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[f,N],[p,b]],[/(bravia[\w ]+)( bui|\))/i],[u,[f,D],[p,b]],[/(mitv-\w{5}) bui/i],[u,[f,L],[p,b]],[/Hbbtv.*(technisat) (.*);/i],[f,u,[p,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,V],[u,V],[p,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,u,[p,g]],[/droid.+; (shield) bui/i],[u,[f,"Nvidia"],[p,g]],[/(playstation [345portablevi]+)/i],[u,[f,D],[p,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[f,$],[p,g]],[/((pebble))app/i],[f,u,[p,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[f,x],[p,w]],[/droid.+; (glass) \d/i],[u,[f,O],[p,w]],[/droid.+; (wt63?0{2,3})\)/i],[u,[f,j],[p,w]],[/(quest( 2| pro)?)/i],[u,[f,z],[p,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,_]],[/(aeobc)\b/i],[u,[f,E],[p,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,y]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[h,K,G]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[h,K,G]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,B],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,h],[/\(bb(10);/i],[h,[d,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[d,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[d,I+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,M],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,h],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,h]]},Y=function(e,t){if(typeof e===s&&(t=e,e=void 0),!(this instanceof Y))return new Y(e,t).getResult();var r=typeof n!==a&&n.navigator?n.navigator:void 0,i=e||(r&&r.userAgent?r.userAgent:""),g=r&&r.userAgentData?r.userAgentData:void 0,b=t?Z(J,t):J,w=r&&r.userAgent==i;return this.getBrowser=function(){var e,t={};return t[d]=void 0,t[h]=void 0,W.call(t,i,b.browser),t[c]=typeof(e=t[h])===l?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,w&&r&&r.brave&&typeof r.brave.isBrave==o&&(t[d]="Brave"),t},this.getCPU=function(){var e={};return e[m]=void 0,W.call(e,i,b.cpu),e},this.getDevice=function(){var e={};return e[f]=void 0,e[u]=void 0,e[p]=void 0,W.call(e,i,b.device),w&&!e[p]&&g&&g.mobile&&(e[p]=y),w&&"Macintosh"==e[u]&&r&&typeof r.standalone!==a&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[u]="iPad",e[p]=v),e},this.getEngine=function(){var e={};return e[d]=void 0,e[h]=void 0,W.call(e,i,b.engine),e},this.getOS=function(){var e={};return e[d]=void 0,e[h]=void 0,W.call(e,i,b.os),w&&!e[d]&&g&&"Unknown"!=g.platform&&(e[d]=g.platform.replace(/chrome os/i,M).replace(/macos/i,B)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===l&&e.length>350?V(e,350):e,this},this.setUA(i),this};if(Y.VERSION="1.0.35",Y.BROWSER=F([d,h,c]),Y.CPU=F([m]),Y.DEVICE=F([u,f,p,g,y,b,v,w,_]),Y.ENGINE=Y.OS=F([d,h]),typeof r!==a)t.exports&&(r=t.exports=Y),r.UAParser=Y;else if(typeof define===o&&define.amd)e.r,void 0!==Y&&e.v(Y);else typeof n!==a&&(n.UAParser=Y);var Q=typeof n!==a&&(n.jQuery||n.Zepto);if(Q&&!Q.ua){var X=new Y;Q.ua=X.getResult(),Q.ua.get=function(){return X.getUA()},Q.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var r in t)Q.ua[r]=t[r]}}}(this)}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},a=!0;try{n[e].call(r.exports,r,r.exports,o),a=!1}finally{a&&delete i[e]}return r.exports}o.ab="/ROOT/node_modules/next/dist/compiled/ua-parser-js/",t.exports=o(226)},660567,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i={isBot:function(){return s},userAgent:function(){return c},userAgentFromString:function(){return l}};for(var o in i)Object.defineProperty(r,o,{enumerable:!0,get:i[o]});let a=(n=e.r(506992))&&n.__esModule?n:{default:n};function s(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}function l(e){return{...(0,a.default)(e),isBot:void 0!==e&&s(e)}}function c({headers:e}){return l(e.get("user-agent")||void 0)}},698214,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"URLPattern",{enumerable:!0,get:function(){return n}});let n="u"<typeof URLPattern?void 0:URLPattern},698521,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"after",{enumerable:!0,get:function(){return i}});let n=e.r(556704);function i(e){let t=n.workAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:r}=t;return r.after(e)}},603368,(e,t,r)=>{"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),n=e.r(698521),i=r,Object.keys(n).forEach(function(e){"default"===e||Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:function(){return n[e]}})})},339622,(e,t,r)=>{"use strict";t.exports=e.r(918622)},549518,(e,t,r)=>{"use strict";t.exports=e.r(339622).vendored["react-rsc"].React},777753,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DynamicServerError:function(){return a},isDynamicServerError:function(){return s}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="DYNAMIC_SERVER_USAGE";class a extends Error{constructor(e){super(`Dynamic server usage: ${e}`),this.description=e,this.digest=o}}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===o}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},680773,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={StaticGenBailoutError:function(){return a},isStaticGenBailoutError:function(){return s}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="NEXT_STATIC_GEN_BAILOUT";class a extends Error{constructor(...e){super(...e),this.code=o}}function s(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===o}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},537138,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={isHangingPromiseRejectionError:function(){return o},makeDevtoolsIOAwarePromise:function(){return d},makeHangingPromise:function(){return c}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});function o(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===a}let a="HANGING_PROMISE_REJECTION";class s extends Error{constructor(e,t){super(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${e}".`),this.route=e,this.expression=t,this.digest=a}}let l=new WeakMap;function c(e,t,r){if(e.aborted)return Promise.reject(new s(t,r));{let n=new Promise((n,i)=>{let o=i.bind(null,new s(t,r)),a=l.get(e);if(a)a.push(o);else{let t=[o];l.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return n.catch(u),n}}function u(){}function d(e,t,r){return t.stagedRendering?t.stagedRendering.delayUntilStage(r,void 0,e):new Promise(t=>{setTimeout(()=>{t(e)},0)})}},313332,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={METADATA_BOUNDARY_NAME:function(){return o},OUTLET_BOUNDARY_NAME:function(){return s},ROOT_LAYOUT_BOUNDARY_NAME:function(){return l},VIEWPORT_BOUNDARY_NAME:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="__next_metadata_boundary__",a="__next_viewport_boundary__",s="__next_outlet_boundary__",l="__next_root_layout_boundary__"},818697,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={atLeastOneTask:function(){return s},scheduleImmediate:function(){return a},scheduleOnNextTick:function(){return o},waitAtLeastOneReactRenderTask:function(){return l}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},a=e=>{setImmediate(e)};function s(){return new Promise(e=>a(e))}function l(){return new Promise(e=>setImmediate(e))}},939491,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={BailoutToCSRError:function(){return a},isBailoutToCSRError:function(){return s}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o="BAILOUT_TO_CLIENT_SIDE_RENDERING";class a extends Error{constructor(e){super(`Bail out to client-side rendering: ${e}`),this.reason=e,this.digest=o}}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===o}},635121,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"InvariantError",{enumerable:!0,get:function(){return n}});class n extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}},521401,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i,o={Postpone:function(){return I},PreludeState:function(){return Q},abortAndThrowOnSynchronousRequestDataAccess:function(){return A},abortOnSynchronousPlatformIOAccess:function(){return k},accessedDynamicData:function(){return N},annotateDynamicAccess:function(){return M},consumeDynamicAccess:function(){return D},createDynamicTrackingState:function(){return v},createDynamicValidationState:function(){return b},createHangingInputAbortSignal:function(){return z},createRenderInBrowserAbortSignal:function(){return j},delayUntilRuntimeStage:function(){return er},formatDynamicAPIAccesses:function(){return L},getFirstDynamicReason:function(){return w},getStaticShellDisallowedDynamicReasons:function(){return et},isDynamicPostpone:function(){return R},isPrerenderInterruptedError:function(){return P},logDisallowedDynamicError:function(){return X},markCurrentScopeAsDynamic:function(){return _},postponeWithTracking:function(){return T},throwIfDisallowedDynamic:function(){return ee},throwToInterruptStaticGeneration:function(){return E},trackAllowedDynamicAccess:function(){return K},trackDynamicDataInDynamicRender:function(){return x},trackDynamicHoleInRuntimeShell:function(){return G},trackDynamicHoleInStaticShell:function(){return J},useDynamicRouteParams:function(){return B},useDynamicSearchParams:function(){return Z}};for(var a in o)Object.defineProperty(r,a,{enumerable:!0,get:o[a]});let s=(n=e.r(549518))&&n.__esModule?n:{default:n},l=e.r(777753),c=e.r(680773),u=e.r(832319),d=e.r(556704),p=e.r(537138),f=e.r(313332),h=e.r(818697),m=e.r(939491),g=e.r(635121),y="function"==typeof s.default.unstable_postpone;function v(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function b(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,dynamicMetadata:null,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function w(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function _(e,t,r){if(t)switch(t.type){case"cache":case"unstable-cache":case"private-cache":return}if(!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t)switch(t.type){case"prerender-ppr":return T(e.route,r,t.dynamicTracking);case"prerender-legacy":t.revalidate=0;let n=Object.defineProperty(new l.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=n.stack,n}}}function E(e,t,r){let n=Object.defineProperty(new l.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function x(e){switch(e.type){case"cache":case"unstable-cache":case"private-cache":return}}function S(e,t,r){let n=C(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);r.controller.abort(n);let i=r.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function k(e,t,r,n){let i=n.dynamicTracking;S(e,t,n),i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}function A(e,t,r,n){if(!1===n.controller.signal.aborted){S(e,t,n);let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}throw C(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}function I({reason:e,route:t}){let r=u.workUnitAsyncStorage.getStore();T(t,e,r&&"prerender-ppr"===r.type?r.dynamicTracking:null)}function T(e,t,r){(function(){if(!y)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),s.default.unstable_postpone(O(e,t))}function O(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function R(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&$(e.message)}function $(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===$(O("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let U="NEXT_PRERENDER_INTERRUPTED";function C(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest=U,t}function P(e){return"object"==typeof e&&null!==e&&e.digest===U&&"name"in e&&"message"in e&&e instanceof Error}function N(e){return e.length>0}function D(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function L(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function j(){let e=new AbortController;return e.abort(Object.defineProperty(new m.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),e.signal}function z(e){switch(e.type){case"prerender":case"prerender-runtime":let t=new AbortController;if(e.cacheSignal)e.cacheSignal.inputReady().then(()=>{t.abort()});else{let r=(0,u.getRuntimeStagePromise)(e);r?r.then(()=>(0,h.scheduleOnNextTick)(()=>t.abort())):(0,h.scheduleOnNextTick)(()=>t.abort())}return t.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function M(e,t){let r=t.dynamicTracking;r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function B(e){let t=d.workAsyncStorage.getStore(),r=u.workUnitAsyncStorage.getStore();if(t&&r)switch(r.type){case"prerender-client":case"prerender":{let n=r.fallbackRouteParams;n&&n.size>0&&s.default.use((0,p.makeHangingPromise)(r.renderSignal,t.route,e));break}case"prerender-ppr":{let n=r.fallbackRouteParams;if(n&&n.size>0)return T(t.route,e,r.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new g.InvariantError(`\`${e}\` was called during a runtime prerender. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new g.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function Z(e){let t=d.workAsyncStorage.getStore(),r=u.workUnitAsyncStorage.getStore();if(t)switch(!r&&(0,u.throwForMissingRequestStore)(e),r.type){case"prerender-client":s.default.use((0,p.makeHangingPromise)(r.renderSignal,t.route,e));break;case"prerender-legacy":case"prerender-ppr":if(t.forceStatic)return;throw Object.defineProperty(new m.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new g.InvariantError(`\`${e}\` was called from a Server Component. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new g.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let F=/\n\s+at Suspense \(<anonymous>\)/,H=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${f.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),q=RegExp(`\\n\\s+at ${f.METADATA_BOUNDARY_NAME}[\\n\\s]`),V=RegExp(`\\n\\s+at ${f.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),W=RegExp(`\\n\\s+at ${f.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function K(e,t,r,n){if(!W.test(t)){if(q.test(t)){r.hasDynamicMetadata=!0;return}if(V.test(t)){r.hasDynamicViewport=!0;return}if(H.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(F.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=Y(`Route "${e.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function G(e,t,r,n){if(!W.test(t)){if(q.test(t)){r.dynamicMetadata=Y(`Route "${e.route}": Uncached data or \`connection()\` was accessed inside \`generateMetadata\`. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,t);return}if(V.test(t)){let n=Y(`Route "${e.route}": Uncached data or \`connection()\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,t);r.dynamicErrors.push(n);return}if(H.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(F.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=Y(`Route "${e.route}": Uncached data or \`connection()\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function J(e,t,r,n){if(!W.test(t)){if(q.test(t)){r.dynamicMetadata=Y(`Route "${e.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateMetadata\` or you have file-based metadata such as icons that depend on dynamic params segments. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,t);return}if(V.test(t)){let n=Y(`Route "${e.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,t);r.dynamicErrors.push(n);return}if(H.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(F.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=Y(`Route "${e.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function Y(e,t){let r=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r.stack=r.name+": "+e+t,r}var Q=((i={})[i.Full=0]="Full",i[i.Empty=1]="Empty",i[i.Errored=2]="Errored",i);function X(e,t){console.error(t),e.dev||(e.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function ee(e,t,r,n){if(n.syncDynamicErrorWithStack)throw X(e,n.syncDynamicErrorWithStack),new c.StaticGenBailoutError;if(0!==t){if(r.hasSuspenseAboveBody)return;let n=r.dynamicErrors;if(n.length>0){for(let t=0;t<n.length;t++)X(e,n[t]);throw new c.StaticGenBailoutError}if(r.hasDynamicViewport)throw console.error(`Route "${e.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new c.StaticGenBailoutError;if(1===t)throw console.error(`Route "${e.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new c.StaticGenBailoutError}else if(!1===r.hasAllowedDynamic&&r.hasDynamicMetadata)throw console.error(`Route "${e.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new c.StaticGenBailoutError}function et(e,t,r){if(r.hasSuspenseAboveBody)return[];if(0!==t){let n=r.dynamicErrors;if(n.length>0)return n;if(1===t)return[Object.defineProperty(new g.InvariantError(`Route "${e.route}" did not produce a static shell and Next.js was unable to determine a reason.`),"__NEXT_ERROR_CODE",{value:"E936",enumerable:!1,configurable:!0})]}else if(!1===r.hasAllowedDynamic&&0===r.dynamicErrors.length&&r.dynamicMetadata)return[r.dynamicMetadata];return[]}function er(e,t){return e.runtimeStagePromise?e.runtimeStagePromise.then(()=>t):t}},519048,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={isRequestAPICallableInsideAfter:function(){return c},throwForSearchParamsAccessInUseCache:function(){return l},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return s}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let o=e.r(680773),a=e.r(324725);function s(e,t){throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${e} with \`dynamic = "error"\` couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function l(e,t){let r=Object.defineProperty(Error(`Route ${e.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(r,t),e.invalidDynamicUsageError??=r,r}function c(){let e=a.afterTaskAsyncStorage.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}},745470,(e,t,r)=>{"use strict";function n(){let e,t,r=new Promise((r,n)=>{e=r,t=n});return{resolve:e,reject:t,promise:r}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createPromiseWithResolvers",{enumerable:!0,get:function(){return n}})},998771,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i={RenderStage:function(){return l},StagedRenderingController:function(){return c}};for(var o in i)Object.defineProperty(r,o,{enumerable:!0,get:i[o]});let a=e.r(635121),s=e.r(745470);var l=((n={})[n.Before=1]="Before",n[n.Static=2]="Static",n[n.Runtime=3]="Runtime",n[n.Dynamic=4]="Dynamic",n[n.Abandoned=5]="Abandoned",n);class c{constructor(e=null,t){this.abortSignal=e,this.hasRuntimePrefetch=t,this.currentStage=1,this.staticInterruptReason=null,this.runtimeInterruptReason=null,this.staticStageEndTime=1/0,this.runtimeStageEndTime=1/0,this.runtimeStageListeners=[],this.dynamicStageListeners=[],this.runtimeStagePromise=(0,s.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,s.createPromiseWithResolvers)(),this.mayAbandon=!1,e&&(e.addEventListener("abort",()=>{let{reason:t}=e;this.currentStage<3&&(this.runtimeStagePromise.promise.catch(u),this.runtimeStagePromise.reject(t)),(this.currentStage<4||5===this.currentStage)&&(this.dynamicStagePromise.promise.catch(u),this.dynamicStagePromise.reject(t))},{once:!0}),this.mayAbandon=!0)}onStage(e,t){if(this.currentStage>=e)t();else if(3===e)this.runtimeStageListeners.push(t);else if(4===e)this.dynamicStageListeners.push(t);else throw Object.defineProperty(new a.InvariantError(`Invalid render stage: ${e}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}canSyncInterrupt(){if(1===this.currentStage)return!1;let e=this.hasRuntimePrefetch?4:3;return this.currentStage<e}syncInterruptCurrentStageWithReason(e){if(1!==this.currentStage){if(this.mayAbandon)return this.abandonRenderImpl();switch(this.currentStage){case 2:this.staticInterruptReason=e,this.advanceStage(4);return;case 3:this.hasRuntimePrefetch&&(this.runtimeInterruptReason=e,this.advanceStage(4));return}}}getStaticInterruptReason(){return this.staticInterruptReason}getRuntimeInterruptReason(){return this.runtimeInterruptReason}getStaticStageEndTime(){return this.staticStageEndTime}getRuntimeStageEndTime(){return this.runtimeStageEndTime}abandonRender(){if(!this.mayAbandon)throw Object.defineProperty(new a.InvariantError("`abandonRender` called on a stage controller that cannot be abandoned."),"__NEXT_ERROR_CODE",{value:"E938",enumerable:!1,configurable:!0});this.abandonRenderImpl()}abandonRenderImpl(){let{currentStage:e}=this;switch(e){case 2:this.currentStage=5,this.resolveRuntimeStage();return;case 3:this.currentStage=5;return}}advanceStage(e){if(e<=this.currentStage)return;let t=this.currentStage;if(this.currentStage=e,t<3&&e>=3&&(this.staticStageEndTime=performance.now()+performance.timeOrigin,this.resolveRuntimeStage()),t<4&&e>=4){this.runtimeStageEndTime=performance.now()+performance.timeOrigin,this.resolveDynamicStage();return}}resolveRuntimeStage(){let e=this.runtimeStageListeners;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.runtimeStagePromise.resolve()}resolveDynamicStage(){let e=this.dynamicStageListeners;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.dynamicStagePromise.resolve()}getStagePromise(e){switch(e){case 3:return this.runtimeStagePromise.promise;case 4:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new a.InvariantError(`Invalid render stage: ${e}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(e){return this.getStagePromise(e)}delayUntilStage(e,t,r){var n,i,o;let a,s=(n=this.getStagePromise(e),i=t,o=r,a=new Promise((e,t)=>{n.then(e.bind(null,o),t)}),void 0!==i&&(a.displayName=i),a);return this.abortSignal&&s.catch(u),s}}function u(){}},44822,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"connection",{enumerable:!0,get:function(){return c}});let n=e.r(556704),i=e.r(832319),o=e.r(521401),a=e.r(680773),s=e.r(537138),l=e.r(519048);function c(){let e=n.workAsyncStorage.getStore(),t=i.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside \`after()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but \`after()\` executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E827",enumerable:!1,configurable:!0});if(e.forceStatic)return Promise.resolve(void 0);if(e.dynamicShouldError)throw Object.defineProperty(new a.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E847",enumerable:!1,configurable:!0});if(t)switch(t.type){case"cache":{let t=Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E841",enumerable:!1,configurable:!0});throw Error.captureStackTrace(t,c),e.invalidDynamicUsageError??=t,t}case"private-cache":{let t=Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E837",enumerable:!1,configurable:!0});throw Error.captureStackTrace(t,c),e.invalidDynamicUsageError??=t,t}case"unstable-cache":throw Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside a function cached with \`unstable_cache()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E840",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,s.makeHangingPromise)(t.renderSignal,e.route,"`connection()`");case"prerender-ppr":return(0,o.postponeWithTracking)(e.route,"connection",t.dynamicTracking);case"prerender-legacy":return(0,o.throwToInterruptStaticGeneration)("connection",e,t);case"request":return(0,o.trackDynamicDataInDynamicRender)(t),Promise.resolve(void 0)}}(0,i.throwForMissingRequestStore)("connection")}e.r(998771)},955207,(e,t,r)=>{let n={NextRequest:e.r(775447).NextRequest,NextResponse:e.r(909052).NextResponse,ImageResponse:e.r(302075).ImageResponse,userAgentFromString:e.r(660567).userAgentFromString,userAgent:e.r(660567).userAgent,URLPattern:e.r(698214).URLPattern,after:e.r(603368).after,connection:e.r(44822).connection};t.exports=n,r.NextRequest=n.NextRequest,r.NextResponse=n.NextResponse,r.ImageResponse=n.ImageResponse,r.userAgentFromString=n.userAgentFromString,r.userAgent=n.userAgent,r.URLPattern=n.URLPattern,r.after=n.after,r.connection=n.connection},711906,(e,t,r)=>{"use strict";var n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getKeyIndexes=r.hasFlag=r.exists=r.list=void 0;let i=n(e.r(775291));r.list=Object.keys(i.default);let o={};function a(e){"string"!=typeof e&&(e=String(e));let t=e.indexOf("->");return -1===t?e.length:t}r.list.forEach(e=>{o[e]=i.default[e].flags.reduce(function(e,t){return e[t]=!0,e},{})}),r.exists=function(e){return!!i.default[e]},r.hasFlag=function(e,t){if(!o[e])throw Error("Unknown command "+e);return!!o[e][t]},r.getKeyIndexes=function(e,t,r){let n=i.default[e];if(!n)throw Error("Unknown command "+e);if(!Array.isArray(t))throw Error("Expect args to be an array");let o=[],s=!!(r&&r.parseExternalKey),l=(e,t)=>{let r=[],n=Number(e[t]);for(let e=0;e<n;e++)r.push(e+t+1);return r},c=(e,t,r)=>{for(let n=t;n<e.length-1;n+=1)if(String(e[n]).toLowerCase()===r.toLowerCase())return n+1;return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":o.push(0,...l(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":o.push(...l(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":o.push(...l(t,0));break;case"georadius":{o.push(0);let e=c(t,5,"STORE");e&&o.push(e);let r=c(t,5,"STOREDIST");r&&o.push(r);break}case"georadiusbymember":{o.push(0);let e=c(t,4,"STORE");e&&o.push(e);let r=c(t,4,"STOREDIST");r&&o.push(r);break}case"sort":case"sort_ro":o.push(0);for(let e=1;e<t.length-1;e++){let r=t[e];if("string"!=typeof r)continue;let n=r.toUpperCase();"GET"===n?(e+=1,"#"!==(r=t[e])&&(s?o.push([e,a(r)]):o.push(e))):"BY"===n?(e+=1,s?o.push([e,a(t[e])]):o.push(e)):"STORE"===n&&(e+=1,o.push(e))}break;case"migrate":if(""===t[2])for(let e=5;e<t.length-1;e++){let r=t[e];if("string"==typeof r&&"KEYS"===r.toUpperCase()){for(let r=e+1;r<t.length;r++)o.push(r);break}}else o.push(2);break;case"xreadgroup":case"xread":for(let r=3*("xread"!==e);r<t.length-1;r++)if("STREAMS"===String(t[r]).toUpperCase()){for(let e=r+1;e<=r+(t.length-1-r)/2;e++)o.push(e);break}break;default:if(n.step>0){let e=n.keyStart-1,r=n.keyStop>0?n.keyStop:t.length+n.keyStop+1;for(let t=e;t<r;t+=n.step)o.push(t)}}return o}},977265,(e,t,r)=>{"use strict";let n;function i(e,t){try{let e=n;return n=null,e.apply(this,arguments)}catch(e){return r.errorObj.e=e,r.errorObj}}Object.defineProperty(r,"__esModule",{value:!0}),r.tryCatch=r.errorObj=void 0,r.errorObj={e:{}},r.tryCatch=function(e){return n=e,i}},178167,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(977265);function i(e){setTimeout(function(){throw e},0)}r.default=function(e,t,r){return"function"==typeof t&&e.then(e=>{let o;(o=void 0!==r&&Object(r).spread&&Array.isArray(e)?n.tryCatch(t).apply(void 0,[null].concat(e)):void 0===e?n.tryCatch(t)(null):n.tryCatch(t)(null,e))===n.errorObj&&i(o.e)},e=>{if(!e){let t=Error(e+"");Object.assign(t,{cause:e}),e=t}let r=n.tryCatch(t)(e);r===n.errorObj&&i(r.e)}),e}},296885,(e,t,r)=>{"use strict";let n=e.r(449719);class i extends Error{get name(){return this.constructor.name}}class o extends i{get name(){return this.constructor.name}}t.exports={RedisError:i,ParserError:class extends i{constructor(e,t,r){n(t),n.strictEqual(typeof r,"number");const i=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=i,this.offset=r,this.buffer=t}get name(){return this.constructor.name}},ReplyError:class extends i{constructor(e){const t=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=t}get name(){return this.constructor.name}},AbortError:o,InterruptError:class extends o{get name(){return this.constructor.name}}}},781391,(e,t,r)=>{"use strict";let n=e.r(449719),i=e.r(224361);function o(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function a(e,t,r){n(t),n.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let i=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=i,this.offset=r,this.buffer=t}function s(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0});let t=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=t}function l(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}function c(e){Object.defineProperty(this,"message",{value:e||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}i.inherits(o,Error),Object.defineProperty(o.prototype,"name",{value:"RedisError",configurable:!0,writable:!0}),i.inherits(a,o),Object.defineProperty(a.prototype,"name",{value:"ParserError",configurable:!0,writable:!0}),i.inherits(s,o),Object.defineProperty(s.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0}),i.inherits(l,o),Object.defineProperty(l.prototype,"name",{value:"AbortError",configurable:!0,writable:!0}),i.inherits(c,l),Object.defineProperty(c.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0}),t.exports={RedisError:o,ParserError:a,ReplyError:s,AbortError:l,InterruptError:c}},679102,(e,t,r)=>{"use strict";t.exports=55>process.version.charCodeAt(1)&&46===process.version.charCodeAt(2)?e.r(781391):e.r(296885)},519610,(e,t,r)=>{var n=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],i=function(e){for(var t,r=0,n=0,i=[],o=e.length;r<o;r++)(t=e.charCodeAt(r))<128?i[n++]=t:(t<2048?i[n++]=t>>6|192:((64512&t)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++r)),i[n++]=t>>18|240,i[n++]=t>>12&63|128):i[n++]=t>>12|224,i[n++]=t>>6&63|128),i[n++]=63&t|128);return i},o=t.exports=function(e){for(var t,r=0,o=-1,a=0,s=0,l="string"==typeof e?i(e):e,c=l.length;r<c;){if(t=l[r++],-1===o)123===t&&(o=r);else if(125!==t)s=n[(t^s>>8)&255]^s<<8;else if(r-1!==o)return 16383&s;a=n[(t^a>>8)&255]^a<<8}return 16383&a};t.exports.generateMulti=function(e){for(var t=1,r=e.length,n=o(e[0]);t<r;)if(o(e[t++])!==n)return -1;return n}},128229,(e,t,r)=>{var n,i=/^(?:0|[1-9]\d*)$/;function o(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var a=Object.prototype,s=a.hasOwnProperty,l=a.toString,c=a.propertyIsEnumerable,u=Math.max;function d(e,t,r,n){return void 0===e||h(e,a[r])&&!s.call(n,r)?t:e}function p(e,t){return t=u(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=u(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=r[n];return s[t]=a,o(e,this,s)}}function f(e,t){return!!(t=null==t?0x1fffffffffffff:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}function h(e,t){return e===t||e!=e&&t!=t}var m=Array.isArray;function g(e){var t,r,n;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=0x1fffffffffffff&&"[object Function]"!=(n=y(r=e)?l.call(r):"")&&"[object GeneratorFunction]"!=n}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var v=(n=function(e,t,r,n){var i;!function(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],l=n?n(r[a],e[a],a,r,e):void 0;!function(e,t,r){var n=e[t];s.call(e,t)&&h(n,r)&&(void 0!==r||t in e)||(e[t]=r)}(r,a,void 0===l?e[a]:l)}}(t,g(i=t)?function(e,t){var r,n,i,o=m(e)||(i=n=r=e)&&"object"==typeof i&&g(n)&&s.call(r,"callee")&&(!c.call(r,"callee")||"[object Arguments]"==l.call(r))?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],a=o.length,u=!!a;for(var d in e)(t||s.call(e,d))&&!(u&&("length"==d||f(d,a)))&&o.push(d);return o}(i,!0):function(e){if(!y(e)){var t,r,n=e,i=[];if(null!=n)for(var o in Object(n))i.push(o);return i}var l=(r=(t=e)&&t.constructor,t===("function"==typeof r&&r.prototype||a)),c=[];for(var u in e)"constructor"==u&&(l||!s.call(e,u))||c.push(u);return c}(i),e,n)},p(function(e,t){var r=-1,i=t.length,o=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(o=n.length>3&&"function"==typeof o?(i--,o):void 0,a&&function(e,t,r){if(!y(r))return!1;var n=typeof t;return("number"==n?!!(g(r)&&f(t,r.length)):"string"==n&&t in r)&&h(r[t],e)}(t[0],t[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=t[r];s&&n(e,s,r,o)}return e}));t.exports=p(function(e){return e.push(void 0,d),o(v,void 0,e)})},625446,(e,t,r)=>{var n=Object.prototype,i=n.hasOwnProperty,o=n.toString,a=n.propertyIsEnumerable;t.exports=function(e){var t,r,n,s,l,c,u,d;return!!(n=t=e)&&"object"==typeof n&&null!=(r=t)&&"number"==typeof(s=r.length)&&s>-1&&s%1==0&&s<=0x1fffffffffffff&&"[object Function]"!=(u=typeof(c=l=r),d=c&&("object"==u||"function"==u)?o.call(l):"")&&"[object GeneratorFunction]"!=d&&i.call(e,"callee")&&(!a.call(e,"callee")||"[object Arguments]"==o.call(e))}},958934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isArguments=r.defaults=r.noop=void 0,r.defaults=e.r(128229),r.isArguments=e.r(625446),r.noop=function(){}},816948,(e,t,r)=>{function n(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}t.exports=function(e,t){t=t||{};var r,i,o,a,s=typeof e;if("string"===s&&e.length>0){var l=e;if(!((l=String(l)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(c){var u=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*u;case"weeks":case"week":case"w":return 6048e5*u;case"days":case"day":case"d":return 864e5*u;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*u;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*u;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:break}}}return}if("number"===s&&isFinite(e)){return t.long?(i=Math.abs(r=e))>=864e5?n(r,i,864e5,"day"):i>=36e5?n(r,i,36e5,"hour"):i>=6e4?n(r,i,6e4,"minute"):i>=1e3?n(r,i,1e3,"second"):r+" ms":(a=Math.abs(o=e))>=864e5?Math.round(o/864e5)+"d":a>=36e5?Math.round(o/36e5)+"h":a>=6e4?Math.round(o/6e4)+"m":a>=1e3?Math.round(o/1e3)+"s":o+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},921795,(e,t,r)=>{t.exports=function(t){function r(e){let t,i,o,a=null;function s(...e){if(!s.enabled)return;let n=Number(new Date);s.diff=n-(t||n),s.prev=t,s.curr=n,t=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if("%%"===t)return"%";i++;let o=r.formatters[n];if("function"==typeof o){let r=e[i];t=o.call(s,r),e.splice(i,1),i--}return t}),r.formatArgs.call(s,e),(s.log||r.log).apply(s,e)}return s.namespace=e,s.useColors=r.useColors(),s.color=r.selectColor(e),s.extend=n,s.destroy=r.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==r.namespaces&&(i=r.namespaces,o=r.enabled(e)),o),set:e=>{a=e}}),"function"==typeof r.init&&r.init(s),s}function n(e,t){let n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function i(e,t){let r=0,n=0,i=-1,o=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,o=r):r++,n++;else{if(-1===i)return!1;n=i+1,r=++o}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){let e=[...r.names,...r.skips.map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){for(let t of(r.save(e),r.namespaces=e,r.names=[],r.skips=[],("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===t[0]?r.skips.push(t.slice(1)):r.names.push(t)},r.enabled=function(e){for(let t of r.skips)if(i(e,t))return!1;for(let t of r.names)if(i(e,t))return!0;return!1},r.humanize=e.r(816948),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return r.colors[Math.abs(t)%r.colors.length]},r.enable(r.load()),r}},240512,(e,t,r)=>{"use strict";t.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return -1!==n&&(-1===i||n<i)}},581202,(e,t,r)=>{"use strict";let n;e.r(446786);let i=e.r(870722),o=e.r(240512),{env:a}=process;function s(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function l(e,t){if(0===n)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!t&&void 0===n)return 0;let r=n||0;if("dumb"===a.TERM)return r;if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in a)||"codeship"===a.CI_NAME?1:r;if("TEAMCITY_VERSION"in a)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION);if("truecolor"===a.COLORTERM)return 3;if("TERM_PROGRAM"in a){let e=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)||"COLORTERM"in a?1:r}o("no-color")||o("no-colors")||o("color=false")||o("color=never")?n=0:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(n=1),"FORCE_COLOR"in a&&(n="true"===a.FORCE_COLOR?1:"false"===a.FORCE_COLOR?0:0===a.FORCE_COLOR.length?1:Math.min(parseInt(a.FORCE_COLOR,10),3)),t.exports={supportsColor:function(e){return s(l(e,e&&e.isTTY))},stdout:s(l(!0,i.isatty(1))),stderr:s(l(!0,i.isatty(2)))}},201717,(e,t,r)=>{let n=e.r(870722),i=e.r(224361);r.init=function(e){e.inspectOpts={};let t=Object.keys(r.inspectOpts);for(let n=0;n<t.length;n++)e.inspectOpts[t[n]]=r.inspectOpts[t[n]]},r.log=function(...e){return process.stderr.write(i.formatWithOptions(r.inspectOpts,...e)+"\n")},r.formatArgs=function(e){let{namespace:n,useColors:i}=this;if(i){let r=this.color,i="\x1b[3"+(r<8?r:"8;5;"+r),o=`  ${i};1m${n} \u001B[0m`;e[0]=o+e[0].split("\n").join("\n"+o),e.push(i+"m+"+t.exports.humanize(this.diff)+"\x1b[0m")}else e[0]=(r.inspectOpts.hideDate?"":new Date().toISOString()+" ")+n+" "+e[0]},r.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},r.load=function(){return process.env.DEBUG},r.useColors=function(){return"colors"in r.inspectOpts?!!r.inspectOpts.colors:n.isatty(process.stderr.fd)},r.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),r.colors=[6,2,3,4,5,1];try{let t=e.r(581202);t&&(t.stderr||t).level>=2&&(r.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}r.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),t.exports=e.r(921795)(r);let{formatters:o}=t.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},492086,(e,t,r)=>{let n;r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),e.splice(i,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=function(){let e;try{e=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch(e){}return!e&&"u">typeof process&&"env"in process&&(e=process.env.DEBUG),e},r.useColors=function(){let e;return!("u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("u">typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"u">typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(e){}}(),n=!1,r.destroy=()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))},r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=e.r(921795)(r);let{formatters:i}=t.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},21214,(e,t,r)=>{"u"<typeof process||"renderer"===process.type||process.__nwjs?t.exports=e.r(492086):t.exports=e.r(201717)},184566,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.genRedactedString=r.getStringValue=r.MAX_ARGUMENT_LENGTH=void 0;let n=e.r(21214);function i(e){if(null!==e)switch(typeof e){case"boolean":case"number":return;case"object":if(Buffer.isBuffer(e))return e.toString("hex");if(Array.isArray(e))return e.join(",");try{return JSON.stringify(e)}catch(e){return}case"string":return e}}function o(e,t){let{length:r}=e;return r<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+r+'">'}r.MAX_ARGUMENT_LENGTH=200,r.getStringValue=i,r.genRedactedString=o,r.default=function(e){let t=(0,n.default)(`ioredis:${e}`);function r(...e){if(t.enabled){for(let t=1;t<e.length;t++){let r=i(e[t]);"string"==typeof r&&r.length>200&&(e[t]=o(r,200))}return t.apply(null,e)}}return Object.defineProperties(r,{namespace:{get:()=>t.namespace},enabled:{get:()=>t.enabled},destroy:{get:()=>t.destroy},log:{get:()=>t.log,set(e){t.log=e}}}),r}},87494,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`;r.default={RedisCloudFixed:{ca:n},RedisCloudFlexible:{ca:n}}},40534,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.noop=r.defaults=r.Debug=r.getPackageMeta=r.zipMap=r.CONNECTION_CLOSED_ERROR_MSG=r.shuffle=r.sample=r.resolveTLSProfile=r.parseURL=r.optimizeErrorStack=r.toArg=r.convertMapToArray=r.convertObjectToArray=r.timeout=r.packObject=r.isInt=r.wrapMultiResult=r.convertBufferToString=void 0;let n=e.r(522734),i=e.r(814747),o=e.r(792509),a=e.r(958934);Object.defineProperty(r,"defaults",{enumerable:!0,get:function(){return a.defaults}}),Object.defineProperty(r,"noop",{enumerable:!0,get:function(){return a.noop}}),r.Debug=e.r(184566).default;let s=e.r(87494);function l(e){let t=parseFloat(e);return!isNaN(e)&&(0|t)===t}r.convertBufferToString=function e(t,r){if(t instanceof Buffer)return t.toString(r);if(Array.isArray(t)){let n=t.length,i=Array(n);for(let o=0;o<n;++o)i[o]=t[o]instanceof Buffer&&"utf8"===r?t[o].toString():e(t[o],r);return i}return t},r.wrapMultiResult=function(e){if(!e)return null;let t=[],r=e.length;for(let n=0;n<r;++n){let r=e[n];r instanceof Error?t.push([r]):t.push([null,r])}return t},r.isInt=l,r.packObject=function(e){let t={},r=e.length;for(let n=1;n<r;n+=2)t[e[n-1]]=e[n];return t},r.timeout=function(e,t){let r=null,n=function(){r&&(clearTimeout(r),r=null,e.apply(this,arguments))};return r=setTimeout(n,t,Error("timeout")),n},r.convertObjectToArray=function(e){let t=[],r=Object.keys(e);for(let n=0,i=r.length;n<i;n++)t.push(r[n],e[r[n]]);return t},r.convertMapToArray=function(e){let t=[],r=0;return e.forEach(function(e,n){t[r]=n,t[r+1]=e,r+=2}),t},r.toArg=function(e){return null==e?"":String(e)},r.optimizeErrorStack=function(e,t,r){let n,i=t.split("\n"),o="";for(n=1;n<i.length&&-1!==i[n].indexOf(r);++n);for(let e=n;e<i.length;++e)o+="\n"+i[e];if(e.stack){let t=e.stack.indexOf("\n");e.stack=e.stack.slice(0,t)+o}return e},r.parseURL=function(e){if(l(e))return{port:e};let t=(0,o.parse)(e,!0,!0);t.slashes||"/"===e[0]||(e="//"+e,t=(0,o.parse)(e,!0,!0));let r=t.query||{},n={};if(t.auth){let e=t.auth.indexOf(":");n.username=-1===e?t.auth:t.auth.slice(0,e),n.password=-1===e?"":t.auth.slice(e+1)}if(t.pathname&&("redis:"===t.protocol||"rediss:"===t.protocol?t.pathname.length>1&&(n.db=t.pathname.slice(1)):n.path=t.pathname),t.host&&(n.host=t.hostname),t.port&&(n.port=t.port),"string"==typeof r.family){let e=Number.parseInt(r.family,10);Number.isNaN(e)||(n.family=e)}return(0,a.defaults)(n,r),n},r.resolveTLSProfile=function(e){let t=null==e?void 0:e.tls;"string"==typeof t&&(t={profile:t});let r=s.default[null==t?void 0:t.profile];return r&&(t=Object.assign({},r,t),delete t.profile,e=Object.assign({},e,{tls:t})),e},r.sample=function(e,t=0){let r=e.length;return t>=r?null:e[t+Math.floor(Math.random()*(r-t))]},r.shuffle=function(e){let t=e.length;for(;t>0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}return e},r.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.",r.zipMap=function(e,t){let r=new Map;return e.forEach((e,n)=>{r.set(e,t[n])}),r};let c=null;r.getPackageMeta=async function(){if(c)return c;try{let e=(0,i.resolve)("/ROOT/node_modules/ioredis/built/utils","..","..","package.json"),t=await n.promises.readFile(e,"utf8");return c={version:JSON.parse(t).version}}catch(e){return c={version:"error-fetching-version"}}}},378445,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(711906),i=e.r(519610),o=e.r(178167),a=e.r(40534);class s{constructor(e,t=[],r={},n){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=r.replyEncoding,this.errorStack=r.errorStack,this.args=t.flat(),this.callback=n,this.initPromise(),r.keyPrefix){const e=r.keyPrefix instanceof Buffer;let t=e?r.keyPrefix:null;this._iterateKeys(n=>n instanceof Buffer?(null===t&&(t=Buffer.from(r.keyPrefix)),Buffer.concat([t,n])):e?Buffer.concat([r.keyPrefix,Buffer.from(String(n))]):r.keyPrefix+n)}r.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,t){return!!this.getFlagMap()[e][t]}static setArgumentTransformer(e,t){this._transformer.argument[e]=t}static setReplyTransformer(e,t){this._transformer.reply[e]=t}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(s.FLAGS).reduce((e,t)=>(e[t]={},s.FLAGS[t].forEach(r=>{e[t][r]=!0}),e),{})),this.flagMap}getSlot(){if(void 0===this.slot){let e=this.getKeys()[0];this.slot=null==e?null:i(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let t,r="*"+(this.args.length+1)+"\r\n$"+Buffer.byteLength(this.name)+"\r\n"+this.name+"\r\n";if(this.bufferMode){let e=new u;e.push(r);for(let t=0;t<this.args.length;++t){let r=this.args[t];r instanceof Buffer?0===r.length?e.push("$0\r\n\r\n"):(e.push("$"+r.length+"\r\n"),e.push(r),e.push("\r\n")):e.push("$"+Buffer.byteLength(r)+"\r\n"+r+"\r\n")}t=e.toBuffer()}else{t=r;for(let e=0;e<this.args.length;++e){let r=this.args[e];t+="$"+Buffer.byteLength(r)+"\r\n"+r+"\r\n"}}return t}stringifyArguments(){for(let e=0;e<this.args.length;++e){let t=this.args[e];"string"==typeof t||(t instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,a.toArg)(t))}}transformReply(e){this.replyEncoding&&(e=(0,a.convertBufferToString)(e,this.replyEncoding));let t=s._transformer.reply[this.name];return t&&(e=t(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(Error("Command timed out"))},e))}initPromise(){let e=new Promise((e,t)=>{if(!this.transformed){this.transformed=!0;let e=s._transformer.argument[this.name];e&&(this.args=e(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(e),this.errorStack?this.reject=e=>{t((0,a.optimizeErrorStack)(e,this.errorStack.stack,"/ROOT/node_modules/ioredis/built"))}:this.reject=t});this.promise=(0,o.default)(e,this.callback)}_iterateKeys(e=e=>e){if(void 0===this.keys&&(this.keys=[],(0,n.exists)(this.name)))for(let t of(0,n.getKeyIndexes)(this.name,this.args))this.args[t]=e(this.args[t]),this.keys.push(this.args[t]);return this.keys}_convertValue(e){return t=>{try{let r=this._commandTimeoutTimer;r&&(clearTimeout(r),delete this._commandTimeoutTimer),e(this.transformReply(t)),this.isResolved=!0}catch(e){this.reject(e)}return this.promise}}}r.default=s,s.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"]},s._transformer={argument:{},reply:{}};let l=function(e){if(1===e.length){if(e[0]instanceof Map)return(0,a.convertMapToArray)(e[0]);if("object"==typeof e[0]&&null!==e[0])return(0,a.convertObjectToArray)(e[0])}return e},c=function(e){if(2===e.length){if(e[1]instanceof Map)return[e[0]].concat((0,a.convertMapToArray)(e[1]));if("object"==typeof e[1]&&null!==e[1])return[e[0]].concat((0,a.convertObjectToArray)(e[1]))}return e};s.setArgumentTransformer("mset",l),s.setArgumentTransformer("msetnx",l),s.setArgumentTransformer("hset",c),s.setArgumentTransformer("hmset",c),s.setReplyTransformer("hgetall",function(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r+=2){let n=e[r],i=e[r+1];n in t?Object.defineProperty(t,n,{value:i,configurable:!0,enumerable:!0,writable:!0}):t[n]=i}return t}return e});class u{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),t=0;for(let r of this.items){let n=Buffer.byteLength(r);Buffer.isBuffer(r)?r.copy(e,t):e.write(r,t,n),t+=n}return e}}},717567,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(679102);class i extends n.RedisError{constructor(e,t){super(e),this.lastNodeError=t,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}r.default=i,i.defaultMessage="Failed to refresh slots cache."},975224,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(688947);class i extends n.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained)return void this.push(null);let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.noValues&&e.push("NOVALUES"),this.opt.redis[this.opt.command](e,(e,t)=>{e?this.emit("error",e):(this._redisCursor=t[0]instanceof Buffer?t[0].toString():t[0],"0"===this._redisCursor&&(this._redisDrained=!0),this.push(t[1]))})}close(){this._redisDrained=!0}}r.default=i},422708,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.executeWithAutoPipelining=r.getFirstValueInFlattenedArray=r.shouldUseAutoPipelining=r.notAllowedAutoPipelineCommands=r.kCallbacks=r.kExec=void 0;let n=e.r(958934),i=e.r(519610),o=e.r(178167);function a(e){for(let t=0;t<e.length;t++){let r=e[t];if("string"==typeof r)return r;if(Array.isArray(r)||(0,n.isArguments)(r)){if(0===r.length)continue;return r[0]}let i=[r].flat();if(i.length>0)return i[0]}}r.kExec=Symbol("exec"),r.kCallbacks=Symbol("callbacks"),r.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"],r.shouldUseAutoPipelining=function(e,t,n){return t&&e.options.enableAutoPipelining&&!e.isPipeline&&!r.notAllowedAutoPipelineCommands.includes(n)&&!e.options.autoPipeliningIgnoredCommands.includes(n)},r.getFirstValueInFlattenedArray=a,r.executeWithAutoPipelining=function e(t,s,l,c,u){if(t.isCluster&&!t.slots.length)return"wait"===t.status&&t.connect().catch(n.noop),(0,o.default)(new Promise(function(r,n){t.delayUntilReady(i=>{i?n(i):e(t,s,l,c,null).then(r,n)})}),u);let d=t.options.keyPrefix||"",p=t.isCluster?t.slots[i(`${d}${a(c)}`)].join(","):"main";if(!t._autoPipelines.has(p)){let e=t.pipeline();e[r.kExec]=!1,e[r.kCallbacks]=[],t._autoPipelines.set(p,e)}let f=t._autoPipelines.get(p);f[r.kExec]||(f[r.kExec]=!0,setImmediate(function e(t,n){if(t._runningAutoPipelines.has(n)||!t._autoPipelines.has(n))return;t._runningAutoPipelines.add(n);let i=t._autoPipelines.get(n);t._autoPipelines.delete(n);let o=i[r.kCallbacks];i[r.kCallbacks]=null,i.exec(function(r,i){if(t._runningAutoPipelines.delete(n),r)for(let e=0;e<o.length;e++)process.nextTick(o[e],r);else for(let e=0;e<o.length;e++)process.nextTick(o[e],...i[e]);t._autoPipelines.has(n)&&e(t,n)})},t,p));let h=new Promise(function(e,t){f[r.kCallbacks].push(function(r,n){r?t(r):e(n)}),"call"===s&&c.unshift(l),f[s](...c)});return(0,o.default)(h,u)}},207826,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(254799),i=e.r(378445),o=e.r(178167);r.default=class{constructor(e,t=null,r="",o=!1){this.lua=e,this.numberOfKeys=t,this.keyPrefix=r,this.readOnly=o,this.sha=(0,n.createHash)("sha1").update(e).digest("hex");const a=this.sha,s=new WeakSet;this.Command=class extends i.default{toWritable(t){let r=this.reject;return this.reject=e=>{-1!==e.message.indexOf("NOSCRIPT")&&s.delete(t),r.call(this,e)},s.has(t)?"eval"===this.name&&(this.name="evalsha",this.args[0]=a):(s.add(t),this.name="eval",this.args[0]=e),super.toWritable(t)}}}execute(e,t,r,n){"number"==typeof this.numberOfKeys&&t.unshift(this.numberOfKeys),this.keyPrefix&&(r.keyPrefix=this.keyPrefix),this.readOnly&&(r.readOnly=!0);let i=new this.Command("evalsha",[this.sha,...t],r);return i.promise=i.promise.catch(n=>{if(-1===n.message.indexOf("NOSCRIPT"))throw n;let i=new this.Command("evalsha",[this.sha,...t],r);return(e.isPipeline?e.redis:e).sendCommand(i)}),(0,o.default)(i.promise,n),e.sendCommand(i)}}},251330,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(711906),i=e.r(422708),o=e.r(378445),a=e.r(207826);class s{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return l.slice(0)}createBuiltinCommand(e){return{string:c(null,e,"utf8"),buffer:c(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=c(e,e,"utf8"),this[e+"Buffer"]=c(e+"Buffer",e,null)}defineCommand(e,t){let r=new a.default(t.lua,t.numberOfKeys,this.options.keyPrefix,t.readOnly);this.scriptsSet[e]=r,this[e]=u(e,e,r,"utf8"),this[e+"Buffer"]=u(e+"Buffer",e,r,null)}sendCommand(e,t,r){throw Error('"sendCommand" is not implemented')}}let l=n.list.filter(e=>"monitor"!==e);function c(e,t,r){return void 0===r&&(r=t,t=null),function(...n){let a=t||n.shift(),s=n[n.length-1];"function"==typeof s?n.pop():s=void 0;let l={errorStack:this.options.showFriendlyErrorStack?Error():void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,i.shouldUseAutoPipelining)(this,e,a)?(0,i.executeWithAutoPipelining)(this,e,a,n,s):this.sendCommand(new o.default(a,n,l,s))}}function u(e,t,r,n){return function(...o){let a="function"==typeof o[o.length-1]?o.pop():void 0,s={replyEncoding:n};return(this.options.showFriendlyErrorStack&&(s.errorStack=Error()),(0,i.shouldUseAutoPipelining)(this,e,t))?(0,i.executeWithAutoPipelining)(this,e,t,o,a):r.execute(this,o,s,a)}}l.push("sentinel"),l.forEach(function(e){s.prototype[e]=c(e,e,"utf8"),s.prototype[e+"Buffer"]=c(e+"Buffer",e,null)}),s.prototype.call=c("call","utf8"),s.prototype.callBuffer=c("callBuffer",null),s.prototype.send_command=s.prototype.call,r.default=s},246624,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(519610),i=e.r(711906),o=e.r(178167),a=e.r(224361),s=e.r(378445),l=e.r(40534),c=e.r(251330);class u extends c.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster="Cluster"===this.redis.constructor.name||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(t=>{let r=e.scriptsSet[t];this._shaToScript[r.sha]=r,this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]}),e.addedBuiltinSet.forEach(t=>{this[t]=e[t],this[t+"Buffer"]=e[t+"Buffer"]}),this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t});const t=this;Object.defineProperty(this,"length",{get:function(){return t._queue.length}})}fillResult(e,t){if("exec"===this._queue[t].name&&Array.isArray(e[1])){let r=e[1].length;for(let n=0;n<r;n++){if(e[1][n]instanceof Error)continue;let i=this._queue[t-(r-n)];try{e[1][n]=i.transformReply(e[1][n])}catch(t){e[1][n]=t}}}if(this._result[t]=e,--this.replyPending)return;if(this.isCluster){let e,t=!0;for(let r=0;r<this._result.length;++r){let n=this._result[r][0],o=this._queue[r];if(n){if("exec"===o.name&&"EXECABORT Transaction discarded because of previous errors."===n.message)continue;if(e){if(e.name!==n.name||e.message!==n.message){t=!1;break}}else e={name:n.name,message:n.message}}else if(!o.inTransaction&&!((0,i.exists)(o.name)&&(0,i.hasFlag)(o.name,"readonly"))){t=!1;break}}if(e&&t){let t=this,r=e.message.split(" "),n=this._queue,i=!1;this._queue=[];for(let e=0;e<n.length;++e){if("ASK"===r[0]&&!i&&"asking"!==n[e].name&&(!n[e-1]||"asking"!==n[e-1].name)){let e=new s.default("asking");e.ignore=!0,this.sendCommand(e)}n[e].initPromise(),this.sendCommand(n[e]),i=n[e].inTransaction}let o=!0;void 0===this.leftRedirections&&(this.leftRedirections={});let a=function(){t.exec()},l=this.redis;if(l.handleError(e,this.leftRedirections,{moved:function(e,n){t.preferKey=n,l.slots[r[1]]=[n],l._groupsBySlot[r[1]]=l._groupsIds[l.slots[r[1]].join(";")],l.refreshSlotsCache(),t.exec()},ask:function(e,r){t.preferKey=r,t.exec()},tryagain:a,clusterDown:a,connectionClosed:a,maxRedirections:()=>{o=!1},defaults:()=>{o=!1}}),o)return}}let r=0;for(let e=0;e<this._queue.length-r;++e)this._queue[e+r].ignore&&(r+=1),this._result[e]=this._result[e+r];this.resolve(this._result.slice(0,this._result.length-r))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let t=this._queue.length;return e.pipelineIndex=t,e.promise.then(e=>{this.fillResult([null,e],t)}).catch(e=>{this.fillResult([e],t)}),this._queue.push(e),this}addBatch(e){let t,r,n;for(let i=0;i<e.length;++i)r=(t=e[i])[0],n=t.slice(1),this[r].apply(this,n);return this}}r.default=u;let d=u.prototype.multi;u.prototype.multi=function(){return this._transactions+=1,d.apply(this,arguments)};let p=u.prototype.execBuffer;u.prototype.execBuffer=(0,a.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),p.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead"),u.prototype.exec=function(e){let t;if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(l.noop),e&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,o.default)(this.promise,e)),this.redis.delayUntilReady(t=>{t?this.reject(t):this.exec(e)}),this.promise;if(this._transactions>0)return this._transactions-=1,p.apply(this,arguments);if(this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,o.default)(this.promise,e)),this._queue.length||this.resolve([]),this.isCluster){let e=[];for(let t=0;t<this._queue.length;t++){let r=this._queue[t].getKeys();if(r.length&&e.push(r[0]),r.length&&0>n.generateMulti(r))return this.reject(Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(e.length){if((t=function(e,t){let r=n(t[0]),i=e._groupsBySlot[r];for(let r=1;r<t.length;r++)if(e._groupsBySlot[n(t[r])]!==i)return -1;return r}(this.redis,e))<0)return this.reject(Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else t=16384*Math.random()|0}let r=this;return function(){let e,n,i=r.replyPending=r._queue.length;r.isCluster&&(e={slot:t,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let o="",a={isPipeline:!0,destination:r.isCluster?e:{redis:r.redis},write(e){"string"!=typeof e?(n||(n=[]),o&&(n.push(Buffer.from(o,"utf8")),o=""),n.push(e)):o+=e,--i||(n?(o&&n.push(Buffer.from(o,"utf8")),a.destination.redis.stream.write(Buffer.concat(n))):a.destination.redis.stream.write(o),i=r._queue.length,o="",n=void 0)}};for(let t=0;t<r._queue.length;++t)r.redis.sendCommand(r._queue[t],a,e);r.promise}(),this.promise}},512286,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addTransactionSupport=void 0;let n=e.r(40534),i=e.r(178167),o=e.r(246624);r.addTransactionSupport=function(e){e.pipeline=function(e){let t=new o.default(this);return Array.isArray(e)&&t.addBatch(e),t};let{multi:t}=e;e.multi=function(e,r){if(void 0!==r||Array.isArray(e)||(r=e,e=null),r&&!1===r.pipeline)return t.call(this);let a=new o.default(this);a.multi(),Array.isArray(e)&&a.addBatch(e);let s=a.exec;a.exec=function(e){if(this.isCluster&&!this.redis.slots.length)return"wait"===this.redis.status&&this.redis.connect().catch(n.noop),(0,i.default)(new Promise((e,t)=>{this.redis.delayUntilReady(r=>{r?t(r):this.exec(a).then(e,t)})}),e);if(this._transactions>0&&s.call(a),this.nodeifiedPromise)return s.call(a);let t=s.call(a);return(0,i.default)(t.then(function(e){let t=e[e.length-1];if(void 0===t)throw Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(t[0]){t[0].previousErrors=[];for(let r=0;r<e.length-1;++r)e[r][0]&&t[0].previousErrors.push(e[r][0]);throw t[0]}return(0,n.wrapMultiResult)(t[1])}),e)};let{execBuffer:l}=a;return a.execBuffer=function(e){return this._transactions>0&&l.call(a),a.exec(e)},a};let{exec:r}=e;e.exec=function(e){return(0,i.default)(r.call(this).then(function(e){return Array.isArray(e)&&(e=(0,n.wrapMultiResult)(e)),e}),e)}}},811073,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){Object.getOwnPropertyNames(t.prototype).forEach(r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))})}},529020,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CLUSTER_OPTIONS=void 0;let n=e.r(679594);r.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+2*e,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:n.resolveSrv,dnsLookup:n.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}},231377,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getConnectionName=r.weightSrvRecords=r.groupSrvRecords=r.getUniqueHostnamesFromOptions=r.normalizeNodeOptions=r.nodeKeyToRedisOptions=r.getNodeKey=void 0;let n=e.r(40534),i=e.r(504446);r.getNodeKey=function(e){return e.port=e.port||6379,e.host=e.host||"127.0.0.1",e.host+":"+e.port},r.nodeKeyToRedisOptions=function(e){let t=e.lastIndexOf(":");if(-1===t)throw Error(`Invalid node key ${e}`);return{host:e.slice(0,t),port:Number(e.slice(t+1))}},r.normalizeNodeOptions=function(e){return e.map(e=>{let t={};if("object"==typeof e)Object.assign(t,e);else if("string"==typeof e)Object.assign(t,(0,n.parseURL)(e));else if("number"==typeof e)t.port=e;else throw Error("Invalid argument "+e);return"string"==typeof t.port&&(t.port=parseInt(t.port,10)),delete t.db,t.port||(t.port=6379),t.host||(t.host="127.0.0.1"),(0,n.resolveTLSProfile)(t)})},r.getUniqueHostnamesFromOptions=function(e){let t={};return e.forEach(e=>{t[e.host]=!0}),Object.keys(t).filter(e=>!(0,i.isIP)(e))},r.groupSrvRecords=function(e){let t={};for(let r of e)t.hasOwnProperty(r.priority)?(t[r.priority].totalWeight+=r.weight,t[r.priority].records.push(r)):t[r.priority]={totalWeight:r.weight,records:[r]};return t},r.weightSrvRecords=function(e){if(1===e.records.length)return e.totalWeight=0,e.records.shift();let t=Math.floor(Math.random()*(e.totalWeight+e.records.length)),r=0;for(let[n,i]of e.records.entries())if((r+=1+i.weight)>t)return e.totalWeight-=i.weight,e.records.splice(n,1),i},r.getConnectionName=function(e,t){let r=`ioredis-cluster(${e})`;return t?`${r}:${t}`:r}},736822,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(231377),i=e.r(40534),o=e.r(972565),a=(0,i.Debug)("cluster:subscriber");r.default=class{constructor(e,t,r=!1){this.connectionPool=e,this.emitter=t,this.isSharded=r,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{this.started?(a("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()):a("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.")},this.connectionPool.on("-node",(e,t)=>{this.started&&this.subscriber&&(0,n.getNodeKey)(this.subscriber.options)===t&&(a("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{this.started&&!this.subscriber&&(a("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(e){return this.isSharded&&(this.slotRange=e),this.slotRange}start(){this.started=!0,this.selectSubscriber(),a("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let t=(0,i.sample)(this.connectionPool.getNodes());if(!t){a("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:r}=t;a("selected a subscriber %s:%s",r.host,r.port);let s="subscriber";this.isSharded&&(s="ssubscriber"),this.subscriber=new o.default({port:r.port,host:r.host,username:r.username,password:r.password,enableReadyCheck:!0,connectionName:(0,n.getConnectionName)(s,r.connectionName),lazyConnect:!0,tls:r.tls,retryStrategy:null}),this.subscriber.on("error",i.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let l={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let t=e.condition||e.prevCondition;t&&t.subscriber&&(l.subscribe=t.subscriber.channels("subscribe"),l.psubscribe=t.subscriber.channels("psubscribe"),l.ssubscribe=t.subscriber.channels("ssubscribe"))}if(l.subscribe.length||l.psubscribe.length||l.ssubscribe.length){let e=0;for(let t of["subscribe","psubscribe","ssubscribe"]){let r=l[t];if(0!=r.length)if(a("%s %d channels",t,r.length),"ssubscribe"===t)for(let n of r)e+=1,this.subscriber[t](n).then(()=>{--e||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{a("failed to ssubscribe to channel: %s",n)});else e+=1,this.subscriber[t](r).then(()=>{--e||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{a("failed to %s %d channels",t,r.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let e of["message","messageBuffer"])this.subscriber.on(e,(t,r)=>{this.emitter.emit(e,t,r)});for(let e of["pmessage","pmessageBuffer"])this.subscriber.on(e,(t,r,n)=>{this.emitter.emit(e,t,r,n)});if(!0==this.isSharded)for(let e of["smessage","smessageBuffer"])this.subscriber.on(e,(t,r)=>{this.emitter.emit(e,t,r)})}}},809067,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(427699),i=e.r(40534),o=e.r(231377),a=e.r(972565),s=(0,i.Debug)("cluster:connectionPool");class l extends n.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let t=this.nodes[e];return Object.keys(t).map(e=>t[e])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let t=Object.keys(this.nodes[e]),r=(0,i.sample)(t);return this.nodes[e][r]}addMasterNode(e){let t=(0,o.getNodeKey)(e.options),r=this.createRedisFromOptions(e,e.options.readOnly);return!e.options.readOnly&&(this.nodes.all[t]=r,this.nodes.master[t]=r,!0)}createRedisFromOptions(e,t){return new a.default((0,i.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:t},e,this.redisOptions,{lazyConnect:!0}))}findOrCreate(e,t=!1){let r,n=(0,o.getNodeKey)(e);return t=!!t,this.specifiedOptions[n]?Object.assign(e,this.specifiedOptions[n]):this.specifiedOptions[n]=e,this.nodes.all[n]?(r=this.nodes.all[n]).options.readOnly!==t&&(r.options.readOnly=t,s("Change role of %s to %s",n,t?"slave":"master"),r[t?"readonly":"readwrite"]().catch(i.noop),t?(delete this.nodes.master[n],this.nodes.slave[n]=r):(delete this.nodes.slave[n],this.nodes.master[n]=r)):(s("Connecting to %s as %s",n,t?"slave":"master"),r=this.createRedisFromOptions(e,t),this.nodes.all[n]=r,this.nodes[t?"slave":"master"][n]=r,r.once("end",()=>{this.removeNode(n),this.emit("-node",r,n),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",r,n),r.on("error",function(e){this.emit("nodeError",e,n)})),r}reset(e){s("Reset with %O",e);let t={};e.forEach(e=>{let r=(0,o.getNodeKey)(e);e.readOnly&&t[r]||(t[r]=e)}),Object.keys(this.nodes.all).forEach(e=>{t[e]||(s("Disconnect %s because the node does not hold any slot",e),this.nodes.all[e].disconnect(),this.removeNode(e))}),Object.keys(t).forEach(e=>{let r=t[e];this.findOrCreate(r,r.readOnly)})}removeNode(e){let{nodes:t}=this;t.all[e]&&(s("Remove %s from the pool",e),delete t.all[e]),delete t.master[e],delete t.slave[e]}}r.default=l},67625,(e,t,r)=>{"use strict";function n(e,t){var t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=[,,,,])}n.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r)&&!(t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},n.prototype.get=function(e){return this.peekAt(e)},n.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},n.prototype.peekFront=function(){return this.peek()},n.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(n.prototype,"length",{get:function(){return this.size()}}),n.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.unshift=function(e){if(0==arguments.length)return this.size();var t=this._list.length;return(this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail)?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},n.prototype.push=function(e){if(0==arguments.length)return this.size();var t=this._tail;return(this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail)?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},n.prototype.removeOne=function(e){var t,r=e;if(r===(0|r)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n)&&!(r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var o=this._list[r];if(e<n/2){for(t=e;t>0;t--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(t=n-1-e;t>0;t--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return o}}},n.prototype.remove=function(e,t){var r,n,i=e,o=t;if(i===(0|i)&&this._head!==this._tail){var a=this.size(),s=this._list.length;if(!(i>=a)&&!(i<-a)&&!(t<1)){if(i<0&&(i+=a),1===t||!t)return(r=[,])[0]=this.removeOne(i),r;if(0===i&&i+t>=a)return r=this.toArray(),this.clear(),r;for(i+t>a&&(t=a-i),r=Array(t),n=0;n<t;n++)r[n]=this._list[this._head+i+n&this._capacityMask];if(i=this._head+i&this._capacityMask,e+t===a){for(this._tail=this._tail-t+s&this._capacityMask,n=t;n>0;n--)this._list[i=i+1+s&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+s&this._capacityMask,n=t-1;n>0;n--)this._list[i=i+1+s&this._capacityMask]=void 0;return r}if(i<a/2){for(this._head=this._head+e+t+s&this._capacityMask,n=e;n>0;n--)this.unshift(this._list[i=i-1+s&this._capacityMask]);for(i=this._head-1+s&this._capacityMask;o>0;)this._list[i=i-1+s&this._capacityMask]=void 0,o--;e<0&&(this._tail=i)}else{for(this._tail=i,i=i+t+s&this._capacityMask,n=a-(t+e);n>0;n--)this.push(this._list[i++]);for(i=this._tail;o>0;)this._list[i=i+1+s&this._capacityMask]=void 0,o--}return this._head<2&&this._tail>1e4&&this._tail<=s>>>2&&this._shrinkArray(),r}}},n.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n))if(!(arguments.length>2))return this.remove(r,t);else{var i,o,a,s=arguments.length,l=this._list.length,c=2;if(!n||r<n/2){for(i=0,o=Array(r);i<r;i++)o[i]=this._list[this._head+i&this._capacityMask];for(0===t?(a=[],r>0&&(this._head=this._head+r+l&this._capacityMask)):(a=this.remove(r,t),this._head=this._head+r+l&this._capacityMask);s>c;)this.unshift(arguments[--s]);for(i=r;i>0;i--)this.unshift(o[i-1])}else{var u=(o=Array(n-(r+t))).length;for(i=0;i<u;i++)o[i]=this._list[this._head+r+t+i&this._capacityMask];for(0===t?(a=[],r!=n&&(this._tail=this._head+r+l&this._capacityMask)):(a=this.remove(r,t),this._tail=this._tail-u+l&this._capacityMask);c<s;)this.push(arguments[c++]);for(i=0;i<u;i++)this.push(o[i])}return a}}},n.prototype.clear=function(){this._list=Array(this._list.length),this._head=0,this._tail=0},n.prototype.isEmpty=function(){return this._head===this._tail},n.prototype.toArray=function(){return this._copyArray(!1)},n.prototype._fromArray=function(e){var t=e.length,r=this._nextPowerOf2(t);this._list=Array(r),this._capacityMask=r-1,this._tail=t;for(var n=0;n<t;n++)this._list[n]=e[n]},n.prototype._copyArray=function(e,t){var r,n=this._list,i=n.length,o=this.length;if((t|=o)==o&&this._head<this._tail)return this._list.slice(this._head,this._tail);var a=Array(t),s=0;if(e||this._head>this._tail){for(r=this._head;r<i;r++)a[s++]=n[r];for(r=0;r<this._tail;r++)a[s++]=n[r]}else for(r=this._head;r<this._tail;r++)a[s++]=n[r];return a},n.prototype._growArray=function(){if(0!=this._head){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},n.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},n.prototype._nextPowerOf2=function(e){return Math.max(1<<Math.log(e)/Math.log(2)+1,4)},t.exports=n},111753,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(40534),i=e.r(67625),o=(0,n.Debug)("delayqueue");r.default=class{constructor(){this.queues={},this.timeouts={}}push(e,t,r){let n=r.callback||process.nextTick;this.queues[e]||(this.queues[e]=new i),this.queues[e].push(t),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{n(()=>{this.timeouts[e]=null,this.execute(e)})},r.timeout))}execute(e){let t=this.queues[e];if(!t)return;let{length:r}=t;if(r)for(o("send %d commands in %s queue",r,e),this.queues[e]=null;t.length>0;)t.shift()()}}},863241,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(40534),i=e.r(736822),o=e.r(809067),a=e.r(231377),s=e.r(519610),l=(0,n.Debug)("cluster:subscriberGroup");r.default=class{constructor(e,t){this.cluster=e,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,e.on("+node",e=>{this._addSubscriber(e)}),e.on("-node",e=>{this._removeSubscriber(e)}),e.on("refresh",()=>{this._refreshSlots(e)}),e.on("forceRefresh",()=>{t()})}getResponsibleSubscriber(e){let t=this.clusterSlots[e][0];return this.shardedSubscribers.get(t)}addChannels(e){let t=s(e[0]);e.forEach(e=>{if(s(e)!=t)return -1});let r=this.channels.get(t);return r?this.channels.set(t,r.concat(e)):this.channels.set(t,e),[...this.channels.values()].flatMap(e=>e).length}removeChannels(e){let t=s(e[0]);e.forEach(e=>{if(s(e)!=t)return -1});let r=this.channels.get(t);if(r){let n=r.filter(t=>!e.includes(t));this.channels.set(t,n)}return[...this.channels.values()].flatMap(e=>e).length}stop(){for(let e of this.shardedSubscribers.values())e.stop()}start(){for(let e of this.shardedSubscribers.values())e.isStarted()||e.start()}_addSubscriber(e){let t=new o.default(e.options);if(t.addMasterNode(e)){let r=new i.default(t,this.cluster,!0),n=(0,a.getNodeKey)(e.options);return this.shardedSubscribers.set(n,r),r.start(),this._resubscribe(),this.cluster.emit("+subscriber"),r}return null}_removeSubscriber(e){let t=(0,a.getNodeKey)(e.options),r=this.shardedSubscribers.get(t);return r&&(r.stop(),this.shardedSubscribers.delete(t),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(e){if(this._slotsAreEqual(e.slots))l("Nothing to refresh because the new cluster map is equal to the previous one.");else{l("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let t=0;t<e.slots.length;t++){let r=e.slots[t][0];this.subscriberToSlotsIndex.has(r)||this.subscriberToSlotsIndex.set(r,[]),this.subscriberToSlotsIndex.get(r).push(Number(t))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(e.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((e,t)=>{let r=this.subscriberToSlotsIndex.get(t);r&&(e.associateSlotRange(r),r.forEach(t=>{let r=e.getInstance(),n=this.channels.get(t);n&&n.length>0&&r&&(r.ssubscribe(n),r.on("ready",()=>{r.ssubscribe(n)}))}))})}_slotsAreEqual(e){return void 0!==this.clusterSlots&&JSON.stringify(this.clusterSlots)===JSON.stringify(e)}}},250644,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(711906),i=e.r(427699),o=e.r(679102),a=e.r(178167),s=e.r(378445),l=e.r(717567),c=e.r(972565),u=e.r(975224),d=e.r(512286),p=e.r(40534),f=e.r(811073),h=e.r(251330),m=e.r(529020),g=e.r(736822),y=e.r(809067),v=e.r(111753),b=e.r(231377),w=e.r(67625),_=e.r(863241),E=(0,p.Debug)("cluster"),x=new WeakSet;class S extends h.default{constructor(e,t={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new v.default,this.offlineQueue=new w,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,i.EventEmitter.call(this),this.startupNodes=e,this.options=(0,p.defaults)({},t,m.DEFAULT_CLUSTER_OPTIONS,this.options),!0==this.options.shardedSubscribers&&(this.shardedSubscribers=new _.default(this,this.refreshSlotsCache.bind(this))),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),"function"!=typeof this.options.scaleReads&&-1===["all","master","slave"].indexOf(this.options.scaleReads))throw Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new y.default(this.options.redisOptions),this.connectionPool.on("-node",(e,t)=>{this.emit("-node",e)}),this.connectionPool.on("+node",e=>{this.emit("+node",e)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(e,t)=>{this.emit("node error",e,t)}),this.subscriber=new g.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([e,t])=>{this.defineCommand(e,t)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(e=>{E("connecting failed: %s",e)})}connect(){return new Promise((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(Error("Redis is already connecting/connected"));let r=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(n=>{let i;if(this.connectionEpoch!==r){E("discard connecting after resolving startup nodes because epoch not match: %d != %d",r,this.connectionEpoch),t(new o.RedisError("Connection is discarded because a new connection is made"));return}if("connecting"!==this.status){E("discard connecting after resolving startup nodes because the status changed to %s",this.status),t(new o.RedisError("Connection is aborted"));return}this.connectionPool.reset(n);let a=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},s=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",i),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((e,t)=>{e||t?(E("Ready check failed (%s). Reconnecting...",e||t),"connect"===this.status&&this.disconnect(!0)):a()}):a()};i=()=>{let e=Error("None of startup nodes is available");this.removeListener("refresh",s),this.invokeReadyDelayedCallbacks(e),t(e)},this.once("refresh",s),this.once("close",i),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(e=>{e&&e.message===l.default.defaultMessage&&(c.default.prototype.silentEmit.call(this,"error",e),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(e=>{this.setStatus("close"),this.handleCloseEvent(e),this.invokeReadyDelayedCallbacks(e),t(e)})})}disconnect(e=!1){let t=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,E("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),"wait"===t?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let t=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),"wait"===t){let t=(0,a.default)(Promise.resolve("OK"),e);return setImmediate((function(){this.setStatus("close"),this.handleCloseEvent()}).bind(this)),t}return(0,a.default)(Promise.all(this.nodes().map(e=>e.quit().catch(e=>{if(e.message===p.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw e}))).then(()=>"OK"),e)}duplicate(e=[],t={}){return new S(e.length>0?e:this.startupNodes.slice(0),Object.assign({},this.options,t))}nodes(e="all"){if("all"!==e&&"master"!==e&&"slave"!==e)throw Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let t of this._autoPipelines.values())e+=t.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let t=this,r=e=>{for(let t of(this.isRefreshing=!1,this._refreshSlotsCacheCallbacks))t(e);this._refreshSlotsCacheCallbacks=[]},n=(0,p.shuffle)(this.connectionPool.getNodes()),i=null;!function e(o){if(o===n.length)return r(new l.default(l.default.defaultMessage,i));let a=n[o],s=`${a.options.host}:${a.options.port}`;E("getting slot cache from %s",s),t.getInfoFromNode(a,function(n){switch(t.status){case"close":case"end":return r(Error("Cluster is disconnected."));case"disconnecting":return r(Error("Cluster is disconnecting."))}n?(t.emit("node error",n,s),i=n,e(o+1)):(t.emit("refresh"),r())})}(0)}sendCommand(e,t,r){if("wait"===this.status&&this.connect().catch(p.noop),"end"===this.status)return e.reject(Error(p.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let i=this.options.scaleReads;"master"!==i&&(e.isReadOnly||(0,n.exists)(e.name)&&(0,n.hasFlag)(e.name,"readonly")||(i="master"));let a=r?r.slot:e.getSlot(),l={},c=this;if(!r&&!x.has(e)){x.add(e);let t=e.reject;e.reject=function(r){let n=u.bind(null,!0);c.handleError(r,l,{moved:function(t,r){E("command %s is moved to %s",e.name,r),a=Number(t),c.slots[t]?c.slots[t][0]=r:c.slots[t]=[r],c._groupsBySlot[t]=c._groupsIds[c.slots[t].join(";")],c.connectionPool.findOrCreate(c.natMapper(r)),u(),E("refreshing slot caches... (triggered by MOVED error)"),c.refreshSlotsCache()},ask:function(t,r){E("command %s is required to ask %s:%s",e.name,r);let n=c.natMapper(r);c.connectionPool.findOrCreate(n),u(!1,`${n.host}:${n.port}`)},tryagain:n,clusterDown:n,connectionClosed:n,maxRedirections:function(r){t.call(e,r)},defaults:function(){t.call(e,r)}})}}function u(n,l){let u;if("end"===c.status)return void e.reject(new o.AbortError("Cluster is ended."));if("ready"===c.status||"cluster"===e.name){if(r&&r.redis)u=r.redis;else if(s.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||s.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(!0==c.options.shardedSubscribers&&("ssubscribe"==e.name||"sunsubscribe"==e.name)){let t=c.shardedSubscribers.getResponsibleSubscriber(a),r=-1;"ssubscribe"==e.name&&(r=c.shardedSubscribers.addChannels(e.getKeys())),"sunsubscribe"==e.name&&(r=c.shardedSubscribers.removeChannels(e.getKeys())),-1!==r?u=t.getInstance():e.reject(new o.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else u=c.subscriber.getInstance();if(!u)return void e.reject(new o.AbortError("No subscriber for the cluster"))}else{if(!n){if("number"==typeof a&&c.slots[a]){let t=c.slots[a];if("function"==typeof i){let r=t.map(function(e){return c.connectionPool.getInstanceByKey(e)});Array.isArray(u=i(r,e))&&(u=(0,p.sample)(u)),u||(u=r[0])}else{let e;e="all"===i?(0,p.sample)(t):"slave"===i&&t.length>1?(0,p.sample)(t,1):t[0],u=c.connectionPool.getInstanceByKey(e)}}l&&(u=c.connectionPool.getInstanceByKey(l)).asking()}u||(u=("function"==typeof i?null:c.connectionPool.getSampleInstance(i))||c.connectionPool.getSampleInstance("all"))}r&&!r.redis&&(r.redis=u)}u?u.sendCommand(e,t):c.options.enableOfflineQueue?c.offlineQueue.push({command:e,stream:t,node:r}):e.reject(Error("Cluster isn't ready and enableOfflineQueue options is false"))}return u(),e.promise}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}handleError(e,t,r){if(void 0===t.value?t.value=this.options.maxRedirections:t.value-=1,t.value<=0)return void r.maxRedirections(Error("Too many Cluster redirections. Last error: "+e));let n=e.message.split(" ");if("MOVED"===n[0]){let e=this.options.retryDelayOnMoved;e&&"number"==typeof e?this.delayQueue.push("moved",r.moved.bind(null,n[1],n[2]),{timeout:e}):r.moved(n[1],n[2])}else"ASK"===n[0]?r.ask(n[1],n[2]):"TRYAGAIN"===n[0]?this.delayQueue.push("tryagain",r.tryagain,{timeout:this.options.retryDelayOnTryAgain}):"CLUSTERDOWN"===n[0]&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",r.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===p.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&"ready"===this.status?this.delayQueue.push("failover",r.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):r.defaults()}resetOfflineQueue(){this.offlineQueue=new w}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{E('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){E("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){let t;e&&E("closed because %s",e),this.manuallyClosing||"function"!=typeof this.options.clusterRetryStrategy||(t=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),"number"==typeof t?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,E("Cluster is disconnected. Retrying after %dms",t),this.connect().catch(function(e){E("Got error %s when reconnecting. Ignoring...",e)})},t)):(this.setStatus("end"),this.flushQueue(Error("None of startup nodes is available")))}flushQueue(e){let t;for(;t=this.offlineQueue.shift();)t.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){let e;E("send %d commands in offline queue",this.offlineQueue.length);let t=this.offlineQueue;for(this.resetOfflineQueue();e=t.shift();)this.sendCommand(e.command,e.stream,e.node)}}natMapper(e){let t="string"==typeof e?e:`${e.host}:${e.port}`,r=null;return(this.options.natMap&&"function"==typeof this.options.natMap?r=this.options.natMap(t):this.options.natMap&&"object"==typeof this.options.natMap&&(r=this.options.natMap[t]),r)?(E("NAT mapping %s -> %O",t,r),Object.assign({},r)):"string"==typeof e?(0,b.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,t){if(!e)return t(Error("Node is disconnected"));let r=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,b.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});r.on("error",p.noop),r.cluster("SLOTS",(0,p.timeout)((e,n)=>{if(r.disconnect(),e)return E("error encountered running CLUSTER.SLOTS: %s",e),t(e);if("disconnecting"===this.status||"close"===this.status||"end"===this.status){E("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",n.length,this.status),t();return}let i=[];E("cluster slots result count: %d",n.length);for(let e=0;e<n.length;++e){let t=n[e],r=t[0],o=t[1],a=[];for(let e=2;e<t.length;e++){if(!t[e][0])continue;let r=this.natMapper({host:t[e][0],port:t[e][1]});r.readOnly=2!==e,i.push(r),a.push(r.host+":"+r.port)}E("cluster slots result [%d]: slots %d~%d served by %s",e,r,o,a);for(let e=r;e<=o;e++)this.slots[e]=a}this._groupsIds=Object.create(null);let o=0;for(let e=0;e<16384;e++){let t=(this.slots[e]||[]).join(";");if(!t.length){this._groupsBySlot[e]=void 0;continue}this._groupsIds[t]||(this._groupsIds[t]=++o),this._groupsBySlot[e]=this._groupsIds[t]}this.connectionPool.reset(i),t()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let t of this._readyDelayedCallbacks)process.nextTick(t,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(t,r)=>{let n;if(t)return e(t);if("string"!=typeof r)return e();let i=r.split("\r\n");for(let e=0;e<i.length;++e){let t=i[e].split(":");if("cluster_state"===t[0]){n=t[1];break}}"fail"===n?(E("cluster state not ok (%s)",n),e(null,n)):e()})}resolveSrv(e){return new Promise((t,r)=>{this.options.resolveSrv(e,(e,n)=>{if(e)return r(e);let i=this,o=(0,b.groupSrvRecords)(n),a=Object.keys(o).sort((e,t)=>parseInt(e)-parseInt(t));!function e(n){if(!a.length)return r(n);let s=o[a[0]],l=(0,b.weightSrvRecords)(s);s.records.length||a.shift(),i.dnsLookup(l.name).then(e=>t({host:e,port:l.port}),e)}()})})}dnsLookup(e){return new Promise((t,r)=>{this.options.dnsLookup(e,(n,i)=>{n?(E("failed to resolve hostname %s to IP: %s",e,n.message),r(n)):(E("resolved hostname %s to IP %s",e,i),t(i))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||0===this.startupNodes.length)throw Error("`startupNodes` should contain at least one node.");let e=(0,b.normalizeNodeOptions)(this.startupNodes),t=(0,b.getUniqueHostnamesFromOptions)(e);if(0===t.length)return e;let r=await Promise.all(t.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),n=(0,p.zipMap)(t,r);return e.map(e=>{let t=n.get(e.host);return t?this.options.useSRVRecords?Object.assign({},e,t):Object.assign({},e,{host:t}):e})}createScanStream(e,{key:t,options:r={}}){return new u.default({objectMode:!0,key:t,redis:this,command:e,...r})}}(0,f.default)(S,i.EventEmitter),(0,d.addTransactionSupport)(S.prototype),r.default=S},413918,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=(0,e.r(40534).Debug)("AbstractConnector");r.default=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,t=setTimeout(()=>{n("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(t)),e.end()}}}},942357,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(504446),i=e.r(755004),o=e.r(40534),a=e.r(413918);class s extends a.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let t,{options:r}=this;return this.connecting=!0,"path"in r&&r.path?t={path:r.path}:(t={},"port"in r&&null!=r.port&&(t.port=r.port),"host"in r&&null!=r.host&&(t.host=r.host),"family"in r&&null!=r.family&&(t.family=r.family)),r.tls&&Object.assign(t,r.tls),new Promise((e,a)=>{process.nextTick(()=>{if(!this.connecting)return void a(Error(o.CONNECTION_CLOSED_ERROR_MSG));try{r.tls?this.stream=(0,i.connect)(t):this.stream=(0,n.createConnection)(t)}catch(e){a(e);return}this.stream.once("error",e=>{this.firstError=e}),e(this.stream)})})}}r.default=s},429949,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&1!==this.cursor&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;r<this.sentinels.length;r++){var t;if(t=this.sentinels[r],(e.host||"127.0.0.1")===(t.host||"127.0.0.1")&&(e.port||26379)===(t.port||26379))return!1}return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}}},406565,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FailoverDetector=void 0;let n=(0,e.r(40534).Debug)("FailoverDetector"),i="+switch-master";r.FailoverDetector=class{constructor(e,t){this.isDisconnected=!1,this.connector=e,this.sentinels=t}cleanup(){for(let e of(this.isDisconnected=!0,this.sentinels))e.client.disconnect()}async subscribe(){n("Starting FailoverDetector");let e=[];for(let t of this.sentinels){let r=t.client.subscribe(i).catch(e=>{n("Failed to subscribe to failover messages on sentinel %s:%s (%s)",t.address.host||"127.0.0.1",t.address.port||26739,e.message)});e.push(r),t.client.on("message",e=>{this.isDisconnected||e!==i||this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,n("Failover detected, disconnecting"),this.connector.disconnect()}}},298898,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SentinelIterator=void 0;let n=e.r(504446),i=e.r(40534),o=e.r(755004),a=e.r(429949);r.SentinelIterator=a.default;let s=e.r(413918),l=e.r(972565),c=e.r(406565),u=(0,i.Debug)("SentinelConnector");class d extends s.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw Error("Requires the name of master.");this.sentinelIterator=new a.default(this.options.sentinels)}check(e){let t=!e.role||this.options.role===e.role;return t||(u("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),t}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){let t;this.connecting=!0,this.retryAttempts=0;let r=async()=>{let a=this.sentinelIterator.next();if(a.done){this.sentinelIterator.reset(!1);let n="function"==typeof this.options.sentinelRetryStrategy?this.options.sentinelRetryStrategy(++this.retryAttempts):null,i="number"!=typeof n?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${n}ms.`;t&&(i+=` Last error: ${t.message}`),u(i);let o=Error(i);if("number"==typeof n)return e("error",o),await new Promise(e=>setTimeout(e,n)),r();throw o}let s=null,l=null;try{s=await this.resolve(a.value)}catch(e){l=e}if(!this.connecting)throw Error(i.CONNECTION_CLOSED_ERROR_MSG);let c=a.value.host+":"+a.value.port;if(s)return u("resolved: %s:%s from sentinel %s",s.host,s.port,c),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=(0,o.connect)(s),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,n.createConnection)(s),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",e=>{this.firstError=e}),this.stream;{let n=l?"failed to connect to sentinel "+c+" because "+l.message:"connected to sentinel "+c+" successfully, but got an invalid reply: "+s;return u(n),e("sentinelError",Error(n)),l&&(t=l),r()}};return r()}async updateSentinels(e){if(!this.options.updateSentinels)return;let t=await e.sentinel("sentinels",this.options.name);Array.isArray(t)&&(t.map(i.packObject).forEach(e=>{if(-1===(e.flags?e.flags.split(","):[]).indexOf("disconnected")&&e.ip&&e.port){let t=this.sentinelNatResolve(p(e));this.sentinelIterator.add(t)&&u("adding sentinel %s:%s",t.host,t.port)}}),u("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let t=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(t)?{host:t[0],port:Number(t[1])}:null)}async resolveSlave(e){let t=await e.sentinel("slaves",this.options.name);if(!Array.isArray(t))return null;let r=t.map(i.packObject).filter(e=>e.flags&&!e.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(function(e,t){let r;if(0===e.length)return null;if("function"==typeof t)r=t(e);else if(null!==t&&"object"==typeof t){let n=Array.isArray(t)?t:[t];n.sort((e,t)=>(e.prio||(e.prio=1),t.prio||(t.prio=1),e.prio<t.prio)?-1:+(e.prio>t.prio));for(let t=0;t<n.length;t++){for(let i=0;i<e.length;i++){let o=e[i];if(o.ip===n[t].ip&&o.port===n[t].port){r=o;break}}if(r)break}}return r||(r=(0,i.sample)(e)),p(r)}(r,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;let t=`${e.host}:${e.port}`,r=e;return"function"==typeof this.options.natMap?r=this.options.natMap(t)||e:"object"==typeof this.options.natMap&&(r=this.options.natMap[t]||e),r}connectToSentinel(e,t){return new l.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...t})}async resolve(e){let t=this.connectToSentinel(e);t.on("error",f);try{if("slave"===this.options.role)return await this.resolveSlave(t);return await this.resolveMaster(t)}finally{t.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let t=[];for(;t.length<this.options.sentinelMaxConnections;){let{done:e,value:r}=this.sentinelIterator.next();if(e)break;let n=this.connectToSentinel(r,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});n.on("reconnecting",()=>{var e;null==(e=this.emitter)||e.emit("sentinelReconnecting")}),t.push({address:r,client:n})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new c.FailoverDetector(this,t),await this.failoverDetector.subscribe(),null==(e=this.emitter)||e.emit("failoverSubscribed")}}function p(e){return{host:e.ip,port:Number(e.port)}}function f(){}r.default=d},945600,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SentinelConnector=r.StandaloneConnector=void 0,r.StandaloneConnector=e.r(942357).default,r.SentinelConnector=e.r(298898).default},730646,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(679102);class i extends n.AbortError{constructor(e){super(`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}r.default=i},452090,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MaxRetriesPerRequestError=void 0,r.MaxRetriesPerRequestError=e.r(730646).default},591248,(e,t,r)=>{"use strict";let n=e.r(500874).Buffer,i=new(e.r(99348)).StringDecoder,o=e.r(679102),a=o.ReplyError,s=o.ParserError;var l=n.allocUnsafe(32768),c=0,u=null,d=0,p=0;function f(e){let t=e.offset,r=e.buffer,n=r.length-1;for(var i=t;i<n;)if(13===r[i++]){if(e.offset=i+1,!0===e.optionReturnBuffers)return e.buffer.slice(t,i-1);return e.buffer.toString("utf8",t,i-1)}}function h(e){let t=e.buffer.length-1;for(var r=e.offset,n=0;r<t;){let t=e.buffer[r++];if(13===t)return e.offset=r+1,n;n=10*n+(t-48)}}function m(e,t,r){e.arrayCache.push(t),e.arrayPos.push(r)}function g(e){let t=e.arrayCache.pop();var r=e.arrayPos.pop();if(e.arrayCache.length){let n=g(e);if(void 0===n)return void m(e,t,r);t[r++]=n}return y(e,t,r)}function y(e,t,r){let n=e.buffer.length;for(;r<t.length;){let i=e.offset;if(e.offset>=n)return void m(e,t,r);let o=v(e,e.buffer[e.offset++]);if(void 0===o){e.arrayCache.length||e.bufferCache.length||(e.offset=i),m(e,t,r);return}t[r]=o,r++}return t}function v(e,t){switch(t){case 36:let r=h(e);if(void 0===r)return;if(r<0)return null;let n=e.offset+r;if(n+2>e.buffer.length){e.bigStrSize=n+2,e.totalChunkSize=e.buffer.length,e.bufferCache.push(e.buffer);return}let i=e.offset;return(e.offset=n+2,!0===e.optionReturnBuffers)?e.buffer.slice(i,n):e.buffer.toString("utf8",i,n);case 43:return f(e);case 42:let o;return void 0===(o=h(e))?void 0:o<0?null:y(e,Array(o),0);case 58:return!0===e.optionStringNumbers?function(e){let t=e.buffer.length-1;var r=e.offset,n=0,i="";for(45===e.buffer[r]&&(i+="-",r++);r<t;){var o=e.buffer[r++];if(13===o)return e.offset=r+1,0!==n&&(i+=n),i;n>0x19999998?(i+=10*n+(o-48),n=0):48===o&&0===n?i+=0:n=10*n+(o-48)}}(e):function(e){let t=e.buffer.length-1;var r=e.offset,n=0,i=1;for(45===e.buffer[r]&&(i=-1,r++);r<t;){let t=e.buffer[r++];if(13===t)return e.offset=r+1,i*n;n=10*n+(t-48)}}(e);case 45:var l=f(e);if(void 0!==l)return!0===e.optionReturnBuffers&&(l=l.toString()),new a(l);return;default:let c;return c=new s("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset),void(e.buffer=null,e.returnFatalError(c))}}function b(){if(l.length>51200)if(1===d||p>2*d){let e=Math.floor(l.length/10),t=e<c?c:e;c=0,l=l.slice(t,l.length)}else p++,d--;else clearInterval(u),d=0,p=0,u=null}t.exports=class{constructor(e){if(!e)throw TypeError("Options are mandatory.");if("function"!=typeof e.returnError||"function"!=typeof e.returnReply)throw TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if("boolean"!=typeof e)throw TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if("boolean"!=typeof e)throw TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(null===this.buffer)this.buffer=e,this.offset=0;else if(0===this.bigStrSize){let t=this.buffer.length,r=t-this.offset,i=n.allocUnsafe(r+e.length);if(this.buffer.copy(i,0,this.offset,t),e.copy(i,r,0,e.length),this.buffer=i,this.offset=0,this.arrayCache.length){let e=g(this);if(void 0===e)return;this.returnReply(e)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var t=this.optionReturnBuffers?function(e){let t=e.bufferCache,r=e.offset,i=e.bigStrSize-r-2;var o=t.length,a=e.bigStrSize-e.totalChunkSize;if(e.offset=a,a<=2){if(2===o)return t[0].slice(r,t[0].length+a-2);o--,a=t[t.length-2].length+a}l.length<i+c&&(c>0x6f00000&&(c=0x3200000),l=n.allocUnsafe(i*(i>0x4b00000?2:3)+c),c=0,d++,null===u&&(u=setInterval(b,50)));let s=c;t[0].copy(l,s,r,t[0].length),c+=t[0].length-r;for(var p=1;p<o-1;p++)t[p].copy(l,c),c+=t[p].length;return t[p].copy(l,c,0,a-2),c+=a-2,l.slice(s,c)}(this):function(e){let t=e.bufferCache,r=e.offset;var n=t.length,o=e.bigStrSize-e.totalChunkSize;if(e.offset=o,o<=2){if(2===n)return t[0].toString("utf8",r,t[0].length+o-2);n--,o=t[t.length-2].length+o}for(var a=i.write(t[0].slice(r)),s=1;s<n-1;s++)a+=i.write(t[s]);return a+i.end(t[s].slice(0,o-2))}(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=t,void 0===(t=g(this))))return;this.returnReply(t)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let e=this.offset,t=this.buffer[this.offset++],r=v(this,t);if(void 0===r){this.arrayCache.length||this.bufferCache.length||(this.offset=e);return}45===t?this.returnError(r):this.returnReply(r)}this.buffer=null}}},91901,(e,t,r)=>{"use strict";t.exports=e.r(591248)},204985,(e,t,r)=>{"use strict";function n(e){return"unsubscribe"===e?"subscribe":"punsubscribe"===e?"psubscribe":"sunsubscribe"===e?"ssubscribe":e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,t){this.set[n(e)][t]=!0}del(e,t){delete this.set[n(e)][t]}channels(e){return Object.keys(this.set[n(e)])}isEmpty(){return 0===this.channels("subscribe").length&&0===this.channels("psubscribe").length&&0===this.channels("ssubscribe").length}}},784319,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(378445),i=e.r(40534),o=e.r(91901),a=e.r(204985),s=(0,i.Debug)("dataHandler");r.default=class{constructor(e,t){this.redis=e;const r=new o({stringNumbers:t.stringNumbers,returnBuffers:!0,returnError:e=>{this.returnError(e)},returnFatalError:e=>{this.returnFatalError(e)},returnReply:e=>{this.returnReply(e)}});e.stream.prependListener("data",e=>{r.execute(e)}),e.stream.resume()}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let t=this.shiftCommand(e);if(t){if(e.command={name:t.command.name,args:t.command.args},"ssubscribe"==t.command.name&&e.message.includes("MOVED"))return void this.redis.emit("moved");this.redis.handleReconnection(e,t)}}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let t=this.shiftCommand(e);t&&(n.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.command.name)?(this.redis.condition.subscriber=new a.default,this.redis.condition.subscriber.add(t.command.name,e[1].toString()),c(t.command,e[2])||this.redis.commandQueue.unshift(t)):n.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.command.name)?u(t.command,e[2])||this.redis.commandQueue.unshift(t):t.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let t=Array.isArray(e)?e[0].toString():null;switch(s('receive reply "%s" in subscriber mode',t),t){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let t=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",t,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",t,e[2],e[3]);break}case"smessage":this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break;case"ssubscribe":case"subscribe":case"psubscribe":{let r=e[1].toString();this.redis.condition.subscriber.add(t,r);let n=this.shiftCommand(e);if(!n)return;c(n.command,e[2])||this.redis.commandQueue.unshift(n);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let r=e[1]?e[1].toString():null;r&&this.redis.condition.subscriber.del(t,r);let n=e[2];0===Number(n)&&(this.redis.condition.subscriber=!1);let i=this.shiftCommand(e);if(!i)return;u(i.command,n)||this.redis.commandQueue.unshift(i);break}default:{let t=this.shiftCommand(e);if(!t)return;t.command.resolve(e)}}return!0}handleMonitorReply(e){if("monitoring"!==this.redis.status)return!1;let t=e.toString();if("OK"===t)return!1;let r=t.indexOf(" "),n=t.slice(0,r),i=t.indexOf('"'),o=t.slice(i+1,-1).split('" "').map(e=>e.replace(/\\"/g,'"')),a=t.slice(r+2,i-2).split(" ");return this.redis.emit("monitor",n,o,a[1],a[0]),!0}shiftCommand(e){let t=this.redis.commandQueue.shift();if(!t){let t=Error("Command queue state error. If you can reproduce this, please report it."+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",t),null}return t}};let l=new WeakMap;function c(e,t){let r=l.has(e)?l.get(e):e.args.length;return(r-=1)<=0?(e.resolve(t),l.delete(e),!0):(l.set(e,r),!1)}function u(e,t){let r=l.has(e)?l.get(e):e.args.length;return 0===r?0===Number(t)&&(l.delete(e),e.resolve(t),!0):(r-=1)<=0?(e.resolve(t),!0):(l.set(e,r),!1)}},817839,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.readyHandler=r.errorHandler=r.closeHandler=r.connectHandler=void 0;let n=e.r(679102),i=e.r(378445),o=e.r(452090),a=e.r(40534),s=e.r(784319),l=(0,a.Debug)("connection");function c(e){let t=new n.AbortError("Command aborted due to connection close");return t.command={name:e.name,args:e.args},t}r.connectHandler=function(e){return function(){var t;e.setStatus("connect"),e.resetCommandQueue();let n=!1,{connectionEpoch:i}=e;e.condition.auth&&e.auth(e.condition.auth,function(t){i===e.connectionEpoch&&t&&(-1!==t.message.indexOf("no password is set")?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):-1!==t.message.indexOf("without any password configured for the default user")?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):-1!==t.message.indexOf("wrong number of arguments for 'auth' command")?console.warn("[ERROR] The server returned \"wrong number of arguments for 'auth' command\". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under."):(n=!0,e.recoverFromFatalError(t,t)))}),e.condition.select&&e.select(e.condition.select).catch(t=>{e.silentEmit("error",t)}),new s.default(e,{stringNumbers:e.options.stringNumbers});let o=[];e.options.connectionName&&(l("set the connection name [%s]",e.options.connectionName),o.push(e.client("setname",e.options.connectionName).catch(a.noop))),e.options.disableClientInfo||(l("set the client info"),o.push((0,a.getPackageMeta)().then(t=>e.client("SETINFO","LIB-VER",t.version).catch(a.noop)).catch(a.noop)),o.push(e.client("SETINFO","LIB-NAME",(null==(t=e.options)?void 0:t.clientInfoTag)?`ioredis(${e.options.clientInfoTag})`:"ioredis").catch(a.noop))),Promise.all(o).catch(a.noop).finally(()=>{e.options.enableReadyCheck||r.readyHandler(e)(),e.options.enableReadyCheck&&e._readyCheck(function(t,o){i===e.connectionEpoch&&(t?n||e.recoverFromFatalError(Error("Ready check failed: "+t.message),t):e.connector.check(o)?r.readyHandler(e)():e.disconnect(!0))})})}},r.closeHandler=function(e){return function(){let r=e.status;if(e.setStatus("close"),e.commandQueue.length&&function(e){var t;let r=0;for(let n=0;n<e.length;){let i=null==(t=e.peekAt(n))?void 0:t.command,o=i.pipelineIndex;if((void 0===o||0===o)&&(r=0),void 0!==o&&o!==r++){e.remove(n,1),i.reject(c(i));continue}n++}}(e.commandQueue),e.offlineQueue.length&&function(e){var t;for(let r=0;r<e.length;){let n=null==(t=e.peekAt(r))?void 0:t.command;if("multi"===n.name)break;if("exec"===n.name){e.remove(r,1),n.reject(c(n));break}n.inTransaction?(e.remove(r,1),n.reject(c(n))):r++}}(e.offlineQueue),"ready"===r&&(e.prevCondition||(e.prevCondition=e.condition),e.commandQueue.length&&(e.prevCommandQueue=e.commandQueue)),e.manuallyClosing)return e.manuallyClosing=!1,l("skip reconnecting since the connection is manually closed."),t();if("function"!=typeof e.options.retryStrategy)return l("skip reconnecting because `retryStrategy` is not a function"),t();let n=e.options.retryStrategy(++e.retryAttempts);if("number"!=typeof n)return l("skip reconnecting because `retryStrategy` doesn't return a number"),t();l("reconnect in %sms",n),e.setStatus("reconnecting",n),e.reconnectTimeout=setTimeout(function(){e.reconnectTimeout=null,e.connect().catch(a.noop)},n);let{maxRetriesPerRequest:i}=e.options;"number"==typeof i&&(i<0?l("maxRetriesPerRequest is negative, ignoring..."):0==e.retryAttempts%(i+1)&&(l("reach maxRetriesPerRequest limitation, flushing command queue..."),e.flushQueue(new o.MaxRetriesPerRequestError(i))))};function t(){e.setStatus("end"),e.flushQueue(Error(a.CONNECTION_CLOSED_ERROR_MSG))}},r.errorHandler=function(e){return function(t){l("error: %s",t),e.silentEmit("error",t)}},r.readyHandler=function(e){return function(){if(e.setStatus("ready"),e.retryAttempts=0,e.options.monitor){e.call("monitor").then(()=>e.setStatus("monitoring"),t=>e.emit("error",t));let{sendCommand:t}=e;e.sendCommand=function(r){return i.default.checkFlag("VALID_IN_MONITOR_MODE",r.name)?t.call(e,r):(r.reject(Error("Connection is in monitoring mode, can't process commands.")),r.promise)},e.once("close",function(){delete e.sendCommand});return}let t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.readOnly&&(l("set the connection to readonly mode"),e.readonly().catch(a.noop)),e.prevCondition){let r=e.prevCondition;if(e.prevCondition=null,r.subscriber&&e.options.autoResubscribe){e.condition.select!==t&&(l("connect to db [%d]",t),e.select(t));let n=r.subscriber.channels("subscribe");n.length&&(l("subscribe %d channels",n.length),e.subscribe(n));let i=r.subscriber.channels("psubscribe");i.length&&(l("psubscribe %d channels",i.length),e.psubscribe(i));let o=r.subscriber.channels("ssubscribe");if(o.length)for(let t of(l("ssubscribe %s",o.length),o))e.ssubscribe(t)}}if(e.prevCommandQueue)if(e.options.autoResendUnfulfilledCommands)for(l("resend %d unfulfilled commands",e.prevCommandQueue.length);e.prevCommandQueue.length>0;){let t=e.prevCommandQueue.shift();t.select!==e.condition.select&&"select"!==t.command.name&&e.select(t.select),e.sendCommand(t.command,t.stream)}else e.prevCommandQueue=null;if(e.offlineQueue.length){l("send %d commands in offline queue",e.offlineQueue.length);let t=e.offlineQueue;for(e.resetOfflineQueue();t.length>0;){let r=t.shift();r.select!==e.condition.select&&"select"!==r.command.name&&e.select(r.select),e.sendCommand(r.command,r.stream)}}e.condition.select!==t&&(l("connect to db [%d]",t),e.select(t))}}},98909,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_REDIS_OPTIONS=void 0,r.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(50*e,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(10*e,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}},972565,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(711906),i=e.r(427699),o=e.r(178167),a=e.r(250644),s=e.r(378445),l=e.r(945600),c=e.r(298898),u=e.r(817839),d=e.r(98909),p=e.r(975224),f=e.r(512286),h=e.r(40534),m=e.r(811073),g=e.r(251330),y=e.r(958934),v=e.r(67625),b=(0,h.Debug)("redis");class w extends g.default{constructor(e,t,r){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,t,r),i.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){const e=new c.default(this.options);e.emitter=this,this.connector=e}else this.connector=new l.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([e,t])=>{this.defineCommand(e,t)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(y.noop)}static createClient(...e){return new w(...e)}get autoPipelineQueueSize(){let e=0;for(let t of this._autoPipelines.values())e+=t.length;return e}connect(e){let t=new Promise((e,t)=>{if("connecting"===this.status||"connect"===this.status||"ready"===this.status)return void t(Error("Redis is already connecting/connected"));this.connectionEpoch+=1,this.setStatus("connecting");let{options:r}=this;this.condition={select:r.db,auth:r.username?[r.username,r.password]:r.password,subscriber:!1};let n=this;(0,o.default)(this.connector.connect(function(e,t){n.silentEmit(e,t)}),function(i,o){if(i){n.flushQueue(i),n.silentEmit("error",i),t(i),n.setStatus("end");return}let a=r.tls?"secureConnect":"connect";if("sentinels"in r&&r.sentinels&&!r.enableTLSForSentinelMode&&(a="connect"),n.stream=o,r.noDelay&&o.setNoDelay(!0),"number"==typeof r.keepAlive&&(o.connecting?o.once(a,()=>{o.setKeepAlive(!0,r.keepAlive)}):o.setKeepAlive(!0,r.keepAlive)),o.connecting){if(o.once(a,u.connectHandler(n)),r.connectTimeout){let e=!1;o.setTimeout(r.connectTimeout,function(){if(e)return;o.setTimeout(0),o.destroy();let t=Error("connect ETIMEDOUT");t.errorno="ETIMEDOUT",t.code="ETIMEDOUT",t.syscall="connect",u.errorHandler(n)(t)}),o.once(a,function(){e=!0,o.setTimeout(0)})}}else if(o.destroyed){let e=n.connector.firstError;e&&process.nextTick(()=>{u.errorHandler(n)(e)}),process.nextTick(u.closeHandler(n))}else process.nextTick(u.connectHandler(n));o.destroyed||(o.once("error",u.errorHandler(n)),o.once("close",u.closeHandler(n)));let s=function(){n.removeListener("close",l),e()};var l=function(){n.removeListener("ready",s),t(Error(h.CONNECTION_CLOSED_ERROR_MSG))};n.once("ready",s),n.once("close",l)})});return(0,o.default)(t,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),"wait"===this.status?u.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new w({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":(null==(e=this.condition)?void 0:e.subscriber)?"subscriber":"normal"}monitor(e){let t=this.duplicate({monitor:!0,lazyConnect:!1});return(0,o.default)(new Promise(function(e,r){t.once("error",r),t.once("monitoring",function(){e(t)})}),e)}sendCommand(e,t){var r,i;if("wait"===this.status&&this.connect().catch(y.noop),"end"===this.status)return e.reject(Error(h.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if((null==(r=this.condition)?void 0:r.subscriber)&&!s.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;"number"==typeof this.options.commandTimeout&&e.setTimeout(this.options.commandTimeout);let o="ready"===this.status||!t&&"connect"===this.status&&(0,n.exists)(e.name)&&((0,n.hasFlag)(e.name,"loading")||s.default.checkFlag("HANDSHAKE_COMMANDS",e.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(o=!1):o=!1,o)b.enabled&&b("write command[%s]: %d -> %s(%o)",this._getDescription(),null==(i=this.condition)?void 0:i.select,e.name,e.args),t?"isPipeline"in t&&t.isPipeline?t.write(e.toWritable(t.destination.redis.stream)):t.write(e.toWritable(t)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:t,select:this.condition.select}),s.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),void 0!==this.options.socketTimeout&&void 0===this.socketTimeoutTimer&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if("quit"===e.name&&0===this.offlineQueue.length)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;b.enabled&&b("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:t,select:this.condition.select})}if("select"===e.name&&(0,h.isInt)(e.args[0])){let t=parseInt(e.args[0],10);this.condition.select!==t&&(this.condition.select=t,this.emit("select",t),b("switch to db [%d]",this.condition.select))}return e.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,0!==this.commandQueue.length&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}silentEmit(e,t){let r;if("error"!==e||(r=t,"end"!==this.status&&(!this.manuallyClosing||!(r instanceof Error)||r.message!==h.CONNECTION_CLOSED_ERROR_MSG&&"connect"!==r.syscall&&"read"!==r.syscall)))return this.listeners(e).length>0?this.emit.apply(this,arguments):(r&&r instanceof Error&&console.error("[ioredis] Unhandled error event:",r.stack),!1)}recoverFromFatalError(e,t,r){this.flushQueue(t,r),this.silentEmit("error",t),this.disconnect(!0)}handleReconnection(e,t){var r;let n=!1;switch(this.options.reconnectOnError&&!s.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",t.command.name)&&(n=this.options.reconnectOnError(e)),n){case 1:case!0:"reconnecting"!==this.status&&this.disconnect(!0),t.command.reject(e);break;case 2:"reconnecting"!==this.status&&this.disconnect(!0),(null==(r=this.condition)?void 0:r.select)!==t.select&&"select"!==t.command.name&&this.select(t.select),this.sendCommand(t.command);break;default:t.command.reject(e)}}_getDescription(){let e;return e="path"in this.options&&this.options.path?this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?this.options.host+":"+this.options.port:"",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new v}resetOfflineQueue(){this.offlineQueue=new v}parseOptions(...e){let t={},r=!1;for(let n=0;n<e.length;++n){let i=e[n];if(null!=i)if("object"==typeof i)(0,y.defaults)(t,i);else if("string"==typeof i)(0,y.defaults)(t,(0,h.parseURL)(i)),i.startsWith("rediss://")&&(r=!0);else if("number"==typeof i)t.port=i;else throw Error("Invalid argument "+i)}r&&(0,y.defaults)(t,{tls:!0}),(0,y.defaults)(t,w.defaultOptions),"string"==typeof t.port&&(t.port=parseInt(t.port,10)),"string"==typeof t.db&&(t.db=parseInt(t.db,10)),this.options=(0,h.resolveTLSProfile)(t)}setStatus(e,t){b.enabled&&b("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,t))}createScanStream(e,{key:t,options:r={}}){return new p.default({objectMode:!0,key:t,redis:this,command:e,...r})}flushQueue(e,t){let r;if((t=(0,y.defaults)({},t,{offlineQueue:!0,commandQueue:!0})).offlineQueue)for(;r=this.offlineQueue.shift();)r.command.reject(e);if(t.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");r=this.commandQueue.shift();)r.command.reject(e)}_readyCheck(e){let t=this;this.info(function(r,n){if(r)return r.message&&r.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${r.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(r);if("string"!=typeof n)return e(null,n);let i={},o=n.split("\r\n");for(let e=0;e<o.length;++e){let[t,...r]=o[e].split(":"),n=r.join(":");n&&(i[t]=n)}if(i.loading&&"0"!==i.loading){let r=1e3*(i.loading_eta_seconds||1),n=t.options.maxLoadingRetryTime&&t.options.maxLoadingRetryTime<r?t.options.maxLoadingRetryTime:r;b("Redis server still loading, trying again in "+n+"ms"),setTimeout(function(){t._readyCheck(e)},n)}else e(null,i)}).catch(y.noop)}}w.Cluster=a.default,w.Command=s.default,w.defaultOptions=d.DEFAULT_REDIS_OPTIONS,(0,m.default)(w,i.EventEmitter),(0,f.addTransactionSupport)(w.prototype),r.default=w},778181,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.print=r.ReplyError=r.SentinelIterator=r.SentinelConnector=r.AbstractConnector=r.Pipeline=r.ScanStream=r.Command=r.Cluster=r.Redis=r.default=void 0,r=t.exports=e.r(972565).default;var n=e.r(972565);Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n.default}});var i=e.r(972565);Object.defineProperty(r,"Redis",{enumerable:!0,get:function(){return i.default}});var o=e.r(250644);Object.defineProperty(r,"Cluster",{enumerable:!0,get:function(){return o.default}});var a=e.r(378445);Object.defineProperty(r,"Command",{enumerable:!0,get:function(){return a.default}});var s=e.r(975224);Object.defineProperty(r,"ScanStream",{enumerable:!0,get:function(){return s.default}});var l=e.r(246624);Object.defineProperty(r,"Pipeline",{enumerable:!0,get:function(){return l.default}});var c=e.r(413918);Object.defineProperty(r,"AbstractConnector",{enumerable:!0,get:function(){return c.default}});var u=e.r(298898);Object.defineProperty(r,"SentinelConnector",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"SentinelIterator",{enumerable:!0,get:function(){return u.SentinelIterator}}),r.ReplyError=e.r(679102).ReplyError,Object.defineProperty(r,"Promise",{get:()=>(console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise),set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}}),r.print=function(e,t){e?console.log("Error: "+e):console.log("Reply: "+t)}},62395,e=>{"use strict";let t,r,n,i,o,a,s,l,c,u,d,p,f,h,m;async function g(){return"_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&await _ENTRIES.middleware_instrumentation}let y=null;async function v(){if("phase-production-build"===process.env.NEXT_PHASE)return;y||(y=g());let e=await y;if(null==e?void 0:e.register)try{await e.register()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}async function b(...e){let t=await g();try{var r;await (null==t||null==(r=t.onRequestError)?void 0:r.call(t,...e))}catch(e){console.error("Error in instrumentation.onRequestError:",e)}}let w=null;class _ extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class E extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class x extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}let S="_N_T_",k={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};function A(e){var t,r,n,i,o,a=[],s=0;function l(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,o=!1;l();)if(","===(r=e.charAt(s))){for(n=s,s+=1,l(),i=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(o=!0,s=i,a.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!o||s>=e.length)&&a.push(e.substring(t,e.length))}return a}function I(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...A(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function T(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}({...k,GROUP:{builtinReact:[k.reactServerComponents,k.actionBrowser],serverOnly:[k.reactServerComponents,k.actionBrowser,k.instrument,k.middleware],neutralTarget:[k.apiNode,k.apiEdge],clientOnly:[k.serverSideRendering,k.appPagesBrowser],bundled:[k.reactServerComponents,k.actionBrowser,k.serverSideRendering,k.appPagesBrowser,k.shared,k.instrument,k.middleware],appPages:[k.reactServerComponents,k.serverSideRendering,k.appPagesBrowser,k.actionBrowser]}});let O=Symbol("response"),R=Symbol("passThrough"),$=Symbol("waitUntil");class U{constructor(e,t){this[R]=!1,this[$]=t?{kind:"external",function:t}:{kind:"internal",promises:[]}}respondWith(e){this[O]||(this[O]=Promise.resolve(e))}passThroughOnException(){this[R]=!0}waitUntil(e){if("external"===this[$].kind)return(0,this[$].function)(e);this[$].promises.push(e)}}class C extends U{constructor(e){var t;super(e.request,null==(t=e.context)?void 0:t.waitUntil),this.sourcePage=e.page}get request(){throw Object.defineProperty(new _({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new _({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}function P(e){return e.replace(/\/$/,"")||"/"}function N(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function D(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=N(e);return`${t}${r}${n}${i}`}function L(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=N(e);return`${r}${t}${n}${i}`}function j(e,t){if("string"!=typeof e)return!1;let{pathname:r}=N(e);return r===t||r.startsWith(t+"/")}let z=new WeakMap;function M(e,t){let r;if(!t)return{pathname:e};let n=z.get(t);n||(n=t.map(e=>e.toLowerCase()),z.set(t,n));let i=e.split("/",2);if(!i[1])return{pathname:e};let o=i[1].toLowerCase(),a=n.indexOf(o);return a<0?{pathname:e}:(r=t[a],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}let B=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function Z(e,t){return new URL(String(e).replace(B,"localhost"),t&&String(t).replace(B,"localhost"))}let F=Symbol("NextURLInternal");class H{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[F]={url:Z(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,n,i;let o=function(e,t){let{basePath:r,i18n:n,trailingSlash:i}=t.nextConfig??{},o={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):i};r&&j(o.pathname,r)&&(o.pathname=function(e,t){if(!j(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}(o.pathname,r),o.basePath=r);let a=o.pathname;if(o.pathname.startsWith("/_next/data/")&&o.pathname.endsWith(".json")){let e=o.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");o.buildId=e[0],a="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(o.pathname=a)}if(n){let e=t.i18nProvider?t.i18nProvider.analyze(o.pathname):M(o.pathname,n.locales);o.locale=e.detectedLocale,o.pathname=e.pathname??o.pathname,!e.detectedLocale&&o.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(a):M(a,n.locales)).detectedLocale&&(o.locale=e.detectedLocale)}return o}(this[F].url.pathname,{nextConfig:this[F].options.nextConfig,parseData:!0,i18nProvider:this[F].options.i18nProvider}),a=function(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[F].url,this[F].options.headers);this[F].domainLocale=this[F].options.i18nProvider?this[F].options.i18nProvider.detectDomainLocale(a):function(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}(null==(t=this[F].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,a);let s=(null==(r=this[F].domainLocale)?void 0:r.defaultLocale)||(null==(i=this[F].options.nextConfig)||null==(n=i.i18n)?void 0:n.defaultLocale);this[F].url.pathname=o.pathname,this[F].defaultLocale=s,this[F].basePath=o.basePath??"",this[F].buildId=o.buildId,this[F].locale=o.locale??s,this[F].trailingSlash=o.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let i=e.toLowerCase();return!n&&(j(i,"/api")||j(i,`/${t.toLowerCase()}`))?e:D(e,`/${t}`)}((e={basePath:this[F].basePath,buildId:this[F].buildId,defaultLocale:this[F].options.forceLocale?void 0:this[F].defaultLocale,locale:this[F].locale,pathname:this[F].url.pathname,trailingSlash:this[F].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=P(t)),e.buildId&&(t=L(D(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=D(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:L(t,"/"):P(t)}formatSearch(){return this[F].url.search}get buildId(){return this[F].buildId}set buildId(e){this[F].buildId=e}get locale(){return this[F].locale??""}set locale(e){var t,r;if(!this[F].locale||!(null==(r=this[F].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[F].locale=e}get defaultLocale(){return this[F].defaultLocale}get domainLocale(){return this[F].domainLocale}get searchParams(){return this[F].url.searchParams}get host(){return this[F].url.host}set host(e){this[F].url.host=e}get hostname(){return this[F].url.hostname}set hostname(e){this[F].url.hostname=e}get port(){return this[F].url.port}set port(e){this[F].url.port=e}get protocol(){return this[F].url.protocol}set protocol(e){this[F].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[F].url=Z(e),this.analyze()}get origin(){return this[F].url.origin}get pathname(){return this[F].url.pathname}set pathname(e){this[F].url.pathname=e}get hash(){return this[F].url.hash}set hash(e){this[F].url.hash=e}get search(){return this[F].url.search}set search(e){this[F].url.search=e}get password(){return this[F].url.password}set password(e){this[F].url.password=e}get username(){return this[F].url.username}set username(e){this[F].url.username=e}get basePath(){return this[F].basePath}set basePath(e){this[F].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new H(String(this),this[F].options)}}var q,V,W,K,G,J,Y,Q,X,ee,et,er,en,ei,eo,ea,es,el,ec,eu=e.i(709254);let ed=Symbol("internal request");class ep extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);T(r),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(r,t);const n=new H(r,{headers:I(this.headers),nextConfig:t.nextConfig});this[ed]={cookies:new eu.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[ed].cookies}get nextUrl(){return this[ed].nextUrl}get page(){throw new E}get ua(){throw new x}get url(){return this[ed].url}}class ef{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}let eh=Symbol("internal response"),em=new Set([301,302,303,307,308]);function eg(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class ey extends Response{constructor(e,t={}){super(e,t);const r=this.headers,n=new Proxy(new eu.ResponseCookies(r),{get(e,n,i){switch(n){case"delete":case"set":return(...i)=>{let o=Reflect.apply(e[n],e,i),a=new Headers(r);return o instanceof eu.ResponseCookies&&r.set("x-middleware-set-cookie",o.getAll().map(e=>(0,eu.stringifyCookie)(e)).join(",")),eg(t,a),o};default:return ef.get(e,n,i)}}});this[eh]={cookies:n,url:t.url?new H(t.url,{headers:I(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[eh].cookies}static json(e,t){let r=Response.json(e,t);return new ey(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!em.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",T(e)),new ey(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",T(e)),eg(t,r),new ey(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),eg(e,t),new ey(null,{...e,headers:t})}}function ev(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),i=n.origin===r.origin;return{url:i?n.toString().slice(r.origin.length):n.toString(),isRelative:i}}let eb="next-router-prefetch",ew=["rsc","next-router-state-tree",eb,"next-hmr-refresh","next-router-segment-prefetch"],e_="_rsc";class eE extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new eE}}class ex extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return ef.get(t,r,n);let i=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==o)return ef.get(t,o,n)},set(t,r,n,i){if("symbol"==typeof r)return ef.set(t,r,n,i);let o=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===o);return ef.set(t,a??r,n,i)},has(t,r){if("symbol"==typeof r)return ef.has(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==i&&ef.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return ef.deleteProperty(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===i||ef.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return eE.callable;default:return ef.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new ex(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}var eS=e.i(556704);class ek extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new ek}}class eA{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return ek.callable;default:return ef.get(e,t,r)}}})}}let eI=Symbol.for("next.mutated.cookies");class eT{static wrap(e,t){let r=new eu.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],i=new Set,o=()=>{let e=eS.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=1),n=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of n){let r=new eu.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},a=new Proxy(r,{get(e,t,r){switch(t){case eI:return n;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),a}finally{o()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),a}finally{o()}};default:return ef.get(e,t,r)}}});return a}}function eO(e,t){if("action"!==e.phase)throw new ek}var eR=((q=eR||{}).handleRequest="BaseServer.handleRequest",q.run="BaseServer.run",q.pipe="BaseServer.pipe",q.getStaticHTML="BaseServer.getStaticHTML",q.render="BaseServer.render",q.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",q.renderToResponse="BaseServer.renderToResponse",q.renderToHTML="BaseServer.renderToHTML",q.renderError="BaseServer.renderError",q.renderErrorToResponse="BaseServer.renderErrorToResponse",q.renderErrorToHTML="BaseServer.renderErrorToHTML",q.render404="BaseServer.render404",q),e$=((V=e$||{}).loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",V.loadComponents="LoadComponents.loadComponents",V),eU=((W=eU||{}).getRequestHandler="NextServer.getRequestHandler",W.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",W.getServer="NextServer.getServer",W.getServerRequestHandler="NextServer.getServerRequestHandler",W.createServer="createServer.createServer",W),eC=((K=eC||{}).compression="NextNodeServer.compression",K.getBuildId="NextNodeServer.getBuildId",K.createComponentTree="NextNodeServer.createComponentTree",K.clientComponentLoading="NextNodeServer.clientComponentLoading",K.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",K.generateStaticRoutes="NextNodeServer.generateStaticRoutes",K.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",K.generatePublicRoutes="NextNodeServer.generatePublicRoutes",K.generateImageRoutes="NextNodeServer.generateImageRoutes.route",K.sendRenderResult="NextNodeServer.sendRenderResult",K.proxyRequest="NextNodeServer.proxyRequest",K.runApi="NextNodeServer.runApi",K.render="NextNodeServer.render",K.renderHTML="NextNodeServer.renderHTML",K.imageOptimizer="NextNodeServer.imageOptimizer",K.getPagePath="NextNodeServer.getPagePath",K.getRoutesManifest="NextNodeServer.getRoutesManifest",K.findPageComponents="NextNodeServer.findPageComponents",K.getFontManifest="NextNodeServer.getFontManifest",K.getServerComponentManifest="NextNodeServer.getServerComponentManifest",K.getRequestHandler="NextNodeServer.getRequestHandler",K.renderToHTML="NextNodeServer.renderToHTML",K.renderError="NextNodeServer.renderError",K.renderErrorToHTML="NextNodeServer.renderErrorToHTML",K.render404="NextNodeServer.render404",K.startResponse="NextNodeServer.startResponse",K.route="route",K.onProxyReq="onProxyReq",K.apiResolver="apiResolver",K.internalFetch="internalFetch",K),eP=((G=eP||{}).startServer="startServer.startServer",G),eN=((J=eN||{}).getServerSideProps="Render.getServerSideProps",J.getStaticProps="Render.getStaticProps",J.renderToString="Render.renderToString",J.renderDocument="Render.renderDocument",J.createBodyResult="Render.createBodyResult",J),eD=((Y=eD||{}).renderToString="AppRender.renderToString",Y.renderToReadableStream="AppRender.renderToReadableStream",Y.getBodyResult="AppRender.getBodyResult",Y.fetch="AppRender.fetch",Y),eL=((Q=eL||{}).executeRoute="Router.executeRoute",Q),ej=((X=ej||{}).runHandler="Node.runHandler",X),ez=((ee=ez||{}).runHandler="AppRouteRouteHandlers.runHandler",ee),eM=((et=eM||{}).generateMetadata="ResolveMetadata.generateMetadata",et.generateViewport="ResolveMetadata.generateViewport",et),eB=((er=eB||{}).execute="Middleware.execute",er);let eZ=new Set(["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"]),eF=new Set(["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]);function eH(e){return null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}let eq=process.env.NEXT_OTEL_PERFORMANCE_PREFIX;try{t=e.r(270406)}catch(r){t=e.r(331387)}let{context:eV,propagation:eW,trace:eK,SpanStatusCode:eG,SpanKind:eJ,ROOT_CONTEXT:eY}=t;class eQ extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}let eX=(e,t)=>{"object"==typeof t&&null!==t&&t instanceof eQ&&t.bubble?e.setAttribute("next.bubble",!0):(t&&(e.recordException(t),e.setAttribute("error.type",t.name)),e.setStatus({code:eG.ERROR,message:null==t?void 0:t.message})),e.end()},e0=new Map,e1=t.createContextKey("next.rootSpanId"),e4=0,e6={set(e,t,r){e.push({key:t,value:r})}},e2=(s=new class e{getTracerInstance(){return eK.getTracer("next.js","0.0.1")}getContext(){return eV}getTracePropagationData(){let e=eV.active(),t=[];return eW.inject(e,t,e6),t}getActiveScopeSpan(){return eK.getSpan(null==eV?void 0:eV.active())}withPropagatedContext(e,t,r){let n=eV.active();if(eK.getSpanContext(n))return t();let i=eW.extract(n,e,r);return eV.with(i,t)}trace(...e){let[t,r,n]=e,{fn:i,options:o}="function"==typeof r?{fn:r,options:{}}:{fn:n,options:{...r}},a=o.spanName??t;if(!eZ.has(t)&&"1"!==process.env.NEXT_OTEL_VERBOSE||o.hideSpan)return i();let s=this.getSpanContext((null==o?void 0:o.parentSpan)??this.getActiveScopeSpan());s||(s=(null==eV?void 0:eV.active())??eY);let l=s.getValue(e1),c="number"!=typeof l||!e0.has(l),u=e4++;return o.attributes={"next.span_name":a,"next.span_type":t,...o.attributes},eV.with(s.setValue(e1,u),()=>this.getTracerInstance().startActiveSpan(a,o,e=>{let r;eq&&t&&eF.has(t)&&(r="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0);let n=!1,a=()=>{!n&&(n=!0,e0.delete(u),r&&performance.measure(`${eq}:next-${(t.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:r,end:performance.now()}))};if(c&&e0.set(u,new Map(Object.entries(o.attributes??{}))),i.length>1)try{return i(e,t=>eX(e,t))}catch(t){throw eX(e,t),t}finally{a()}try{let t=i(e);if(eH(t))return t.then(t=>(e.end(),t)).catch(t=>{throw eX(e,t),t}).finally(a);return e.end(),a(),t}catch(t){throw eX(e,t),a(),t}}))}wrap(...e){let t=this,[r,n,i]=3===e.length?e:[e[0],{},e[1]];return eZ.has(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let o=arguments.length-1,a=arguments[o];if("function"!=typeof a)return t.trace(r,e,()=>i.apply(this,arguments));{let n=t.getContext().bind(eV.active(),a);return t.trace(r,e,(e,t)=>(arguments[o]=function(e){return null==t||t(e),n.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?eK.setSpan(eV.active(),e):void 0}getRootSpanAttributes(){let e=eV.active().getValue(e1);return e0.get(e)}setRootSpanAttribute(e,t){let r=eV.active().getValue(e1),n=e0.get(r);n&&!n.has(e)&&n.set(e,t)}withSpan(e,t){let r=eK.setSpan(eV.active(),e);return eV.with(r,t)}},()=>s),e3="__prerender_bypass";Symbol("__next_preview_data"),Symbol(e3);class e5{constructor(e,t,r,n){var i;const o=e&&function(e,t){let r=ex.from(e.headers);return{isOnDemandRevalidate:r.get("x-prerender-revalidate")===t.previewModeId,revalidateOnlyGenerated:r.has("x-prerender-revalidate-if-generated")}}(t,e).isOnDemandRevalidate,a=null==(i=r.get(e3))?void 0:i.value;this._isEnabled=!!(!o&&a&&e&&a===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}get isEnabled(){return this._isEnabled}enable(){if(!this._previewModeId)throw Object.defineProperty(Error("Invariant: previewProps missing previewModeId this should never happen"),"__NEXT_ERROR_CODE",{value:"E93",enumerable:!1,configurable:!0});this._mutableCookies.set({name:e3,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"}),this._isEnabled=!0}disable(){this._mutableCookies.set({name:e3,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)}),this._isEnabled=!1}}function e9(e,t){if("x-middleware-set-cookie"in e.headers&&"string"==typeof e.headers["x-middleware-set-cookie"]){let r=e.headers["x-middleware-set-cookie"],n=new Headers;for(let e of A(r))n.append("set-cookie",e);for(let e of new eu.ResponseCookies(n).getAll())t.set(e)}}var e8=e.i(832319),e7=e.i(447413);class te extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}e.i(951187),process.env.NEXT_PRIVATE_DEBUG_CACHE,Symbol.for("@next/cache-handlers");let tt=Symbol.for("@next/cache-handlers-map"),tr=Symbol.for("@next/cache-handlers-set"),tn=globalThis;function ti(){if(tn[tt])return tn[tt].entries()}async function to(e,t){if(!e)return t();let r=ta(e);try{return await t()}finally{var n,i;let t,o,a=(n=r,i=ta(e),t=new Set(n.pendingRevalidatedTags.map(e=>{let t="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return`${e.tag}:${t}`})),o=new Set(n.pendingRevalidateWrites),{pendingRevalidatedTags:i.pendingRevalidatedTags.filter(e=>{let r="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return!t.has(`${e.tag}:${r}`)}),pendingRevalidates:Object.fromEntries(Object.entries(i.pendingRevalidates).filter(([e])=>!(e in n.pendingRevalidates))),pendingRevalidateWrites:i.pendingRevalidateWrites.filter(e=>!o.has(e))});await tl(e,a)}}function ta(e){return{pendingRevalidatedTags:e.pendingRevalidatedTags?[...e.pendingRevalidatedTags]:[],pendingRevalidates:{...e.pendingRevalidates},pendingRevalidateWrites:e.pendingRevalidateWrites?[...e.pendingRevalidateWrites]:[]}}async function ts(e,t,r){if(0===e.length)return;let n=function(){if(tn[tr])return tn[tr].values()}(),i=[],o=new Map;for(let t of e){let e,r=t.profile;for(let[t]of o)if("string"==typeof t&&"string"==typeof r&&t===r||"object"==typeof t&&"object"==typeof r&&JSON.stringify(t)===JSON.stringify(r)||t===r){e=t;break}let n=e||r;o.has(n)||o.set(n,[]),o.get(n).push(t.tag)}for(let[e,s]of o){let o;if(e){let t;if("object"==typeof e)t=e;else if("string"==typeof e){var a;if(!(t=null==r||null==(a=r.cacheLifeProfiles)?void 0:a[e]))throw Object.defineProperty(Error(`Invalid profile provided "${e}" must be configured under cacheLife in next.config or be "max"`),"__NEXT_ERROR_CODE",{value:"E873",enumerable:!1,configurable:!0})}t&&(o={expire:t.expire})}for(let t of n||[])e?i.push(null==t.updateTags?void 0:t.updateTags.call(t,s,o)):i.push(null==t.updateTags?void 0:t.updateTags.call(t,s));t&&i.push(t.revalidateTag(s,o))}await Promise.all(i)}async function tl(e,t){let r=(null==t?void 0:t.pendingRevalidatedTags)??e.pendingRevalidatedTags??[],n=(null==t?void 0:t.pendingRevalidates)??e.pendingRevalidates??{},i=(null==t?void 0:t.pendingRevalidateWrites)??e.pendingRevalidateWrites??[];return Promise.all([ts(r,e.incrementalCache,e),...Object.values(n),...i])}let tc=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class tu{disable(){throw tc}getStore(){}run(){throw tc}exit(){throw tc}enterWith(){throw tc}static bind(e){return e}}let td="u">typeof globalThis&&globalThis.AsyncLocalStorage;var tp=e.i(324725);class tf{constructor({waitUntil:e,onClose:t,onTaskError:r}){this.workUnitStores=new Set,this.waitUntil=e,this.onClose=t,this.onTaskError=r,this.callbackQueue=new e7.default,this.callbackQueue.pause()}after(e){if(eH(e))this.waitUntil||th(),this.waitUntil(e.catch(e=>this.reportTaskError("promise",e)));else if("function"==typeof e)this.addCallback(e);else throw Object.defineProperty(Error("`after()`: Argument must be a promise or a function"),"__NEXT_ERROR_CODE",{value:"E50",enumerable:!1,configurable:!0})}addCallback(e){var t;this.waitUntil||th();let r=e8.workUnitAsyncStorage.getStore();r&&this.workUnitStores.add(r);let n=tp.afterTaskAsyncStorage.getStore(),i=n?n.rootTaskSpawnPhase:null==r?void 0:r.phase;this.runCallbacksOnClosePromise||(this.runCallbacksOnClosePromise=this.runCallbacksOnClose(),this.waitUntil(this.runCallbacksOnClosePromise));let o=(t=async()=>{try{await tp.afterTaskAsyncStorage.run({rootTaskSpawnPhase:i},()=>e())}catch(e){this.reportTaskError("function",e)}},td?td.bind(t):tu.bind(t));this.callbackQueue.add(o)}async runCallbacksOnClose(){return await new Promise(e=>this.onClose(e)),this.runCallbacks()}async runCallbacks(){if(0===this.callbackQueue.size)return;for(let e of this.workUnitStores)e.phase="after";let e=eS.workAsyncStorage.getStore();if(!e)throw Object.defineProperty(new te("Missing workStore in AfterContext.runCallbacks"),"__NEXT_ERROR_CODE",{value:"E547",enumerable:!1,configurable:!0});return to(e,()=>(this.callbackQueue.start(),this.callbackQueue.onIdle()))}reportTaskError(e,t){if(console.error("promise"===e?"A promise passed to `after()` rejected:":"An error occurred in a function passed to `after()`:",t),this.onTaskError)try{null==this.onTaskError||this.onTaskError.call(this,t)}catch(e){console.error(Object.defineProperty(new te("`onTaskError` threw while handling an error thrown from an `after` task",{cause:e}),"__NEXT_ERROR_CODE",{value:"E569",enumerable:!1,configurable:!0}))}}}function th(){throw Object.defineProperty(Error("`after()` will not work correctly, because `waitUntil` is not available in the current environment."),"__NEXT_ERROR_CODE",{value:"E91",enumerable:!1,configurable:!0})}function tm(e){let t,r={then:(n,i)=>(t||(t=Promise.resolve(e())),t.then(e=>{r.value=e}).catch(()=>{}),t.then(n,i))};return r}class tg{onClose(e){if(this.isClosed)throw Object.defineProperty(Error("Cannot subscribe to a closed CloseController"),"__NEXT_ERROR_CODE",{value:"E365",enumerable:!1,configurable:!0});this.target.addEventListener("close",e),this.listeners++}dispatchClose(){if(this.isClosed)throw Object.defineProperty(Error("Cannot close a CloseController multiple times"),"__NEXT_ERROR_CODE",{value:"E229",enumerable:!1,configurable:!0});this.listeners>0&&this.target.dispatchEvent(new Event("close")),this.isClosed=!0}constructor(){this.target=new EventTarget,this.listeners=0,this.isClosed=!1}}function ty(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID||"",previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}let tv=Symbol.for("@next/request-context");async function tb(e,t,r){let n=new Set;for(let t of(e=>{let t=["/layout"];if(e.startsWith("/")){let r=e.split("/");for(let e=1;e<r.length+1;e++){let n=r.slice(0,e).join("/");n&&(n.endsWith("/page")||n.endsWith("/route")||(n=`${n}${!n.endsWith("/")?"/":""}layout`),t.push(n))}}return t})(e))t=`${S}${t}`,n.add(t);if(t.pathname&&(!r||0===r.size)){let e=`${S}${t.pathname}`;n.add(e)}n.has(`${S}/`)&&n.add(`${S}/index`),n.has(`${S}/index`)&&n.add(`${S}/`);let i=Array.from(n);return{tags:i,expirationsByCacheKind:function(e){let t=new Map,r=ti();if(r)for(let[n,i]of r)"getExpiration"in i&&t.set(n,tm(async()=>i.getExpiration(e)));return t}(i)}}class tw extends ep{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw Object.defineProperty(new _({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new _({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}waitUntil(){throw Object.defineProperty(new _({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}let t_={keys:e=>Array.from(e.keys()),get:(e,t)=>e.get(t)??void 0},tE=(e,t)=>e2().withPropagatedContext(e.headers,t,t_),tx=!1;async function tS(t){var r,n,i,o;let a,s,l,c,u;!function(){if(!tx&&(tx=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:t,wrapRequestHandler:r}=e.r(376532);t(),tE=r(tE)}}(),await (!w&&(w=v()),w);let d=void 0!==globalThis.__BUILD_MANIFEST;t.request.url=t.request.url.replace(/\.rsc($|\?)/,"$1");let p=t.bypassNextUrl?new URL(t.request.url):new H(t.request.url,{headers:t.request.headers,nextConfig:t.request.nextConfig});for(let e of[...p.searchParams.keys()]){let t=p.searchParams.getAll(e),r=function(e){for(let t of["nxtP","nxtI"])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}(e);if(r){for(let e of(p.searchParams.delete(r),t))p.searchParams.append(r,e);p.searchParams.delete(e)}}let f=process.env.__NEXT_BUILD_ID||"";"buildId"in p&&(f=p.buildId||"",p.buildId="");let h=function(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}(t.request.headers),m=h.has("x-nextjs-data"),g="1"===h.get("rsc");m&&"/index"===p.pathname&&(p.pathname="/");let y=new Map;if(!d)for(let e of ew){let t=h.get(e);null!==t&&(y.set(e,t),h.delete(e))}let b=p.searchParams.get(e_),_=new tw({page:t.page,input:((c=(l="string"==typeof p)?new URL(p):p).searchParams.delete(e_),l?c.toString():c).toString(),init:{body:t.request.body,headers:h,method:t.request.method,nextConfig:t.request.nextConfig,signal:t.request.signal}});m&&Object.defineProperty(_,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCacheShared&&t.IncrementalCache&&(globalThis.__incrementalCache=new t.IncrementalCache({CurCacheHandler:t.incrementalCacheHandler,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:t.request.headers,getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:ty()})}));let E=t.request.waitUntil??(null==(r=null==(u=globalThis[tv])?void 0:u.get())?void 0:r.waitUntil),x=new C({request:_,page:t.page,context:E?{waitUntil:E}:void 0});if((a=await tE(_,()=>{if("/middleware"===t.page||"/src/middleware"===t.page||"/proxy"===t.page||"/src/proxy"===t.page){let e=x.waitUntil.bind(x),r=new tg;return e2().trace(eB.execute,{spanName:`middleware ${_.method}`,attributes:{"http.target":_.nextUrl.pathname,"http.method":_.method}},async()=>{try{var n,i,o,a,l,c;let u=ty(),d=await tb("/",_.nextUrl,null),p=(l=_.nextUrl,c=e=>{s=e},function(e,t,r,n,i,o,a,s,l,c,u,d){function p(e){r&&r.setHeader("Set-Cookie",e)}let f={};return{type:"request",phase:e,implicitTags:o,url:{pathname:n.pathname,search:n.search??""},rootParams:i,get headers(){return f.headers||(f.headers=function(e){let t=ex.from(e);for(let e of ew)t.delete(e);return ex.seal(t)}(t.headers)),f.headers},get cookies(){if(!f.cookies){let e=new eu.RequestCookies(ex.from(t.headers));e9(t,e),f.cookies=eA.seal(e)}return f.cookies},set cookies(value){f.cookies=value},get mutableCookies(){if(!f.mutableCookies){var h,m;let e,n=(h=t.headers,m=a||(r?p:void 0),e=new eu.RequestCookies(ex.from(h)),eT.wrap(e,m));e9(t,n),f.mutableCookies=n}return f.mutableCookies},get userspaceMutableCookies(){if(!f.userspaceMutableCookies){var g;let e;g=this,f.userspaceMutableCookies=e=new Proxy(g.mutableCookies,{get(t,r,n){switch(r){case"delete":return function(...r){return eO(g,"cookies().delete"),t.delete(...r),e};case"set":return function(...r){return eO(g,"cookies().set"),t.set(...r),e};default:return ef.get(t,r,n)}}})}return f.userspaceMutableCookies},get draftMode(){return f.draftMode||(f.draftMode=new e5(l,t,this.cookies,this.mutableCookies)),f.draftMode},renderResumeDataCache:null,isHmrRefresh:c,serverComponentsHmrCache:u||globalThis.__serverComponentsHmrCache,devFallbackParams:null}}("action",_,void 0,l,{},d,c,null,u,!1,void 0,null)),h=function({page:e,renderOpts:t,isPrefetchRequest:r,buildId:n,previouslyRevalidatedTags:i,nonce:o}){var a;let s=!t.shouldWaitOnAllReady&&!t.supportsDynamicResponse&&!t.isDraftMode&&!t.isPossibleServerAction,l=t.dev??!1,c=l||s&&(!!process.env.NEXT_DEBUG_BUILD||"1"===process.env.NEXT_SSG_FETCH_METRICS),u={isStaticGeneration:s,page:e,route:(a=e.split("/").reduce((e,t,r,n)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:`${e}/${t}`:e,"")).startsWith("/")?a:`/${a}`,incrementalCache:t.incrementalCache||globalThis.__incrementalCache,cacheLifeProfiles:t.cacheLifeProfiles,isBuildTimePrerendering:t.nextExport,hasReadableErrorStacks:t.hasReadableErrorStacks,fetchCache:t.fetchCache,isOnDemandRevalidate:t.isOnDemandRevalidate,isDraftMode:t.isDraftMode,isPrefetchRequest:r,buildId:n,reactLoadableManifest:(null==t?void 0:t.reactLoadableManifest)||{},assetPrefix:(null==t?void 0:t.assetPrefix)||"",nonce:o,afterContext:function(e){let{waitUntil:t,onClose:r,onAfterTaskError:n}=e;return new tf({waitUntil:t,onClose:r,onTaskError:n})}(t),cacheComponentsEnabled:t.cacheComponents,dev:l,previouslyRevalidatedTags:i,refreshTagsByCacheKind:function(){let e=new Map,t=ti();if(t)for(let[r,n]of t)"refreshTags"in n&&e.set(r,tm(async()=>n.refreshTags()));return e}(),runInCleanSnapshot:td?td.snapshot():function(e,...t){return e(...t)},shouldTrackFetchMetrics:c,reactServerErrorsByDigest:new Map};return t.store=u,u}({page:"/",renderOpts:{cacheLifeProfiles:null==(i=t.request.nextConfig)||null==(n=i.experimental)?void 0:n.cacheLife,cacheComponents:!1,experimental:{isRoutePPREnabled:!1,authInterrupts:!!(null==(a=t.request.nextConfig)||null==(o=a.experimental)?void 0:o.authInterrupts)},supportsDynamicResponse:!0,waitUntil:e,onClose:r.onClose.bind(r),onAfterTaskError:void 0},isPrefetchRequest:"1"===_.headers.get(eb),buildId:f??"",previouslyRevalidatedTags:[]});return await eS.workAsyncStorage.run(h,()=>e8.workUnitAsyncStorage.run(p,t.handler,_,x))}finally{setTimeout(()=>{r.dispatchClose()},0)}})}return t.handler(_,x)}))&&!(a instanceof Response))throw Object.defineProperty(TypeError("Expected an instance of Response to be returned"),"__NEXT_ERROR_CODE",{value:"E567",enumerable:!1,configurable:!0});a&&s&&a.headers.set("set-cookie",s);let S=null==a?void 0:a.headers.get("x-middleware-rewrite");if(a&&S&&(g||!d)){let e=new H(S,{forceLocale:!0,headers:t.request.headers,nextConfig:t.request.nextConfig});d||e.host!==_.nextUrl.host||(e.buildId=f||e.buildId,a.headers.set("x-middleware-rewrite",String(e)));let{url:r,isRelative:s}=ev(e.toString(),p.toString());!d&&m&&a.headers.set("x-nextjs-rewrite",r);let l=!s&&(null==(o=t.request.nextConfig)||null==(i=o.experimental)||null==(n=i.clientParamParsingOrigins)?void 0:n.some(t=>new RegExp(t).test(e.origin)));g&&(s||l)&&(p.pathname!==e.pathname&&a.headers.set("x-nextjs-rewritten-path",e.pathname),p.search!==e.search&&a.headers.set("x-nextjs-rewritten-query",e.search.slice(1)))}if(a&&S&&g&&b){let e=new URL(S);e.searchParams.has(e_)||(e.searchParams.set(e_,b),a.headers.set("x-middleware-rewrite",e.toString()))}let k=null==a?void 0:a.headers.get("Location");if(a&&k&&!d){let e=new H(k,{forceLocale:!1,headers:t.request.headers,nextConfig:t.request.nextConfig});a=new Response(a.body,a),e.host===p.host&&(e.buildId=f||e.buildId,a.headers.set("Location",ev(e,p).url)),m&&(a.headers.delete("Location"),a.headers.set("x-nextjs-redirect",ev(e.toString(),p.toString()).url))}let A=a||ey.next(),I=A.headers.get("x-middleware-override-headers"),T=[];if(I){for(let[e,t]of y)A.headers.set(`x-middleware-request-${e}`,t),T.push(e);T.length>0&&A.headers.set("x-middleware-override-headers",I+","+T.join(","))}return{response:A,waitUntil:("internal"===x[$].kind?Promise.all(x[$].promises).then(()=>{}):void 0)??Promise.resolve(),fetchMetrics:_.fetchMetrics}}var tk=e.i(955207);let tA=new(e.i(778181)).default({host:process.env.REDIS_HOST||"127.0.0.1",port:parseInt(process.env.REDIS_PORT||"6379"),maxRetriesPerRequest:null,enableReadyCheck:!1});tA.on("error",e=>{});let tI=import("node:async_hooks").then(e=>e.AsyncLocalStorage).catch(e=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),e});async function tT(){let e=await tI;if(null!==e)return e;throw Error("getAsyncLocalStorage is only available in server code")}let tO=null,tR=async()=>(tO||(tO=new(await tT())),tO);async function t$(){let e=(await tR()).getStore();if(!e)throw Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return e}async function tU(e,t){return(await tR()).run(e,t)}let tC=null,tP=async()=>(tC||(tC=new(await tT())),tC);async function tN(){return void 0!==(await tP()).getStore()}async function tD(){let e=(await tP()).getStore();if(!e)throw Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return e}async function tL(e,t){return(await tP()).run(e,t)}let tj=null,tz=async()=>(tj||(tj=new(await tT())),tj),tM=async e=>tz().then(t=>t.getStore()||e).catch(()=>e),tB=async(e,t)=>tz().then(r=>r.run(e,t)).catch(e=>{throw e}),tZ=async(e,t)=>tz().then(r=>e.transaction(async e=>r.run(e,t))).catch(e=>{throw e}),{get:tF,set:tH}=(en=()=>null,l=Object.freeze({}),{get ref(){return l},async get(){let e=await tD();if(!e.has(l)){let t=await en();return e.set(l,t),t}return e.get(l)},async set(e){(await tD()).set(l,e)}});var tq=e.i(856685);let tV=(0,tq.createRandomStringGenerator)("a-z","0-9","A-Z","-_");function tW(e,t=""){if(!Number.isSafeInteger(e)||e<0){let r=t&&`"${t}" `;throw Error(`${r}expected integer >= 0, got ${e}`)}}function tK(e,t,r=""){let n=e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name,i=e?.length,o=void 0!==t;if(!n||o&&i!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(o?` of length ${t}`:"")+", got "+(n?`length=${i}`:`type=${typeof e}`));return e}function tG(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash must wrapped by utils.createHasher");tW(e.outputLen),tW(e.blockLen)}function tJ(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function tY(e,t){tK(e,void 0,"digestInto() output");let r=t.outputLen;if(e.length<r)throw Error('"digestInto() output" expected to be of length >='+r)}function tQ(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function tX(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function t0(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function t1(e,t){return e<<32-t|e>>>t}function t4(e,t){return e<<t|e>>>32-t>>>0}let t6=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?e=>e:function(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255}return e},t2="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex;function t3(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}let t5=async()=>{};async function t9(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let e=Date.now()-n;e>=0&&e<t||(await t5(),n+=e)}}function t8(e,t=""){if("string"==typeof e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}return tK(e,void 0,t)}function t7(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("options must be object or undefined");return Object.assign(e,t)}class re{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,t){if(tG(e),tK(t,void 0,"key"),this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,n=new Uint8Array(r);n.set(t.length>r?e.create().update(t).digest():t);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),tX(n)}update(e){return tJ(this),this.iHash.update(e),this}digestInto(e){tJ(this),tK(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:a}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let rt=(e,t,r)=>new re(e,t).update(r).digest();rt.create=(e,t)=>new re(e,t);let rr=Uint8Array.of(0),rn=Uint8Array.of(),ri=(e,t,r,n,i)=>{var o;return function(e,t,r,n=32){tG(e),tW(n,"length");let i=e.outputLen;if(n>255*i)throw Error("Length must be <= 255*HashLen");let o=Math.ceil(n/i);void 0===r?r=rn:tK(r,void 0,"info");let a=new Uint8Array(o*i),s=rt.create(e,t),l=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let e=0;e<o;e++)rr[0]=e+1,l.update(0===e?rn:c).update(r).update(rr).digestInto(c),a.set(c,i*e),s._cloneInto(l);return s.destroy(),l.destroy(),tX(c,rr),a.slice(0,n)}(e,(o=r,tG(e),void 0===o&&(o=new Uint8Array(e.outputLen)),rt(e,o,t)),n,i)};class ro{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,t,r,n){this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=t0(this.buffer)}update(e){tJ(this),tK(e);let{view:t,buffer:r,blockLen:n}=this,i=e.length;for(let o=0;o<i;){let a=Math.min(n-this.pos,i-o);if(a===n){let t=t0(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tJ(this),tY(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,tX(this.buffer.subarray(o)),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;r.setBigUint64(n-8,BigInt(8*this.length),i),this.process(r,0);let a=t0(e),s=this.outputLen;if(s%4)throw Error("_sha2: outputLen must be aligned to 32bit");let l=s/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)a.setUint32(4*e,c[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){(e||=new this.constructor).set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=n,e.pos=a,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let ra=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),rs=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),rl=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),rc=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),ru=BigInt(0x100000000-1),rd=BigInt(32);function rp(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let o=0;o<r;o++){let{h:r,l:a}=function(e,t=!1){return t?{h:Number(e&ru),l:Number(e>>rd&ru)}:{h:0|Number(e>>rd&ru),l:0|Number(e&ru)}}(e[o],t);[n[o],i[o]]=[r,a]}return[n,i]}let rf=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),rh=new Uint32Array(64);class rm extends ro{constructor(e){super(64,e,8,!1)}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:a,H:s}=this;return[e,t,r,n,i,o,a,s]}set(e,t,r,n,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)rh[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=rh[e-15],r=rh[e-2],n=t1(t,7)^t1(t,18)^t>>>3,i=t1(r,17)^t1(r,19)^r>>>10;rh[e]=i+rh[e-7]+n+rh[e-16]|0}let{A:r,B:n,C:i,D:o,E:a,F:s,G:l,H:c}=this;for(let e=0;e<64;e++){var u,d,p,f;let t=c+(t1(a,6)^t1(a,11)^t1(a,25))+((u=a)&s^~u&l)+rf[e]+rh[e]|0,h=(t1(r,2)^t1(r,13)^t1(r,22))+((d=r)&(p=n)^d&(f=i)^p&f)|0;c=l,l=s,s=a,a=o+t|0,o=i,i=n,n=r,r=t+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,s=s+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,n,i,o,a,s,l,c)}roundClean(){tX(rh)}destroy(){this.set(0,0,0,0,0,0,0,0),tX(this.buffer)}}class rg extends rm{A=0|ra[0];B=0|ra[1];C=0|ra[2];D=0|ra[3];E=0|ra[4];F=0|ra[5];G=0|ra[6];H=0|ra[7];constructor(){super(32)}}let ry=rp(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),rv=ry[0],rb=ry[1],rw=new Uint32Array(80),r_=new Uint32Array(80),rE=function(e,t={}){let r=(t,r)=>e(r).update(t).digest(),n=e(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=t=>e(t),Object.assign(r,t),Object.freeze(r)}(()=>new rg,{oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,1])}),rx=new TextEncoder,rS=new TextDecoder;function rk(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function rA(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function rI(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return rA(r,t,0),rA(r,e%0x100000000,4),r}function rT(e){let t=new Uint8Array(4);return rA(t,e),t}function rO(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n>127)throw TypeError("non-ASCII string encountered in encode()");t[r]=n}return t}function rR(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:rS.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=rS.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/");try{var r=t;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);let e=atob(r),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function r$(e){let t=e;return("string"==typeof t&&(t=rx.encode(t)),Uint8Array.prototype.toBase64)?t.toBase64({alphabet:"base64url",omitPadding:!0}):(function(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=[];for(let r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}e.s(["decode",()=>rR,"encode",()=>r$],886769);let rU=Symbol();class rC extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class rP extends rC{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class rN extends rC{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class rD extends rC{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class rL extends rC{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class rj extends rC{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",t){super(e,t)}}class rz extends rC{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class rM extends rC{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class rB extends rC{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class rZ extends rC{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class rF extends rC{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class rH extends rC{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t)}}class rq extends rC{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}class rV extends rC{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",t){super(e,t)}}class rW extends rC{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}function rK(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new rL(`Unsupported JWE Algorithm: ${e}`)}}function rG(e,t){if(t.length<<3!==rK(e))throw new rz("Invalid Initialization Vector length")}function rJ(e,t){let r=e.byteLength<<3;if(r!==t)throw new rz(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)}let rY=(e,t="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`);function rQ(e){return parseInt(e.name.slice(4),10)}function rX(e,t){if(t&&!e.usages.includes(t))throw TypeError(`CryptoKey does not support this operation, its usages must include ${t}.`)}function r0(e,t,r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if("AES-GCM"!==e.algorithm.name)throw rY("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw rY(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if("AES-KW"!==e.algorithm.name)throw rY("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw rY(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":break;default:throw rY("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if("PBKDF2"!==e.algorithm.name)throw rY("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if("RSA-OAEP"!==e.algorithm.name)throw rY("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(rQ(e.algorithm.hash)!==r)throw rY(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}rX(e,r)}function r1(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let r4=(e,...t)=>r1("Key must be ",e,...t),r6=(e,t,...r)=>r1(`Key for the ${e} algorithm must be `,t,...r);function r2(e){if(!r3(e))throw Error("CryptoKey instance expected")}let r3=e=>{if(e?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return e instanceof CryptoKey}catch{return!1}},r5=e=>e?.[Symbol.toStringTag]==="KeyObject",r9=e=>r3(e)||r5(e);async function r8(e,t,r,n,i){if(!(r instanceof Uint8Array))throw TypeError(r4(r,"Uint8Array"));let o=parseInt(e.slice(1,4),10),a=await crypto.subtle.importKey("raw",r.subarray(o>>3),"AES-CBC",!1,["encrypt"]),s=await crypto.subtle.importKey("raw",r.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),l=new Uint8Array(await crypto.subtle.encrypt({iv:n,name:"AES-CBC"},a,t)),c=rk(i,n,l,rI(i.length<<3));return{ciphertext:l,tag:new Uint8Array((await crypto.subtle.sign("HMAC",s,c)).slice(0,o>>3)),iv:n}}async function r7(e,t,r,n,i){let o;r instanceof Uint8Array?o=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(r0(r,e,"encrypt"),o=r);let a=new Uint8Array(await crypto.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},o,t)),s=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:s,iv:n}}async function ne(e,t,r,n,i){if(!r3(r)&&!(r instanceof Uint8Array))throw TypeError(r4(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(n)rG(e,n);else n=crypto.getRandomValues(new Uint8Array(rK(e)>>3));switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&rJ(r,parseInt(e.slice(-3),10)),r8(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&rJ(r,parseInt(e.slice(1,4),10)),r7(e,t,r,n,i);default:throw new rL("Unsupported JWE Content Encryption Algorithm")}}function nt(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function nr(e,t,r){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"AES-KW",!0,[r]):(r0(e,t,r),e)}async function nn(e,t,r){let n=await nr(t,e,"wrapKey");nt(n,e);let i=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",i,n,"AES-KW"))}async function ni(e,t,r){let n=await nr(t,e,"unwrapKey");nt(n,e);let i=await crypto.subtle.unwrapKey("raw",r,n,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",i))}async function no(e,t){let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,t))}function na(e){return rk(rT(e.length),e)}async function ns(e,t,r){let n=t>>3,i=Math.ceil(n/32),o=new Uint8Array(32*i);for(let t=1;t<=i;t++){let n=new Uint8Array(4+e.length+r.length);n.set(rT(t),0),n.set(e,4),n.set(r,4+e.length);let i=await no("sha256",n);o.set(i,(t-1)*32)}return o.slice(0,n)}async function nl(e,t,r,n,i=new Uint8Array,o=new Uint8Array){var a;r0(e,"ECDH"),r0(t,"ECDH","deriveBits");let s=rk(na(rO(r)),na(i),na(o),rT(n),new Uint8Array);return ns(new Uint8Array(await crypto.subtle.deriveBits({name:e.algorithm.name,public:e},t,"X25519"===(a=e).algorithm.name?256:Math.ceil(parseInt(a.algorithm.namedCurve.slice(-3),10)/8)<<3)),n,s)}function nc(e){switch(e.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===e.algorithm.name}}async function nu(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new rz("PBES2 Salt Input must be 8 or more octets");let i=rk(rO(t),Uint8Array.of(0),e),o=parseInt(t.slice(13,16),10),a={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},s=await (n instanceof Uint8Array?crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]):(r0(n,t,"deriveBits"),n));return new Uint8Array(await crypto.subtle.deriveBits(a,s,o))}async function nd(e,t,r,n=2048,i=crypto.getRandomValues(new Uint8Array(16))){let o=await nu(i,e,n,t);return{encryptedKey:await nn(e.slice(-6),o,r),p2c:n,p2s:r$(i)}}async function np(e,t,r,n,i){let o=await nu(i,e,n,t);return ni(e.slice(-6),o,r)}function nf(e,t){if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}}let nh=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new rL(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};async function nm(e,t,r){return r0(t,e,"encrypt"),nf(e,t),new Uint8Array(await crypto.subtle.encrypt(nh(e),t,r))}async function ng(e,t,r){return r0(t,e,"decrypt"),nf(e,t),new Uint8Array(await crypto.subtle.decrypt(nh(e),t,r))}function ny(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}let nv=e=>ny(e)&&"string"==typeof e.kty;async function nb(e){if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"AKP":switch(e.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":t={name:e.alg},r=e.priv?["sign"]:["verify"];break;default:throw new rL('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new rL('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new rL('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new rL('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new rL('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n={...e};return"AKP"!==n.kty&&delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??(!e.d&&!e.priv),e.key_ops??r)}let nw=async(e,t,n,i=!1)=>{let o=(r||=new WeakMap).get(e);if(o?.[n])return o[n];let a=await nb({...t,alg:n});return i&&Object.freeze(e),o?o[n]=a:r.set(e,{[n]:a}),a};async function n_(e,t){if(e instanceof Uint8Array||r3(e))return e;if(r5(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return((e,t)=>{let n,i=(r||=new WeakMap).get(e);if(i?.[t])return i[t];let o="public"===e.type,a=!!o;if("x25519"===e.asymmetricKeyType){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}n=e.toCryptoKey(e.asymmetricKeyType,a,o?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==t&&"Ed25519"!==t)throw TypeError("given KeyObject instance cannot be used for this algorithm");n=e.toCryptoKey(e.asymmetricKeyType,a,[o?"verify":"sign"])}switch(e.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(t!==e.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");n=e.toCryptoKey(e.asymmetricKeyType,a,[o?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let r;switch(t){case"RSA-OAEP":r="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":r="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":r="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":r="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:r},a,o?["encrypt"]:["decrypt"]);n=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:r},a,[o?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let r=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!r)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===t&&"P-256"===r&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:r},a,[o?"verify":"sign"])),"ES384"===t&&"P-384"===r&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:r},a,[o?"verify":"sign"])),"ES512"===t&&"P-521"===r&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:r},a,[o?"verify":"sign"])),t.startsWith("ECDH-ES")&&(n=e.toCryptoKey({name:"ECDH",namedCurve:r},a,o?[]:["deriveBits"]))}if(!n)throw TypeError("given KeyObject instance cannot be used for this algorithm");return i?i[t]=n:r.set(e,{[t]:n}),n})(e,t)}catch(e){if(e instanceof TypeError)throw e}let n=e.export({format:"jwk"});return nw(e,n,t)}if(nv(e))return e.k?rR(e.k):nw(e,e,t,!0);throw Error("unreachable")}function nE(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new rL(`Unsupported JWE Algorithm: ${e}`)}}let nx=e=>crypto.getRandomValues(new Uint8Array(nE(e)>>3));async function nS(e){if(r5(e))if("secret"!==e.type)return e.export({format:"jwk"});else e=e.export();if(e instanceof Uint8Array)return{kty:"oct",k:r$(e)};if(!r3(e))throw TypeError(r4(e,"CryptoKey","KeyObject","Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...o}=await crypto.subtle.exportKey("jwk",e);return"AKP"===o.kty&&(o.alg=n),o}async function nk(e){return nS(e)}async function nA(e,t){if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},n=await crypto.subtle.generateKey(r,!1,["sign"]),i=new Uint8Array(await crypto.subtle.sign(r,n,e)),o=new Uint8Array(await crypto.subtle.sign(r,n,t)),a=0,s=-1;for(;++s<32;)a|=i[s]^o[s];return 0===a}async function nI(e,t,r,n,i,o){let a,s;if(!(t instanceof Uint8Array))throw TypeError(r4(t,"Uint8Array"));let l=parseInt(e.slice(1,4),10),c=await crypto.subtle.importKey("raw",t.subarray(l>>3),"AES-CBC",!1,["decrypt"]),u=await crypto.subtle.importKey("raw",t.subarray(0,l>>3),{hash:`SHA-${l<<1}`,name:"HMAC"},!1,["sign"]),d=rk(o,n,r,rI(o.length<<3)),p=new Uint8Array((await crypto.subtle.sign("HMAC",u,d)).slice(0,l>>3));try{a=await nA(i,p)}catch{}if(!a)throw new rj;try{s=new Uint8Array(await crypto.subtle.decrypt({iv:n,name:"AES-CBC"},c,r))}catch{}if(!s)throw new rj;return s}async function nT(e,t,r,n,i,o){let a;t instanceof Uint8Array?a=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(r0(t,e,"decrypt"),a=t);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:o,iv:n,name:"AES-GCM",tagLength:128},a,rk(r,i)))}catch{throw new rj}}async function nO(e,t,r,n,i,o){if(!r3(t)&&!(t instanceof Uint8Array))throw TypeError(r4(t,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!n)throw new rz("JWE Initialization Vector missing");if(!i)throw new rz("JWE Authentication Tag missing");switch(rG(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&rJ(t,parseInt(e.slice(-3),10)),nI(e,t,r,n,i,o);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&rJ(t,parseInt(e.slice(1,4),10)),nT(e,t,r,n,i,o);default:throw new rL("Unsupported JWE Content Encryption Algorithm")}}async function nR(e,t,r,n){let i=e.slice(0,7),o=await ne(i,r,t,n,new Uint8Array);return{encryptedKey:o.ciphertext,iv:r$(o.iv),tag:r$(o.tag)}}async function n$(e,t,r,n,i){return nO(e.slice(0,7),t,r,n,i,new Uint8Array)}async function nU(e,t,r,n,i={}){let o,a,s;switch(e){case"dir":s=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let l;if(r2(r),!nc(r))throw new rL("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:u}=i;l=i.epk?await n_(i.epk,e):(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:d,y:p,crv:f,kty:h}=await nk(l),m=await nl(r,l,"ECDH-ES"===e?t:e,"ECDH-ES"===e?nE(t):parseInt(e.slice(-5,-2),10),c,u);if(a={epk:{x:d,crv:f,kty:h}},"EC"===h&&(a.epk.y=p),c&&(a.apu=r$(c)),u&&(a.apv=r$(u)),"ECDH-ES"===e){s=m;break}s=n||nx(t);let g=e.slice(-6);o=await nn(g,m,s);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=n||nx(t),r2(r),o=await nm(e,r,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||nx(t);let{p2c:l,p2s:c}=i;({encryptedKey:o,...a}=await nd(e,r,s,l,c));break}case"A128KW":case"A192KW":case"A256KW":s=n||nx(t),o=await nn(e,r,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||nx(t);let{iv:l}=i;({encryptedKey:o,...a}=await nR(e,r,s,l));break}default:throw new rL('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:o,parameters:a}}function nC(...e){let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}function nP(e,t,r,n,i){let o;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let a of(o=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!o.has(a))throw new rL(`Extension Header Parameter "${a}" is not recognized`);if(void 0===i[a])throw new e(`Extension Header Parameter "${a}" is missing`);if(o.get(a)&&void 0===n[a])throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(n.crit)}let nN=e=>e?.[Symbol.toStringTag],nD=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):n="wrapKey";break;case"decrypt"===r:n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&t.key_ops?.includes?.(n)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0};function nL(e,t,r){switch(e.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((e,t,r)=>{if(!(t instanceof Uint8Array)){if(nv(t)){if("oct"===t.kty&&"string"==typeof t.k&&nD(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!r9(t))throw TypeError(r6(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${nN(t)} instances for symmetric algorithms must be of type "secret"`)}})(e,t,r);break;default:((e,t,r)=>{if(nv(t))switch(r){case"decrypt":case"sign":if("oct"!==t.kty&&("AKP"===t.kty&&"string"==typeof t.priv||"string"==typeof t.d)&&nD(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if("oct"!==t.kty&&void 0===t.d&&void 0===t.priv&&nD(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!r9(t))throw TypeError(r6(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${nN(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${nN(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${nN(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${nN(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${nN(t)} instances for asymmetric algorithm encryption must be of type "public"`)}})(e,t,r)}}class nj{#e;#t;#r;#n;#i;#o;#a;#s;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=e}setKeyManagementParameters(e){if(this.#s)throw TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setSharedUnprotectedHeader(e){if(this.#r)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=e,this}setUnprotectedHeader(e){if(this.#n)throw TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}setAdditionalAuthenticatedData(e){return this.#i=e,this}setContentEncryptionKey(e){if(this.#o)throw TypeError("setContentEncryptionKey can only be called once");return this.#o=e,this}setInitializationVector(e){if(this.#a)throw TypeError("setInitializationVector can only be called once");return this.#a=e,this}async encrypt(e,t){let r,n,i,o,a,s;if(!this.#t&&!this.#n&&!this.#r)throw new rz("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!nC(this.#t,this.#n,this.#r))throw new rz("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let l={...this.#t,...this.#n,...this.#r};if(nP(rz,new Map,t?.crit,this.#t,l),void 0!==l.zip)throw new rL('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:c,enc:u}=l;if("string"!=typeof c||!c)throw new rz('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof u||!u)throw new rz('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#o&&("dir"===c||"ECDH-ES"===c))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);nL("dir"===c?u:c,e,"encrypt");{let i,o=await n_(e,c);({cek:n,encryptedKey:r,parameters:i}=await nU(c,u,o,this.#o,this.#s)),i&&(t&&rU in t?this.#n?this.#n={...this.#n,...i}:this.setUnprotectedHeader(i):this.#t?this.#t={...this.#t,...i}:this.setProtectedHeader(i))}if(this.#t?a=rO(o=r$(JSON.stringify(this.#t))):(o="",a=new Uint8Array),this.#i){let e=rO(s=r$(this.#i));i=rk(a,rO("."),e)}else i=a;let{ciphertext:d,tag:p,iv:f}=await ne(u,this.#e,n,this.#a,i),h={ciphertext:r$(d)};return f&&(h.iv=r$(f)),p&&(h.tag=r$(p)),r&&(h.encrypted_key=r$(r)),s&&(h.aad=s),this.#t&&(h.protected=o),this.#r&&(h.unprotected=this.#r),this.#n&&(h.header=this.#n),h}}class nz{#l;constructor(e){this.#l=new nj(e)}setContentEncryptionKey(e){return this.#l.setContentEncryptionKey(e),this}setInitializationVector(e){return this.#l.setInitializationVector(e),this}setProtectedHeader(e){return this.#l.setProtectedHeader(e),this}setKeyManagementParameters(e){return this.#l.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this.#l.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}let nM=e=>Math.floor(e.getTime()/1e3),nB=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function nZ(e){let t,r=nB.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t}function nF(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let nH=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`;function nq(e,t,r={}){var n,i;let o,a;try{o=JSON.parse(rS.decode(t))}catch{}if(!ny(o))throw new rB("JWT Claims Set must be a top-level JSON object");let{typ:s}=r;if(s&&("string"!=typeof e.typ||nH(e.typ)!==nH(s)))throw new rP('unexpected "typ" JWT header value',o,"typ","check_failed");let{requiredClaims:l=[],issuer:c,subject:u,audience:d,maxTokenAge:p}=r,f=[...l];for(let e of(void 0!==p&&f.push("iat"),void 0!==d&&f.push("aud"),void 0!==u&&f.push("sub"),void 0!==c&&f.push("iss"),new Set(f.reverse())))if(!(e in o))throw new rP(`missing required "${e}" claim`,o,e,"missing");if(c&&!(Array.isArray(c)?c:[c]).includes(o.iss))throw new rP('unexpected "iss" claim value',o,"iss","check_failed");if(u&&o.sub!==u)throw new rP('unexpected "sub" claim value',o,"sub","check_failed");if(d&&(n=o.aud,i="string"==typeof d?[d]:d,"string"==typeof n?!i.includes(n):!(Array.isArray(n)&&i.some(Set.prototype.has.bind(new Set(n))))))throw new rP('unexpected "aud" claim value',o,"aud","check_failed");switch(typeof r.clockTolerance){case"string":a=nZ(r.clockTolerance);break;case"number":a=r.clockTolerance;break;case"undefined":a=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:h}=r,m=nM(h||new Date);if((void 0!==o.iat||p)&&"number"!=typeof o.iat)throw new rP('"iat" claim must be a number',o,"iat","invalid");if(void 0!==o.nbf){if("number"!=typeof o.nbf)throw new rP('"nbf" claim must be a number',o,"nbf","invalid");if(o.nbf>m+a)throw new rP('"nbf" claim timestamp check failed',o,"nbf","check_failed")}if(void 0!==o.exp){if("number"!=typeof o.exp)throw new rP('"exp" claim must be a number',o,"exp","invalid");if(o.exp<=m-a)throw new rN('"exp" claim timestamp check failed',o,"exp","check_failed")}if(p){let e=m-o.iat;if(e-a>("number"==typeof p?p:nZ(p)))throw new rN('"iat" claim timestamp check failed (too far in the past)',o,"iat","check_failed");if(e<0-a)throw new rP('"iat" claim timestamp check failed (it should be in the past)',o,"iat","check_failed")}return o}class nV{#c;constructor(e){if(!ny(e))throw TypeError("JWT Claims Set MUST be an object");this.#c=structuredClone(e)}data(){return rx.encode(JSON.stringify(this.#c))}get iss(){return this.#c.iss}set iss(e){this.#c.iss=e}get sub(){return this.#c.sub}set sub(e){this.#c.sub=e}get aud(){return this.#c.aud}set aud(e){this.#c.aud=e}set jti(e){this.#c.jti=e}set nbf(e){"number"==typeof e?this.#c.nbf=nF("setNotBefore",e):e instanceof Date?this.#c.nbf=nF("setNotBefore",nM(e)):this.#c.nbf=nM(new Date)+nZ(e)}set exp(e){"number"==typeof e?this.#c.exp=nF("setExpirationTime",e):e instanceof Date?this.#c.exp=nF("setExpirationTime",nM(e)):this.#c.exp=nM(new Date)+nZ(e)}set iat(e){void 0===e?this.#c.iat=nM(new Date):e instanceof Date?this.#c.iat=nF("setIssuedAt",nM(e)):"string"==typeof e?this.#c.iat=nF("setIssuedAt",nM(new Date)+nZ(e)):this.#c.iat=nF("setIssuedAt",e)}}class nW{#o;#a;#s;#t;#u;#d;#p;#f;constructor(e={}){this.#f=new nV(e)}setIssuer(e){return this.#f.iss=e,this}setSubject(e){return this.#f.sub=e,this}setAudience(e){return this.#f.aud=e,this}setJti(e){return this.#f.jti=e,this}setNotBefore(e){return this.#f.nbf=e,this}setExpirationTime(e){return this.#f.exp=e,this}setIssuedAt(e){return this.#f.iat=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setKeyManagementParameters(e){if(this.#s)throw TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setContentEncryptionKey(e){if(this.#o)throw TypeError("setContentEncryptionKey can only be called once");return this.#o=e,this}setInitializationVector(e){if(this.#a)throw TypeError("setInitializationVector can only be called once");return this.#a=e,this}replicateIssuerAsHeader(){return this.#u=!0,this}replicateSubjectAsHeader(){return this.#d=!0,this}replicateAudienceAsHeader(){return this.#p=!0,this}async encrypt(e,t){let r=new nz(this.#f.data());return this.#t&&(this.#u||this.#d||this.#p)&&(this.#t={...this.#t,iss:this.#u?this.#f.iss:void 0,sub:this.#d?this.#f.sub:void 0,aud:this.#p?this.#f.aud:void 0}),r.setProtectedHeader(this.#t),this.#a&&r.setInitializationVector(this.#a),this.#o&&r.setContentEncryptionKey(this.#o),this.#s&&r.setKeyManagementParameters(this.#s),r.encrypt(e,t)}}function nK(e,t){let r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(e.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:e};default:throw new rL(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}async function nG(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(r4(t,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}return!function(e,t,r){switch(t){case"HS256":case"HS384":case"HS512":{if("HMAC"!==e.algorithm.name)throw rY("HMAC");let r=parseInt(t.slice(2),10);if(rQ(e.algorithm.hash)!==r)throw rY(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if("RSASSA-PKCS1-v1_5"!==e.algorithm.name)throw rY("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(rQ(e.algorithm.hash)!==r)throw rY(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if("RSA-PSS"!==e.algorithm.name)throw rY("RSA-PSS");let r=parseInt(t.slice(2),10);if(rQ(e.algorithm.hash)!==r)throw rY(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if("Ed25519"!==e.algorithm.name)throw rY("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":let n;if(n=e.algorithm,n.name!==t)throw rY(t);break;case"ES256":case"ES384":case"ES512":{if("ECDSA"!==e.algorithm.name)throw rY("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw rY(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}rX(e,r)}(t,e,r),t}async function nJ(e,t,r){let n=await nG(e,t,"sign");return nf(e,n),new Uint8Array(await crypto.subtle.sign(nK(e,n.algorithm),n,r))}class nY{#c;#t;#n;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#c=e}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setUnprotectedHeader(e){if(this.#n)throw TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}async sign(e,t){let r,n,i,o;if(!this.#t&&!this.#n)throw new rM("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!nC(this.#t,this.#n))throw new rM("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let a={...this.#t,...this.#n},s=nP(rM,new Map([["b64",!0]]),t?.crit,this.#t,a),l=!0;if(s.has("b64")&&"boolean"!=typeof(l=this.#t.b64))throw new rM('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:c}=a;if("string"!=typeof c||!c)throw new rM('JWS "alg" (Algorithm) Header Parameter missing or invalid');nL(c,e,"sign"),l?n=rO(r=r$(this.#c)):(n=this.#c,r=""),this.#t?o=rO(i=r$(JSON.stringify(this.#t))):(i="",o=new Uint8Array);let u=rk(o,rO("."),n),d=await n_(e,c),p={signature:r$(await nJ(c,d,u)),payload:r};return this.#n&&(p.header=this.#n),this.#t&&(p.protected=i),p}}class nQ{#l;constructor(e){this.#l=new nY(e)}setProtectedHeader(e){return this.#l.setProtectedHeader(e),this}async sign(e,t){let r=await this.#l.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class nX{#t;#f;constructor(e={}){this.#f=new nV(e)}setIssuer(e){return this.#f.iss=e,this}setSubject(e){return this.#f.sub=e,this}setAudience(e){return this.#f.aud=e,this}setJti(e){return this.#f.jti=e,this}setNotBefore(e){return this.#f.nbf=e,this}setExpirationTime(e){return this.#f.exp=e,this}setIssuedAt(e){return this.#f.iat=e,this}setProtectedHeader(e){return this.#t=e,this}async sign(e,t){let r=new nQ(this.#f.data());if(r.setProtectedHeader(this.#t),Array.isArray(this.#t?.crit)&&this.#t.crit.includes("b64")&&!1===this.#t.b64)throw new rB("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}var n0=e.i(886769),n0=n0;let n1=(e,t)=>{if("string"!=typeof e||!e)throw new rZ(`${t} missing or invalid`)};async function n4(e,t){let r,n;if(nv(e))r=e;else if(r9(e))r=await nk(e);else throw TypeError(r4(e,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(r.kty){case"AKP":n1(r.alg,'"alg" (Algorithm) Parameter'),n1(r.pub,'"pub" (Public key) Parameter'),n={alg:r.alg,kty:r.kty,pub:r.pub};break;case"EC":n1(r.crv,'"crv" (Curve) Parameter'),n1(r.x,'"x" (X Coordinate) Parameter'),n1(r.y,'"y" (Y Coordinate) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":n1(r.crv,'"crv" (Subtype of Key Pair) Parameter'),n1(r.x,'"x" (Public Key) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":n1(r.e,'"e" (Exponent) Parameter'),n1(r.n,'"n" (Modulus) Parameter'),n={e:r.e,kty:r.kty,n:r.n};break;case"oct":n1(r.k,'"k" (Key Value) Parameter'),n={k:r.k,kty:r.kty};break;default:throw new rL('"kty" (Key Type) Parameter missing or unsupported')}let i=rO(JSON.stringify(n));return r$(await no(t,i))}async function n6(e,t,r){let n;if(!ny(e))throw TypeError("JWK must be an object");switch(t??=e.alg,n??=r?.extractable??e.ext,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return rR(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new rL('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return nb({...e,alg:t,ext:n});case"AKP":if("string"!=typeof e.alg||!e.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==t&&t!==e.alg)throw TypeError("JWK alg and alg option value mismatch");return nb({...e,ext:n});case"EC":case"OKP":return nb({...e,alg:t,ext:n});default:throw new rL('Unsupported "kty" (Key Type) Parameter value')}}async function n2(e,t,r,n,i){switch(e){case"dir":if(void 0!==r)throw new rz("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new rz("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,o;if(!ny(n.epk))throw new rz('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(r2(t),!nc(t))throw new rL("ECDH with the provided key is not allowed or not supported by your javascript runtime");let a=await n6(n.epk,e);if(r2(a),void 0!==n.apu){if("string"!=typeof n.apu)throw new rz('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=rR(n.apu)}catch{throw new rz("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new rz('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{o=rR(n.apv)}catch{throw new rz("Failed to base64url decode the apv")}}let s=await nl(a,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?nE(n.enc):parseInt(e.slice(-5,-2),10),i,o);if("ECDH-ES"===e)return s;if(void 0===r)throw new rz("JWE Encrypted Key missing");return ni(e.slice(-6),s,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new rz("JWE Encrypted Key missing");return r2(t),ng(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let o;if(void 0===r)throw new rz("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new rz('JOSE Header "p2c" (PBES2 Count) missing or invalid');let a=i?.maxPBES2Count||1e4;if(n.p2c>a)throw new rz('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new rz('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{o=rR(n.p2s)}catch{throw new rz("Failed to base64url decode the p2s")}return np(e,t,r,n.p2c,o)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new rz("JWE Encrypted Key missing");return ni(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,o;if(void 0===r)throw new rz("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new rz('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new rz('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=rR(n.iv)}catch{throw new rz("Failed to base64url decode the iv")}try{o=rR(n.tag)}catch{throw new rz("Failed to base64url decode the tag")}return n$(e,t,r,i,o)}default:throw new rL('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function n3(e,t){if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}async function n5(e,t,r){let n,i,o,a,s,l,c;if(!ny(e))throw new rz("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new rz("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new rz("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new rz("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new rz("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new rz("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new rz("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new rz("JWE AAD incorrect type");if(void 0!==e.header&&!ny(e.header))throw new rz("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!ny(e.unprotected))throw new rz("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=rR(e.protected);n=JSON.parse(rS.decode(t))}catch{throw new rz("JWE Protected Header is invalid")}if(!nC(n,e.header,e.unprotected))throw new rz("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let u={...n,...e.header,...e.unprotected};if(nP(rz,new Map,r?.crit,n,u),void 0!==u.zip)throw new rL('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:d,enc:p}=u;if("string"!=typeof d||!d)throw new rz("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof p||!p)throw new rz("missing JWE Encryption Algorithm (enc) in JWE Header");let f=r&&n3("keyManagementAlgorithms",r.keyManagementAlgorithms),h=r&&n3("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(f&&!f.has(d)||!f&&d.startsWith("PBES2"))throw new rD('"alg" (Algorithm) Header Parameter value not allowed');if(h&&!h.has(p))throw new rD('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=rR(e.encrypted_key)}catch{throw new rz("Failed to base64url decode the encrypted_key")}let m=!1;"function"==typeof t&&(t=await t(n,e),m=!0),nL("dir"===d?p:d,t,"decrypt");let g=await n_(t,d);try{o=await n2(d,g,i,u,r)}catch(e){if(e instanceof TypeError||e instanceof rz||e instanceof rL)throw e;o=nx(p)}if(void 0!==e.iv)try{a=rR(e.iv)}catch{throw new rz("Failed to base64url decode the iv")}if(void 0!==e.tag)try{s=rR(e.tag)}catch{throw new rz("Failed to base64url decode the tag")}let y=void 0!==e.protected?rO(e.protected):new Uint8Array;l=void 0!==e.aad?rk(y,rO("."),rO(e.aad)):y;try{c=rR(e.ciphertext)}catch{throw new rz("Failed to base64url decode the ciphertext")}let v={plaintext:await nO(p,o,c,a,s,l)};if(void 0!==e.protected&&(v.protectedHeader=n),void 0!==e.aad)try{v.additionalAuthenticatedData=rR(e.aad)}catch{throw new rz("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(v.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(v.unprotectedHeader=e.header),m)?{...v,key:g}:v}async function n9(e,t,r){if(e instanceof Uint8Array&&(e=rS.decode(e)),"string"!=typeof e)throw new rz("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:o,3:a,4:s,length:l}=e.split(".");if(5!==l)throw new rz("Invalid Compact JWE");let c=await n5({ciphertext:a,iv:o||void 0,protected:n,tag:s||void 0,encrypted_key:i||void 0},t,r),u={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return"function"==typeof t?{...u,key:c.key}:u}async function n8(e,t,r){let n=await n9(e,t,r),i=nq(n.protectedHeader,n.plaintext,r),{protectedHeader:o}=n;if(void 0!==o.iss&&o.iss!==i.iss)throw new rP('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(void 0!==o.sub&&o.sub!==i.sub)throw new rP('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(void 0!==o.aud&&JSON.stringify(o.aud)!==JSON.stringify(i.aud))throw new rP('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let a={payload:i,protectedHeader:o};return"function"==typeof t?{...a,key:n.key}:a}async function n7(e,t,r,n){let i=await nG(e,t,"verify");nf(e,i);let o=nK(e,i.algorithm);try{return await crypto.subtle.verify(o,i,r,n)}catch{return!1}}async function ie(e,t,r){let n,i;if(!ny(e))throw new rM("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new rM('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new rM("JWS Protected Header incorrect type");if(void 0===e.payload)throw new rM("JWS Payload missing");if("string"!=typeof e.signature)throw new rM("JWS Signature missing or incorrect type");if(void 0!==e.header&&!ny(e.header))throw new rM("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{let t=rR(e.protected);o=JSON.parse(rS.decode(t))}catch{throw new rM("JWS Protected Header is invalid")}if(!nC(o,e.header))throw new rM("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let a={...o,...e.header},s=nP(rM,new Map([["b64",!0]]),r?.crit,o,a),l=!0;if(s.has("b64")&&"boolean"!=typeof(l=o.b64))throw new rM('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:c}=a;if("string"!=typeof c||!c)throw new rM('JWS "alg" (Algorithm) Header Parameter missing or invalid');let u=r&&n3("algorithms",r.algorithms);if(u&&!u.has(c))throw new rD('"alg" (Algorithm) Header Parameter value not allowed');if(l){if("string"!=typeof e.payload)throw new rM("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new rM("JWS Payload must be a string or an Uint8Array instance");let d=!1;"function"==typeof t&&(t=await t(o,e),d=!0),nL(c,t,"verify");let p=rk(void 0!==e.protected?rO(e.protected):new Uint8Array,rO("."),"string"==typeof e.payload?l?rO(e.payload):rx.encode(e.payload):e.payload);try{n=rR(e.signature)}catch{throw new rM("Failed to base64url decode the signature")}let f=await n_(t,c);if(!await n7(c,f,n,p))throw new rW;if(l)try{i=rR(e.payload)}catch{throw new rM("Failed to base64url decode the payload")}else i="string"==typeof e.payload?rx.encode(e.payload):e.payload;let h={payload:i};return(void 0!==e.protected&&(h.protectedHeader=o),void 0!==e.header&&(h.unprotectedHeader=e.header),d)?{...h,key:f}:h}async function it(e,t,r){if(e instanceof Uint8Array&&(e=rS.decode(e)),"string"!=typeof e)throw new rM("Compact JWS must be a string or Uint8Array");let{0:n,1:i,2:o,length:a}=e.split(".");if(3!==a)throw new rM("Invalid Compact JWS");let s=await ie({payload:i,protected:n,signature:o},t,r),l={payload:s.payload,protectedHeader:s.protectedHeader};return"function"==typeof t?{...l,key:s.key}:l}async function ir(e,t,r){let n=await it(e,t,r);if(n.protectedHeader.crit?.includes("b64")&&!1===n.protectedHeader.b64)throw new rB("JWTs MUST NOT use unencoded payload");let i={payload:nq(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return"function"==typeof t?{...i,key:n.key}:i}async function ii(e,t,r=3600){return await new nX(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+r).sign(new TextEncoder().encode(t))}async function io(e,t){try{return(await ir(e,new TextEncoder().encode(t))).payload}catch{return null}}let ia=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121]),is="A256CBC-HS512";async function il(e,t,r,n=3600){let i=ri(rE,new TextEncoder().encode(t),new TextEncoder().encode(r),ia,64),o=await n4({kty:"oct",k:n0.encode(i)},"sha256");return await new nW(e).setProtectedHeader({alg:"dir",enc:is,kid:o}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+n).setJti(crypto.randomUUID()).encrypt(i)}async function ic(e,t,r){if(!e)return null;try{let{payload:n}=await n8(e,async({kid:e})=>{let n=ri(rE,new TextEncoder().encode(t),new TextEncoder().encode(r),ia,64);if(void 0===e||e===await n4({kty:"oct",k:n0.encode(n)},"sha256"))return n;throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[is,"A256GCM"]});return n}catch{return null}}var iu=e.i(847984),id=e.i(446411),ip=e.i(13883),ih=ip;let im=e=>{if("string"==typeof e&&(e=new TextEncoder().encode(e)),0===e.byteLength)return"";let t=new Uint8Array(e),r="";for(let e of t)r+=e.toString(16).padStart(2,"0");return r};function ig(e,t,r,n){var i;let o,{c:a,dkLen:s,DK:l,PRF:c,PRFSalt:u}=function(e,t,r,n){tG(e);let{c:i,dkLen:o,asyncTick:a}=t7({dkLen:32,asyncTick:10},n);if(tW(i,"c"),tW(o,"dkLen"),tW(a,"asyncTick"),i<1)throw Error("iterations (c) must be >= 1");let s=t8(t,"password"),l=t8(r,"salt"),c=new Uint8Array(o),u=rt.create(e,s),d=u._cloneInto().update(l);return{c:i,dkLen:o,asyncTick:a,DK:c,PRF:u,PRFSalt:d}}(e,t,r,n),d=new Uint8Array(4),p=t0(d),f=new Uint8Array(c.outputLen);for(let e=1,t=0;t<s;e++,t+=c.outputLen){let r=l.subarray(t,t+c.outputLen);p.setInt32(0,e,!1),(o=u._cloneInto(o)).update(d).digestInto(f),r.set(f.subarray(0,r.length));for(let e=1;e<a;e++){c._cloneInto(o).update(f).digestInto(f);for(let e=0;e<r.length;e++)r[e]^=f[e]}}return i=o,c.destroy(),u.destroy(),i&&i.destroy(),tX(f),l}function iy(e,t,r,n,i,o){let a=e[t++]^r[n++],s=e[t++]^r[n++],l=e[t++]^r[n++],c=e[t++]^r[n++],u=e[t++]^r[n++],d=e[t++]^r[n++],p=e[t++]^r[n++],f=e[t++]^r[n++],h=e[t++]^r[n++],m=e[t++]^r[n++],g=e[t++]^r[n++],y=e[t++]^r[n++],v=e[t++]^r[n++],b=e[t++]^r[n++],w=e[t++]^r[n++],_=e[t++]^r[n++],E=a,x=s,S=l,k=c,A=u,I=d,T=p,O=f,R=h,$=m,U=g,C=y,P=v,N=b,D=w,L=_;for(let e=0;e<8;e+=2)A^=t4(E+P|0,7),R^=t4(A+E|0,9),P^=t4(R+A|0,13),E^=t4(P+R|0,18),$^=t4(I+x|0,7),N^=t4($+I|0,9),x^=t4(N+$|0,13),I^=t4(x+N|0,18),D^=t4(U+T|0,7),S^=t4(D+U|0,9),T^=t4(S+D|0,13),U^=t4(T+S|0,18),k^=t4(L+C|0,7),O^=t4(k+L|0,9),C^=t4(O+k|0,13),L^=t4(C+O|0,18),x^=t4(E+k|0,7),S^=t4(x+E|0,9),k^=t4(S+x|0,13),E^=t4(k+S|0,18),T^=t4(I+A|0,7),O^=t4(T+I|0,9),A^=t4(O+T|0,13),I^=t4(A+O|0,18),C^=t4(U+$|0,7),R^=t4(C+U|0,9),$^=t4(R+C|0,13),U^=t4($+R|0,18),P^=t4(L+D|0,7),N^=t4(P+L|0,9),D^=t4(N+P|0,13),L^=t4(D+N|0,18);i[o++]=a+E|0,i[o++]=s+x|0,i[o++]=l+S|0,i[o++]=c+k|0,i[o++]=u+A|0,i[o++]=d+I|0,i[o++]=p+T|0,i[o++]=f+O|0,i[o++]=h+R|0,i[o++]=m+$|0,i[o++]=g+U|0,i[o++]=y+C|0,i[o++]=v+P|0,i[o++]=b+N|0,i[o++]=w+D|0,i[o++]=_+L|0}function iv(e,t,r,n,i){let o=n+0,a=n+16*i;for(let n=0;n<16;n++)r[a+n]=e[t+(2*i-1)*16+n];for(let n=0;n<i;n++,o+=16,t+=16)iy(r,a,e,t,r,o),n>0&&(a+=16),iy(r,o,e,t+=16,r,a)}async function ib(e,t,r){let n,{N:i,r:o,p:a,dkLen:s,blockSize32:l,V:c,B32:u,B:d,tmp:p,blockMixCb:f,asyncTick:h}=function(e,t,r){let{N:n,r:i,p:o,dkLen:a,asyncTick:s,maxmem:l,onProgress:c}=t7({dkLen:32,asyncTick:10,maxmem:0x40000400},r);if(tW(n,"N"),tW(i,"r"),tW(o,"p"),tW(a,"dkLen"),tW(s,"asyncTick"),tW(l,"maxmem"),void 0!==c&&"function"!=typeof c)throw Error("progressCb must be a function");let u=128*i,d=u/4;if(n<=1||(n&n-1)!=0||n>0x100000000)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(o<1||o>0x1fffffffe0/u)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(a<1||a>0x1fffffffe0)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(u*(n+o)>l)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+l);let p=ig(rE,e,t,{c:1,dkLen:u*o}),f=tQ(p),h=tQ(new Uint8Array(u*n)),m=tQ(new Uint8Array(u)),g=()=>{};if(c){let e=2*n*o,t=Math.max(Math.floor(e/1e4),1),r=0;g=()=>{r++,c&&(!(r%t)||r===e)&&c(r/e)}}return{N:n,r:i,p:o,dkLen:a,blockSize32:d,V:h,B32:f,B:p,tmp:m,blockMixCb:g,asyncTick:s}}(e,t,r);t6(u);for(let e=0;e<a;e++){let t=l*e;for(let e=0;e<l;e++)c[e]=u[t+e];let r=0;await t9(i-1,h,()=>{iv(c,r,c,r+=l,o),f()}),iv(c,(i-1)*l,u,t,o),f(),await t9(i,h,()=>{let e=(u[t+l-16]&i-1)>>>0;for(let r=0;r<l;r++)p[r]=u[t+r]^c[e*l+r];iv(p,0,u,t,o),f()})}return t6(u),n=ig(rE,e,d,{c:1,dkLen:s}),tX(d,c,p),n}async function iw(e,t){return await ib(e.normalize("NFKC"),t,{N:16384,p:1,r:16,dkLen:64,maxmem:0x4000000})}let i_=async e=>{let t=im(crypto.getRandomValues(new Uint8Array(16))),r=await iw(e,t);return`${t}:${im(r)}`},iE=async({hash:e,password:t})=>{let[r,n]=e.split(":");if(!r||!n)throw new ih.t("Invalid password hash");return function(e,t){"string"==typeof e&&(e=new TextEncoder().encode(e)),"string"==typeof t&&(t=new TextEncoder().encode(t));let r=new Uint8Array(e),n=new Uint8Array(t),i=r.length^n.length,o=Math.max(r.length,n.length);for(let e=0;e<o;e++)i|=(e<r.length?r[e]:0)^(e<n.length?n[e]:0);return 0===i}(await iw(t,r),function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(t2)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=t3(e.charCodeAt(i)),o=t3(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}(n))};function ix(){let e="u">typeof globalThis&&globalThis.crypto;if(e&&"object"==typeof e.subtle&&null!=e.subtle)return e.subtle;throw Error("crypto.subtle must be defined")}function iS(e){return e?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function ik(e,t,r){let n="",i=0,o=0;for(let r of e)for(i=i<<8|r,o+=8;o>=6;)o-=6,n+=t[i>>o&63];if(o>0&&(n+=t[i<<6-o&63]),r){let e=(4-n.length%4)%4;n+="=".repeat(e)}return n}function iA(e,t){let r=new Map;for(let e=0;e<t.length;e++)r.set(t[e],e);let n=[],i=0,o=0;for(let t of e){if("="===t)break;let e=r.get(t);if(void 0===e)throw Error(`Invalid Base64 character: ${t}`);i=i<<6|e,(o+=6)>=8&&(o-=8,n.push(i>>o&255))}return Uint8Array.from(n)}let iI={encode(e,t={}){let r=iS(!1);return ik("string"==typeof e?new TextEncoder().encode(e):new Uint8Array(e),r,t.padding??!0)},decode(e){"string"!=typeof e&&(e=new TextDecoder().decode(e));let t=iS(e.includes("-")||e.includes("_"));return iA(e,t)}},iT={encode(e,t={}){let r=iS(!0);return ik("string"==typeof e?new TextEncoder().encode(e):new Uint8Array(e),r,t.padding??!0)},decode(e){let t=iS(e.includes("-")||e.includes("_"));return iA(e,t)}};function iO(e,t){return{digest:async r=>{let n=new TextEncoder,i="string"==typeof r?n.encode(r):r,o=await ix().digest(e,i);return"hex"===t?Array.from(new Uint8Array(o)).map(e=>e.toString(16).padStart(2,"0")).join(""):"base64"===t||"base64url"===t||"base64urlnopad"===t?t.includes("url")?iT.encode(o,{padding:"base64urlnopad"!==t}):iI.encode(o):o}}}function iR(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function i$(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function iU(e,t,r=""){let n=e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name,i=e?.length,o=void 0!==t;if(!n||o&&i!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(o?` of length ${t}`:"")+", got "+(n?`length=${i}`:`type=${typeof e}`));return e}function iC(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function iP(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function iN(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let iD=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],iL="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,ij=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function iz(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function iM(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error('"output" expected Uint8Array of length '+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function iB(e){return Uint8Array.from(e)}function iZ(e=32){let t="object"==typeof globalThis?globalThis.crypto:null;if("function"!=typeof t?.getRandomValues)throw Error("crypto.getRandomValues must be defined");return t.getRandomValues(new Uint8Array(e))}function iF(e,t=iZ){let{nonceLength:r}=e;i$(r);let n=(e,t)=>{let r=function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];iU(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}(e,t);return t.fill(0),r};return(i,...o)=>({encrypt(a){iU(a);let s=t(r),l=e(i,s,...o).encrypt(a);return l instanceof Promise?l.then(e=>n(s,e)):n(s,l)},decrypt(t){iU(t);let n=t.subarray(0,r),a=t.subarray(r);return e(i,n,...o).decrypt(a)}})}let iH=e=>Uint8Array.from(e.split(""),e=>e.charCodeAt(0)),iq=iH("expand 16-byte k"),iV=iH("expand 32-byte k"),iW=iP(iq),iK=iP(iV);function iG(e,t){return e<<t|e>>>32-t}function iJ(e){return e.byteOffset%4==0}let iY=0x100000000-1,iQ=Uint32Array.of();function iX(e,t){let{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:o,rounds:a}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return i$(i),i$(a),iR(o),iR(r),(t,s,l,c,u=0)=>{let d,p;iU(t,void 0,"key"),iU(s,void 0,"nonce"),iU(l,void 0,"data");let f=l.length;if(void 0===c&&(c=new Uint8Array(f)),iU(c,void 0,"output"),i$(u),u<0||u>=iY)throw Error("arx: counter overflow");if(c.length<f)throw Error(`arx: output (${c.length}) is shorter than data (${f})`);let h=[],m=t.length;if(32===m)h.push(d=iB(t)),p=iK;else if(16===m&&r)(d=new Uint8Array(32)).set(t),d.set(t,16),p=iW,h.push(d);else throw iU(t,32,"arx key"),Error("invalid key size");iJ(s)||h.push(s=iB(s));let g=iP(d);if(n){if(24!==s.length)throw Error("arx: extended nonce must be 24 bytes");n(p,g,iP(s.subarray(0,16)),g),s=s.subarray(16)}let y=16-i;if(y!==s.length)throw Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){let e=new Uint8Array(12);e.set(s,o?0:12-s.length),s=e,h.push(s)}return!function(e,t,r,n,i,o,a,s){let l=i.length,c=new Uint8Array(64),u=iP(c),d=iJ(i)&&iJ(o),p=d?iP(i):iQ,f=d?iP(o):iQ;for(let h=0;h<l;a++){if(e(t,r,n,u,a,s),a>=iY)throw Error("arx: counter overflow");let m=Math.min(64,l-h);if(d&&64===m){let e=h/4;if(h%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)f[r=e+t]=p[r]^u[t];h+=64;continue}for(let e=0,t;e<m;e++)o[t=h+e]=i[t]^c[e];h+=m}}(e,p,g,iP(s),l,c,u,a),iN(...h),c}}function i0(e,t){return 255&e[t++]|(255&e[t++])<<8}class i1{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(e){const t=i0(e=iB(iU(e,32,"key")),0),r=i0(e,2),n=i0(e,4),i=i0(e,6),o=i0(e,8),a=i0(e,10),s=i0(e,12),l=i0(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|n<<6)&7939,this.r[3]=(n>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|s<<5)&8065,this.r[8]=(s>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=i0(e,16+2*t)}process(e,t,r=!1){let{h:n,r:i}=this,o=i[0],a=i[1],s=i[2],l=i[3],c=i[4],u=i[5],d=i[6],p=i[7],f=i[8],h=i[9],m=i0(e,t+0),g=i0(e,t+2),y=i0(e,t+4),v=i0(e,t+6),b=i0(e,t+8),w=i0(e,t+10),_=i0(e,t+12),E=i0(e,t+14),x=n[0]+(8191&m),S=n[1]+((m>>>13|g<<3)&8191),k=n[2]+((g>>>10|y<<6)&8191),A=n[3]+((y>>>7|v<<9)&8191),I=n[4]+((v>>>4|b<<12)&8191),T=n[5]+(b>>>1&8191),O=n[6]+((b>>>14|w<<2)&8191),R=n[7]+((w>>>11|_<<5)&8191),$=n[8]+((_>>>8|E<<8)&8191),U=n[9]+(E>>>5|2048*!r),C=0,P=0+x*o+5*h*S+5*f*k+5*p*A+5*d*I;C=P>>>13,P&=8191,P+=5*u*T+5*c*O+5*l*R+5*s*$+5*a*U,C+=P>>>13,P&=8191;let N=C+x*a+S*o+5*h*k+5*f*A+5*p*I;C=N>>>13,N&=8191,N+=5*d*T+5*u*O+5*c*R+5*l*$+5*s*U,C+=N>>>13,N&=8191;let D=C+x*s+S*a+k*o+5*h*A+5*f*I;C=D>>>13,D&=8191,D+=5*p*T+5*d*O+5*u*R+5*c*$+5*l*U,C+=D>>>13,D&=8191;let L=C+x*l+S*s+k*a+A*o+5*h*I;C=L>>>13,L&=8191,L+=5*f*T+5*p*O+5*d*R+5*u*$+5*c*U,C+=L>>>13,L&=8191;let j=C+x*c+S*l+k*s+A*a+I*o;C=j>>>13,j&=8191,j+=5*h*T+5*f*O+5*p*R+5*d*$+5*u*U,C+=j>>>13,j&=8191;let z=C+x*u+S*c+k*l+A*s+I*a;C=z>>>13,z&=8191,z+=T*o+5*h*O+5*f*R+5*p*$+5*d*U,C+=z>>>13,z&=8191;let M=C+x*d+S*u+k*c+A*l+I*s;C=M>>>13,M&=8191,M+=T*a+O*o+5*h*R+5*f*$+5*p*U,C+=M>>>13,M&=8191;let B=C+x*p+S*d+k*u+A*c+I*l;C=B>>>13,B&=8191,B+=T*s+O*a+R*o+5*h*$+5*f*U,C+=B>>>13,B&=8191;let Z=C+x*f+S*p+k*d+A*u+I*c;C=Z>>>13,Z&=8191,Z+=T*l+O*s+R*a+$*o+5*h*U,C+=Z>>>13,Z&=8191;let F=C+x*h+S*f+k*p+A*d+I*u;C=F>>>13,F&=8191,F+=T*c+O*l+R*s+$*a+U*o,C+=F>>>13,F&=8191,P=8191&(C=(C=(C<<2)+C|0)+P|0),C>>>=13,N+=C,n[0]=P,n[1]=N,n[2]=D,n[3]=L,n[4]=j,n[5]=z,n[6]=M,n[7]=B,n[8]=Z,n[9]=F}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=65535&o;for(let r=1;r<8;r++)o=(e[r]+t[r]|0)+(o>>>16)|0,e[r]=65535&o;iN(r)}update(e){iC(this),iU(e);let{buffer:t,blockLen:r}=this,n=(e=iB(e)).length;for(let i=0;i<n;){let o=Math.min(r-this.pos,n-i);if(o===r){for(;r<=n-i;i+=r)this.process(e,i);continue}t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){iN(this.h,this.r,this.buffer,this.pad)}digestInto(e){iC(this);iU(e,void 0,"output");let t=this.outputLen;if(e.length<t)throw Error("digestInto() expects output buffer of length at least "+t);this.finished=!0;let{buffer:r,h:n}=this,{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let o=0;for(let t=0;t<8;t++)e[o++]=n[t]>>>0,e[o++]=n[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let i4=(ei=e=>new i1(e),(c=(e,t)=>ei(t).update(e).digest()).outputLen=(u=ei(new Uint8Array(32))).outputLen,c.blockLen=u.blockLen,c.create=e=>ei(e),c);function i6(e,t,r,n,i,o=20){let a=e[0],s=e[1],l=e[2],c=e[3],u=t[0],d=t[1],p=t[2],f=t[3],h=t[4],m=t[5],g=t[6],y=t[7],v=r[0],b=r[1],w=r[2],_=a,E=s,x=l,S=c,k=u,A=d,I=p,T=f,O=h,R=m,$=g,U=y,C=i,P=v,N=b,D=w;for(let e=0;e<o;e+=2)O=O+(C=iG(C^(_=_+k|0),16))|0,_=_+(k=iG(k^O,12))|0,O=O+(C=iG(C^_,8))|0,k=iG(k^O,7),R=R+(P=iG(P^(E=E+A|0),16))|0,E=E+(A=iG(A^R,12))|0,R=R+(P=iG(P^E,8))|0,A=iG(A^R,7),$=$+(N=iG(N^(x=x+I|0),16))|0,x=x+(I=iG(I^$,12))|0,$=$+(N=iG(N^x,8))|0,I=iG(I^$,7),U=U+(D=iG(D^(S=S+T|0),16))|0,S=S+(T=iG(T^U,12))|0,U=U+(D=iG(D^S,8))|0,T=iG(T^U,7),$=$+(D=iG(D^(_=_+A|0),16))|0,_=_+(A=iG(A^$,12))|0,$=$+(D=iG(D^_,8))|0,A=iG(A^$,7),U=U+(C=iG(C^(E=E+I|0),16))|0,E=E+(I=iG(I^U,12))|0,U=U+(C=iG(C^E,8))|0,I=iG(I^U,7),O=O+(P=iG(P^(x=x+T|0),16))|0,x=x+(T=iG(T^O,12))|0,O=O+(P=iG(P^x,8))|0,T=iG(T^O,7),R=R+(N=iG(N^(S=S+k|0),16))|0,S=S+(k=iG(k^R,12))|0,R=R+(N=iG(N^S,8))|0,k=iG(k^R,7);let L=0;n[L++]=a+_|0,n[L++]=s+E|0,n[L++]=l+x|0,n[L++]=c+S|0,n[L++]=u+k|0,n[L++]=d+A|0,n[L++]=p+I|0,n[L++]=f+T|0,n[L++]=h+O|0,n[L++]=m+R|0,n[L++]=g+$|0,n[L++]=y+U|0,n[L++]=i+C|0,n[L++]=v+P|0,n[L++]=b+N|0,n[L++]=w+D|0}let i2=iX(i6,{counterRight:!1,counterLength:4,allowShortKeys:!1}),i3=iX(i6,{counterRight:!1,counterLength:8,extendNonceFn:function(e,t,r,n){let i=e[0],o=e[1],a=e[2],s=e[3],l=t[0],c=t[1],u=t[2],d=t[3],p=t[4],f=t[5],h=t[6],m=t[7],g=r[0],y=r[1],v=r[2],b=r[3];for(let e=0;e<20;e+=2)p=p+(g=iG(g^(i=i+l|0),16))|0,i=i+(l=iG(l^p,12))|0,p=p+(g=iG(g^i,8))|0,l=iG(l^p,7),f=f+(y=iG(y^(o=o+c|0),16))|0,o=o+(c=iG(c^f,12))|0,f=f+(y=iG(y^o,8))|0,c=iG(c^f,7),h=h+(v=iG(v^(a=a+u|0),16))|0,a=a+(u=iG(u^h,12))|0,h=h+(v=iG(v^a,8))|0,u=iG(u^h,7),m=m+(b=iG(b^(s=s+d|0),16))|0,s=s+(d=iG(d^m,12))|0,m=m+(b=iG(b^s,8))|0,d=iG(d^m,7),h=h+(b=iG(b^(i=i+c|0),16))|0,i=i+(c=iG(c^h,12))|0,h=h+(b=iG(b^i,8))|0,c=iG(c^h,7),m=m+(g=iG(g^(o=o+u|0),16))|0,o=o+(u=iG(u^m,12))|0,m=m+(g=iG(g^o,8))|0,u=iG(u^m,7),p=p+(y=iG(y^(a=a+d|0),16))|0,a=a+(d=iG(d^p,12))|0,p=p+(y=iG(y^a,8))|0,d=iG(d^p,7),f=f+(v=iG(v^(s=s+l|0),16))|0,s=s+(l=iG(l^f,12))|0,f=f+(v=iG(v^s,8))|0,l=iG(l^f,7);let w=0;n[w++]=i,n[w++]=o,n[w++]=a,n[w++]=s,n[w++]=g,n[w++]=y,n[w++]=v,n[w++]=b},allowShortKeys:!1}),i5=new Uint8Array(16),i9=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(i5.subarray(r))},i8=new Uint8Array(32);function i7(e,t,r,n,i){var o,a;let s,l;void 0!==i&&iU(i,void 0,"AAD");let c=e(t,r,i8),u=(o=n.length,a=i?i.length:0,iR(!0),(l=new DataView((s=new Uint8Array(16)).buffer,s.byteOffset,s.byteLength)).setBigUint64(0,BigInt(a),!0),l.setBigUint64(8,BigInt(o),!0),s),d=i4.create(c);i&&i9(d,i),i9(d,n),d.update(u);let p=d.digest();return iN(c,u),p}let oe=e=>(t,r,n)=>({encrypt(i,o){let a=i.length;(o=iM(a+16,o,!1)).set(i);let s=o.subarray(0,-16);e(t,r,s,s,1);let l=i7(e,t,r,s,n);return o.set(l,a),iN(l),o},decrypt(i,o){o=iM(i.length-16,o,!1);let a=i.subarray(0,-16),s=i.subarray(-16),l=i7(e,t,r,a,n);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(s,l))throw Error("invalid tag");return o.set(i.subarray(0,-16)),e(t,r,o,o,1),iN(l),o}});oe(i2);let ot=((e,t)=>{function r(n,...i){if(iU(n,void 0,"key"),!iD)throw Error("Non little-endian hardware is not yet supported");void 0!==e.nonceLength&&iU(i[0],e.varSizeNonce?void 0:e.nonceLength,"nonce");let o=e.tagLength;o&&void 0!==i[1]&&iU(i[1],void 0,"AAD");let a=t(n,...i),s=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");iU(t,void 0,"output")}},l=!1;return{encrypt(e,t){if(l)throw Error("cannot encrypt() twice with same key + nonce");return l=!0,iU(e),s(a.encrypt.length,t),a.encrypt(e,t)},decrypt(e,t){if(iU(e),o&&e.length<o)throw Error('"ciphertext" expected length bigger than tagLength='+o);return s(a.decrypt.length,t),a.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:24,tagLength:16},oe(i3)),or=async({key:e,data:t})=>{let r=await iO("SHA-256").digest(e),n=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(t);var i=iF(ot)(new Uint8Array(r)).encrypt(n);if(iU(i),iL)return i.toHex();let o="";for(let e=0;e<i.length;e++)o+=ij[i[e]];return o},on=async({key:e,data:t})=>{let r=await iO("SHA-256").digest(e),n=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(iL)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=iz(e.charCodeAt(i)),o=iz(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}(t),i=iF(ot)(new Uint8Array(r));return new TextDecoder().decode(i.decrypt(n))};e.s(["ZodAny",()=>fB,"ZodArray",()=>fY,"ZodBase64",()=>fs,"ZodBase64URL",()=>fc,"ZodBigInt",()=>fR,"ZodBigIntFormat",()=>fU,"ZodBoolean",()=>fT,"ZodCIDRv4",()=>fn,"ZodCIDRv6",()=>fo,"ZodCUID",()=>pY,"ZodCUID2",()=>pX,"ZodCatch",()=>hD,"ZodCodec",()=>hZ,"ZodCustom",()=>h0,"ZodCustomStringFormat",()=>fm,"ZodDate",()=>fG,"ZodDefault",()=>hT,"ZodDiscriminatedUnion",()=>f8,"ZodE164",()=>fd,"ZodEmail",()=>pN,"ZodEmoji",()=>pW,"ZodEnum",()=>hp,"ZodExactOptional",()=>hx,"ZodFile",()=>hy,"ZodFunction",()=>hQ,"ZodGUID",()=>pL,"ZodIPv4",()=>p9,"ZodIPv6",()=>ft,"ZodIntersection",()=>he,"ZodJWT",()=>ff,"ZodKSUID",()=>p3,"ZodLazy",()=>hK,"ZodLiteral",()=>hm,"ZodMAC",()=>p7,"ZodMap",()=>hl,"ZodNaN",()=>hj,"ZodNanoID",()=>pG,"ZodNever",()=>fq,"ZodNonOptional",()=>hU,"ZodNull",()=>fz,"ZodNullable",()=>hk,"ZodNumber",()=>fw,"ZodNumberFormat",()=>fE,"ZodObject",()=>f0,"ZodOptional",()=>h_,"ZodPipe",()=>hM,"ZodPrefault",()=>hR,"ZodPromise",()=>hJ,"ZodReadonly",()=>hH,"ZodRecord",()=>hi,"ZodSet",()=>hu,"ZodString",()=>pU,"ZodStringFormat",()=>pP,"ZodSuccess",()=>hP,"ZodSymbol",()=>fN,"ZodTemplateLiteral",()=>hV,"ZodTransform",()=>hb,"ZodTuple",()=>hr,"ZodType",()=>pR,"ZodULID",()=>p1,"ZodURL",()=>pH,"ZodUUID",()=>pz,"ZodUndefined",()=>fL,"ZodUnion",()=>f2,"ZodUnknown",()=>fF,"ZodVoid",()=>fW,"ZodXID",()=>p6,"ZodXor",()=>f5,"_ZodString",()=>p$,"_default",()=>hO,"_function",()=>hX,"any",()=>fZ,"array",()=>fQ,"base64",()=>fl,"base64url",()=>fu,"bigint",()=>f$,"boolean",()=>fO,"catch",()=>hL,"check",()=>h1,"cidrv4",()=>fi,"cidrv6",()=>fa,"codec",()=>hF,"cuid",()=>pQ,"cuid2",()=>p0,"custom",()=>h4,"date",()=>fJ,"describe",()=>h3,"discriminatedUnion",()=>f7,"e164",()=>fp,"email",()=>pD,"emoji",()=>pK,"enum",()=>hf,"exactOptional",()=>hS,"file",()=>hv,"float32",()=>fS,"float64",()=>fk,"function",()=>hX,"guid",()=>pj,"hash",()=>fb,"hex",()=>fv,"hostname",()=>fy,"httpUrl",()=>pV,"instanceof",()=>h9,"int",()=>fx,"int32",()=>fA,"int64",()=>fC,"intersection",()=>ht,"ipv4",()=>p8,"ipv6",()=>fr,"json",()=>h7,"jwt",()=>fh,"keyof",()=>fX,"ksuid",()=>p5,"lazy",()=>hG,"literal",()=>hg,"looseObject",()=>f6,"looseRecord",()=>hs,"mac",()=>fe,"map",()=>hc,"meta",()=>h5,"nan",()=>hz,"nanoid",()=>pJ,"nativeEnum",()=>hh,"never",()=>fV,"nonoptional",()=>hC,"null",()=>fM,"nullable",()=>hA,"nullish",()=>hI,"number",()=>f_,"object",()=>f1,"optional",()=>hE,"partialRecord",()=>ha,"pipe",()=>hB,"prefault",()=>h$,"preprocess",()=>me,"promise",()=>hY,"readonly",()=>hq,"record",()=>ho,"refine",()=>h6,"set",()=>hd,"strictObject",()=>f4,"string",()=>pC,"stringFormat",()=>fg,"stringbool",()=>h8,"success",()=>hN,"superRefine",()=>h2,"symbol",()=>fD,"templateLiteral",()=>hW,"transform",()=>hw,"tuple",()=>hn,"uint32",()=>fI,"uint64",()=>fP,"ulid",()=>p4,"undefined",()=>fj,"union",()=>f3,"unknown",()=>fH,"url",()=>pq,"uuid",()=>pM,"uuidv4",()=>pB,"uuidv6",()=>pZ,"uuidv7",()=>pF,"void",()=>fK,"xid",()=>p2,"xor",()=>f9],314539);let oi=Object.freeze({status:"aborted"});function oo(e,t,r){function n(r,n){if(r._zod||Object.defineProperty(r,"_zod",{value:{def:n,constr:a,traits:new Set},enumerable:!1}),r._zod.traits.has(e))return;r._zod.traits.add(e),t(r,n);let i=a.prototype,o=Object.keys(i);for(let e=0;e<o.length;e++){let t=o[e];t in r||(r[t]=i[t].bind(r))}}let i=r?.Parent??Object;class o extends i{}function a(e){var t;let i=r?.Parent?new o:this;for(let r of(n(i,e),(t=i._zod).deferred??(t.deferred=[]),i._zod.deferred))r();return i}return Object.defineProperty(o,"name",{value:e}),Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}let oa=Symbol("zod_brand");class os extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class ol extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}let oc={};function ou(e){return e&&Object.assign(oc,e),oc}function od(e){return e}function op(e){return e}function of(e){}function oh(e){throw Error("Unexpected value in exhaustive check")}function om(e){}function og(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function oy(e,t="|"){return e.map(e=>oV(e)).join(t)}function ov(e,t){return"bigint"==typeof t?t.toString():t}function ob(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ow(e){return null==e}function o_(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function oE(e,t){let r=(e.toString().split(".")[1]||"").length,n=t.toString(),i=(n.split(".")[1]||"").length;if(0===i&&/\d?e-\d?/.test(n)){let e=n.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let o=r>i?r:i;return Number.parseInt(e.toFixed(o).replace(".",""))%Number.parseInt(t.toFixed(o).replace(".",""))/10**o}e.s(["$ZodAsyncError",()=>os,"$ZodEncodeError",()=>ol,"$brand",0,oa,"$constructor",()=>oo,"NEVER",0,oi,"config",()=>ou,"globalConfig",0,oc],123489);let ox=Symbol("evaluating");function oS(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==ox)return void 0===n&&(n=ox,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function ok(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function oA(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function oI(...e){let t={};for(let r of e)Object.assign(t,Object.getOwnPropertyDescriptors(r));return Object.defineProperties({},t)}function oT(e){return oI(e._zod.def)}function oO(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function oR(e){let t=Object.keys(e);return Promise.all(t.map(t=>e[t])).then(e=>{let r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r})}function o$(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}function oU(e){return JSON.stringify(e)}function oC(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let oP="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function oN(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let oD=ob(()=>{if("u">typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function oL(e){if(!1===oN(e))return!1;let t=e.constructor;if(void 0===t||"function"!=typeof t)return!0;let r=t.prototype;return!1!==oN(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function oj(e){return oL(e)?{...e}:Array.isArray(e)?[...e]:e}function oz(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}let oM=new Set(["string","number","symbol"]),oB=new Set(["string","number","bigint","boolean","symbol","undefined"]);function oZ(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oF(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function oH(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}function oq(e){let t;return new Proxy({},{get:(r,n,i)=>(t??(t=e()),Reflect.get(t,n,i)),set:(r,n,i,o)=>(t??(t=e()),Reflect.set(t,n,i,o)),has:(r,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(r,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(r,n,i)=>(t??(t=e()),Reflect.defineProperty(t,n,i))})}function oV(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function oW(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}let oK={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},oG={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function oJ(e,t){let r=e._zod.def,n=r.checks;if(n&&n.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let i=oI(e._zod.def,{get shape(){let e={};for(let n in t){if(!(n in r.shape))throw Error(`Unrecognized key: "${n}"`);t[n]&&(e[n]=r.shape[n])}return oA(this,"shape",e),e},checks:[]});return oF(e,i)}function oY(e,t){let r=e._zod.def,n=r.checks;if(n&&n.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let i=oI(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return oA(this,"shape",n),n},checks:[]});return oF(e,i)}function oQ(e,t){if(!oL(t))throw Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0){let r=e._zod.def.shape;for(let e in t)if(void 0!==Object.getOwnPropertyDescriptor(r,e))throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let n=oI(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return oA(this,"shape",r),r}});return oF(e,n)}function oX(e,t){if(!oL(t))throw Error("Invalid input to safeExtend: expected a plain object");let r=oI(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return oA(this,"shape",r),r}});return oF(e,r)}function o0(e,t){let r=oI(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return oA(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return oF(e,r)}function o1(e,t,r){let n=t._zod.def.checks;if(n&&n.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let i=oI(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)i[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return oA(this,"shape",i),i},checks:[]});return oF(t,i)}function o4(e,t,r){let n=oI(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)i[t]=new e({type:"nonoptional",innerType:n[t]});return oA(this,"shape",i),i}});return oF(t,n)}function o6(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function o2(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function o3(e){return"string"==typeof e?e:e?.message}function o5(e,t,r){let n={...e,path:e.path??[]};return e.message||(n.message=o3(e.inst?._zod.def?.error?.(e))??o3(t?.error?.(e))??o3(r.customError?.(e))??o3(r.localeError?.(e))??"Invalid input"),delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function o9(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function o8(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function o7(e){let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"nan":"number";case"object":if(null===e)return"null";if(Array.isArray(e))return"array";if(e&&Object.getPrototypeOf(e)!==Object.prototype&&"constructor"in e&&e.constructor)return e.constructor.name}return t}function ae(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}function at(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function ar(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function an(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function ai(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return ar(t+r)}function ao(e){return an(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function aa(e){let t=e.replace(/^0x/,"");if(t.length%2!=0)throw Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)r[e/2]=Number.parseInt(t.slice(e,e+2),16);return r}function as(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class al{constructor(...e){}}e.s(["BIGINT_FORMAT_RANGES",0,oG,"Class",()=>al,"NUMBER_FORMAT_RANGES",0,oK,"aborted",()=>o6,"allowsEval",0,oD,"assert",()=>om,"assertEqual",()=>od,"assertIs",()=>of,"assertNever",()=>oh,"assertNotEqual",()=>op,"assignProp",()=>oA,"base64ToUint8Array",()=>ar,"base64urlToUint8Array",()=>ai,"cached",()=>ob,"captureStackTrace",0,oP,"cleanEnum",()=>at,"cleanRegex",()=>o_,"clone",()=>oF,"cloneDef",()=>oT,"createTransparentProxy",()=>oq,"defineLazy",()=>oS,"esc",()=>oU,"escapeRegex",()=>oZ,"extend",()=>oQ,"finalizeIssue",()=>o5,"floatSafeRemainder",()=>oE,"getElementAtPath",()=>oO,"getEnumValues",()=>og,"getLengthableOrigin",()=>o8,"getParsedType",0,e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return"promise";if("u">typeof Map&&e instanceof Map)return"map";if("u">typeof Set&&e instanceof Set)return"set";if("u">typeof Date&&e instanceof Date)return"date";if("u">typeof File&&e instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${t}`)}},"getSizableOrigin",()=>o9,"hexToUint8Array",()=>aa,"isObject",()=>oN,"isPlainObject",()=>oL,"issue",()=>ae,"joinValues",()=>oy,"jsonStringifyReplacer",()=>ov,"merge",()=>o0,"mergeDefs",()=>oI,"normalizeParams",()=>oH,"nullish",()=>ow,"numKeys",()=>oz,"objectClone",()=>ok,"omit",()=>oY,"optionalKeys",()=>oW,"parsedType",()=>o7,"partial",()=>o1,"pick",()=>oJ,"prefixIssues",()=>o2,"primitiveTypes",0,oB,"promiseAllObject",()=>oR,"propertyKeyTypes",0,oM,"randomString",()=>o$,"required",()=>o4,"safeExtend",()=>oX,"shallowClone",()=>oj,"slugify",()=>oC,"stringifyPrimitive",()=>oV,"uint8ArrayToBase64",()=>an,"uint8ArrayToBase64url",()=>ao,"uint8ArrayToHex",()=>as,"unwrapMessage",()=>o3],799764);let ac=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,ov,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},au=oo("$ZodError",ac),ad=oo("$ZodError",ac,{Parent:Error});function ap(e,t=e=>e.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function af(e,t=e=>e.message){let r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code&&i.errors.length)i.errors.map(e=>n({issues:e}));else if("invalid_key"===i.code)n({issues:i.issues});else if("invalid_element"===i.code)n({issues:i.issues});else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r}function ah(e,t=e=>e.message){let r={errors:[]},n=(e,i=[])=>{var o,a;for(let s of e.issues)if("invalid_union"===s.code&&s.errors.length)s.errors.map(e=>n({issues:e},s.path));else if("invalid_key"===s.code)n({issues:s.issues},s.path);else if("invalid_element"===s.code)n({issues:s.issues},s.path);else{let e=[...i,...s.path];if(0===e.length){r.errors.push(t(s));continue}let n=r,l=0;for(;l<e.length;){let r=e[l],i=l===e.length-1;"string"==typeof r?(n.properties??(n.properties={}),(o=n.properties)[r]??(o[r]={errors:[]}),n=n.properties[r]):(n.items??(n.items=[]),(a=n.items)[r]??(a[r]={errors:[]}),n=n.items[r]),i&&n.errors.push(t(s)),l++}}};return n(e),r}function am(e){let t=[];for(let r of e.map(e=>"object"==typeof e?e.key:e))"number"==typeof r?t.push(`[${r}]`):"symbol"==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function ag(e){let t=[];for(let r of[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length))t.push(` ${r.message}`),r.path?.length&&t.push(`   at ${am(r.path)}`);return t.join("\n")}e.s(["$ZodError",0,au,"$ZodRealError",0,ad,"flattenError",()=>ap,"formatError",()=>af,"prettifyError",()=>ag,"toDotPath",()=>am,"treeifyError",()=>ah],356898);let ay=e=>(t,r,n,i)=>{let o=n?Object.assign(n,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},o);if(a instanceof Promise)throw new os;if(a.issues.length){let t=new(i?.Err??e)(a.issues.map(e=>o5(e,o,ou())));throw oP(t,i?.callee),t}return a.value},av=ay(ad),ab=e=>async(t,r,n,i)=>{let o=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){let t=new(i?.Err??e)(a.issues.map(e=>o5(e,o,ou())));throw oP(t,i?.callee),t}return a.value},aw=ab(ad),a_=e=>(t,r,n)=>{let i=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new os;return o.issues.length?{success:!1,error:new(e??au)(o.issues.map(e=>o5(e,i,ou())))}:{success:!0,data:o.value}},aE=a_(ad),ax=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},o=t._zod.run({value:r,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(e=>o5(e,i,ou())))}:{success:!0,data:o.value}},aS=ax(ad),ak=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ay(e)(t,r,i)},aA=ak(ad),aI=e=>(t,r,n)=>ay(e)(t,r,n),aT=aI(ad),aO=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ab(e)(t,r,i)},aR=aO(ad),a$=e=>async(t,r,n)=>ab(e)(t,r,n),aU=a$(ad),aC=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return a_(e)(t,r,i)},aP=aC(ad),aN=e=>(t,r,n)=>a_(e)(t,r,n),aD=aN(ad),aL=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ax(e)(t,r,i)},aj=aL(ad),az=e=>async(t,r,n)=>ax(e)(t,r,n),aM=az(ad);e.s(["_decode",0,aI,"_decodeAsync",0,a$,"_encode",0,ak,"_encodeAsync",0,aO,"_parse",0,ay,"_parseAsync",0,ab,"_safeDecode",0,aN,"_safeDecodeAsync",0,az,"_safeEncode",0,aC,"_safeEncodeAsync",0,aL,"_safeParse",0,a_,"_safeParseAsync",0,ax,"decode",0,aT,"decodeAsync",0,aU,"encode",0,aA,"encodeAsync",0,aR,"parse",0,av,"parseAsync",0,aw,"safeDecode",0,aD,"safeDecodeAsync",0,aM,"safeEncode",0,aP,"safeEncodeAsync",0,aj,"safeParse",0,aE,"safeParseAsync",0,aS],139443);let aB=/^[cC][^\s-]{8,}$/,aZ=/^[0-9a-z]+$/,aF=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,aH=/^[0-9a-vA-V]{20}$/,aq=/^[A-Za-z0-9]{27}$/,aV=/^[a-zA-Z0-9_-]{21}$/,aW=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,aK=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,aG=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,aJ=aG(4),aY=aG(6),aQ=aG(7),aX=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,a0=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u;function a1(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let a4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,a6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,a2=e=>{let t=oZ(e??":");return RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},a3=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,a5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,a9=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,a8=/^[A-Za-z0-9_-]*$/,a7=/^\+[1-9]\d{6,14}$/,se="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",st=RegExp(`^${se}$`);function sr(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function sn(e){return RegExp(`^${sr(e)}$`)}function si(e){let t=sr({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${t}(?:${r.join("|")})`;return RegExp(`^${se}T(?:${n})$`)}let so=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},sa=/^-?\d+n?$/,ss=/^-?\d+$/,sl=/^-?\d+(?:\.\d+)?$/,sc=/^(?:true|false)$/i,su=/^null$/i,sd=/^undefined$/i,sp=/^[^A-Z]*$/,sf=/^[^a-z]*$/;function sh(e,t){return RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function sm(e){return RegExp(`^[A-Za-z0-9_-]{${e}}$`)}let sg=sh(22,"=="),sy=sm(22),sv=sh(27,"="),sb=sm(27),sw=sh(43,"="),s_=sm(43),sE=sh(64,""),sx=sm(64),sS=sh(86,"=="),sk=sm(86);e.s(["base64",0,a9,"base64url",0,a8,"bigint",0,sa,"boolean",0,sc,"browserEmail",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"cidrv4",0,a3,"cidrv6",0,a5,"cuid",0,aB,"cuid2",0,aZ,"date",0,st,"datetime",()=>si,"domain",0,/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,"duration",0,aW,"e164",0,a7,"email",0,aX,"emoji",()=>a1,"extendedDuration",0,/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,"guid",0,aK,"hex",0,/^[0-9a-fA-F]*$/,"hostname",0,/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,"html5Email",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"idnEmail",0,a0,"integer",0,ss,"ipv4",0,a4,"ipv6",0,a6,"ksuid",0,aq,"lowercase",0,sp,"mac",0,a2,"md5_base64",0,sg,"md5_base64url",0,sy,"md5_hex",0,/^[0-9a-fA-F]{32}$/,"nanoid",0,aV,"null",()=>su,"number",0,sl,"rfc5322Email",0,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"sha1_base64",0,sv,"sha1_base64url",0,sb,"sha1_hex",0,/^[0-9a-fA-F]{40}$/,"sha256_base64",0,sw,"sha256_base64url",0,s_,"sha256_hex",0,/^[0-9a-fA-F]{64}$/,"sha384_base64",0,sE,"sha384_base64url",0,sx,"sha384_hex",0,/^[0-9a-fA-F]{96}$/,"sha512_base64",0,sS,"sha512_base64url",0,sk,"sha512_hex",0,/^[0-9a-fA-F]{128}$/,"string",0,so,"time",()=>sn,"ulid",0,aF,"undefined",()=>sd,"unicodeEmail",0,a0,"uppercase",0,sf,"uuid",0,aG,"uuid4",0,aJ,"uuid6",0,aY,"uuid7",0,aQ,"xid",0,aH],763393);let sA=oo("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),sI={number:"number",bigint:"bigint",object:"date"},sT=oo("$ZodCheckLessThan",(e,t)=>{sA.init(e,t);let r=sI[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??1/0;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:"object"==typeof t.value?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),sO=oo("$ZodCheckGreaterThan",(e,t)=>{sA.init(e,t);let r=sI[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??-1/0;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:"object"==typeof t.value?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),sR=oo("$ZodCheckMultipleOf",(e,t)=>{sA.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===oE(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),s$=oo("$ZodCheckNumberFormat",(e,t)=>{sA.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[i,o]=oK[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=i,n.maximum=o,r&&(n.pattern=ss)}),e._zod.check=a=>{let s=a.value;if(r){if(!Number.isInteger(s))return void a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:s,inst:e});if(!Number.isSafeInteger(s))return void(s>0?a.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}):a.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}))}s<i&&a.issues.push({origin:"number",input:s,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>o&&a.issues.push({origin:"number",input:s,code:"too_big",maximum:o,inclusive:!0,inst:e,continue:!t.abort})}}),sU=oo("$ZodCheckBigIntFormat",(e,t)=>{sA.init(e,t);let[r,n]=oG[t.format];e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,i.minimum=r,i.maximum=n}),e._zod.check=i=>{let o=i.value;o<r&&i.issues.push({origin:"bigint",input:o,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),o>n&&i.issues.push({origin:"bigint",input:o,code:"too_big",maximum:n,inclusive:!0,inst:e,continue:!t.abort})}}),sC=oo("$ZodCheckMaxSize",(e,t)=>{var r;sA.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!ow(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;n.size<=t.maximum||r.issues.push({origin:o9(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),sP=oo("$ZodCheckMinSize",(e,t)=>{var r;sA.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!ow(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;n.size>=t.minimum||r.issues.push({origin:o9(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),sN=oo("$ZodCheckSizeEquals",(e,t)=>{var r;sA.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!ow(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{let n=r.value,i=n.size;if(i===t.size)return;let o=i>t.size;r.issues.push({origin:o9(n),...o?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),sD=oo("$ZodCheckMaxLength",(e,t)=>{var r;sA.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!ow(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let i=o8(n);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),sL=oo("$ZodCheckMinLength",(e,t)=>{var r;sA.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!ow(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let i=o8(n);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),sj=oo("$ZodCheckLengthEquals",(e,t)=>{var r;sA.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!ow(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,i=n.length;if(i===t.length)return;let o=o8(n),a=i>t.length;r.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),sz=oo("$ZodCheckStringFormat",(e,t)=>{var r,n;sA.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),sM=oo("$ZodCheckRegex",(e,t)=>{sz.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),sB=oo("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=sp),sz.init(e,t)}),sZ=oo("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=sf),sz.init(e,t)}),sF=oo("$ZodCheckIncludes",(e,t)=>{sA.init(e,t);let r=oZ(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),sH=oo("$ZodCheckStartsWith",(e,t)=>{sA.init(e,t);let r=RegExp(`^${oZ(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),sq=oo("$ZodCheckEndsWith",(e,t)=>{sA.init(e,t);let r=RegExp(`.*${oZ(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function sV(e,t,r){e.issues.length&&t.issues.push(...o2(r,e.issues))}let sW=oo("$ZodCheckProperty",(e,t)=>{sA.init(e,t),e._zod.check=e=>{let r=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(r=>sV(r,e,t.property));sV(r,e,t.property)}}),sK=oo("$ZodCheckMimeType",(e,t)=>{sA.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}}),sG=oo("$ZodCheckOverwrite",(e,t)=>{sA.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});e.s(["$ZodCheck",0,sA,"$ZodCheckBigIntFormat",0,sU,"$ZodCheckEndsWith",0,sq,"$ZodCheckGreaterThan",0,sO,"$ZodCheckIncludes",0,sF,"$ZodCheckLengthEquals",0,sj,"$ZodCheckLessThan",0,sT,"$ZodCheckLowerCase",0,sB,"$ZodCheckMaxLength",0,sD,"$ZodCheckMaxSize",0,sC,"$ZodCheckMimeType",0,sK,"$ZodCheckMinLength",0,sL,"$ZodCheckMinSize",0,sP,"$ZodCheckMultipleOf",0,sR,"$ZodCheckNumberFormat",0,s$,"$ZodCheckOverwrite",0,sG,"$ZodCheckProperty",0,sW,"$ZodCheckRegex",0,sM,"$ZodCheckSizeEquals",0,sN,"$ZodCheckStartsWith",0,sH,"$ZodCheckStringFormat",0,sz,"$ZodCheckUpperCase",0,sZ],352973);class sJ{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}e.s(["Doc",()=>sJ],858078);let sY={major:4,minor:3,patch:4};e.s(["version",0,sY],320101);let sQ=oo("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=sY;let n=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&n.unshift(e),n))for(let r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,i=o6(e);for(let o of t){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(i)continue;let t=e.issues.length,a=o._zod.check(e);if(a instanceof Promise&&r?.async===!1)throw new os;if(n||a instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(i||(i=o6(e,t)))});else{if(e.issues.length===t)continue;i||(i=o6(e,t))}}return n?n.then(()=>e):e},r=(r,i,o)=>{if(o6(r))return r.aborted=!0,r;let a=t(i,n,o);if(a instanceof Promise){if(!1===o.async)throw new os;return a.then(t=>e._zod.parse(t,o))}return e._zod.parse(a,o)};e._zod.run=(i,o)=>{if(o.skipChecks)return e._zod.parse(i,o);if("backward"===o.direction){let t=e._zod.parse({value:i.value,issues:[]},{...o,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,i,o)):r(t,i,o)}let a=e._zod.parse(i,o);if(a instanceof Promise){if(!1===o.async)throw new os;return a.then(e=>t(e,n,o))}return t(a,n,o)}}oS(e,"~standard",()=>({validate:t=>{try{let r=aE(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return aS(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}))}),sX=oo("$ZodString",(e,t)=>{sQ.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??so(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),s0=oo("$ZodStringFormat",(e,t)=>{sz.init(e,t),sX.init(e,t)}),s1=oo("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=aK),s0.init(e,t)}),s4=oo("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=aG(e))}else t.pattern??(t.pattern=aG());s0.init(e,t)}),s6=oo("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=aX),s0.init(e,t)}),s2=oo("$ZodURL",(e,t)=>{s0.init(e,t),e._zod.check=r=>{try{let n=r.value.trim(),i=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=i.href:r.value=n;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),s3=oo("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=a1()),s0.init(e,t)}),s5=oo("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=aV),s0.init(e,t)}),s9=oo("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=aB),s0.init(e,t)}),s8=oo("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=aZ),s0.init(e,t)}),s7=oo("$ZodULID",(e,t)=>{t.pattern??(t.pattern=aF),s0.init(e,t)}),le=oo("$ZodXID",(e,t)=>{t.pattern??(t.pattern=aH),s0.init(e,t)}),lt=oo("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=aq),s0.init(e,t)}),lr=oo("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=si(t)),s0.init(e,t)}),ln=oo("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=st),s0.init(e,t)}),li=oo("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=sn(t)),s0.init(e,t)}),lo=oo("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=aW),s0.init(e,t)}),la=oo("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=a4),s0.init(e,t),e._zod.bag.format="ipv4"}),ls=oo("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=a6),s0.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),ll=oo("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=a2(t.delimiter)),s0.init(e,t),e._zod.bag.format="mac"}),lc=oo("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=a3),s0.init(e,t)}),lu=oo("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=a5),s0.init(e,t),e._zod.check=r=>{let n=r.value.split("/");try{if(2!==n.length)throw Error();let[e,t]=n;if(!t)throw Error();let r=Number(t);if(`${r}`!==t||r<0||r>128)throw Error();new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function ld(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let lp=oo("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=a9),s0.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{ld(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function lf(e){if(!a8.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return ld(t.padEnd(4*Math.ceil(t.length/4),"="))}let lh=oo("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=a8),s0.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{lf(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),lm=oo("$ZodE164",(e,t)=>{t.pattern??(t.pattern=a7),s0.init(e,t)});function lg(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));if("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))return!1;return!0}catch{return!1}}let ly=oo("$ZodJWT",(e,t)=>{s0.init(e,t),e._zod.check=r=>{lg(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),lv=oo("$ZodCustomStringFormat",(e,t)=>{s0.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),lb=oo("$ZodNumber",(e,t)=>{sQ.init(e,t),e._zod.pattern=e._zod.bag.pattern??sl,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let i=r.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return r;let o="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...o?{received:o}:{}}),r}}),lw=oo("$ZodNumberFormat",(e,t)=>{s$.init(e,t),lb.init(e,t)}),l_=oo("$ZodBoolean",(e,t)=>{sQ.init(e,t),e._zod.pattern=sc,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let i=r.value;return"boolean"==typeof i||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),lE=oo("$ZodBigInt",(e,t)=>{sQ.init(e,t),e._zod.pattern=sa,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(e){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),lx=oo("$ZodBigIntFormat",(e,t)=>{sU.init(e,t),lE.init(e,t)}),lS=oo("$ZodSymbol",(e,t)=>{sQ.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return"symbol"==typeof n||t.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),t}}),lk=oo("$ZodUndefined",(e,t)=>{sQ.init(e,t),e._zod.pattern=sd,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),t}}),lA=oo("$ZodNull",(e,t)=>{sQ.init(e,t),e._zod.pattern=su,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}}),lI=oo("$ZodAny",(e,t)=>{sQ.init(e,t),e._zod.parse=e=>e}),lT=oo("$ZodUnknown",(e,t)=>{sQ.init(e,t),e._zod.parse=e=>e}),lO=oo("$ZodNever",(e,t)=>{sQ.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),lR=oo("$ZodVoid",(e,t)=>{sQ.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}}),l$=oo("$ZodDate",(e,t)=>{sQ.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(e){}let i=r.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:i,...o?{received:"Invalid Date"}:{},inst:e}),r}});function lU(e,t,r){e.issues.length&&t.issues.push(...o2(r,e.issues)),t.value[r]=e.value}let lC=oo("$ZodArray",(e,t)=>{sQ.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let o=[];for(let e=0;e<i.length;e++){let a=i[e],s=t.element._zod.run({value:a,issues:[]},n);s instanceof Promise?o.push(s.then(t=>lU(t,r,e))):lU(s,r,e)}return o.length?Promise.all(o).then(()=>r):r}});function lP(e,t,r,n,i){if(e.issues.length){if(i&&!(r in n))return;t.issues.push(...o2(r,e.issues))}void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function lN(e){let t=Object.keys(e.shape);for(let r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=oW(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function lD(e,t,r,n,i,o){let a=[],s=i.keySet,l=i.catchall._zod,c=l.def.type,u="optional"===l.optout;for(let i in t){if(s.has(i))continue;if("never"===c){a.push(i);continue}let o=l.run({value:t[i],issues:[]},n);o instanceof Promise?e.push(o.then(e=>lP(e,r,i,t,u))):lP(o,r,i,t,u)}return(a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:o}),e.length)?Promise.all(e).then(()=>r):r}let lL=oo("$ZodObject",(e,t)=>{let r;sQ.init(e,t);let n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}let i=ob(()=>lN(t));oS(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values)for(let e of(r[t]??(r[t]=new Set),n.values))r[t].add(e)}return r});let o=t.catchall;e._zod.parse=(t,n)=>{r??(r=i.value);let a=t.value;if(!oN(a))return t.issues.push({expected:"object",code:"invalid_type",input:a,inst:e}),t;t.value={};let s=[],l=r.shape;for(let e of r.keys){let r=l[e],i="optional"===r._zod.optout,o=r._zod.run({value:a[e],issues:[]},n);o instanceof Promise?s.push(o.then(r=>lP(r,t,e,a,i))):lP(o,t,e,a,i)}return o?lD(s,a,t,n,i.value,e):s.length?Promise.all(s).then(()=>t):t}}),lj=oo("$ZodObjectJIT",(e,t)=>{let r,n;lL.init(e,t);let i=e._zod.parse,o=ob(()=>lN(t)),a=!oc.jitless,s=a&&oD.value,l=t.catchall;e._zod.parse=(c,u)=>{n??(n=o.value);let d=c.value;return oN(d)?a&&s&&u?.async===!1&&!0!==u.jitless?(r||(r=(e=>{let t=new sJ(["shape","payload","ctx"]),r=o.value,n=e=>{let t=oU(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let i=Object.create(null),a=0;for(let e of r.keys)i[e]=`key_${a++}`;for(let o of(t.write("const newResult = {};"),r.keys)){let r=i[o],a=oU(o),s=e[o],l=s?._zod?.optout==="optional";t.write(`const ${r} = ${n(o)};`),l?t.write(`
        if (${r}.issues.length) {
          if (${a} in input) {
            payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${a}, ...iss.path] : [${a}]
            })));
          }
        }
        
        if (${r}.value === undefined) {
          if (${a} in input) {
            newResult[${a}] = undefined;
          }
        } else {
          newResult[${a}] = ${r}.value;
        }
        
      `):t.write(`
        if (${r}.issues.length) {
          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${a}, ...iss.path] : [${a}]
          })));
        }
        
        if (${r}.value === undefined) {
          if (${a} in input) {
            newResult[${a}] = undefined;
          }
        } else {
          newResult[${a}] = ${r}.value;
        }
        
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let s=t.compile();return(t,r)=>s(e,t,r)})(t.shape)),c=r(c,u),l)?lD([],d,c,u,n,e):c:i(c,u):(c.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),c)}});function lz(e,t,r,n){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;let i=e.filter(e=>!o6(e));return 1===i.length?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>o5(e,n,ou())))}),t)}let lM=oo("$ZodUnion",(e,t)=>{sQ.init(e,t),oS(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),oS(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),oS(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),oS(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>o_(e.source)).join("|")})$`)}});let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,o)=>{if(r)return n(i,o);let a=!1,s=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},o);if(t instanceof Promise)s.push(t),a=!0;else{if(0===t.issues.length)return t;s.push(t)}}return a?Promise.all(s).then(t=>lz(t,i,e,o)):lz(s,i,e,o)}});function lB(e,t,r,n){let i=e.filter(e=>0===e.issues.length);return 1===i.length?t.value=i[0].value:0===i.length?t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>o5(e,n,ou())))}):t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:[],inclusive:!1}),t}let lZ=oo("$ZodXor",(e,t)=>{lM.init(e,t),t.inclusive=!1;let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,o)=>{if(r)return n(i,o);let a=!1,s=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},o);t instanceof Promise?(s.push(t),a=!0):s.push(t)}return a?Promise.all(s).then(t=>lB(t,i,e,o)):lB(s,i,e,o)}}),lF=oo("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,lM.init(e,t);let r=e._zod.parse;oS(e._zod,"propValues",()=>{let e={};for(let r of t.options){let n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(n))for(let n of(e[t]||(e[t]=new Set),r))e[t].add(n)}return e});let n=ob(()=>{let e=t.options,r=new Map;for(let n of e){let e=n._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(i,o)=>{let a=i.value;if(!oN(a))return i.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),i;let s=n.value.get(a?.[t.discriminator]);return s?s._zod.run(i,o):t.unionFallback?r(i,o):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:a,path:[t.discriminator],inst:e}),i)}}),lH=oo("$ZodIntersection",(e,t)=>{sQ.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,i=t.left._zod.run({value:n,issues:[]},r),o=t.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([t,r])=>lq(e,t,r)):lq(e,i,o)}});function lq(e,t,r){let n,i=new Map;for(let r of t.issues)if("unrecognized_keys"===r.code)for(let e of(n??(n=r),r.keys))i.has(e)||i.set(e,{}),i.get(e).l=!0;else e.issues.push(r);for(let t of r.issues)if("unrecognized_keys"===t.code)for(let e of t.keys)i.has(e)||i.set(e,{}),i.get(e).r=!0;else e.issues.push(t);let o=[...i].filter(([,e])=>e.l&&e.r).map(([e])=>e);if(o.length&&n&&e.issues.push({...n,keys:o}),o6(e))return e;let a=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(oL(t)&&oL(r)){let n=Object.keys(r),i=Object.keys(t).filter(e=>-1!==n.indexOf(e)),o={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};o[n]=i.data}return{valid:!0,data:o}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let i=0;i<t.length;i++){let o=e(t[i],r[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!a.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return e.value=a.data,e}let lV=oo("$ZodTuple",(e,t)=>{sQ.init(e,t);let r=t.items;e._zod.parse=(n,i)=>{let o=n.value;if(!Array.isArray(o))return n.issues.push({input:o,inst:e,expected:"tuple",code:"invalid_type"}),n;n.value=[];let a=[],s=[...r].reverse().findIndex(e=>"optional"!==e._zod.optin),l=-1===s?0:r.length-s;if(!t.rest){let t=o.length>r.length,i=o.length<l-1;if(t||i)return n.issues.push({...t?{code:"too_big",maximum:r.length,inclusive:!0}:{code:"too_small",minimum:r.length},input:o,inst:e,origin:"array"}),n}let c=-1;for(let e of r){if(++c>=o.length&&c>=l)continue;let t=e._zod.run({value:o[c],issues:[]},i);t instanceof Promise?a.push(t.then(e=>lW(e,n,c))):lW(t,n,c)}if(t.rest)for(let e of o.slice(r.length)){c++;let r=t.rest._zod.run({value:e,issues:[]},i);r instanceof Promise?a.push(r.then(e=>lW(e,n,c))):lW(r,n,c)}return a.length?Promise.all(a).then(()=>n):n}});function lW(e,t,r){e.issues.length&&t.issues.push(...o2(r,e.issues)),t.value[r]=e.value}let lK=oo("$ZodRecord",(e,t)=>{sQ.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!oL(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let o=[],a=t.keyType._zod.values;if(a){let s;r.value={};let l=new Set;for(let e of a)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){l.add("number"==typeof e?e.toString():e);let a=t.valueType._zod.run({value:i[e],issues:[]},n);a instanceof Promise?o.push(a.then(t=>{t.issues.length&&r.issues.push(...o2(e,t.issues)),r.value[e]=t.value})):(a.issues.length&&r.issues.push(...o2(e,a.issues)),r.value[e]=a.value)}for(let e in i)l.has(e)||(s=s??[]).push(e);s&&s.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:s})}else for(let a of(r.value={},Reflect.ownKeys(i))){if("__proto__"===a)continue;let s=t.keyType._zod.run({value:a,issues:[]},n);if(s instanceof Promise)throw Error("Async schemas not supported in object keys currently");if("string"==typeof a&&sl.test(a)&&s.issues.length&&s.issues.some(e=>"invalid_type"===e.code&&"number"===e.expected)){let e=t.keyType._zod.run({value:Number(a),issues:[]},n);if(e instanceof Promise)throw Error("Async schemas not supported in object keys currently");0===e.issues.length&&(s=e)}if(s.issues.length){"loose"===t.mode?r.value[a]=i[a]:r.issues.push({code:"invalid_key",origin:"record",issues:s.issues.map(e=>o5(e,n,ou())),input:a,path:[a],inst:e});continue}let l=t.valueType._zod.run({value:i[a],issues:[]},n);l instanceof Promise?o.push(l.then(e=>{e.issues.length&&r.issues.push(...o2(a,e.issues)),r.value[s.value]=e.value})):(l.issues.length&&r.issues.push(...o2(a,l.issues)),r.value[s.value]=l.value)}return o.length?Promise.all(o).then(()=>r):r}}),lG=oo("$ZodMap",(e,t)=>{sQ.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),r;let o=[];for(let[a,s]of(r.value=new Map,i)){let l=t.keyType._zod.run({value:a,issues:[]},n),c=t.valueType._zod.run({value:s,issues:[]},n);l instanceof Promise||c instanceof Promise?o.push(Promise.all([l,c]).then(([t,o])=>{lJ(t,o,r,a,i,e,n)})):lJ(l,c,r,a,i,e,n)}return o.length?Promise.all(o).then(()=>r):r}});function lJ(e,t,r,n,i,o,a){e.issues.length&&(oM.has(typeof n)?r.issues.push(...o2(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:i,inst:o,issues:e.issues.map(e=>o5(e,a,ou()))})),t.issues.length&&(oM.has(typeof n)?r.issues.push(...o2(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:i,inst:o,key:n,issues:t.issues.map(e=>o5(e,a,ou()))})),r.value.set(e.value,t.value)}let lY=oo("$ZodSet",(e,t)=>{sQ.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Set))return r.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),r;let o=[];for(let e of(r.value=new Set,i)){let i=t.valueType._zod.run({value:e,issues:[]},n);i instanceof Promise?o.push(i.then(e=>lQ(e,r))):lQ(i,r)}return o.length?Promise.all(o).then(()=>r):r}});function lQ(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}let lX=oo("$ZodEnum",(e,t)=>{sQ.init(e,t);let r=og(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=RegExp(`^(${r.filter(e=>oM.has(typeof e)).map(e=>"string"==typeof e?oZ(e):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{let o=t.value;return n.has(o)||t.issues.push({code:"invalid_value",values:r,input:o,inst:e}),t}}),l0=oo("$ZodLiteral",(e,t)=>{if(sQ.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");let r=new Set(t.values);e._zod.values=r,e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?oZ(e):e?oZ(e.toString()):String(e)).join("|")})$`),e._zod.parse=(n,i)=>{let o=n.value;return r.has(o)||n.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),n}}),l1=oo("$ZodFile",(e,t)=>{sQ.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}}),l4=oo("$ZodTransform",(e,t)=>{sQ.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new ol(e.constructor.name);let i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(e=>(r.value=e,r));if(i instanceof Promise)throw new os;return r.value=i,r}});function l6(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let l2=oo("$ZodOptional",(e,t)=>{sQ.init(e,t),e._zod.optin="optional",e._zod.optout="optional",oS(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),oS(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${o_(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>l6(t,e.value)):l6(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),l3=oo("$ZodExactOptional",(e,t)=>{l2.init(e,t),oS(e._zod,"values",()=>t.innerType._zod.values),oS(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(e,r)=>t.innerType._zod.run(e,r)}),l5=oo("$ZodNullable",(e,t)=>{sQ.init(e,t),oS(e._zod,"optin",()=>t.innerType._zod.optin),oS(e._zod,"optout",()=>t.innerType._zod.optout),oS(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${o_(e.source)}|null)$`):void 0}),oS(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),l9=oo("$ZodDefault",(e,t)=>{sQ.init(e,t),e._zod.optin="optional",oS(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>l8(e,t)):l8(n,t)}});function l8(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let l7=oo("$ZodPrefault",(e,t)=>{sQ.init(e,t),e._zod.optin="optional",oS(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),ce=oo("$ZodNonOptional",(e,t)=>{sQ.init(e,t),oS(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(t=>ct(t,e)):ct(i,e)}});function ct(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let cr=oo("$ZodSuccess",(e,t)=>{sQ.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new ol("ZodSuccess");let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}}),cn=oo("$ZodCatch",(e,t)=>{sQ.init(e,t),oS(e._zod,"optin",()=>t.innerType._zod.optin),oS(e._zod,"optout",()=>t.innerType._zod.optout),oS(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>o5(e,r,ou()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>o5(e,r,ou()))},input:e.value}),e.issues=[]),e)}}),ci=oo("$ZodNaN",(e,t)=>{sQ.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),co=oo("$ZodPipe",(e,t)=>{sQ.init(e,t),oS(e._zod,"values",()=>t.in._zod.values),oS(e._zod,"optin",()=>t.in._zod.optin),oS(e._zod,"optout",()=>t.out._zod.optout),oS(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>ca(e,t.in,r)):ca(n,t.in,r)}let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>ca(e,t.out,r)):ca(n,t.out,r)}});function ca(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}let cs=oo("$ZodCodec",(e,t)=>{sQ.init(e,t),oS(e._zod,"values",()=>t.in._zod.values),oS(e._zod,"optin",()=>t.in._zod.optin),oS(e._zod,"optout",()=>t.out._zod.optout),oS(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>cl(e,t,r)):cl(n,t,r)}{let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>cl(e,t,r)):cl(n,t,r)}}});function cl(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){let n=t.transform(e.value,e);return n instanceof Promise?n.then(n=>cc(e,n,t.out,r)):cc(e,n,t.out,r)}{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(n=>cc(e,n,t.in,r)):cc(e,n,t.in,r)}}function cc(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}let cu=oo("$ZodReadonly",(e,t)=>{sQ.init(e,t),oS(e._zod,"propValues",()=>t.innerType._zod.propValues),oS(e._zod,"values",()=>t.innerType._zod.values),oS(e._zod,"optin",()=>t.innerType?._zod?.optin),oS(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(cd):cd(n)}});function cd(e){return e.value=Object.freeze(e.value),e}let cp=oo("$ZodTemplateLiteral",(e,t)=>{sQ.init(e,t);let r=[];for(let e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw Error(`Invalid template literal part: ${e._zod.traits}`);let n=+!!t.startsWith("^"),i=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(n,i))}else if(null===e||oB.has(typeof e))r.push(oZ(`${e}`));else throw Error(`Invalid template literal part: ${e}`);e._zod.pattern=RegExp(`^${r.join("")}$`),e._zod.parse=(r,n)=>("string"!=typeof r.value?r.issues.push({input:r.value,inst:e,expected:"string",code:"invalid_type"}):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source})),r)}),cf=oo("$ZodFunction",(e,t)=>(sQ.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw Error("implement() must be called with a function");return function(...r){let n=Reflect.apply(t,this,e._def.input?av(e._def.input,r):r);return e._def.output?av(e._def.output,n):n}},e.implementAsync=t=>{if("function"!=typeof t)throw Error("implementAsync() must be called with a function");return async function(...r){let n=e._def.input?await aw(e._def.input,r):r,i=await Reflect.apply(t,this,n);return e._def.output?await aw(e._def.output,i):i}},e._zod.parse=(t,r)=>("function"!=typeof t.value?t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}):e._def.output&&"promise"===e._def.output._zod.def.type?t.value=e.implementAsync(t.value):t.value=e.implement(t.value),t),e.input=(...t)=>{let r=e.constructor;return new r(Array.isArray(t[0])?{type:"function",input:new lV({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}:{type:"function",input:t[0],output:e._def.output})},e.output=t=>new e.constructor({type:"function",input:e._def.input,output:t}),e)),ch=oo("$ZodPromise",(e,t)=>{sQ.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))}),cm=oo("$ZodLazy",(e,t)=>{sQ.init(e,t),oS(e._zod,"innerType",()=>t.getter()),oS(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),oS(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),oS(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),oS(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),cg=oo("$ZodCustom",(e,t)=>{sA.init(e,t),sQ.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(t=>cy(t,r,n,e));cy(i,r,n,e)}});function cy(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(ae(e))}}function cv(e,t,r,n){let i=Math.abs(e),o=i%10,a=i%100;return a>=11&&a<=19?n:1===o?t:o>=2&&o<=4?r:n}function cb(){let e,t,r;return{localeError:(e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;return`Invalid input: expected ${e}, received ${i}`}case"invalid_value":if(1===n.values.length)return`Invalid input: expected ${oV(n.values[0])}`;return`Invalid option: expected one of ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Too big: expected ${n.origin??"value"} to have ${t}${n.maximum.toString()} ${r.unit??"elements"}`;return`Too big: expected ${n.origin??"value"} to be ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Too small: expected ${n.origin} to have ${t}${n.minimum.toString()} ${r.unit}`;return`Too small: expected ${n.origin} to be ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Invalid string: must start with "${n.prefix}"`;if("ends_with"===n.format)return`Invalid string: must end with "${n.suffix}"`;if("includes"===n.format)return`Invalid string: must include "${n.includes}"`;if("regex"===n.format)return`Invalid string: must match pattern ${n.pattern}`;return`Invalid ${t[n.format]??n.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`}})}}function cw(e,t,r){return 1===Math.abs(e)?t:r}function c_(e){if(!e)return"";let t=e[e.length-1];return e+(["","","","","","",""].includes(t)?"":"")}function cE(){let e,t,r;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:" (Array)",null:" (null)"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`  instanceof ${n.expected}  ${i}`;return`  ${e}  ${i}`}case"invalid_value":if(1===n.values.length)return`  ${oV(n.values[0])}`;return`  ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`  ${n.origin??""} ${t} ${n.maximum.toString()} ${r.unit??""}`;return`  ${n.origin??""} ${t} ${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`  ${n.origin} ${t} ${n.minimum.toString()} ${r.unit}`;return`  ${n.origin} ${t} ${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`  "${n.prefix}"`;if("ends_with"===n.format)return`  "${n.suffix}"`;if("includes"===n.format)return`  "${n.includes}"`;if("regex"===n.format)return`  ${n.pattern}`;return` ${t[n.format]??n.format}`;case"not_multiple_of":return`  ${n.divisor}`;case"unrecognized_keys":return` ${oy(n.keys,", ")}`;case"invalid_key":return` ${n.origin}`;case"invalid_union":default:return``;case"invalid_element":return` ${n.origin}`}})}}e.s(["$ZodAny",0,lI,"$ZodArray",0,lC,"$ZodBase64",0,lp,"$ZodBase64URL",0,lh,"$ZodBigInt",0,lE,"$ZodBigIntFormat",0,lx,"$ZodBoolean",0,l_,"$ZodCIDRv4",0,lc,"$ZodCIDRv6",0,lu,"$ZodCUID",0,s9,"$ZodCUID2",0,s8,"$ZodCatch",0,cn,"$ZodCodec",0,cs,"$ZodCustom",0,cg,"$ZodCustomStringFormat",0,lv,"$ZodDate",0,l$,"$ZodDefault",0,l9,"$ZodDiscriminatedUnion",0,lF,"$ZodE164",0,lm,"$ZodEmail",0,s6,"$ZodEmoji",0,s3,"$ZodEnum",0,lX,"$ZodExactOptional",0,l3,"$ZodFile",0,l1,"$ZodFunction",0,cf,"$ZodGUID",0,s1,"$ZodIPv4",0,la,"$ZodIPv6",0,ls,"$ZodISODate",0,ln,"$ZodISODateTime",0,lr,"$ZodISODuration",0,lo,"$ZodISOTime",0,li,"$ZodIntersection",0,lH,"$ZodJWT",0,ly,"$ZodKSUID",0,lt,"$ZodLazy",0,cm,"$ZodLiteral",0,l0,"$ZodMAC",0,ll,"$ZodMap",0,lG,"$ZodNaN",0,ci,"$ZodNanoID",0,s5,"$ZodNever",0,lO,"$ZodNonOptional",0,ce,"$ZodNull",0,lA,"$ZodNullable",0,l5,"$ZodNumber",0,lb,"$ZodNumberFormat",0,lw,"$ZodObject",0,lL,"$ZodObjectJIT",0,lj,"$ZodOptional",0,l2,"$ZodPipe",0,co,"$ZodPrefault",0,l7,"$ZodPromise",0,ch,"$ZodReadonly",0,cu,"$ZodRecord",0,lK,"$ZodSet",0,lY,"$ZodString",0,sX,"$ZodStringFormat",0,s0,"$ZodSuccess",0,cr,"$ZodSymbol",0,lS,"$ZodTemplateLiteral",0,cp,"$ZodTransform",0,l4,"$ZodTuple",0,lV,"$ZodType",0,sQ,"$ZodULID",0,s7,"$ZodURL",0,s2,"$ZodUUID",0,s4,"$ZodUndefined",0,lk,"$ZodUnion",0,lM,"$ZodUnknown",0,lT,"$ZodVoid",0,lR,"$ZodXID",0,le,"$ZodXor",0,lZ,"isValidBase64",()=>ld,"isValidBase64URL",()=>lf,"isValidJWT",()=>lg],459367);let cx=e=>e.charAt(0).toUpperCase()+e.slice(1);function cS(e){let t=Math.abs(e),r=t%10,n=t%100;return n>=11&&n<=19||0===r?"many":1===r?"one":"few"}function ck(e,t,r,n){let i=Math.abs(e),o=i%10,a=i%100;return a>=11&&a<=19?n:1===o?t:o>=2&&o<=4?r:n}function cA(){let e,t,r;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "},r={nan:"NaN",number:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`  :  instanceof ${n.expected},  ${i}`;return`  :  ${e},  ${i}`}case"invalid_value":if(1===n.values.length)return`  :  ${oV(n.values[0])}`;return` :    ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` : ,  ${n.origin??""} ${r.verb} ${t}${n.maximum.toString()} ${r.unit??""}`;return` : ,  ${n.origin??""}  ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` : ,  ${n.origin} ${r.verb} ${t}${n.minimum.toString()} ${r.unit}`;return` : ,  ${n.origin}  ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return` :    "${n.prefix}"`;if("ends_with"===n.format)return` :    "${n.suffix}"`;if("includes"===n.format)return` :   "${n.includes}"`;if("regex"===n.format)return` :    ${n.pattern}`;return` ${t[n.format]??n.format}`;case"not_multiple_of":return` :    ${n.divisor}`;case"unrecognized_keys":return` ${n.keys.length>1?"":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`   ${n.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${n.origin}`;default:return`  `}})}}e.s([],810412);let cI=Symbol("ZodOutput"),cT=Symbol("ZodInput");class cO{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];return this._map.set(e,r),r&&"object"==typeof r&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};delete r.id;let n={...r,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function cR(){return new cO}(el=globalThis).__zod_globalRegistry??(el.__zod_globalRegistry=cR());let c$=globalThis.__zod_globalRegistry;function cU(e,t){return new e({type:"string",...oH(t)})}function cC(e,t){return new e({type:"string",coerce:!0,...oH(t)})}function cP(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...oH(t)})}function cN(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...oH(t)})}function cD(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...oH(t)})}function cL(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...oH(t)})}function cj(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...oH(t)})}function cz(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...oH(t)})}function cM(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...oH(t)})}function cB(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...oH(t)})}function cZ(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...oH(t)})}function cF(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...oH(t)})}function cH(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...oH(t)})}function cq(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...oH(t)})}function cV(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...oH(t)})}function cW(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...oH(t)})}function cK(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...oH(t)})}function cG(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...oH(t)})}function cJ(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...oH(t)})}function cY(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...oH(t)})}function cQ(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...oH(t)})}function cX(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...oH(t)})}function c0(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...oH(t)})}function c1(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...oH(t)})}function c4(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...oH(t)})}e.s(["$ZodRegistry",()=>cO,"$input",0,cT,"$output",0,cI,"globalRegistry",0,c$,"registry",()=>cR],732084);let c6={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function c2(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...oH(t)})}function c3(e,t){return new e({type:"string",format:"date",check:"string_format",...oH(t)})}function c5(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...oH(t)})}function c9(e,t){return new e({type:"string",format:"duration",check:"string_format",...oH(t)})}function c8(e,t){return new e({type:"number",checks:[],...oH(t)})}function c7(e,t){return new e({type:"number",coerce:!0,checks:[],...oH(t)})}function ue(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...oH(t)})}function ut(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...oH(t)})}function ur(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...oH(t)})}function un(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...oH(t)})}function ui(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...oH(t)})}function uo(e,t){return new e({type:"boolean",...oH(t)})}function ua(e,t){return new e({type:"boolean",coerce:!0,...oH(t)})}function us(e,t){return new e({type:"bigint",...oH(t)})}function ul(e,t){return new e({type:"bigint",coerce:!0,...oH(t)})}function uc(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...oH(t)})}function uu(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...oH(t)})}function ud(e,t){return new e({type:"symbol",...oH(t)})}function up(e,t){return new e({type:"undefined",...oH(t)})}function uf(e,t){return new e({type:"null",...oH(t)})}function uh(e){return new e({type:"any"})}function um(e){return new e({type:"unknown"})}function ug(e,t){return new e({type:"never",...oH(t)})}function uy(e,t){return new e({type:"void",...oH(t)})}function uv(e,t){return new e({type:"date",...oH(t)})}function ub(e,t){return new e({type:"date",coerce:!0,...oH(t)})}function uw(e,t){return new e({type:"nan",...oH(t)})}function u_(e,t){return new sT({check:"less_than",...oH(t),value:e,inclusive:!1})}function uE(e,t){return new sT({check:"less_than",...oH(t),value:e,inclusive:!0})}function ux(e,t){return new sO({check:"greater_than",...oH(t),value:e,inclusive:!1})}function uS(e,t){return new sO({check:"greater_than",...oH(t),value:e,inclusive:!0})}function uk(e){return ux(0,e)}function uA(e){return u_(0,e)}function uI(e){return uE(0,e)}function uT(e){return uS(0,e)}function uO(e,t){return new sR({check:"multiple_of",...oH(t),value:e})}function uR(e,t){return new sC({check:"max_size",...oH(t),maximum:e})}function u$(e,t){return new sP({check:"min_size",...oH(t),minimum:e})}function uU(e,t){return new sN({check:"size_equals",...oH(t),size:e})}function uC(e,t){return new sD({check:"max_length",...oH(t),maximum:e})}function uP(e,t){return new sL({check:"min_length",...oH(t),minimum:e})}function uN(e,t){return new sj({check:"length_equals",...oH(t),length:e})}function uD(e,t){return new sM({check:"string_format",format:"regex",...oH(t),pattern:e})}function uL(e){return new sB({check:"string_format",format:"lowercase",...oH(e)})}function uj(e){return new sZ({check:"string_format",format:"uppercase",...oH(e)})}function uz(e,t){return new sF({check:"string_format",format:"includes",...oH(t),includes:e})}function uM(e,t){return new sH({check:"string_format",format:"starts_with",...oH(t),prefix:e})}function uB(e,t){return new sq({check:"string_format",format:"ends_with",...oH(t),suffix:e})}function uZ(e,t,r){return new sW({check:"property",property:e,schema:t,...oH(r)})}function uF(e,t){return new sK({check:"mime_type",mime:e,...oH(t)})}function uH(e){return new sG({check:"overwrite",tx:e})}function uq(e){return uH(t=>t.normalize(e))}function uV(){return uH(e=>e.trim())}function uW(){return uH(e=>e.toLowerCase())}function uK(){return uH(e=>e.toUpperCase())}function uG(){return uH(e=>oC(e))}function uJ(e,t,r){return new e({type:"array",element:t,...oH(r)})}function uY(e,t,r){return new e({type:"union",options:t,...oH(r)})}function uQ(e,t,r){return new e({type:"union",options:t,inclusive:!1,...oH(r)})}function uX(e,t,r,n){return new e({type:"union",options:r,discriminator:t,...oH(n)})}function u0(e,t,r){return new e({type:"intersection",left:t,right:r})}function u1(e,t,r,n){let i=r instanceof sQ,o=i?n:r;return new e({type:"tuple",items:t,rest:i?r:null,...oH(o)})}function u4(e,t,r,n){return new e({type:"record",keyType:t,valueType:r,...oH(n)})}function u6(e,t,r,n){return new e({type:"map",keyType:t,valueType:r,...oH(n)})}function u2(e,t,r){return new e({type:"set",valueType:t,...oH(r)})}function u3(e,t,r){return new e({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t,...oH(r)})}function u5(e,t,r){return new e({type:"enum",entries:t,...oH(r)})}function u9(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...oH(r)})}function u8(e,t){return new e({type:"file",...oH(t)})}function u7(e,t){return new e({type:"transform",transform:t})}function de(e,t){return new e({type:"optional",innerType:t})}function dt(e,t){return new e({type:"nullable",innerType:t})}function dr(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof r?r():oj(r)}})}function dn(e,t,r){return new e({type:"nonoptional",innerType:t,...oH(r)})}function di(e,t){return new e({type:"success",innerType:t})}function da(e,t,r){return new e({type:"catch",innerType:t,catchValue:"function"==typeof r?r:()=>r})}function ds(e,t,r){return new e({type:"pipe",in:t,out:r})}function dl(e,t){return new e({type:"readonly",innerType:t})}function dc(e,t,r){return new e({type:"template_literal",parts:t,...oH(r)})}function du(e,t){return new e({type:"lazy",getter:t})}function dd(e,t){return new e({type:"promise",innerType:t})}function dp(e,t,r){let n=oH(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function df(e,t,r){return new e({type:"custom",check:"custom",fn:t,...oH(r)})}function dh(e){let t=dm(r=>(r.addIssue=e=>{"string"==typeof e?r.issues.push(ae(e,r.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=r.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),r.issues.push(ae(e)))},e(r.value,r)));return t}function dm(e,t){let r=new sA({check:"custom",...oH(t)});return r._zod.check=e,r}function dg(e){let t=new sA({check:"describe"});return t._zod.onattach=[t=>{let r=c$.get(t)??{};c$.add(t,{...r,description:e})}],t._zod.check=()=>{},t}function dy(e){let t=new sA({check:"meta"});return t._zod.onattach=[t=>{let r=c$.get(t)??{};c$.add(t,{...r,...e})}],t._zod.check=()=>{},t}function dv(e,t){let r=oH(t),n=r.truthy??["true","1","yes","on","y","enabled"],i=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(n=n.map(e=>"string"==typeof e?e.toLowerCase():e),i=i.map(e=>"string"==typeof e?e.toLowerCase():e));let o=new Set(n),a=new Set(i),s=e.Codec??cs,l=e.Boolean??l_,c=new s({type:"pipe",in:new(e.String??sX)({type:"string",error:r.error}),out:new l({type:"boolean",error:r.error}),transform:(e,t)=>{let n=e;return"sensitive"!==r.case&&(n=n.toLowerCase()),!!o.has(n)||!a.has(n)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...a],input:t.value,inst:c,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?n[0]||"true":i[0]||"false",error:r.error});return c}function db(e,t,r,n={}){let i=oH(n),o={...oH(n),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...i};return r instanceof RegExp&&(o.pattern=r),new e(o)}function dw(e){let t=e?.target??"draft-2020-12";return"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??c$,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function d_(e,t,r={path:[],schemaPath:[]}){var n;let i=e._zod.def,o=t.seen.get(e);if(o)return o.count++,r.schemaPath.includes(e)&&(o.cycle=r.path),o.schema;let a={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,a);let s=e._zod.toJSONSchema?.();if(s)a.schema=s;else{let n={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,a.schema,n);else{let r=a.schema,o=t.processors[i.type];if(!o)throw Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);o(e,t,r,n)}let o=e._zod.parent;o&&(a.ref||(a.ref=o),d_(o,t,n),t.seen.get(o).isParent=!0)}let l=t.metadataRegistry.get(e);return l&&Object.assign(a.schema,l),"input"===t.io&&function e(t,r){let n=r??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);let i=t._zod.def;if("transform"===i.type)return!0;if("array"===i.type)return e(i.element,n);if("set"===i.type)return e(i.valueType,n);if("lazy"===i.type)return e(i.getter(),n);if("promise"===i.type||"optional"===i.type||"nonoptional"===i.type||"nullable"===i.type||"readonly"===i.type||"default"===i.type||"prefault"===i.type)return e(i.innerType,n);if("intersection"===i.type)return e(i.left,n)||e(i.right,n);if("record"===i.type||"map"===i.type)return e(i.keyType,n)||e(i.valueType,n);if("pipe"===i.type)return e(i.in,n)||e(i.out,n);if("object"===i.type){for(let t in i.shape)if(e(i.shape[t],n))return!0;return!1}if("union"===i.type){for(let t of i.options)if(e(t,n))return!0;return!1}if("tuple"===i.type){for(let t of i.items)if(e(t,n))return!0;if(i.rest&&e(i.rest,n))return!0}return!1}(e)&&(delete a.schema.examples,delete a.schema.default),"input"===t.io&&a.schema._prefault&&((n=a.schema).default??(n.default=a.schema._prefault)),delete a.schema._prefault,t.seen.get(e).schema}function dE(e,t){let r=e.seen.get(t);if(!r)throw Error("Unprocessed schema. This is a bug in Zod.");let n=new Map;for(let t of e.seen.entries()){let r=e.metadataRegistry.get(t[0])?.id;if(r){let e=n.get(r);if(e&&e!==t[0])throw Error(`Duplicate schema id "${r}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);n.set(r,t[0])}}let i=t=>{if(t[1].schema.$ref)return;let n=t[1],{ref:i,defId:o}=(t=>{let n="draft-2020-12"===e.target?"$defs":"definitions";if(e.external){let r=e.external.registry.get(t[0])?.id,i=e.external.uri??(e=>e);if(r)return{ref:i(r)};let o=t[1].defId??t[1].schema.id??`schema${e.counter++}`;return t[1].defId=o,{defId:o,ref:`${i("__shared")}#/${n}/${o}`}}if(t[1]===r)return{ref:"#"};let i=`#/${n}/`,o=t[1].schema.id??`__schema${e.counter++}`;return{defId:o,ref:i+o}})(t);n.def={...n.schema},o&&(n.defId=o);let a=n.schema;for(let e in a)delete a[e];a.$ref=i};if("throw"===e.cycles)for(let t of e.seen.entries()){let e=t[1];if(e.cycle)throw Error(`Cycle detected: #/${e.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let r of e.seen.entries()){let n=r[1];if(t===r[0]){i(r);continue}if(e.external){let n=e.external.registry.get(r[0])?.id;if(t!==r[0]&&n){i(r);continue}}if(e.metadataRegistry.get(r[0])?.id||n.cycle||n.count>1&&"ref"===e.reused){i(r);continue}}}function dx(e,t){let r=e.seen.get(t);if(!r)throw Error("Unprocessed schema. This is a bug in Zod.");let n=t=>{let r=e.seen.get(t);if(null===r.ref)return;let i=r.def??r.schema,o={...i},a=r.ref;if(r.ref=null,a){n(a);let r=e.seen.get(a),s=r.schema;if(s.$ref&&("draft-07"===e.target||"draft-04"===e.target||"openapi-3.0"===e.target)?(i.allOf=i.allOf??[],i.allOf.push(s)):Object.assign(i,s),Object.assign(i,o),t._zod.parent===a)for(let e in i)"$ref"!==e&&"allOf"!==e&&(e in o||delete i[e]);if(s.$ref)for(let e in i)"$ref"!==e&&"allOf"!==e&&e in r.def&&JSON.stringify(i[e])===JSON.stringify(r.def[e])&&delete i[e]}let s=t._zod.parent;if(s&&s!==a){n(s);let t=e.seen.get(s);if(t?.schema.$ref&&(i.$ref=t.schema.$ref,t.def))for(let e in i)"$ref"!==e&&"allOf"!==e&&e in t.def&&JSON.stringify(i[e])===JSON.stringify(t.def[e])&&delete i[e]}e.override({zodSchema:t,jsonSchema:i,path:r.path??[]})};for(let t of[...e.seen.entries()].reverse())n(t[0]);let i={};if("draft-2020-12"===e.target?i.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===e.target?i.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===e.target?i.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){let r=e.external.registry.get(t)?.id;if(!r)throw Error("Schema is missing an `id` property");i.$id=e.external.uri(r)}Object.assign(i,r.def??r.schema);let o=e.external?.defs??{};for(let t of e.seen.entries()){let e=t[1];e.def&&e.defId&&(o[e.defId]=e.def)}e.external||Object.keys(o).length>0&&("draft-2020-12"===e.target?i.$defs=o:i.definitions=o);try{let r=JSON.parse(JSON.stringify(i));return Object.defineProperty(r,"~standard",{value:{...t["~standard"],jsonSchema:{input:dk(t,"input",e.processors),output:dk(t,"output",e.processors)}},enumerable:!1,writable:!1}),r}catch(e){throw Error("Error converting schema to JSON.")}}e.s(["TimePrecision",0,c6,"_any",()=>uh,"_array",()=>uJ,"_base64",()=>cX,"_base64url",()=>c0,"_bigint",()=>us,"_boolean",()=>uo,"_catch",()=>da,"_check",()=>dm,"_cidrv4",()=>cY,"_cidrv6",()=>cQ,"_coercedBigint",()=>ul,"_coercedBoolean",()=>ua,"_coercedDate",()=>ub,"_coercedNumber",()=>c7,"_coercedString",()=>cC,"_cuid",()=>cF,"_cuid2",()=>cH,"_custom",()=>dp,"_date",()=>uv,"_default",()=>dr,"_discriminatedUnion",()=>uX,"_e164",()=>c1,"_email",()=>cP,"_emoji",()=>cB,"_endsWith",()=>uB,"_enum",()=>u3,"_file",()=>u8,"_float32",()=>ut,"_float64",()=>ur,"_gt",()=>ux,"_gte",()=>uS,"_guid",()=>cN,"_includes",()=>uz,"_int",()=>ue,"_int32",()=>un,"_int64",()=>uc,"_intersection",()=>u0,"_ipv4",()=>cK,"_ipv6",()=>cG,"_isoDate",()=>c3,"_isoDateTime",()=>c2,"_isoDuration",()=>c9,"_isoTime",()=>c5,"_jwt",()=>c4,"_ksuid",()=>cW,"_lazy",()=>du,"_length",()=>uN,"_literal",()=>u9,"_lowercase",()=>uL,"_lt",()=>u_,"_lte",()=>uE,"_mac",()=>cJ,"_map",()=>u6,"_max",()=>uE,"_maxLength",()=>uC,"_maxSize",()=>uR,"_mime",()=>uF,"_min",()=>uS,"_minLength",()=>uP,"_minSize",()=>u$,"_multipleOf",()=>uO,"_nan",()=>uw,"_nanoid",()=>cZ,"_nativeEnum",()=>u5,"_negative",()=>uA,"_never",()=>ug,"_nonnegative",()=>uT,"_nonoptional",()=>dn,"_nonpositive",()=>uI,"_normalize",()=>uq,"_null",()=>uf,"_nullable",()=>dt,"_number",()=>c8,"_optional",()=>de,"_overwrite",()=>uH,"_pipe",()=>ds,"_positive",()=>uk,"_promise",()=>dd,"_property",()=>uZ,"_readonly",()=>dl,"_record",()=>u4,"_refine",()=>df,"_regex",()=>uD,"_set",()=>u2,"_size",()=>uU,"_slugify",()=>uG,"_startsWith",()=>uM,"_string",()=>cU,"_stringFormat",()=>db,"_stringbool",()=>dv,"_success",()=>di,"_superRefine",()=>dh,"_symbol",()=>ud,"_templateLiteral",()=>dc,"_toLowerCase",()=>uW,"_toUpperCase",()=>uK,"_transform",()=>u7,"_trim",()=>uV,"_tuple",()=>u1,"_uint32",()=>ui,"_uint64",()=>uu,"_ulid",()=>cq,"_undefined",()=>up,"_union",()=>uY,"_unknown",()=>um,"_uppercase",()=>uj,"_url",()=>cM,"_uuid",()=>cD,"_uuidv4",()=>cL,"_uuidv6",()=>cj,"_uuidv7",()=>cz,"_void",()=>uy,"_xid",()=>cV,"_xor",()=>uQ,"describe",()=>dg,"meta",()=>dy],790567);let dS=(e,t={})=>r=>{let n=dw({...r,processors:t});return d_(e,n),dE(n,e),dx(n,e)},dk=(e,t,r={})=>n=>{let{libraryOptions:i,target:o}=n??{},a=dw({...i??{},target:o,io:t,processors:r});return d_(e,a),dE(a,e),dx(a,e)};e.s(["createStandardJSONSchemaMethod",0,dk,"createToJSONSchemaMethod",0,dS,"extractDefs",()=>dE,"finalize",()=>dx,"initializeContext",()=>dw,"process",()=>d_],482780);let dA={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},dI=(e,t,r,n)=>{r.type="string";let{minimum:i,maximum:o,format:a,patterns:s,contentEncoding:l}=e._zod.bag;if("number"==typeof i&&(r.minLength=i),"number"==typeof o&&(r.maxLength=o),a&&(r.format=dA[a]??a,""===r.format&&delete r.format,"time"===a&&delete r.format),l&&(r.contentEncoding=l),s&&s.size>0){let e=[...s];1===e.length?r.pattern=e[0].source:e.length>1&&(r.allOf=[...e.map(e=>({..."draft-07"===t.target||"draft-04"===t.target||"openapi-3.0"===t.target?{type:"string"}:{},pattern:e.source}))])}},dT=(e,t,r,n)=>{let{minimum:i,maximum:o,format:a,multipleOf:s,exclusiveMaximum:l,exclusiveMinimum:c}=e._zod.bag;"string"==typeof a&&a.includes("int")?r.type="integer":r.type="number","number"==typeof c&&("draft-04"===t.target||"openapi-3.0"===t.target?(r.minimum=c,r.exclusiveMinimum=!0):r.exclusiveMinimum=c),"number"==typeof i&&(r.minimum=i,"number"==typeof c&&"draft-04"!==t.target&&(c>=i?delete r.minimum:delete r.exclusiveMinimum)),"number"==typeof l&&("draft-04"===t.target||"openapi-3.0"===t.target?(r.maximum=l,r.exclusiveMaximum=!0):r.exclusiveMaximum=l),"number"==typeof o&&(r.maximum=o,"number"==typeof l&&"draft-04"!==t.target&&(l<=o?delete r.maximum:delete r.exclusiveMaximum)),"number"==typeof s&&(r.multipleOf=s)},dO=(e,t,r,n)=>{r.type="boolean"},dR=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema")},d$=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema")},dU=(e,t,r,n)=>{"openapi-3.0"===t.target?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},dC=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema")},dP=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Void cannot be represented in JSON Schema")},dN=(e,t,r,n)=>{r.not={}},dD=(e,t,r,n)=>{},dL=(e,t,r,n)=>{},dj=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Date cannot be represented in JSON Schema")},dz=(e,t,r,n)=>{let i=og(e._zod.def.entries);i.every(e=>"number"==typeof e)&&(r.type="number"),i.every(e=>"string"==typeof e)&&(r.type="string"),r.enum=i},dM=(e,t,r,n)=>{let i=e._zod.def,o=[];for(let e of i.values)if(void 0===e){if("throw"===t.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e)if("throw"===t.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else o.push(Number(e));else o.push(e);if(0===o.length);else if(1===o.length){let e=o[0];r.type=null===e?"null":typeof e,"draft-04"===t.target||"openapi-3.0"===t.target?r.enum=[e]:r.const=e}else o.every(e=>"number"==typeof e)&&(r.type="number"),o.every(e=>"string"==typeof e)&&(r.type="string"),o.every(e=>"boolean"==typeof e)&&(r.type="boolean"),o.every(e=>null===e)&&(r.type="null"),r.enum=o},dB=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("NaN cannot be represented in JSON Schema")},dZ=(e,t,r,n)=>{let i=e._zod.pattern;if(!i)throw Error("Pattern not found in template literal");r.type="string",r.pattern=i.source},dF=(e,t,r,n)=>{let i={type:"string",format:"binary",contentEncoding:"binary"},{minimum:o,maximum:a,mime:s}=e._zod.bag;void 0!==o&&(i.minLength=o),void 0!==a&&(i.maxLength=a),s?1===s.length?(i.contentMediaType=s[0],Object.assign(r,i)):(Object.assign(r,i),r.anyOf=s.map(e=>({contentMediaType:e}))):Object.assign(r,i)},dH=(e,t,r,n)=>{r.type="boolean"},dq=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")},dV=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")},dW=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema")},dK=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Map cannot be represented in JSON Schema")},dG=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Set cannot be represented in JSON Schema")},dJ=(e,t,r,n)=>{let i=e._zod.def,{minimum:o,maximum:a}=e._zod.bag;"number"==typeof o&&(r.minItems=o),"number"==typeof a&&(r.maxItems=a),r.type="array",r.items=d_(i.element,t,{...n,path:[...n.path,"items"]})},dY=(e,t,r,n)=>{let i=e._zod.def;r.type="object",r.properties={};let o=i.shape;for(let e in o)r.properties[e]=d_(o[e],t,{...n,path:[...n.path,"properties",e]});let a=new Set([...new Set(Object.keys(o))].filter(e=>{let r=i.shape[e]._zod;return"input"===t.io?void 0===r.optin:void 0===r.optout}));a.size>0&&(r.required=Array.from(a)),i.catchall?._zod.def.type==="never"?r.additionalProperties=!1:i.catchall?i.catchall&&(r.additionalProperties=d_(i.catchall,t,{...n,path:[...n.path,"additionalProperties"]})):"output"===t.io&&(r.additionalProperties=!1)},dQ=(e,t,r,n)=>{let i=e._zod.def,o=!1===i.inclusive,a=i.options.map((e,r)=>d_(e,t,{...n,path:[...n.path,o?"oneOf":"anyOf",r]}));o?r.oneOf=a:r.anyOf=a},dX=(e,t,r,n)=>{let i=e._zod.def,o=d_(i.left,t,{...n,path:[...n.path,"allOf",0]}),a=d_(i.right,t,{...n,path:[...n.path,"allOf",1]}),s=e=>"allOf"in e&&1===Object.keys(e).length;r.allOf=[...s(o)?o.allOf:[o],...s(a)?a.allOf:[a]]},d0=(e,t,r,n)=>{let i=e._zod.def;r.type="array";let o="draft-2020-12"===t.target?"prefixItems":"items",a="draft-2020-12"===t.target||"openapi-3.0"===t.target?"items":"additionalItems",s=i.items.map((e,r)=>d_(e,t,{...n,path:[...n.path,o,r]})),l=i.rest?d_(i.rest,t,{...n,path:[...n.path,a,..."openapi-3.0"===t.target?[i.items.length]:[]]}):null;"draft-2020-12"===t.target?(r.prefixItems=s,l&&(r.items=l)):"openapi-3.0"===t.target?(r.items={anyOf:s},l&&r.items.anyOf.push(l),r.minItems=s.length,l||(r.maxItems=s.length)):(r.items=s,l&&(r.additionalItems=l));let{minimum:c,maximum:u}=e._zod.bag;"number"==typeof c&&(r.minItems=c),"number"==typeof u&&(r.maxItems=u)},d1=(e,t,r,n)=>{let i=e._zod.def;r.type="object";let o=i.keyType,a=o._zod.bag,s=a?.patterns;if("loose"===i.mode&&s&&s.size>0){let e=d_(i.valueType,t,{...n,path:[...n.path,"patternProperties","*"]});for(let t of(r.patternProperties={},s))r.patternProperties[t.source]=e}else("draft-07"===t.target||"draft-2020-12"===t.target)&&(r.propertyNames=d_(i.keyType,t,{...n,path:[...n.path,"propertyNames"]})),r.additionalProperties=d_(i.valueType,t,{...n,path:[...n.path,"additionalProperties"]});let l=o._zod.values;if(l){let e=[...l].filter(e=>"string"==typeof e||"number"==typeof e);e.length>0&&(r.required=e)}},d4=(e,t,r,n)=>{let i=e._zod.def,o=d_(i.innerType,t,n),a=t.seen.get(e);"openapi-3.0"===t.target?(a.ref=i.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},d6=(e,t,r,n)=>{let i=e._zod.def;d_(i.innerType,t,n),t.seen.get(e).ref=i.innerType},d2=(e,t,r,n)=>{let i=e._zod.def;d_(i.innerType,t,n),t.seen.get(e).ref=i.innerType,r.default=JSON.parse(JSON.stringify(i.defaultValue))},d3=(e,t,r,n)=>{let i=e._zod.def;d_(i.innerType,t,n),t.seen.get(e).ref=i.innerType,"input"===t.io&&(r._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},d5=(e,t,r,n)=>{let i,o=e._zod.def;d_(o.innerType,t,n),t.seen.get(e).ref=o.innerType;try{i=o.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}r.default=i},d9=(e,t,r,n)=>{let i=e._zod.def,o="input"===t.io?"transform"===i.in._zod.def.type?i.out:i.in:i.out;d_(o,t,n),t.seen.get(e).ref=o},d8=(e,t,r,n)=>{let i=e._zod.def;d_(i.innerType,t,n),t.seen.get(e).ref=i.innerType,r.readOnly=!0},d7=(e,t,r,n)=>{let i=e._zod.def;d_(i.innerType,t,n),t.seen.get(e).ref=i.innerType},pe=(e,t,r,n)=>{let i=e._zod.def;d_(i.innerType,t,n),t.seen.get(e).ref=i.innerType},pt=(e,t,r,n)=>{let i=e._zod.innerType;d_(i,t,n),t.seen.get(e).ref=i},pr={string:dI,number:dT,boolean:dO,bigint:dR,symbol:d$,null:dU,undefined:dC,void:dP,never:dN,any:dD,unknown:dL,date:dj,enum:dz,literal:dM,nan:dB,template_literal:dZ,file:dF,success:dH,custom:dq,function:dV,transform:dW,map:dK,set:dG,array:dJ,object:dY,union:dQ,intersection:dX,tuple:d0,record:d1,nullable:d4,nonoptional:d6,default:d2,prefault:d3,catch:d5,pipe:d9,readonly:d8,promise:d7,optional:pe,lazy:pt};function pn(e,t){if("_idmap"in e){let r=dw({...t,processors:pr}),n={};for(let t of e._idmap.entries()){let[e,n]=t;d_(n,r)}let i={};for(let o of(r.external={registry:e,uri:t?.uri,defs:n},e._idmap.entries())){let[e,t]=o;dE(r,t),i[e]=dx(r,t)}return Object.keys(n).length>0&&(i.__shared={["draft-2020-12"===r.target?"$defs":"definitions"]:n}),{schemas:i}}let r=dw({...t,processors:pr});return d_(e,r),dE(r,e),dx(r,e)}class pi{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(e){this.ctx.counter=e}get seen(){return this.ctx.seen}constructor(e){let t=e?.target??"draft-2020-12";"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),this.ctx=dw({processors:pr,target:t,...e?.metadata&&{metadata:e.metadata},...e?.unrepresentable&&{unrepresentable:e.unrepresentable},...e?.override&&{override:e.override},...e?.io&&{io:e.io}})}process(e,t={path:[],schemaPath:[]}){return d_(e,this.ctx,t)}emit(e,t){t&&(t.cycles&&(this.ctx.cycles=t.cycles),t.reused&&(this.ctx.reused=t.reused),t.external&&(this.ctx.external=t.external)),dE(this.ctx,e);let{"~standard":r,...n}=dx(this.ctx,e);return n}}e.s([],800951),e.s([],235397),e.i(459367),e.s(["$ZodAny",0,lI,"$ZodArray",0,lC,"$ZodBase64",0,lp,"$ZodBase64URL",0,lh,"$ZodBigInt",0,lE,"$ZodBigIntFormat",0,lx,"$ZodBoolean",0,l_,"$ZodCIDRv4",0,lc,"$ZodCIDRv6",0,lu,"$ZodCUID",0,s9,"$ZodCUID2",0,s8,"$ZodCatch",0,cn,"$ZodCodec",0,cs,"$ZodCustom",0,cg,"$ZodCustomStringFormat",0,lv,"$ZodDate",0,l$,"$ZodDefault",0,l9,"$ZodDiscriminatedUnion",0,lF,"$ZodE164",0,lm,"$ZodEmail",0,s6,"$ZodEmoji",0,s3,"$ZodEnum",0,lX,"$ZodExactOptional",0,l3,"$ZodFile",0,l1,"$ZodFunction",0,cf,"$ZodGUID",0,s1,"$ZodIPv4",0,la,"$ZodIPv6",0,ls,"$ZodISODate",0,ln,"$ZodISODateTime",0,lr,"$ZodISODuration",0,lo,"$ZodISOTime",0,li,"$ZodIntersection",0,lH,"$ZodJWT",0,ly,"$ZodKSUID",0,lt,"$ZodLazy",0,cm,"$ZodLiteral",0,l0,"$ZodMAC",0,ll,"$ZodMap",0,lG,"$ZodNaN",0,ci,"$ZodNanoID",0,s5,"$ZodNever",0,lO,"$ZodNonOptional",0,ce,"$ZodNull",0,lA,"$ZodNullable",0,l5,"$ZodNumber",0,lb,"$ZodNumberFormat",0,lw,"$ZodObject",0,lL,"$ZodObjectJIT",0,lj,"$ZodOptional",0,l2,"$ZodPipe",0,co,"$ZodPrefault",0,l7,"$ZodPromise",0,ch,"$ZodReadonly",0,cu,"$ZodRecord",0,lK,"$ZodSet",0,lY,"$ZodString",0,sX,"$ZodStringFormat",0,s0,"$ZodSuccess",0,cr,"$ZodSymbol",0,lS,"$ZodTemplateLiteral",0,cp,"$ZodTransform",0,l4,"$ZodTuple",0,lV,"$ZodType",0,sQ,"$ZodULID",0,s7,"$ZodURL",0,s2,"$ZodUUID",0,s4,"$ZodUndefined",0,lk,"$ZodUnion",0,lM,"$ZodUnknown",0,lT,"$ZodVoid",0,lR,"$ZodXID",0,le,"$ZodXor",0,lZ,"clone",()=>oF,"isValidBase64",()=>ld,"isValidBase64URL",()=>lf,"isValidJWT",()=>lg],819632);var po=e.i(763393),po=po,pa=e.i(799764),pa=pa;e.s([],842391),e.s(["ZodISODate",()=>pc,"ZodISODateTime",()=>ps,"ZodISODuration",()=>pf,"ZodISOTime",()=>pd,"date",()=>pu,"datetime",()=>pl,"duration",()=>ph,"time",()=>pp],749469);let ps=oo("ZodISODateTime",(e,t)=>{lr.init(e,t),pP.init(e,t)});function pl(e){return c2(ps,e)}let pc=oo("ZodISODate",(e,t)=>{ln.init(e,t),pP.init(e,t)});function pu(e){return c3(pc,e)}let pd=oo("ZodISOTime",(e,t)=>{li.init(e,t),pP.init(e,t)});function pp(e){return c5(pd,e)}let pf=oo("ZodISODuration",(e,t)=>{lo.init(e,t),pP.init(e,t)});function ph(e){return c9(pf,e)}let pm=(e,t)=>{au.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>af(e,t)},flatten:{value:t=>ap(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,ov,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,ov,2)}},isEmpty:{get:()=>0===e.issues.length}})},pg=oo("ZodError",pm),py=oo("ZodError",pm,{Parent:Error});e.s(["ZodError",0,pg,"ZodRealError",0,py],471147);let pv=ay(py),pb=ab(py),pw=a_(py),p_=ax(py),pE=ak(py),px=aI(py),pS=aO(py),pk=a$(py),pA=aC(py),pI=aN(py),pT=aL(py),pO=az(py);e.s(["decode",0,px,"decodeAsync",0,pk,"encode",0,pE,"encodeAsync",0,pS,"parse",0,pv,"parseAsync",0,pb,"safeDecode",0,pI,"safeDecodeAsync",0,pO,"safeEncode",0,pA,"safeEncodeAsync",0,pT,"safeParse",0,pw,"safeParseAsync",0,p_],676166);let pR=oo("ZodType",(e,t)=>(sQ.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:dk(e,"input"),output:dk(e,"output")}}),e.toJSONSchema=dS(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(pa.mergeDefs(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),{parent:!0}),e.with=e.check,e.clone=(t,r)=>oF(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>pv(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>pw(e,t,r),e.parseAsync=async(t,r)=>pb(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>p_(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>pE(e,t,r),e.decode=(t,r)=>px(e,t,r),e.encodeAsync=async(t,r)=>pS(e,t,r),e.decodeAsync=async(t,r)=>pk(e,t,r),e.safeEncode=(t,r)=>pA(e,t,r),e.safeDecode=(t,r)=>pI(e,t,r),e.safeEncodeAsync=async(t,r)=>pT(e,t,r),e.safeDecodeAsync=async(t,r)=>pO(e,t,r),e.refine=(t,r)=>e.check(h6(t,r)),e.superRefine=t=>e.check(dh(t)),e.overwrite=t=>e.check(uH(t)),e.optional=()=>hE(e),e.exactOptional=()=>hS(e),e.nullable=()=>hA(e),e.nullish=()=>hE(hA(e)),e.nonoptional=t=>hC(e,t),e.array=()=>fQ(e),e.or=t=>f3([e,t]),e.and=t=>ht(e,t),e.transform=t=>hB(e,hw(t)),e.default=t=>hO(e,t),e.prefault=t=>h$(e,t),e.catch=t=>hL(e,t),e.pipe=t=>hB(e,t),e.readonly=()=>hq(e),e.describe=t=>{let r=e.clone();return c$.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>c$.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return c$.get(e);let r=e.clone();return c$.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=t=>t(e),e)),p$=oo("_ZodString",(e,t)=>{sX.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dI(e,t,r,n);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(uD(...t)),e.includes=(...t)=>e.check(uz(...t)),e.startsWith=(...t)=>e.check(uM(...t)),e.endsWith=(...t)=>e.check(uB(...t)),e.min=(...t)=>e.check(uP(...t)),e.max=(...t)=>e.check(uC(...t)),e.length=(...t)=>e.check(uN(...t)),e.nonempty=(...t)=>e.check(uP(1,...t)),e.lowercase=t=>e.check(uL(t)),e.uppercase=t=>e.check(uj(t)),e.trim=()=>e.check(uV()),e.normalize=(...t)=>e.check(uq(...t)),e.toLowerCase=()=>e.check(uW()),e.toUpperCase=()=>e.check(uK()),e.slugify=()=>e.check(uG())}),pU=oo("ZodString",(e,t)=>{sX.init(e,t),p$.init(e,t),e.email=t=>e.check(cP(pN,t)),e.url=t=>e.check(cM(pH,t)),e.jwt=t=>e.check(c4(ff,t)),e.emoji=t=>e.check(cB(pW,t)),e.guid=t=>e.check(cN(pL,t)),e.uuid=t=>e.check(cD(pz,t)),e.uuidv4=t=>e.check(cL(pz,t)),e.uuidv6=t=>e.check(cj(pz,t)),e.uuidv7=t=>e.check(cz(pz,t)),e.nanoid=t=>e.check(cZ(pG,t)),e.guid=t=>e.check(cN(pL,t)),e.cuid=t=>e.check(cF(pY,t)),e.cuid2=t=>e.check(cH(pX,t)),e.ulid=t=>e.check(cq(p1,t)),e.base64=t=>e.check(cX(fs,t)),e.base64url=t=>e.check(c0(fc,t)),e.xid=t=>e.check(cV(p6,t)),e.ksuid=t=>e.check(cW(p3,t)),e.ipv4=t=>e.check(cK(p9,t)),e.ipv6=t=>e.check(cG(ft,t)),e.cidrv4=t=>e.check(cY(fn,t)),e.cidrv6=t=>e.check(cQ(fo,t)),e.e164=t=>e.check(c1(fd,t)),e.datetime=t=>e.check(pl(t)),e.date=t=>e.check(pu(t)),e.time=t=>e.check(pp(t)),e.duration=t=>e.check(ph(t))});function pC(e){return cU(pU,e)}let pP=oo("ZodStringFormat",(e,t)=>{s0.init(e,t),p$.init(e,t)}),pN=oo("ZodEmail",(e,t)=>{s6.init(e,t),pP.init(e,t)});function pD(e){return cP(pN,e)}let pL=oo("ZodGUID",(e,t)=>{s1.init(e,t),pP.init(e,t)});function pj(e){return cN(pL,e)}let pz=oo("ZodUUID",(e,t)=>{s4.init(e,t),pP.init(e,t)});function pM(e){return cD(pz,e)}function pB(e){return cL(pz,e)}function pZ(e){return cj(pz,e)}function pF(e){return cz(pz,e)}let pH=oo("ZodURL",(e,t)=>{s2.init(e,t),pP.init(e,t)});function pq(e){return cM(pH,e)}function pV(e){return cM(pH,{protocol:/^https?$/,hostname:po.domain,...pa.normalizeParams(e)})}let pW=oo("ZodEmoji",(e,t)=>{s3.init(e,t),pP.init(e,t)});function pK(e){return cB(pW,e)}let pG=oo("ZodNanoID",(e,t)=>{s5.init(e,t),pP.init(e,t)});function pJ(e){return cZ(pG,e)}let pY=oo("ZodCUID",(e,t)=>{s9.init(e,t),pP.init(e,t)});function pQ(e){return cF(pY,e)}let pX=oo("ZodCUID2",(e,t)=>{s8.init(e,t),pP.init(e,t)});function p0(e){return cH(pX,e)}let p1=oo("ZodULID",(e,t)=>{s7.init(e,t),pP.init(e,t)});function p4(e){return cq(p1,e)}let p6=oo("ZodXID",(e,t)=>{le.init(e,t),pP.init(e,t)});function p2(e){return cV(p6,e)}let p3=oo("ZodKSUID",(e,t)=>{lt.init(e,t),pP.init(e,t)});function p5(e){return cW(p3,e)}let p9=oo("ZodIPv4",(e,t)=>{la.init(e,t),pP.init(e,t)});function p8(e){return cK(p9,e)}let p7=oo("ZodMAC",(e,t)=>{ll.init(e,t),pP.init(e,t)});function fe(e){return cJ(p7,e)}let ft=oo("ZodIPv6",(e,t)=>{ls.init(e,t),pP.init(e,t)});function fr(e){return cG(ft,e)}let fn=oo("ZodCIDRv4",(e,t)=>{lc.init(e,t),pP.init(e,t)});function fi(e){return cY(fn,e)}let fo=oo("ZodCIDRv6",(e,t)=>{lu.init(e,t),pP.init(e,t)});function fa(e){return cQ(fo,e)}let fs=oo("ZodBase64",(e,t)=>{lp.init(e,t),pP.init(e,t)});function fl(e){return cX(fs,e)}let fc=oo("ZodBase64URL",(e,t)=>{lh.init(e,t),pP.init(e,t)});function fu(e){return c0(fc,e)}let fd=oo("ZodE164",(e,t)=>{lm.init(e,t),pP.init(e,t)});function fp(e){return c1(fd,e)}let ff=oo("ZodJWT",(e,t)=>{ly.init(e,t),pP.init(e,t)});function fh(e){return c4(ff,e)}let fm=oo("ZodCustomStringFormat",(e,t)=>{lv.init(e,t),pP.init(e,t)});function fg(e,t,r={}){return db(fm,e,t,r)}function fy(e){return db(fm,"hostname",po.hostname,e)}function fv(e){return db(fm,"hex",po.hex,e)}function fb(e,t){let r=t?.enc??"hex",n=`${e}_${r}`,i=po[n];if(!i)throw Error(`Unrecognized hash format: ${n}`);return db(fm,n,i,t)}let fw=oo("ZodNumber",(e,t)=>{lb.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dT(e,t,r,n),e.gt=(t,r)=>e.check(ux(t,r)),e.gte=(t,r)=>e.check(uS(t,r)),e.min=(t,r)=>e.check(uS(t,r)),e.lt=(t,r)=>e.check(u_(t,r)),e.lte=(t,r)=>e.check(uE(t,r)),e.max=(t,r)=>e.check(uE(t,r)),e.int=t=>e.check(fx(t)),e.safe=t=>e.check(fx(t)),e.positive=t=>e.check(ux(0,t)),e.nonnegative=t=>e.check(uS(0,t)),e.negative=t=>e.check(u_(0,t)),e.nonpositive=t=>e.check(uE(0,t)),e.multipleOf=(t,r)=>e.check(uO(t,r)),e.step=(t,r)=>e.check(uO(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??-1/0,r.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(r.maximum??1/0,r.exclusiveMaximum??1/0)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function f_(e){return c8(fw,e)}let fE=oo("ZodNumberFormat",(e,t)=>{lw.init(e,t),fw.init(e,t)});function fx(e){return ue(fE,e)}function fS(e){return ut(fE,e)}function fk(e){return ur(fE,e)}function fA(e){return un(fE,e)}function fI(e){return ui(fE,e)}let fT=oo("ZodBoolean",(e,t)=>{l_.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dO(e,t,r,n)});function fO(e){return uo(fT,e)}let fR=oo("ZodBigInt",(e,t)=>{lE.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dR(e,t,r,n),e.gte=(t,r)=>e.check(uS(t,r)),e.min=(t,r)=>e.check(uS(t,r)),e.gt=(t,r)=>e.check(ux(t,r)),e.gte=(t,r)=>e.check(uS(t,r)),e.min=(t,r)=>e.check(uS(t,r)),e.lt=(t,r)=>e.check(u_(t,r)),e.lte=(t,r)=>e.check(uE(t,r)),e.max=(t,r)=>e.check(uE(t,r)),e.positive=t=>e.check(ux(BigInt(0),t)),e.negative=t=>e.check(u_(BigInt(0),t)),e.nonpositive=t=>e.check(uE(BigInt(0),t)),e.nonnegative=t=>e.check(uS(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(uO(t,r));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function f$(e){return us(fR,e)}let fU=oo("ZodBigIntFormat",(e,t)=>{lx.init(e,t),fR.init(e,t)});function fC(e){return uc(fU,e)}function fP(e){return uu(fU,e)}let fN=oo("ZodSymbol",(e,t)=>{lS.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d$(e,t,r,n)});function fD(e){return ud(fN,e)}let fL=oo("ZodUndefined",(e,t)=>{lk.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dC(e,t,r,n)});function fj(e){return up(fL,e)}let fz=oo("ZodNull",(e,t)=>{lA.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dU(e,t,r,n)});function fM(e){return uf(fz,e)}let fB=oo("ZodAny",(e,t)=>{lI.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dD(e,t,r,n)});function fZ(){return uh(fB)}let fF=oo("ZodUnknown",(e,t)=>{lT.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dL(e,t,r,n)});function fH(){return um(fF)}let fq=oo("ZodNever",(e,t)=>{lO.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dN(e,t,r,n)});function fV(e){return ug(fq,e)}let fW=oo("ZodVoid",(e,t)=>{lR.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dP(e,t,r,n)});function fK(e){return uy(fW,e)}let fG=oo("ZodDate",(e,t)=>{l$.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dj(e,t,r,n),e.min=(t,r)=>e.check(uS(t,r)),e.max=(t,r)=>e.check(uE(t,r));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function fJ(e){return uv(fG,e)}let fY=oo("ZodArray",(e,t)=>{lC.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dJ(e,t,r,n),e.element=t.element,e.min=(t,r)=>e.check(uP(t,r)),e.nonempty=t=>e.check(uP(1,t)),e.max=(t,r)=>e.check(uC(t,r)),e.length=(t,r)=>e.check(uN(t,r)),e.unwrap=()=>e.element});function fQ(e,t){return uJ(fY,e,t)}function fX(e){return hf(Object.keys(e._zod.def.shape))}let f0=oo("ZodObject",(e,t)=>{lj.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dY(e,t,r,n),pa.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>hf(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:fH()}),e.loose=()=>e.clone({...e._zod.def,catchall:fH()}),e.strict=()=>e.clone({...e._zod.def,catchall:fV()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>pa.extend(e,t),e.safeExtend=t=>pa.safeExtend(e,t),e.merge=t=>pa.merge(e,t),e.pick=t=>pa.pick(e,t),e.omit=t=>pa.omit(e,t),e.partial=(...t)=>pa.partial(h_,e,t[0]),e.required=(...t)=>pa.required(hU,e,t[0])});function f1(e,t){return new f0({type:"object",shape:e??{},...pa.normalizeParams(t)})}function f4(e,t){return new f0({type:"object",shape:e,catchall:fV(),...pa.normalizeParams(t)})}function f6(e,t){return new f0({type:"object",shape:e,catchall:fH(),...pa.normalizeParams(t)})}let f2=oo("ZodUnion",(e,t)=>{lM.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dQ(e,t,r,n),e.options=t.options});function f3(e,t){return new f2({type:"union",options:e,...pa.normalizeParams(t)})}let f5=oo("ZodXor",(e,t)=>{f2.init(e,t),lZ.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dQ(e,t,r,n),e.options=t.options});function f9(e,t){return new f5({type:"union",options:e,inclusive:!1,...pa.normalizeParams(t)})}let f8=oo("ZodDiscriminatedUnion",(e,t)=>{f2.init(e,t),lF.init(e,t)});function f7(e,t,r){return new f8({type:"union",options:t,discriminator:e,...pa.normalizeParams(r)})}let he=oo("ZodIntersection",(e,t)=>{lH.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dX(e,t,r,n)});function ht(e,t){return new he({type:"intersection",left:e,right:t})}let hr=oo("ZodTuple",(e,t)=>{lV.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d0(e,t,r,n),e.rest=t=>e.clone({...e._zod.def,rest:t})});function hn(e,t,r){let n=t instanceof sQ,i=n?r:t;return new hr({type:"tuple",items:e,rest:n?t:null,...pa.normalizeParams(i)})}let hi=oo("ZodRecord",(e,t)=>{lK.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d1(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType});function ho(e,t,r){return new hi({type:"record",keyType:e,valueType:t,...pa.normalizeParams(r)})}function ha(e,t,r){let n=oF(e);return n._zod.values=void 0,new hi({type:"record",keyType:n,valueType:t,...pa.normalizeParams(r)})}function hs(e,t,r){return new hi({type:"record",keyType:e,valueType:t,mode:"loose",...pa.normalizeParams(r)})}let hl=oo("ZodMap",(e,t)=>{lG.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dK(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType,e.min=(...t)=>e.check(u$(...t)),e.nonempty=t=>e.check(u$(1,t)),e.max=(...t)=>e.check(uR(...t)),e.size=(...t)=>e.check(uU(...t))});function hc(e,t,r){return new hl({type:"map",keyType:e,valueType:t,...pa.normalizeParams(r)})}let hu=oo("ZodSet",(e,t)=>{lY.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dG(e,t,r,n),e.min=(...t)=>e.check(u$(...t)),e.nonempty=t=>e.check(u$(1,t)),e.max=(...t)=>e.check(uR(...t)),e.size=(...t)=>e.check(uU(...t))});function hd(e,t){return new hu({type:"set",valueType:e,...pa.normalizeParams(t)})}let hp=oo("ZodEnum",(e,t)=>{lX.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dz(e,t,r,n),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let i={};for(let n of e)if(r.has(n))i[n]=t.entries[n];else throw Error(`Key ${n} not found in enum`);return new hp({...t,checks:[],...pa.normalizeParams(n),entries:i})},e.exclude=(e,n)=>{let i={...t.entries};for(let t of e)if(r.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new hp({...t,checks:[],...pa.normalizeParams(n),entries:i})}});function hf(e,t){return new hp({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...pa.normalizeParams(t)})}function hh(e,t){return new hp({type:"enum",entries:e,...pa.normalizeParams(t)})}let hm=oo("ZodLiteral",(e,t)=>{l0.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dM(e,t,r,n),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function hg(e,t){return new hm({type:"literal",values:Array.isArray(e)?e:[e],...pa.normalizeParams(t)})}let hy=oo("ZodFile",(e,t)=>{l1.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dF(e,t,r,n),e.min=(t,r)=>e.check(u$(t,r)),e.max=(t,r)=>e.check(uR(t,r)),e.mime=(t,r)=>e.check(uF(Array.isArray(t)?t:[t],r))});function hv(e){return u8(hy,e)}let hb=oo("ZodTransform",(e,t)=>{l4.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dW(e,t,r,n),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new ol(e.constructor.name);r.addIssue=n=>{"string"==typeof n?r.issues.push(pa.issue(n,r.value,t)):(n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=e),r.issues.push(pa.issue(n)))};let i=t.transform(r.value,r);return i instanceof Promise?i.then(e=>(r.value=e,r)):(r.value=i,r)}});function hw(e){return new hb({type:"transform",transform:e})}let h_=oo("ZodOptional",(e,t)=>{l2.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>pe(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function hE(e){return new h_({type:"optional",innerType:e})}let hx=oo("ZodExactOptional",(e,t)=>{l3.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>pe(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function hS(e){return new hx({type:"optional",innerType:e})}let hk=oo("ZodNullable",(e,t)=>{l5.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d4(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function hA(e){return new hk({type:"nullable",innerType:e})}function hI(e){return hE(hA(e))}let hT=oo("ZodDefault",(e,t)=>{l9.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d2(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function hO(e,t){return new hT({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():pa.shallowClone(t)}})}let hR=oo("ZodPrefault",(e,t)=>{l7.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d3(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function h$(e,t){return new hR({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():pa.shallowClone(t)}})}let hU=oo("ZodNonOptional",(e,t)=>{ce.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d6(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function hC(e,t){return new hU({type:"nonoptional",innerType:e,...pa.normalizeParams(t)})}let hP=oo("ZodSuccess",(e,t)=>{cr.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dH(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function hN(e){return new hP({type:"success",innerType:e})}let hD=oo("ZodCatch",(e,t)=>{cn.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d5(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function hL(e,t){return new hD({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}let hj=oo("ZodNaN",(e,t)=>{ci.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dB(e,t,r,n)});function hz(e){return uw(hj,e)}let hM=oo("ZodPipe",(e,t)=>{co.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d9(e,t,r,n),e.in=t.in,e.out=t.out});function hB(e,t){return new hM({type:"pipe",in:e,out:t})}let hZ=oo("ZodCodec",(e,t)=>{hM.init(e,t),cs.init(e,t)});function hF(e,t,r){return new hZ({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}let hH=oo("ZodReadonly",(e,t)=>{cu.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d8(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function hq(e){return new hH({type:"readonly",innerType:e})}let hV=oo("ZodTemplateLiteral",(e,t)=>{cp.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dZ(e,t,r,n)});function hW(e,t){return new hV({type:"template_literal",parts:e,...pa.normalizeParams(t)})}let hK=oo("ZodLazy",(e,t)=>{cm.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>pt(e,t,r,n),e.unwrap=()=>e._zod.def.getter()});function hG(e){return new hK({type:"lazy",getter:e})}let hJ=oo("ZodPromise",(e,t)=>{ch.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>d7(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function hY(e){return new hJ({type:"promise",innerType:e})}let hQ=oo("ZodFunction",(e,t)=>{cf.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dV(e,t,r,n)});function hX(e){return new hQ({type:"function",input:Array.isArray(e?.input)?hn(e?.input):e?.input??fQ(fH()),output:e?.output??fH()})}let h0=oo("ZodCustom",(e,t)=>{cg.init(e,t),pR.init(e,t),e._zod.processJSONSchema=(t,r,n)=>dq(e,t,r,n)});function h1(e){let t=new sA({check:"custom"});return t._zod.check=e,t}function h4(e,t){return dp(h0,e??(()=>!0),t)}function h6(e,t={}){return df(h0,e,t)}function h2(e){return dh(e)}let h3=dg,h5=dy;function h9(e,t={}){let r=new h0({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...pa.normalizeParams(t)});return r._zod.bag.Class=e,r._zod.check=t=>{t.value instanceof e||t.issues.push({code:"invalid_type",expected:e.name,input:t.value,inst:r,path:[...r._zod.def.path??[]]})},r}let h8=(...e)=>dv({Codec:hZ,Boolean:fT,String:pU},...e);function h7(e){let t=hG(()=>f3([pC(e),f_(),fO(),fM(),fQ(t),ho(pC(),t)]));return t}function me(e,t){return hB(hw(e),t)}let mt={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function mr(e){ou({customError:e})}function mn(){return ou().customError}ec||(ec={}),e.s(["ZodFirstPartyTypeKind",()=>ec,"ZodIssueCode",0,mt,"getErrorMap",()=>mn,"setErrorMap",()=>mr],454733),e.i(842391),e.s(["endsWith",()=>uB,"gt",()=>ux,"gte",()=>uS,"includes",()=>uz,"length",()=>uN,"lowercase",()=>uL,"lt",()=>u_,"lte",()=>uE,"maxLength",()=>uC,"maxSize",()=>uR,"mime",()=>uF,"minLength",()=>uP,"minSize",()=>u$,"multipleOf",()=>uO,"negative",()=>uA,"nonnegative",()=>uT,"nonpositive",()=>uI,"normalize",()=>uq,"overwrite",()=>uH,"positive",()=>uk,"property",()=>uZ,"regex",()=>uD,"size",()=>uU,"slugify",()=>uG,"startsWith",()=>uM,"toLowerCase",()=>uW,"toUpperCase",()=>uK,"trim",()=>uV,"uppercase",()=>uj],555685);var mi=e.i(555685),mo=e.i(749469);let ma={...e.i(314539),...mi,iso:mo},ms=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function ml(e,t){var r;let n;if("boolean"==typeof e)return e?ma.any():ma.never();let i={version:(r=t?.defaultTarget,"https://json-schema.org/draft/2020-12/schema"===(n=e.$schema)?"draft-2020-12":"http://json-schema.org/draft-07/schema#"===n?"draft-7":"http://json-schema.org/draft-04/schema#"===n?"draft-4":r??"draft-2020-12"),defs:e.$defs||e.definitions||{},refs:new Map,processing:new Set,rootSchema:e,registry:t?.registry??c$};return function e(t,r){if("boolean"==typeof t)return t?ma.any():ma.never();let n=function t(r,n){let i;if(void 0!==r.not){if("object"==typeof r.not&&0===Object.keys(r.not).length)return ma.never();throw Error("not is not supported in Zod (except { not: {} } for never)")}if(void 0!==r.unevaluatedItems)throw Error("unevaluatedItems is not supported");if(void 0!==r.unevaluatedProperties)throw Error("unevaluatedProperties is not supported");if(void 0!==r.if||void 0!==r.then||void 0!==r.else)throw Error("Conditional schemas (if/then/else) are not supported");if(void 0!==r.dependentSchemas||void 0!==r.dependentRequired)throw Error("dependentSchemas and dependentRequired are not supported");if(r.$ref){let t=r.$ref;if(n.refs.has(t))return n.refs.get(t);if(n.processing.has(t))return ma.lazy(()=>{if(!n.refs.has(t))throw Error(`Circular reference not resolved: ${t}`);return n.refs.get(t)});n.processing.add(t);let i=e(function(e,t){if(!e.startsWith("#"))throw Error("External $ref is not supported, only local refs (#/...) are allowed");let r=e.slice(1).split("/").filter(Boolean);if(0===r.length)return t.rootSchema;let n="draft-2020-12"===t.version?"$defs":"definitions";if(r[0]===n){let n=r[1];if(!n||!t.defs[n])throw Error(`Reference not found: ${e}`);return t.defs[n]}throw Error(`Reference not found: ${e}`)}(t,n),n);return n.refs.set(t,i),n.processing.delete(t),i}if(void 0!==r.enum){let e=r.enum;if("openapi-3.0"===n.version&&!0===r.nullable&&1===e.length&&null===e[0])return ma.null();if(0===e.length)return ma.never();if(1===e.length)return ma.literal(e[0]);if(e.every(e=>"string"==typeof e))return ma.enum(e);let t=e.map(e=>ma.literal(e));return t.length<2?t[0]:ma.union([t[0],t[1],...t.slice(2)])}if(void 0!==r.const)return ma.literal(r.const);let o=r.type;if(Array.isArray(o)){let e=o.map(e=>t({...r,type:e},n));return 0===e.length?ma.never():1===e.length?e[0]:ma.union(e)}if(!o)return ma.any();switch(o){case"string":{let e=ma.string();if(r.format){let t=r.format;"email"===t?e=e.check(ma.email()):"uri"===t||"uri-reference"===t?e=e.check(ma.url()):"uuid"===t||"guid"===t?e=e.check(ma.uuid()):"date-time"===t?e=e.check(ma.iso.datetime()):"date"===t?e=e.check(ma.iso.date()):"time"===t?e=e.check(ma.iso.time()):"duration"===t?e=e.check(ma.iso.duration()):"ipv4"===t?e=e.check(ma.ipv4()):"ipv6"===t?e=e.check(ma.ipv6()):"mac"===t?e=e.check(ma.mac()):"cidr"===t?e=e.check(ma.cidrv4()):"cidr-v6"===t?e=e.check(ma.cidrv6()):"base64"===t?e=e.check(ma.base64()):"base64url"===t?e=e.check(ma.base64url()):"e164"===t?e=e.check(ma.e164()):"jwt"===t?e=e.check(ma.jwt()):"emoji"===t?e=e.check(ma.emoji()):"nanoid"===t?e=e.check(ma.nanoid()):"cuid"===t?e=e.check(ma.cuid()):"cuid2"===t?e=e.check(ma.cuid2()):"ulid"===t?e=e.check(ma.ulid()):"xid"===t?e=e.check(ma.xid()):"ksuid"===t&&(e=e.check(ma.ksuid()))}"number"==typeof r.minLength&&(e=e.min(r.minLength)),"number"==typeof r.maxLength&&(e=e.max(r.maxLength)),r.pattern&&(e=e.regex(new RegExp(r.pattern))),i=e;break}case"number":case"integer":{let e="integer"===o?ma.number().int():ma.number();"number"==typeof r.minimum&&(e=e.min(r.minimum)),"number"==typeof r.maximum&&(e=e.max(r.maximum)),"number"==typeof r.exclusiveMinimum?e=e.gt(r.exclusiveMinimum):!0===r.exclusiveMinimum&&"number"==typeof r.minimum&&(e=e.gt(r.minimum)),"number"==typeof r.exclusiveMaximum?e=e.lt(r.exclusiveMaximum):!0===r.exclusiveMaximum&&"number"==typeof r.maximum&&(e=e.lt(r.maximum)),"number"==typeof r.multipleOf&&(e=e.multipleOf(r.multipleOf)),i=e;break}case"boolean":i=ma.boolean();break;case"null":i=ma.null();break;case"object":{let t={},o=r.properties||{},a=new Set(r.required||[]);for(let[r,i]of Object.entries(o)){let o=e(i,n);t[r]=a.has(r)?o:o.optional()}if(r.propertyNames){let o=e(r.propertyNames,n),a=r.additionalProperties&&"object"==typeof r.additionalProperties?e(r.additionalProperties,n):ma.any();if(0===Object.keys(t).length){i=ma.record(o,a);break}let s=ma.object(t).passthrough(),l=ma.looseRecord(o,a);i=ma.intersection(s,l);break}if(r.patternProperties){let o=r.patternProperties,a=Object.keys(o),s=[];for(let t of a){let r=e(o[t],n),i=ma.string().regex(new RegExp(t));s.push(ma.looseRecord(i,r))}let l=[];if(Object.keys(t).length>0&&l.push(ma.object(t).passthrough()),l.push(...s),0===l.length)i=ma.object({}).passthrough();else if(1===l.length)i=l[0];else{let e=ma.intersection(l[0],l[1]);for(let t=2;t<l.length;t++)e=ma.intersection(e,l[t]);i=e}break}let s=ma.object(t);i=!1===r.additionalProperties?s.strict():"object"==typeof r.additionalProperties?s.catchall(e(r.additionalProperties,n)):s.passthrough();break}case"array":{let t=r.prefixItems,o=r.items;if(t&&Array.isArray(t)){let a=t.map(t=>e(t,n)),s=o&&"object"==typeof o&&!Array.isArray(o)?e(o,n):void 0;i=s?ma.tuple(a).rest(s):ma.tuple(a),"number"==typeof r.minItems&&(i=i.check(ma.minLength(r.minItems))),"number"==typeof r.maxItems&&(i=i.check(ma.maxLength(r.maxItems)))}else if(Array.isArray(o)){let t=o.map(t=>e(t,n)),a=r.additionalItems&&"object"==typeof r.additionalItems?e(r.additionalItems,n):void 0;i=a?ma.tuple(t).rest(a):ma.tuple(t),"number"==typeof r.minItems&&(i=i.check(ma.minLength(r.minItems))),"number"==typeof r.maxItems&&(i=i.check(ma.maxLength(r.maxItems)))}else if(void 0!==o){let t=e(o,n),a=ma.array(t);"number"==typeof r.minItems&&(a=a.min(r.minItems)),"number"==typeof r.maxItems&&(a=a.max(r.maxItems)),i=a}else i=ma.array(ma.any());break}default:throw Error(`Unsupported type: ${o}`)}return r.description&&(i=i.describe(r.description)),void 0!==r.default&&(i=i.default(r.default)),i}(t,r),i=t.type||void 0!==t.enum||void 0!==t.const;if(t.anyOf&&Array.isArray(t.anyOf)){let o=t.anyOf.map(t=>e(t,r)),a=ma.union(o);n=i?ma.intersection(n,a):a}if(t.oneOf&&Array.isArray(t.oneOf)){let o=t.oneOf.map(t=>e(t,r)),a=ma.xor(o);n=i?ma.intersection(n,a):a}if(t.allOf&&Array.isArray(t.allOf))if(0===t.allOf.length)n=i?n:ma.any();else{let o=i?n:e(t.allOf[0],r),a=+!i;for(let n=a;n<t.allOf.length;n++)o=ma.intersection(o,e(t.allOf[n],r));n=o}!0===t.nullable&&"openapi-3.0"===r.version&&(n=ma.nullable(n)),!0===t.readOnly&&(n=ma.readonly(n));let o={};for(let e of["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"])e in t&&(o[e]=t[e]);for(let e of["contentEncoding","contentMediaType","contentSchema"])e in t&&(o[e]=t[e]);for(let e of Object.keys(t))ms.has(e)||(o[e]=t[e]);return Object.keys(o).length>0&&r.registry.add(n,o),n}(e,i)}function mc(e){return cC(pU,e)}function mu(e){return c7(fw,e)}function md(e){return ua(fT,e)}function mp(e){return ul(fR,e)}function mf(e){return ub(fG,e)}e.s(["bigint",()=>mp,"boolean",()=>md,"date",()=>mf,"number",()=>mu,"string",()=>mc],443220),ou(cb()),e.s([],462690),e.i(462690),e.i(235397),e.i(123489),e.i(139443),e.i(356898),e.i(819632),e.i(352973),e.i(320101);var mh=pa,mm=po;e.i(810412),e.s(["ar",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`  :   instanceof ${n.expected}    ${i}`;return`  :   ${e}    ${i}`}case"invalid_value":if(1===n.values.length)return`  :   ${oV(n.values[0])}`;return`  :     : ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`   :    ${n.origin??""} ${t} ${n.maximum.toString()} ${r.unit??""}`;return`  :    ${n.origin??""} ${t} ${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`  :   ${n.origin}   ${t} ${n.minimum.toString()} ${r.unit}`;return`  :   ${n.origin}   ${t} ${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`  :     "${n.prefix}"`;if("ends_with"===n.format)return`  :     "${n.suffix}"`;if("includes"===n.format)return`  :    "${n.includes}"`;if("regex"===n.format)return`  :     ${n.pattern}`;return`${t[n.format]??n.format}  `;case"not_multiple_of":return`  :      ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"":""} ${n.keys.length>1?"":""}: ${oy(n.keys," ")}`;case"invalid_key":return`    ${n.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`    ${n.origin}`}})}},"az",0,function(){let e,t,r;return{localeError:(e={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Yanl dyr: g\xf6zlniln instanceof ${n.expected}, daxil olan ${i}`;return`Yanl dyr: g\xf6zlniln ${e}, daxil olan ${i}`}case"invalid_value":if(1===n.values.length)return`Yanl dyr: g\xf6zlniln ${oV(n.values[0])}`;return`Yanl se\xe7im: aadaklardan biri olmaldr: ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${n.origin??"dyr"} ${t}${n.maximum.toString()} ${r.unit??"element"}`;return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${n.origin??"dyr"} ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`\xc7ox ki\xe7ik: g\xf6zlniln ${n.origin} ${t}${n.minimum.toString()} ${r.unit}`;return`\xc7ox ki\xe7ik: g\xf6zlniln ${n.origin} ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Yanl mtn: "${n.prefix}" il balamaldr`;if("ends_with"===n.format)return`Yanl mtn: "${n.suffix}" il bitmlidir`;if("includes"===n.format)return`Yanl mtn: "${n.includes}" daxil olmaldr`;if("regex"===n.format)return`Yanl mtn: ${n.pattern} ablonuna uyun olmaldr`;return`Yanl ${t[n.format]??n.format}`;case"not_multiple_of":return`Yanl dd: ${n.divisor} il b\xf6l\xfcn biln olmaldr`;case"unrecognized_keys":return`Tannmayan a\xe7ar${n.keys.length>1?"lar":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`${n.origin} daxilind yanl a\xe7ar`;case"invalid_union":return"Yanl dyr";case"invalid_element":return`${n.origin} daxilind yanl dyr`;default:return`Yanl dyr`}})}},"be",0,function(){let e,t,r;return{localeError:(e={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}},t={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` :  instanceof ${n.expected},  ${i}`;return` :  ${e},  ${i}`}case"invalid_value":if(1===n.values.length)return` :  ${oV(n.values[0])}`;return` :    ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r){let e=cv(Number(n.maximum),r.unit.one,r.unit.few,r.unit.many);return` : ,  ${n.origin??""}  ${r.verb} ${t}${n.maximum.toString()} ${e}`}return` : ,  ${n.origin??""}   ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r){let e=cv(Number(n.minimum),r.unit.one,r.unit.few,r.unit.many);return` : ,  ${n.origin}  ${r.verb} ${t}${n.minimum.toString()} ${e}`}return` : ,  ${n.origin}   ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return` :    "${n.prefix}"`;if("ends_with"===n.format)return` :    "${n.suffix}"`;if("includes"===n.format)return` :   "${n.includes}"`;if("regex"===n.format)return` :    ${n.pattern}`;return` ${t[n.format]??n.format}`;case"not_multiple_of":return` :    ${n.divisor}`;case"unrecognized_keys":return` ${n.keys.length>1?"":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`   ${n.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${n.origin}`;default:return` `}})}},"bg",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` :  instanceof ${n.expected},  ${i}`;return` :  ${e},  ${i}`}case"invalid_value":if(1===n.values.length)return` :  ${oV(n.values[0])}`;return` :    ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` :   ${n.origin??""}   ${t}${n.maximum.toString()} ${r.unit??""}`;return` :   ${n.origin??""}   ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` :   ${n.origin}   ${t}${n.minimum.toString()} ${r.unit}`;return` :   ${n.origin}   ${t}${n.minimum.toString()}`}case"invalid_format":{if("starts_with"===n.format)return` :     "${n.prefix}"`;if("ends_with"===n.format)return` :     "${n.suffix}"`;if("includes"===n.format)return` :    "${n.includes}"`;if("regex"===n.format)return` :     ${n.pattern}`;let e="";return"emoji"===n.format&&(e=""),"datetime"===n.format&&(e=""),"date"===n.format&&(e=""),"time"===n.format&&(e=""),"duration"===n.format&&(e=""),`${e} ${t[n.format]??n.format}`}case"not_multiple_of":return` :      ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"":""} ${n.keys.length>1?"":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`   ${n.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${n.origin}`;default:return` `}})}},"ca",0,function(){let e,t,r;return{localeError:(e={string:{unit:"carcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}},t={regex:"entrada",email:"adrea electrnica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adrea IPv4",ipv6:"adrea IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Tipus inv\xe0lid: s'esperava instanceof ${n.expected}, s'ha rebut ${i}`;return`Tipus inv\xe0lid: s'esperava ${e}, s'ha rebut ${i}`}case"invalid_value":if(1===n.values.length)return`Valor inv\xe0lid: s'esperava ${oV(n.values[0])}`;return`Opci\xf3 inv\xe0lida: s'esperava una de ${oy(n.values," o ")}`;case"too_big":{let t=n.inclusive?"com a mxim":"menys de",r=e[n.origin]??null;if(r)return`Massa gran: s'esperava que ${n.origin??"el valor"} contingu\xe9s ${t} ${n.maximum.toString()} ${r.unit??"elements"}`;return`Massa gran: s'esperava que ${n.origin??"el valor"} fos ${t} ${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?"com a mnim":"ms de",r=e[n.origin]??null;if(r)return`Massa petit: s'esperava que ${n.origin} contingu\xe9s ${t} ${n.minimum.toString()} ${r.unit}`;return`Massa petit: s'esperava que ${n.origin} fos ${t} ${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Format inv\xe0lid: ha de comen\xe7ar amb "${n.prefix}"`;if("ends_with"===n.format)return`Format inv\xe0lid: ha d'acabar amb "${n.suffix}"`;if("includes"===n.format)return`Format inv\xe0lid: ha d'incloure "${n.includes}"`;if("regex"===n.format)return`Format inv\xe0lid: ha de coincidir amb el patr\xf3 ${n.pattern}`;return`Format inv\xe0lid per a ${t[n.format]??n.format}`;case"not_multiple_of":return`N\xfamero inv\xe0lid: ha de ser m\xfaltiple de ${n.divisor}`;case"unrecognized_keys":return`Clau${n.keys.length>1?"s":""} no reconeguda${n.keys.length>1?"s":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`Clau inv\xe0lida a ${n.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Element inv\xe0lid a ${n.origin}`;default:return`Entrada inv\xe0lida`}})}},"cs",0,function(){let e,t,r;return{localeError:(e={string:{unit:"znak",verb:"mt"},file:{unit:"bajt",verb:"mt"},array:{unit:"prvk",verb:"mt"},set:{unit:"prvk",verb:"mt"}},t={regex:"regulrn vraz",email:"e-mailov adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve formtu ISO",date:"datum ve formtu ISO",time:"as ve formtu ISO",duration:"doba trvn ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zakdovan ve formtu base64",base64url:"etzec zakdovan ve formtu base64url",json_string:"etzec ve formtu JSON",e164:"slo E.164",jwt:"JWT",template_literal:"vstup"},r={nan:"NaN",number:"slo",string:"etzec",function:"funkce",array:"pole"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Neplatn\xfd vstup: oek\xe1v\xe1no instanceof ${n.expected}, obdreno ${i}`;return`Neplatn\xfd vstup: oek\xe1v\xe1no ${e}, obdreno ${i}`}case"invalid_value":if(1===n.values.length)return`Neplatn\xfd vstup: oek\xe1v\xe1no ${oV(n.values[0])}`;return`Neplatn\xe1 monost: oek\xe1v\xe1na jedna z hodnot ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Hodnota je p\xedli velk\xe1: ${n.origin??"hodnota"} mus\xed m\xedt ${t}${n.maximum.toString()} ${r.unit??"prvk"}`;return`Hodnota je p\xedli velk\xe1: ${n.origin??"hodnota"} mus\xed b\xfdt ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Hodnota je p\xedli mal\xe1: ${n.origin??"hodnota"} mus\xed m\xedt ${t}${n.minimum.toString()} ${r.unit??"prvk"}`;return`Hodnota je p\xedli mal\xe1: ${n.origin??"hodnota"} mus\xed b\xfdt ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Neplatn\xfd etzec: mus\xed za\xednat na "${n.prefix}"`;if("ends_with"===n.format)return`Neplatn\xfd etzec: mus\xed konit na "${n.suffix}"`;if("includes"===n.format)return`Neplatn\xfd etzec: mus\xed obsahovat "${n.includes}"`;if("regex"===n.format)return`Neplatn\xfd etzec: mus\xed odpov\xeddat vzoru ${n.pattern}`;return`Neplatn\xfd form\xe1t ${t[n.format]??n.format}`;case"not_multiple_of":return`Neplatn\xe9 \xedslo: mus\xed b\xfdt n\xe1sobkem ${n.divisor}`;case"unrecognized_keys":return`Nezn\xe1m\xe9 kl\xede: ${oy(n.keys,", ")}`;case"invalid_key":return`Neplatn\xfd kl\xed v ${n.origin}`;case"invalid_union":return"Neplatn vstup";case"invalid_element":return`Neplatn\xe1 hodnota v ${n.origin}`;default:return`Neplatn\xfd vstup`}})}},"da",0,function(){let e,t,r;return{localeError:(e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslt",date:"ISO-dato",time:"ISO-klokkeslt",duration:"ISO-varighed",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},r={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"st",file:"fil"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Ugyldigt input: forventede instanceof ${n.expected}, fik ${i}`;return`Ugyldigt input: forventede ${e}, fik ${i}`}case"invalid_value":if(1===n.values.length)return`Ugyldig v\xe6rdi: forventede ${oV(n.values[0])}`;return`Ugyldigt valg: forventede en af f\xf8lgende ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",i=e[n.origin]??null,o=r[n.origin]??n.origin;if(i)return`For stor: forventede ${o??"value"} ${i.verb} ${t} ${n.maximum.toString()} ${i.unit??"elementer"}`;return`For stor: forventede ${o??"value"} havde ${t} ${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",i=e[n.origin]??null,o=r[n.origin]??n.origin;if(i)return`For lille: forventede ${o} ${i.verb} ${t} ${n.minimum.toString()} ${i.unit}`;return`For lille: forventede ${o} havde ${t} ${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Ugyldig streng: skal starte med "${n.prefix}"`;if("ends_with"===n.format)return`Ugyldig streng: skal ende med "${n.suffix}"`;if("includes"===n.format)return`Ugyldig streng: skal indeholde "${n.includes}"`;if("regex"===n.format)return`Ugyldig streng: skal matche m\xf8nsteret ${n.pattern}`;return`Ugyldig ${t[n.format]??n.format}`;case"not_multiple_of":return`Ugyldigt tal: skal v\xe6re deleligt med ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukendte ngler":"Ukendt ngle"}: ${oy(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8gle i ${n.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xe6rdi i ${n.origin}`;default:return"Ugyldigt input"}})}},"de",0,function(){let e,t,r;return{localeError:(e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}},t={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},r={nan:"NaN",number:"Zahl",array:"Array"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Ung\xfcltige Eingabe: erwartet instanceof ${n.expected}, erhalten ${i}`;return`Ung\xfcltige Eingabe: erwartet ${e}, erhalten ${i}`}case"invalid_value":if(1===n.values.length)return`Ung\xfcltige Eingabe: erwartet ${oV(n.values[0])}`;return`Ung\xfcltige Option: erwartet eine von ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Zu gro\xdf: erwartet, dass ${n.origin??"Wert"} ${t}${n.maximum.toString()} ${r.unit??"Elemente"} hat`;return`Zu gro\xdf: erwartet, dass ${n.origin??"Wert"} ${t}${n.maximum.toString()} ist`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Zu klein: erwartet, dass ${n.origin} ${t}${n.minimum.toString()} ${r.unit} hat`;return`Zu klein: erwartet, dass ${n.origin} ${t}${n.minimum.toString()} ist`}case"invalid_format":if("starts_with"===n.format)return`Ung\xfcltiger String: muss mit "${n.prefix}" beginnen`;if("ends_with"===n.format)return`Ung\xfcltiger String: muss mit "${n.suffix}" enden`;if("includes"===n.format)return`Ung\xfcltiger String: muss "${n.includes}" enthalten`;if("regex"===n.format)return`Ung\xfcltiger String: muss dem Muster ${n.pattern} entsprechen`;return`Ung\xfcltig: ${t[n.format]??n.format}`;case"not_multiple_of":return`Ung\xfcltige Zahl: muss ein Vielfaches von ${n.divisor} sein`;case"unrecognized_keys":return`${n.keys.length>1?"Unbekannte Schlssel":"Unbekannter Schlssel"}: ${oy(n.keys,", ")}`;case"invalid_key":return`Ung\xfcltiger Schl\xfcssel in ${n.origin}`;case"invalid_union":return"Ungltige Eingabe";case"invalid_element":return`Ung\xfcltiger Wert in ${n.origin}`;default:return`Ung\xfcltige Eingabe`}})}},"en",0,cb,"eo",0,function(){let e,t,r;return{localeError:(e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}},t={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},r={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Nevalida enigo: atendiis instanceof ${n.expected}, riceviis ${i}`;return`Nevalida enigo: atendiis ${e}, riceviis ${i}`}case"invalid_value":if(1===n.values.length)return`Nevalida enigo: atendiis ${oV(n.values[0])}`;return`Nevalida opcio: atendiis unu el ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Tro granda: atendiis ke ${n.origin??"valoro"} havu ${t}${n.maximum.toString()} ${r.unit??"elementojn"}`;return`Tro granda: atendiis ke ${n.origin??"valoro"} havu ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Tro malgranda: atendiis ke ${n.origin} havu ${t}${n.minimum.toString()} ${r.unit}`;return`Tro malgranda: atendiis ke ${n.origin} estu ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Nevalida karaktraro: devas komencii per "${n.prefix}"`;if("ends_with"===n.format)return`Nevalida karaktraro: devas finii per "${n.suffix}"`;if("includes"===n.format)return`Nevalida karaktraro: devas inkluzivi "${n.includes}"`;if("regex"===n.format)return`Nevalida karaktraro: devas kongrui kun la modelo ${n.pattern}`;return`Nevalida ${t[n.format]??n.format}`;case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${n.divisor}`;case"unrecognized_keys":return`Nekonata${n.keys.length>1?"j":""} losilo${n.keys.length>1?"j":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${n.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${n.origin}`}})}},"es",0,function(){let e,t,r;return{localeError:(e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={regex:"entrada",email:"direccin de correo electrnico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duracin ISO",ipv4:"direccin IPv4",ipv6:"direccin IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},r={nan:"NaN",string:"texto",number:"nmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nmero grande",symbol:"smbolo",undefined:"indefinido",null:"nulo",function:"funcin",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeracin",union:"unin",literal:"literal",promise:"promesa",void:"vaco",never:"nunca",unknown:"desconocido",any:"cualquiera"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Entrada inv\xe1lida: se esperaba instanceof ${n.expected}, recibido ${i}`;return`Entrada inv\xe1lida: se esperaba ${e}, recibido ${i}`}case"invalid_value":if(1===n.values.length)return`Entrada inv\xe1lida: se esperaba ${oV(n.values[0])}`;return`Opci\xf3n inv\xe1lida: se esperaba una de ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",i=e[n.origin]??null,o=r[n.origin]??n.origin;if(i)return`Demasiado grande: se esperaba que ${o??"valor"} tuviera ${t}${n.maximum.toString()} ${i.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${o??"valor"} fuera ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",i=e[n.origin]??null,o=r[n.origin]??n.origin;if(i)return`Demasiado peque\xf1o: se esperaba que ${o} tuviera ${t}${n.minimum.toString()} ${i.unit}`;return`Demasiado peque\xf1o: se esperaba que ${o} fuera ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Cadena inv\xe1lida: debe comenzar con "${n.prefix}"`;if("ends_with"===n.format)return`Cadena inv\xe1lida: debe terminar en "${n.suffix}"`;if("includes"===n.format)return`Cadena inv\xe1lida: debe incluir "${n.includes}"`;if("regex"===n.format)return`Cadena inv\xe1lida: debe coincidir con el patr\xf3n ${n.pattern}`;return`Inv\xe1lido ${t[n.format]??n.format}`;case"not_multiple_of":return`N\xfamero inv\xe1lido: debe ser m\xfaltiplo de ${n.divisor}`;case"unrecognized_keys":return`Llave${n.keys.length>1?"s":""} desconocida${n.keys.length>1?"s":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`Llave inv\xe1lida en ${r[n.origin]??n.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido en ${r[n.origin]??n.origin}`;default:return`Entrada inv\xe1lida`}})}},"fa",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` :  instanceof ${n.expected}  ${i}  `;return` :  ${e}  ${i}  `}case"invalid_value":if(1===n.values.length)return` :  ${oV(n.values[0])} `;return` :    ${oy(n.values,"|")} `;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` : ${n.origin??""}  ${t}${n.maximum.toString()} ${r.unit??""} `;return` : ${n.origin??""}  ${t}${n.maximum.toString()} `}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` : ${n.origin}  ${t}${n.minimum.toString()} ${r.unit} `;return` : ${n.origin}  ${t}${n.minimum.toString()} `}case"invalid_format":if("starts_with"===n.format)return` :   "${n.prefix}"  `;if("ends_with"===n.format)return` :   "${n.suffix}"  `;if("includes"===n.format)return` :   "${n.includes}" `;if("regex"===n.format)return` :    ${n.pattern}   `;return`${t[n.format]??n.format} `;case"not_multiple_of":return` :   ${n.divisor} `;case"unrecognized_keys":return`${n.keys.length>1?"":""} : ${oy(n.keys,", ")}`;case"invalid_key":return`   ${n.origin}`;case"invalid_union":default:return` `;case"invalid_element":return`   ${n.origin}`}})}},"fi",0,function(){let e,t,r;return{localeError:(e={string:{unit:"merkki",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pivmrn"}},t={regex:"snnllinen lauseke",email:"shkpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pivmr",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Virheellinen tyyppi: odotettiin instanceof ${n.expected}, oli ${i}`;return`Virheellinen tyyppi: odotettiin ${e}, oli ${i}`}case"invalid_value":if(1===n.values.length)return`Virheellinen sy\xf6te: t\xe4ytyy olla ${oV(n.values[0])}`;return`Virheellinen valinta: t\xe4ytyy olla yksi seuraavista: ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Liian suuri: ${r.subject} t\xe4ytyy olla ${t}${n.maximum.toString()} ${r.unit}`.trim();return`Liian suuri: arvon t\xe4ytyy olla ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Liian pieni: ${r.subject} t\xe4ytyy olla ${t}${n.minimum.toString()} ${r.unit}`.trim();return`Liian pieni: arvon t\xe4ytyy olla ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Virheellinen sy\xf6te: t\xe4ytyy alkaa "${n.prefix}"`;if("ends_with"===n.format)return`Virheellinen sy\xf6te: t\xe4ytyy loppua "${n.suffix}"`;if("includes"===n.format)return`Virheellinen sy\xf6te: t\xe4ytyy sis\xe4lt\xe4\xe4 "${n.includes}"`;if("regex"===n.format)return`Virheellinen sy\xf6te: t\xe4ytyy vastata s\xe4\xe4nn\xf6llist\xe4 lauseketta ${n.pattern}`;return`Virheellinen ${t[n.format]??n.format}`;case"not_multiple_of":return`Virheellinen luku: t\xe4ytyy olla luvun ${n.divisor} monikerta`;case"unrecognized_keys":return`${n.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${oy(n.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return`Virheellinen sy\xf6te`}})}},"fr",0,function(){let e,t,r;return{localeError:(e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},t={regex:"entre",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},r={nan:"NaN",number:"nombre",array:"tableau"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Entr\xe9e invalide : instanceof ${n.expected} attendu, ${i} re\xe7u`;return`Entr\xe9e invalide : ${e} attendu, ${i} re\xe7u`}case"invalid_value":if(1===n.values.length)return`Entr\xe9e invalide : ${oV(n.values[0])} attendu`;return`Option invalide : une valeur parmi ${oy(n.values,"|")} attendue`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Trop grand : ${n.origin??"valeur"} doit ${r.verb} ${t}${n.maximum.toString()} ${r.unit??"lment(s)"}`;return`Trop grand : ${n.origin??"valeur"} doit \xeatre ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Trop petit : ${n.origin} doit ${r.verb} ${t}${n.minimum.toString()} ${r.unit}`;return`Trop petit : ${n.origin} doit \xeatre ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Cha\xeene invalide : doit commencer par "${n.prefix}"`;if("ends_with"===n.format)return`Cha\xeene invalide : doit se terminer par "${n.suffix}"`;if("includes"===n.format)return`Cha\xeene invalide : doit inclure "${n.includes}"`;if("regex"===n.format)return`Cha\xeene invalide : doit correspondre au mod\xe8le ${n.pattern}`;return`${t[n.format]??n.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xe9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${oy(n.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${n.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return`Entr\xe9e invalide`}})}},"frCA",0,function(){let e,t,r;return{localeError:(e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},t={regex:"entre",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Entr\xe9e invalide : attendu instanceof ${n.expected}, re\xe7u ${i}`;return`Entr\xe9e invalide : attendu ${e}, re\xe7u ${i}`}case"invalid_value":if(1===n.values.length)return`Entr\xe9e invalide : attendu ${oV(n.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"":"<",r=e[n.origin]??null;if(r)return`Trop grand : attendu que ${n.origin??"la valeur"} ait ${t}${n.maximum.toString()} ${r.unit}`;return`Trop grand : attendu que ${n.origin??"la valeur"} soit ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?"":">",r=e[n.origin]??null;if(r)return`Trop petit : attendu que ${n.origin} ait ${t}${n.minimum.toString()} ${r.unit}`;return`Trop petit : attendu que ${n.origin} soit ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Cha\xeene invalide : doit commencer par "${n.prefix}"`;if("ends_with"===n.format)return`Cha\xeene invalide : doit se terminer par "${n.suffix}"`;if("includes"===n.format)return`Cha\xeene invalide : doit inclure "${n.includes}"`;if("regex"===n.format)return`Cha\xeene invalide : doit correspondre au motif ${n.pattern}`;return`${t[n.format]??n.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xe9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${oy(n.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${n.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return`Entr\xe9e invalide`}})}},"he",0,function(){let e,t,r,n,i,o,a,s,l;return{localeError:(e={string:{label:"",gender:"f"},number:{label:"",gender:"m"},boolean:{label:" ",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"",gender:"m"},array:{label:"",gender:"m"},object:{label:"",gender:"m"},null:{label:"  (null)",gender:"m"},undefined:{label:"   (undefined)",gender:"m"},symbol:{label:" (Symbol)",gender:"m"},function:{label:"",gender:"f"},map:{label:" (Map)",gender:"f"},set:{label:" (Set)",gender:"f"},file:{label:"",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"  ",gender:"m"},value:{label:"",gender:"m"}},t={string:{unit:"",shortLabel:"",longLabel:""},file:{unit:"",shortLabel:"",longLabel:""},array:{unit:"",shortLabel:"",longLabel:""},set:{unit:"",shortLabel:"",longLabel:""},number:{unit:"",shortLabel:"",longLabel:""}},r=t=>t?e[t]:void 0,n=t=>{let n=r(t);return n?n.label:t??e.unknown.label},i=e=>`${n(e)}`,o=e=>{let t=r(e);return"f"===(t?.gender??"m")?" ":" "},a=e=>e?t[e]??null:null,s={regex:{label:"",gender:"m"},email:{label:" ",gender:"f"},url:{label:" ",gender:"f"},emoji:{label:"'",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"  ISO",gender:"m"},date:{label:" ISO",gender:"m"},time:{label:" ISO",gender:"m"},duration:{label:"  ISO",gender:"m"},ipv4:{label:" IPv4",gender:"f"},ipv6:{label:" IPv6",gender:"f"},cidrv4:{label:" IPv4",gender:"m"},cidrv6:{label:" IPv6",gender:"m"},base64:{label:"  64",gender:"f"},base64url:{label:"  64  ",gender:"f"},json_string:{label:" JSON",gender:"f"},e164:{label:" E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"",gender:"m"},includes:{label:"",gender:"m"},lowercase:{label:"",gender:"m"},starts_with:{label:"",gender:"m"},uppercase:{label:"",gender:"m"}},l={nan:"NaN"},t=>{switch(t.code){case"invalid_type":{let r=t.expected,i=l[r??""]??n(r),o=o7(t.input),a=l[o]??e[o]?.label??o;if(/^[A-Z]/.test(t.expected))return`  :   instanceof ${t.expected},  ${a}`;return`  :   ${i},  ${a}`}case"invalid_value":{if(1===t.values.length)return`  :    ${oV(t.values[0])}`;let e=t.values.map(e=>oV(e));if(2===t.values.length)return`  :    ${e[0]}  ${e[1]}`;let r=e[e.length-1],n=e.slice(0,-1).join(", ");return`  :    ${n}  ${r}`}case"too_big":{let e=a(t.origin),r=i(t.origin??"value");if("string"===t.origin)return`${e?.longLabel??""} : ${r}   ${t.maximum.toString()} ${e?.unit??""} ${t.inclusive?" ":" "}`.trim();if("number"===t.origin){let e=t.inclusive?`   -${t.maximum}`:` -${t.maximum}`;return` : ${r}   ${e}`}if("array"===t.origin||"set"===t.origin){let n="set"===t.origin?"":"",i=t.inclusive?`${t.maximum} ${e?.unit??""}  `:` -${t.maximum} ${e?.unit??""}`;return` : ${r} ${n}  ${i}`.trim()}let n=t.inclusive?"<=":"<",s=o(t.origin??"value");if(e?.unit)return`${e.longLabel} : ${r} ${s} ${n}${t.maximum.toString()} ${e.unit}`;return`${e?.longLabel??""} : ${r} ${s} ${n}${t.maximum.toString()}`}case"too_small":{let e=a(t.origin),r=i(t.origin??"value");if("string"===t.origin)return`${e?.shortLabel??""} : ${r}   ${t.minimum.toString()} ${e?.unit??""} ${t.inclusive?" ":""}`.trim();if("number"===t.origin){let e=t.inclusive?`   -${t.minimum}`:` -${t.minimum}`;return` : ${r}   ${e}`}if("array"===t.origin||"set"===t.origin){let n="set"===t.origin?"":"";if(1===t.minimum&&t.inclusive){let e=(t.origin,"  ");return` : ${r} ${n}  ${e}`}let i=t.inclusive?`${t.minimum} ${e?.unit??""}  `:` -${t.minimum} ${e?.unit??""}`;return` : ${r} ${n}  ${i}`.trim()}let n=t.inclusive?">=":">",s=o(t.origin??"value");if(e?.unit)return`${e.shortLabel} : ${r} ${s} ${n}${t.minimum.toString()} ${e.unit}`;return`${e?.shortLabel??""} : ${r} ${s} ${n}${t.minimum.toString()}`}case"invalid_format":{if("starts_with"===t.format)return`    "${t.prefix}"`;if("ends_with"===t.format)return`    "${t.suffix}"`;if("includes"===t.format)return`   "${t.includes}"`;if("regex"===t.format)return`    ${t.pattern}`;let e=s[t.format],r=e?.label??t.format,n=e?.gender??"m";return`${r}  ${"f"===n?"":""}`}case"not_multiple_of":return`  :     ${t.divisor}`;case"unrecognized_keys":return`${t.keys.length>1?"":""}  ${t.keys.length>1?"":""}: ${oy(t.keys,", ")}`;case"invalid_key":return`   `;case"invalid_union":return"  ";case"invalid_element":{let e=i(t.origin??"array");return`   ${e}`}default:return`  `}})}},"hu",0,function(){let e,t,r;return{localeError:(e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}},t={regex:"bemenet",email:"email cm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idblyeg",date:"ISO dtum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 cm",ipv6:"IPv6 cm",cidrv4:"IPv4 tartomny",cidrv6:"IPv6 tartomny",base64:"base64-kdolt string",base64url:"base64url-kdolt string",json_string:"JSON string",e164:"E.164 szm",jwt:"JWT",template_literal:"bemenet"},r={nan:"NaN",number:"szm",array:"tmb"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k instanceof ${n.expected}, a kapott \xe9rt\xe9k ${i}`;return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${e}, a kapott \xe9rt\xe9k ${i}`}case"invalid_value":if(1===n.values.length)return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${oV(n.values[0])}`;return`\xc9rv\xe9nytelen opci\xf3: valamelyik \xe9rt\xe9k v\xe1rt ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`T\xfal nagy: ${n.origin??"rtk"} m\xe9rete t\xfal nagy ${t}${n.maximum.toString()} ${r.unit??"elem"}`;return`T\xfal nagy: a bemeneti \xe9rt\xe9k ${n.origin??"rtk"} t\xfal nagy: ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${n.origin} m\xe9rete t\xfal kicsi ${t}${n.minimum.toString()} ${r.unit}`;return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${n.origin} t\xfal kicsi ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`\xc9rv\xe9nytelen string: "${n.prefix}" \xe9rt\xe9kkel kell kezddnie`;if("ends_with"===n.format)return`\xc9rv\xe9nytelen string: "${n.suffix}" \xe9rt\xe9kkel kell v\xe9gzdnie`;if("includes"===n.format)return`\xc9rv\xe9nytelen string: "${n.includes}" \xe9rt\xe9ket kell tartalmaznia`;if("regex"===n.format)return`\xc9rv\xe9nytelen string: ${n.pattern} mint\xe1nak kell megfelelnie`;return`\xc9rv\xe9nytelen ${t[n.format]??n.format}`;case"not_multiple_of":return`\xc9rv\xe9nytelen sz\xe1m: ${n.divisor} t\xf6bbsz\xf6r\xf6s\xe9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${n.keys.length>1?"s":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`\xc9rv\xe9nytelen kulcs ${n.origin}`;case"invalid_union":return"rvnytelen bemenet";case"invalid_element":return`\xc9rv\xe9nytelen \xe9rt\xe9k: ${n.origin}`;default:return`\xc9rv\xe9nytelen bemenet`}})}},"hy",0,function(){let e,t,r;return{localeError:(e={string:{unit:{one:"",many:""},verb:""},file:{unit:{one:"",many:""},verb:""},array:{unit:{one:"",many:""},verb:""},set:{unit:{one:"",many:""},verb:""}},t={regex:"",email:". ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`    instanceof ${n.expected},   ${i}`;return`    ${e},   ${i}`}case"invalid_value":if(1===n.values.length)return`    ${oV(n.values[1])}`;return`      ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r){let e=cw(Number(n.maximum),r.unit.one,r.unit.many);return`    ,  ${c_(n.origin??"")}  ${t}${n.maximum.toString()} ${e}`}return`    ,  ${c_(n.origin??"")}  ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r){let e=cw(Number(n.minimum),r.unit.one,r.unit.many);return`    ,  ${c_(n.origin)}  ${t}${n.minimum.toString()} ${e}`}return`    ,  ${c_(n.origin)}  ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`     "${n.prefix}"-`;if("ends_with"===n.format)return`     "${n.suffix}"-`;if("includes"===n.format)return`     "${n.includes}"`;if("regex"===n.format)return`     ${n.pattern} `;return` ${t[n.format]??n.format}`;case"not_multiple_of":return`      ${n.divisor}-`;case"unrecognized_keys":return` ${n.keys.length>1?"":""}. ${oy(n.keys,", ")}`;case"invalid_key":return`  ${c_(n.origin)}-`;case"invalid_union":return" ";case"invalid_element":return`  ${c_(n.origin)}-`;default:return` `}})}},"id",0,function(){let e,t,r;return{localeError:(e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}},t={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Input tidak valid: diharapkan instanceof ${n.expected}, diterima ${i}`;return`Input tidak valid: diharapkan ${e}, diterima ${i}`}case"invalid_value":if(1===n.values.length)return`Input tidak valid: diharapkan ${oV(n.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Terlalu besar: diharapkan ${n.origin??"value"} memiliki ${t}${n.maximum.toString()} ${r.unit??"elemen"}`;return`Terlalu besar: diharapkan ${n.origin??"value"} menjadi ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Terlalu kecil: diharapkan ${n.origin} memiliki ${t}${n.minimum.toString()} ${r.unit}`;return`Terlalu kecil: diharapkan ${n.origin} menjadi ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`String tidak valid: harus dimulai dengan "${n.prefix}"`;if("ends_with"===n.format)return`String tidak valid: harus berakhir dengan "${n.suffix}"`;if("includes"===n.format)return`String tidak valid: harus menyertakan "${n.includes}"`;if("regex"===n.format)return`String tidak valid: harus sesuai pola ${n.pattern}`;return`${t[n.format]??n.format} tidak valid`;case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${n.keys.length>1?"s":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${n.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${n.origin}`}})}},"is",0,function(){let e,t,r;return{localeError:(e={string:{unit:"stafi",verb:"a hafa"},file:{unit:"bti",verb:"a hafa"},array:{unit:"hluti",verb:"a hafa"},set:{unit:"hluti",verb:"a hafa"}},t={regex:"gildi",email:"netfang",url:"vefsl",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tmi",date:"ISO dagsetning",time:"ISO tmi",duration:"ISO tmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tlugildi",jwt:"JWT",template_literal:"gildi"},r={nan:"NaN",number:"nmer",array:"fylki"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Rangt gildi: \xde\xfa sl\xf3st inn ${i} \xfear sem \xe1 a\xf0 vera instanceof ${n.expected}`;return`Rangt gildi: \xde\xfa sl\xf3st inn ${i} \xfear sem \xe1 a\xf0 vera ${e}`}case"invalid_value":if(1===n.values.length)return`Rangt gildi: gert r\xe1\xf0 fyrir ${oV(n.values[0])}`;return`\xd3gilt val: m\xe1 vera eitt af eftirfarandi ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${n.origin??"gildi"} hafi ${t}${n.maximum.toString()} ${r.unit??"hluti"}`;return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${n.origin??"gildi"} s\xe9 ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${n.origin} hafi ${t}${n.minimum.toString()} ${r.unit}`;return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${n.origin} s\xe9 ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 byrja \xe1 "${n.prefix}"`;if("ends_with"===n.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 enda \xe1 "${n.suffix}"`;if("includes"===n.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 innihalda "${n.includes}"`;if("regex"===n.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 fylgja mynstri ${n.pattern}`;return`Rangt ${t[n.format]??n.format}`;case"not_multiple_of":return`R\xf6ng tala: ver\xf0ur a\xf0 vera margfeldi af ${n.divisor}`;case"unrecognized_keys":return`\xd3\xfeekkt ${n.keys.length>1?"ir lyklar":"ur lykill"}: ${oy(n.keys,", ")}`;case"invalid_key":return`Rangur lykill \xed ${n.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xed ${n.origin}`}})}},"it",0,function(){let e,t,r;return{localeError:(e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}},t={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},r={nan:"NaN",number:"numero",array:"vettore"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Input non valido: atteso instanceof ${n.expected}, ricevuto ${i}`;return`Input non valido: atteso ${e}, ricevuto ${i}`}case"invalid_value":if(1===n.values.length)return`Input non valido: atteso ${oV(n.values[0])}`;return`Opzione non valida: atteso uno tra ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Troppo grande: ${n.origin??"valore"} deve avere ${t}${n.maximum.toString()} ${r.unit??"elementi"}`;return`Troppo grande: ${n.origin??"valore"} deve essere ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Troppo piccolo: ${n.origin} deve avere ${t}${n.minimum.toString()} ${r.unit}`;return`Troppo piccolo: ${n.origin} deve essere ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Stringa non valida: deve iniziare con "${n.prefix}"`;if("ends_with"===n.format)return`Stringa non valida: deve terminare con "${n.suffix}"`;if("includes"===n.format)return`Stringa non valida: deve includere "${n.includes}"`;if("regex"===n.format)return`Stringa non valida: deve corrispondere al pattern ${n.pattern}`;return`Invalid ${t[n.format]??n.format}`;case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${n.divisor}`;case"unrecognized_keys":return`Chiav${n.keys.length>1?"i":"e"} non riconosciut${n.keys.length>1?"e":"a"}: ${oy(n.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${n.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${n.origin}`}})}},"ja",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`: instanceof ${n.expected}${i}`;return`: ${e}${i}`}case"invalid_value":if(1===n.values.length)return`: ${oV(n.values[0])}`;return`: ${oy(n.values,"")}`;case"too_big":{let t=n.inclusive?"":"",r=e[n.origin]??null;if(r)return`: ${n.origin??""}${n.maximum.toString()}${r.unit??""}${t}`;return`: ${n.origin??""}${n.maximum.toString()}${t}`}case"too_small":{let t=n.inclusive?"":"",r=e[n.origin]??null;if(r)return`: ${n.origin}${n.minimum.toString()}${r.unit}${t}`;return`: ${n.origin}${n.minimum.toString()}${t}`}case"invalid_format":if("starts_with"===n.format)return`: "${n.prefix}"`;if("ends_with"===n.format)return`: "${n.suffix}"`;if("includes"===n.format)return`: "${n.includes}"`;if("regex"===n.format)return`: ${n.pattern}`;return`${t[n.format]??n.format}`;case"not_multiple_of":return`: ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"":""}: ${oy(n.keys,"")}`;case"invalid_key":return`${n.origin}`;case"invalid_union":return"";case"invalid_element":return`${n.origin}`;default:return``}})}},"ka",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",string:"",boolean:"",function:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` :  instanceof ${n.expected},  ${i}`;return` :  ${e},  ${i}`}case"invalid_value":if(1===n.values.length)return` :  ${oV(n.values[0])}`;return` :  - ${oy(n.values,"|")}-`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` :  ${n.origin??""} ${r.verb} ${t}${n.maximum.toString()} ${r.unit}`;return` :  ${n.origin??""}  ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` :  ${n.origin} ${r.verb} ${t}${n.minimum.toString()} ${r.unit}`;return` :  ${n.origin}  ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return` :   "${n.prefix}"-`;if("ends_with"===n.format)return` :   "${n.suffix}"-`;if("includes"===n.format)return` :   "${n.includes}"-`;if("regex"===n.format)return` :    ${n.pattern}`;return` ${t[n.format]??n.format}`;case"not_multiple_of":return` :   ${n.divisor}- `;case"unrecognized_keys":return` ${n.keys.length>1?"":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`  ${n.origin}-`;case"invalid_union":return" ";case"invalid_element":return`  ${n.origin}-`;default:return` `}})}},"kh",0,function(){return cE()},"km",0,cE,"ko",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` :   instanceof ${n.expected},   ${i}`;return` :   ${e},   ${i}`}case"invalid_value":if(1===n.values.length)return` :  ${oV(n.values[0])}  `;return` : ${oy(n.values," ")}   `;case"too_big":{let t=n.inclusive?"":"",r=""===t?" ":" ",i=e[n.origin]??null,o=i?.unit??"";if(i)return`${n.origin??""}  : ${n.maximum.toString()}${o} ${t}${r}`;return`${n.origin??""}  : ${n.maximum.toString()} ${t}${r}`}case"too_small":{let t=n.inclusive?"":"",r=""===t?" ":" ",i=e[n.origin]??null,o=i?.unit??"";if(i)return`${n.origin??""}  : ${n.minimum.toString()}${o} ${t}${r}`;return`${n.origin??""}  : ${n.minimum.toString()} ${t}${r}`}case"invalid_format":if("starts_with"===n.format)return` : "${n.prefix}"()  `;if("ends_with"===n.format)return` : "${n.suffix}"()  `;if("includes"===n.format)return` : "${n.includes}"()  `;if("regex"===n.format)return` :  ${n.pattern}   `;return` ${t[n.format]??n.format}`;case"not_multiple_of":return` : ${n.divisor}  `;case"unrecognized_keys":return`   : ${oy(n.keys,", ")}`;case"invalid_key":return` : ${n.origin}`;case"invalid_union":default:return` `;case"invalid_element":return` : ${n.origin}`}})}},"lt",0,function(){return{localeError:(()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function t(t,r,n,i){let o=e[t]??null;return null===o?o:{unit:o.unit[r],verb:o.verb[i][n?"inclusive":"notInclusive"]}}let r={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"},n={nan:"NaN",number:"skaiius",bigint:"sveikasis skaiius",string:"eilut",boolean:"login reikm",undefined:"neapibrta reikm",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin reikm"};return e=>{switch(e.code){case"invalid_type":{let t=n[e.expected]??e.expected,r=o7(e.input),i=n[r]??r;if(/^[A-Z]/.test(e.expected))return`Gautas tipas ${i}, o tiktasi - instanceof ${e.expected}`;return`Gautas tipas ${i}, o tiktasi - ${t}`}case"invalid_value":if(1===e.values.length)return`Privalo bti ${oV(e.values[0])}`;return`Privalo bti vienas i ${oy(e.values,"|")} pasirinkim`;case"too_big":{let r=n[e.origin]??e.origin,i=t(e.origin,cS(Number(e.maximum)),e.inclusive??!1,"smaller");if(i?.verb)return`${cx(r??e.origin??"reikm")} ${i.verb} ${e.maximum.toString()} ${i.unit??"element"}`;let o=e.inclusive?"ne didesnis kaip":"maesnis kaip";return`${cx(r??e.origin??"reikm")} turi bti ${o} ${e.maximum.toString()} ${i?.unit}`}case"too_small":{let r=n[e.origin]??e.origin,i=t(e.origin,cS(Number(e.minimum)),e.inclusive??!1,"bigger");if(i?.verb)return`${cx(r??e.origin??"reikm")} ${i.verb} ${e.minimum.toString()} ${i.unit??"element"}`;let o=e.inclusive?"ne maesnis kaip":"didesnis kaip";return`${cx(r??e.origin??"reikm")} turi bti ${o} ${e.minimum.toString()} ${i?.unit}`}case"invalid_format":if("starts_with"===e.format)return`Eilut privalo prasidti "${e.prefix}"`;if("ends_with"===e.format)return`Eilut privalo pasibaigti "${e.suffix}"`;if("includes"===e.format)return`Eilut privalo traukti "${e.includes}"`;if("regex"===e.format)return`Eilut privalo atitikti ${e.pattern}`;return`Neteisingas ${r[e.format]??e.format}`;case"not_multiple_of":return`Skaiius privalo bti ${e.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${e.keys.length>1?"i":"as"} rakt${e.keys.length>1?"ai":"as"}: ${oy(e.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga vestis";case"invalid_element":{let t=n[e.origin]??e.origin;return`${cx(t??e.origin??"reikm")} turi klaiding vest`}}}})()}},"mk",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` :   instanceof ${n.expected},  ${i}`;return` :   ${e},  ${i}`}case"invalid_value":if(1===n.values.length)return`Invalid input: expected ${oV(n.values[0])}`;return` :    ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` :   ${n.origin??""}   ${t}${n.maximum.toString()} ${r.unit??""}`;return` :   ${n.origin??""}   ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` :   ${n.origin}   ${t}${n.minimum.toString()} ${r.unit}`;return` :   ${n.origin}   ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return` :     "${n.prefix}"`;if("ends_with"===n.format)return` :     "${n.suffix}"`;if("includes"===n.format)return` :    "${n.includes}"`;if("regex"===n.format)return` :      ${n.pattern}`;return`Invalid ${t[n.format]??n.format}`;case"not_multiple_of":return` :      ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?" ":" "}: ${oy(n.keys,", ")}`;case"invalid_key":return`   ${n.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${n.origin}`;default:return` `}})}},"ms",0,function(){let e,t,r;return{localeError:(e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}},t={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},r={nan:"NaN",number:"nombor"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Input tidak sah: dijangka instanceof ${n.expected}, diterima ${i}`;return`Input tidak sah: dijangka ${e}, diterima ${i}`}case"invalid_value":if(1===n.values.length)return`Input tidak sah: dijangka ${oV(n.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Terlalu besar: dijangka ${n.origin??"nilai"} ${r.verb} ${t}${n.maximum.toString()} ${r.unit??"elemen"}`;return`Terlalu besar: dijangka ${n.origin??"nilai"} adalah ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Terlalu kecil: dijangka ${n.origin} ${r.verb} ${t}${n.minimum.toString()} ${r.unit}`;return`Terlalu kecil: dijangka ${n.origin} adalah ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`String tidak sah: mesti bermula dengan "${n.prefix}"`;if("ends_with"===n.format)return`String tidak sah: mesti berakhir dengan "${n.suffix}"`;if("includes"===n.format)return`String tidak sah: mesti mengandungi "${n.includes}"`;if("regex"===n.format)return`String tidak sah: mesti sepadan dengan corak ${n.pattern}`;return`${t[n.format]??n.format} tidak sah`;case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${oy(n.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${n.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${n.origin}`}})}},"nl",0,function(){let e,t,r;return{localeError:(e={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}},t={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},r={nan:"NaN",number:"getal"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Ongeldige invoer: verwacht instanceof ${n.expected}, ontving ${i}`;return`Ongeldige invoer: verwacht ${e}, ontving ${i}`}case"invalid_value":if(1===n.values.length)return`Ongeldige invoer: verwacht ${oV(n.values[0])}`;return`Ongeldige optie: verwacht \xe9\xe9n van ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null,i="date"===n.origin?"laat":"string"===n.origin?"lang":"groot";if(r)return`Te ${i}: verwacht dat ${n.origin??"waarde"} ${t}${n.maximum.toString()} ${r.unit??"elementen"} ${r.verb}`;return`Te ${i}: verwacht dat ${n.origin??"waarde"} ${t}${n.maximum.toString()} is`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null,i="date"===n.origin?"vroeg":"string"===n.origin?"kort":"klein";if(r)return`Te ${i}: verwacht dat ${n.origin} ${t}${n.minimum.toString()} ${r.unit} ${r.verb}`;return`Te ${i}: verwacht dat ${n.origin} ${t}${n.minimum.toString()} is`}case"invalid_format":if("starts_with"===n.format)return`Ongeldige tekst: moet met "${n.prefix}" beginnen`;if("ends_with"===n.format)return`Ongeldige tekst: moet op "${n.suffix}" eindigen`;if("includes"===n.format)return`Ongeldige tekst: moet "${n.includes}" bevatten`;if("regex"===n.format)return`Ongeldige tekst: moet overeenkomen met patroon ${n.pattern}`;return`Ongeldig: ${t[n.format]??n.format}`;case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${n.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${n.keys.length>1?"s":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${n.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${n.origin}`}})}},"no",0,function(){let e,t,r;return{localeError:(e={string:{unit:"tegn",verb:" ha"},file:{unit:"bytes",verb:" ha"},array:{unit:"elementer",verb:" inneholde"},set:{unit:"elementer",verb:" inneholde"}},t={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},r={nan:"NaN",number:"tall",array:"liste"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Ugyldig input: forventet instanceof ${n.expected}, fikk ${i}`;return`Ugyldig input: forventet ${e}, fikk ${i}`}case"invalid_value":if(1===n.values.length)return`Ugyldig verdi: forventet ${oV(n.values[0])}`;return`Ugyldig valg: forventet en av ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`For stor(t): forventet ${n.origin??"value"} til \xe5 ha ${t}${n.maximum.toString()} ${r.unit??"elementer"}`;return`For stor(t): forventet ${n.origin??"value"} til \xe5 ha ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`For lite(n): forventet ${n.origin} til \xe5 ha ${t}${n.minimum.toString()} ${r.unit}`;return`For lite(n): forventet ${n.origin} til \xe5 ha ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Ugyldig streng: m\xe5 starte med "${n.prefix}"`;if("ends_with"===n.format)return`Ugyldig streng: m\xe5 ende med "${n.suffix}"`;if("includes"===n.format)return`Ugyldig streng: m\xe5 inneholde "${n.includes}"`;if("regex"===n.format)return`Ugyldig streng: m\xe5 matche m\xf8nsteret ${n.pattern}`;return`Ugyldig ${t[n.format]??n.format}`;case"not_multiple_of":return`Ugyldig tall: m\xe5 v\xe6re et multiplum av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukjente nkler":"Ukjent nkkel"}: ${oy(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8kkel i ${n.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${n.origin}`}})}},"ota",0,function(){let e,t,r;return{localeError:(e={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}},t={regex:"giren",email:"epostagh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengm",date:"ISO tarihi",time:"ISO zaman",duration:"ISO mddeti",ipv4:"IPv4 nin",ipv6:"IPv6 nin",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"},r={nan:"NaN",number:"numara",array:"saf",null:"gayb"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`F\xe2sit giren: umulan instanceof ${n.expected}, alnan ${i}`;return`F\xe2sit giren: umulan ${e}, alnan ${i}`}case"invalid_value":if(1===n.values.length)return`F\xe2sit giren: umulan ${oV(n.values[0])}`;return`F\xe2sit tercih: m\xfbteberler ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Fazla b\xfcy\xfck: ${n.origin??"value"}, ${t}${n.maximum.toString()} ${r.unit??"elements"} sahip olmalyd.`;return`Fazla b\xfcy\xfck: ${n.origin??"value"}, ${t}${n.maximum.toString()} olmalyd.`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Fazla k\xfc\xe7\xfck: ${n.origin}, ${t}${n.minimum.toString()} ${r.unit} sahip olmalyd.`;return`Fazla k\xfc\xe7\xfck: ${n.origin}, ${t}${n.minimum.toString()} olmalyd.`}case"invalid_format":if("starts_with"===n.format)return`F\xe2sit metin: "${n.prefix}" ile balamal.`;if("ends_with"===n.format)return`F\xe2sit metin: "${n.suffix}" ile bitmeli.`;if("includes"===n.format)return`F\xe2sit metin: "${n.includes}" ihtiv\xe2 etmeli.`;if("regex"===n.format)return`F\xe2sit metin: ${n.pattern} nakna uymal.`;return`F\xe2sit ${t[n.format]??n.format}`;case"not_multiple_of":return`F\xe2sit say: ${n.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${n.keys.length>1?"s":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xe7in tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${n.origin} i\xe7in tannmayan kymet var.`;default:return`Kymet tannamad.`}})}},"pl",0,function(){let e,t,r;return{localeError:(e={string:{unit:"znakw",verb:"mie"},file:{unit:"bajtw",verb:"mie"},array:{unit:"elementw",verb:"mie"},set:{unit:"elementw",verb:"mie"}},t={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znakw zakodowany w formacie base64",base64url:"cig znakw zakodowany w formacie base64url",json_string:"cig znakw w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"},r={nan:"NaN",number:"liczba",array:"tablica"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Nieprawidowe dane wejciowe: oczekiwano instanceof ${n.expected}, otrzymano ${i}`;return`Nieprawidowe dane wejciowe: oczekiwano ${e}, otrzymano ${i}`}case"invalid_value":if(1===n.values.length)return`Nieprawidowe dane wejciowe: oczekiwano ${oV(n.values[0])}`;return`Nieprawidowa opcja: oczekiwano jednej z wartoci ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Za dua warto: oczekiwano, e ${n.origin??"warto"} bdzie mie ${t}${n.maximum.toString()} ${r.unit??"elementw"}`;return`Zbyt du(y/a/e): oczekiwano, e ${n.origin??"warto"} bdzie wynosi ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Za maa warto: oczekiwano, e ${n.origin??"warto"} bdzie mie ${t}${n.minimum.toString()} ${r.unit??"elementw"}`;return`Zbyt ma(y/a/e): oczekiwano, e ${n.origin??"warto"} bdzie wynosi ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Nieprawidowy cig znak\xf3w: musi zaczyna si od "${n.prefix}"`;if("ends_with"===n.format)return`Nieprawidowy cig znak\xf3w: musi koczy si na "${n.suffix}"`;if("includes"===n.format)return`Nieprawidowy cig znak\xf3w: musi zawiera "${n.includes}"`;if("regex"===n.format)return`Nieprawidowy cig znak\xf3w: musi odpowiada wzorcowi ${n.pattern}`;return`Nieprawidow(y/a/e) ${t[n.format]??n.format}`;case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${n.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${n.keys.length>1?"s":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${n.origin}`;case"invalid_union":return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${n.origin}`;default:return`Nieprawidowe dane wejciowe`}})}},"ps",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` :  instanceof ${n.expected} ,  ${i}  `;return` :  ${e} ,  ${i}  `}case"invalid_value":if(1===n.values.length)return` :  ${oV(n.values[0])} `;return` :    ${oy(n.values,"|")}  `;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` : ${n.origin??""}  ${t}${n.maximum.toString()} ${r.unit??""} `;return` : ${n.origin??""}  ${t}${n.maximum.toString()} `}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` : ${n.origin}  ${t}${n.minimum.toString()} ${r.unit} `;return` : ${n.origin}  ${t}${n.minimum.toString()} `}case"invalid_format":if("starts_with"===n.format)return` :   "${n.prefix}"   `;if("ends_with"===n.format)return` :   "${n.suffix}"    `;if("includes"===n.format)return` :  "${n.includes}" `;if("regex"===n.format)return` :   ${n.pattern}   `;return`${t[n.format]??n.format}  `;case"not_multiple_of":return` :   ${n.divisor}  `;case"unrecognized_keys":return` ${n.keys.length>1?"":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`   ${n.origin} `;case"invalid_union":default:return` `;case"invalid_element":return`   ${n.origin} `}})}},"pt",0,function(){let e,t,r;return{localeError:(e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}},t={regex:"padro",email:"endereo de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"durao ISO",ipv4:"endereo IPv4",ipv6:"endereo IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},r={nan:"NaN",number:"nmero",null:"nulo"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Tipo inv\xe1lido: esperado instanceof ${n.expected}, recebido ${i}`;return`Tipo inv\xe1lido: esperado ${e}, recebido ${i}`}case"invalid_value":if(1===n.values.length)return`Entrada inv\xe1lida: esperado ${oV(n.values[0])}`;return`Op\xe7\xe3o inv\xe1lida: esperada uma das ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Muito grande: esperado que ${n.origin??"valor"} tivesse ${t}${n.maximum.toString()} ${r.unit??"elementos"}`;return`Muito grande: esperado que ${n.origin??"valor"} fosse ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Muito pequeno: esperado que ${n.origin} tivesse ${t}${n.minimum.toString()} ${r.unit}`;return`Muito pequeno: esperado que ${n.origin} fosse ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Texto inv\xe1lido: deve come\xe7ar com "${n.prefix}"`;if("ends_with"===n.format)return`Texto inv\xe1lido: deve terminar com "${n.suffix}"`;if("includes"===n.format)return`Texto inv\xe1lido: deve incluir "${n.includes}"`;if("regex"===n.format)return`Texto inv\xe1lido: deve corresponder ao padr\xe3o ${n.pattern}`;return`${t[n.format]??n.format} inv\xe1lido`;case"not_multiple_of":return`N\xfamero inv\xe1lido: deve ser m\xfaltiplo de ${n.divisor}`;case"unrecognized_keys":return`Chave${n.keys.length>1?"s":""} desconhecida${n.keys.length>1?"s":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`Chave inv\xe1lida em ${n.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido em ${n.origin}`;default:return`Campo inv\xe1lido`}})}},"ru",0,function(){let e,t,r;return{localeError:(e={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}},t={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` :  instanceof ${n.expected},  ${i}`;return` :  ${e},  ${i}`}case"invalid_value":if(1===n.values.length)return` :  ${oV(n.values[0])}`;return` :    ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r){let e=ck(Number(n.maximum),r.unit.one,r.unit.few,r.unit.many);return`  : ,  ${n.origin??""}   ${t}${n.maximum.toString()} ${e}`}return`  : ,  ${n.origin??""}  ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r){let e=ck(Number(n.minimum),r.unit.one,r.unit.few,r.unit.many);return`  : ,  ${n.origin}   ${t}${n.minimum.toString()} ${e}`}return`  : ,  ${n.origin}  ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return` :    "${n.prefix}"`;if("ends_with"===n.format)return` :    "${n.suffix}"`;if("includes"===n.format)return` :   "${n.includes}"`;if("regex"===n.format)return` :    ${n.pattern}`;return` ${t[n.format]??n.format}`;case"not_multiple_of":return` :    ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"":""} ${n.keys.length>1?"":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`   ${n.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${n.origin}`;default:return`  `}})}},"sl",0,function(){let e,t,r;return{localeError:(e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}},t={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"},r={nan:"NaN",number:"tevilo",array:"tabela"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Neveljaven vnos: priakovano instanceof ${n.expected}, prejeto ${i}`;return`Neveljaven vnos: priakovano ${e}, prejeto ${i}`}case"invalid_value":if(1===n.values.length)return`Neveljaven vnos: priakovano ${oV(n.values[0])}`;return`Neveljavna monost: priakovano eno izmed ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Preveliko: priakovano, da bo ${n.origin??"vrednost"} imelo ${t}${n.maximum.toString()} ${r.unit??"elementov"}`;return`Preveliko: priakovano, da bo ${n.origin??"vrednost"} ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Premajhno: priakovano, da bo ${n.origin} imelo ${t}${n.minimum.toString()} ${r.unit}`;return`Premajhno: priakovano, da bo ${n.origin} ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Neveljaven niz: mora se zaeti z "${n.prefix}"`;if("ends_with"===n.format)return`Neveljaven niz: mora se konati z "${n.suffix}"`;if("includes"===n.format)return`Neveljaven niz: mora vsebovati "${n.includes}"`;if("regex"===n.format)return`Neveljaven niz: mora ustrezati vzorcu ${n.pattern}`;return`Neveljaven ${t[n.format]??n.format}`;case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${n.divisor}`;case"unrecognized_keys":return`Neprepoznan${n.keys.length>1?"i kljui":" klju"}: ${oy(n.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${n.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${n.origin}`}})}},"sv",0,function(){let e,t,r;return{localeError:(e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehlla"},set:{unit:"objekt",verb:"att innehlla"}},t={regex:"reguljrt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strng",base64url:"base64url-kodad strng",json_string:"JSON-strng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},r={nan:"NaN",number:"antal",array:"lista"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Ogiltig inmatning: f\xf6rv\xe4ntat instanceof ${n.expected}, fick ${i}`;return`Ogiltig inmatning: f\xf6rv\xe4ntat ${e}, fick ${i}`}case"invalid_value":if(1===n.values.length)return`Ogiltig inmatning: f\xf6rv\xe4ntat ${oV(n.values[0])}`;return`Ogiltigt val: f\xf6rv\xe4ntade en av ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`F\xf6r stor(t): f\xf6rv\xe4ntade ${n.origin??"vrdet"} att ha ${t}${n.maximum.toString()} ${r.unit??"element"}`;return`F\xf6r stor(t): f\xf6rv\xe4ntat ${n.origin??"vrdet"} att ha ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`F\xf6r lite(t): f\xf6rv\xe4ntade ${n.origin??"vrdet"} att ha ${t}${n.minimum.toString()} ${r.unit}`;return`F\xf6r lite(t): f\xf6rv\xe4ntade ${n.origin??"vrdet"} att ha ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Ogiltig str\xe4ng: m\xe5ste b\xf6rja med "${n.prefix}"`;if("ends_with"===n.format)return`Ogiltig str\xe4ng: m\xe5ste sluta med "${n.suffix}"`;if("includes"===n.format)return`Ogiltig str\xe4ng: m\xe5ste inneh\xe5lla "${n.includes}"`;if("regex"===n.format)return`Ogiltig str\xe4ng: m\xe5ste matcha m\xf6nstret "${n.pattern}"`;return`Ogiltig(t) ${t[n.format]??n.format}`;case"not_multiple_of":return`Ogiltigt tal: m\xe5ste vara en multipel av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Oknda nycklar":"Oknd nyckel"}: ${oy(n.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${n.origin??"vrdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xe4rde i ${n.origin??"vrdet"}`}})}},"ta",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"},r={nan:"NaN",number:"",array:"",null:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` :  instanceof ${n.expected},  ${i}`;return` :  ${e},  ${i}`}case"invalid_value":if(1===n.values.length)return` :  ${oV(n.values[0])}`;return` :  ${oy(n.values,"|")}  `;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` :  ${n.origin??""} ${t}${n.maximum.toString()} ${r.unit??""}   `;return` :  ${n.origin??""} ${t}${n.maximum.toString()}   `}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` :  ${n.origin} ${t}${n.minimum.toString()} ${r.unit}   `;return` :  ${n.origin} ${t}${n.minimum.toString()}   `}case"invalid_format":if("starts_with"===n.format)return` : "${n.prefix}"   `;if("ends_with"===n.format)return` : "${n.suffix}"   `;if("includes"===n.format)return` : "${n.includes}"   `;if("regex"===n.format)return` : ${n.pattern}   `;return` ${t[n.format]??n.format}`;case"not_multiple_of":return` : ${n.divisor}    `;case"unrecognized_keys":return`  ${n.keys.length>1?"":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`${n.origin}   `;case"invalid_union":return" ";case"invalid_element":return`${n.origin}   `;default:return` `}})}},"th",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""},r={nan:"NaN",number:"",array:" (Array)",null:" (null)"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`:  instanceof ${n.expected}  ${i}`;return`:  ${e}  ${i}`}case"invalid_value":if(1===n.values.length)return`:  ${oV(n.values[0])}`;return`:  ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"":"",r=e[n.origin]??null;if(r)return`: ${n.origin??""} ${t} ${n.maximum.toString()} ${r.unit??""}`;return`: ${n.origin??""} ${t} ${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?"":"",r=e[n.origin]??null;if(r)return`: ${n.origin} ${t} ${n.minimum.toString()} ${r.unit}`;return`: ${n.origin} ${t} ${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`:  "${n.prefix}"`;if("ends_with"===n.format)return`:  "${n.suffix}"`;if("includes"===n.format)return`:  "${n.includes}" `;if("regex"===n.format)return`:  ${n.pattern}`;return`: ${t[n.format]??n.format}`;case"not_multiple_of":return`:  ${n.divisor} `;case"unrecognized_keys":return`: ${oy(n.keys,", ")}`;case"invalid_key":return` ${n.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${n.origin}`;default:return``}})}},"tr",0,function(){let e,t,r;return{localeError:(e={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"e",verb:"olmal"},set:{unit:"e",verb:"olmal"}},t={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Ge\xe7ersiz deer: beklenen instanceof ${n.expected}, alnan ${i}`;return`Ge\xe7ersiz deer: beklenen ${e}, alnan ${i}`}case"invalid_value":if(1===n.values.length)return`Ge\xe7ersiz deer: beklenen ${oV(n.values[0])}`;return`Ge\xe7ersiz se\xe7enek: aadakilerden biri olmal: ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`\xc7ok b\xfcy\xfck: beklenen ${n.origin??"deer"} ${t}${n.maximum.toString()} ${r.unit??"e"}`;return`\xc7ok b\xfcy\xfck: beklenen ${n.origin??"deer"} ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`\xc7ok k\xfc\xe7\xfck: beklenen ${n.origin} ${t}${n.minimum.toString()} ${r.unit}`;return`\xc7ok k\xfc\xe7\xfck: beklenen ${n.origin} ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Ge\xe7ersiz metin: "${n.prefix}" ile balamal`;if("ends_with"===n.format)return`Ge\xe7ersiz metin: "${n.suffix}" ile bitmeli`;if("includes"===n.format)return`Ge\xe7ersiz metin: "${n.includes}" i\xe7ermeli`;if("regex"===n.format)return`Ge\xe7ersiz metin: ${n.pattern} desenine uymal`;return`Ge\xe7ersiz ${t[n.format]??n.format}`;case"not_multiple_of":return`Ge\xe7ersiz say: ${n.divisor} ile tam b\xf6l\xfcnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${n.keys.length>1?"lar":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xe7inde ge\xe7ersiz anahtar`;case"invalid_union":return"Geersiz deer";case"invalid_element":return`${n.origin} i\xe7inde ge\xe7ersiz deer`;default:return`Ge\xe7ersiz deer`}})}},"ua",0,function(){return cA()},"uk",0,cA,"ur",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "},r={nan:"NaN",number:"",array:"",null:""},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`  : instanceof ${n.expected}   ${i}  `;return`  : ${e}   ${i}  `}case"invalid_value":if(1===n.values.length)return`  : ${oV(n.values[0])}  `;return` : ${oy(n.values,"|")}     `;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` : ${n.origin??""}  ${t}${n.maximum.toString()} ${r.unit??""}   `;return` : ${n.origin??""}  ${t}${n.maximum.toString()}   `}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` : ${n.origin}  ${t}${n.minimum.toString()} ${r.unit}   `;return` : ${n.origin}  ${t}${n.minimum.toString()}   `}case"invalid_format":if("starts_with"===n.format)return` : "${n.prefix}"    `;if("ends_with"===n.format)return` : "${n.suffix}"    `;if("includes"===n.format)return` : "${n.includes}"   `;if("regex"===n.format)return` :  ${n.pattern}    `;return` ${t[n.format]??n.format}`;case"not_multiple_of":return` : ${n.divisor}    `;case"unrecognized_keys":return`   ${n.keys.length>1?"":""}: ${oy(n.keys," ")}`;case"invalid_key":return`${n.origin}   `;case"invalid_union":return"  ";case"invalid_element":return`${n.origin}   `;default:return`  `}})}},"uz",0,function(){let e,t,r;return{localeError:(e={string:{unit:"belgi",verb:"bolishi kerak"},file:{unit:"bayt",verb:"bolishi kerak"},array:{unit:"element",verb:"bolishi kerak"},set:{unit:"element",verb:"bolishi kerak"}},t={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},r={nan:"NaN",number:"raqam",array:"massiv"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`Notogri kirish: kutilgan instanceof ${n.expected}, qabul qilingan ${i}`;return`Notogri kirish: kutilgan ${e}, qabul qilingan ${i}`}case"invalid_value":if(1===n.values.length)return`Notogri kirish: kutilgan ${oV(n.values[0])}`;return`Notogri variant: quyidagilardan biri kutilgan ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Juda katta: kutilgan ${n.origin??"qiymat"} ${t}${n.maximum.toString()} ${r.unit} ${r.verb}`;return`Juda katta: kutilgan ${n.origin??"qiymat"} ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Juda kichik: kutilgan ${n.origin} ${t}${n.minimum.toString()} ${r.unit} ${r.verb}`;return`Juda kichik: kutilgan ${n.origin} ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Notogri satr: "${n.prefix}" bilan boshlanishi kerak`;if("ends_with"===n.format)return`Notogri satr: "${n.suffix}" bilan tugashi kerak`;if("includes"===n.format)return`Notogri satr: "${n.includes}" ni oz ichiga olishi kerak`;if("regex"===n.format)return`Notogri satr: ${n.pattern} shabloniga mos kelishi kerak`;return`Notogri ${t[n.format]??n.format}`;case"not_multiple_of":return`Notogri raqam: ${n.divisor} ning karralisi bolishi kerak`;case"unrecognized_keys":return`Nomalum kalit${n.keys.length>1?"lar":""}: ${oy(n.keys,", ")}`;case"invalid_key":return`${n.origin} dagi kalit notogri`;case"invalid_union":return"Notogri kirish";case"invalid_element":return`${n.origin} da notogri qiymat`;default:return`Notogri kirish`}})}},"vi",0,function(){let e,t,r;return{localeError:(e={string:{unit:"k t",verb:"c"},file:{unit:"byte",verb:"c"},array:{unit:"phn t",verb:"c"},set:{unit:"phn t",verb:"c"}},t={regex:"u vo",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngy gi ISO",date:"ngy ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m ha base64",base64url:"chui m ha base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u vo"},r={nan:"NaN",number:"s",array:"mng"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`u v\xe0o kh\xf4ng hp l: mong i instanceof ${n.expected}, nhn c ${i}`;return`u v\xe0o kh\xf4ng hp l: mong i ${e}, nhn c ${i}`}case"invalid_value":if(1===n.values.length)return`u v\xe0o kh\xf4ng hp l: mong i ${oV(n.values[0])}`;return`T\xf9y chn kh\xf4ng hp l: mong i mt trong c\xe1c gi\xe1 tr ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`Qu\xe1 ln: mong i ${n.origin??"gi tr"} ${r.verb} ${t}${n.maximum.toString()} ${r.unit??"phn t"}`;return`Qu\xe1 ln: mong i ${n.origin??"gi tr"} ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`Qu\xe1 nh: mong i ${n.origin} ${r.verb} ${t}${n.minimum.toString()} ${r.unit}`;return`Qu\xe1 nh: mong i ${n.origin} ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Chui kh\xf4ng hp l: phi bt u bng "${n.prefix}"`;if("ends_with"===n.format)return`Chui kh\xf4ng hp l: phi kt th\xfac bng "${n.suffix}"`;if("includes"===n.format)return`Chui kh\xf4ng hp l: phi bao gm "${n.includes}"`;if("regex"===n.format)return`Chui kh\xf4ng hp l: phi khp vi mu ${n.pattern}`;return`${t[n.format]??n.format} kh\xf4ng hp l`;case"not_multiple_of":return`S kh\xf4ng hp l: phi l\xe0 bi s ca ${n.divisor}`;case"unrecognized_keys":return`Kh\xf3a kh\xf4ng c nhn dng: ${oy(n.keys,", ")}`;case"invalid_key":return`Kh\xf3a kh\xf4ng hp l trong ${n.origin}`;case"invalid_union":return"u vo khng hp l";case"invalid_element":return`Gi\xe1 tr kh\xf4ng hp l trong ${n.origin}`;default:return`u v\xe0o kh\xf4ng hp l`}})}},"yo",0,function(){let e,t,r;return{localeError:(e={string:{unit:"mi",verb:"n"},file:{unit:"bytes",verb:"n"},array:{unit:"nkan",verb:"n"},set:{unit:"nkan",verb:"n"}},t={regex:"r bwl",email:"drs ml",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"kk ISO",date:"j ISO",time:"kk ISO",duration:"kk t p ISO",ipv4:"drs IPv4",ipv6:"drs IPv6",cidrv4:"gbgb IPv4",cidrv6:"gbgb IPv6",base64:"r t a k n base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb E.164",jwt:"JWT",template_literal:"r bwl"},r={nan:"NaN",number:"nmb",array:"akop"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi instanceof ${n.expected}, \xe0m a r\xed ${i}`;return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${e}, \xe0m a r\xed ${i}`}case"invalid_value":if(1===n.values.length)return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${oV(n.values[0])}`;return`\xc0\xe0y\xe0n a\xece: yan kan l\xe1ra ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return`T\xf3 p j\xf9: a n\xed l\xe1ti j p\xe9 ${n.origin??"iye"} ${r.verb} ${t}${n.maximum} ${r.unit}`;return`T\xf3 p j\xf9: a n\xed l\xe1ti j ${t}${n.maximum}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return`K\xe9r\xe9 ju: a n\xed l\xe1ti j p\xe9 ${n.origin} ${r.verb} ${t}${n.minimum} ${r.unit}`;return`K\xe9r\xe9 ju: a n\xed l\xe1ti j ${t}${n.minimum}`}case"invalid_format":if("starts_with"===n.format)return`r a\xece: gbd br pl\xfa "${n.prefix}"`;if("ends_with"===n.format)return`r a\xece: gbd par\xed pl\xfa "${n.suffix}"`;if("includes"===n.format)return`r a\xece: gbd n\xed "${n.includes}"`;if("regex"===n.format)return`r a\xece: gbd b\xe1 \xe0pr mu ${n.pattern}`;return`A\xece: ${t[n.format]??n.format}`;case"not_multiple_of":return`Nmb\xe0 a\xece: gbd j \xe8y\xe0 p\xedp\xedn ti ${n.divisor}`;case"unrecognized_keys":return`Bt\xecn\xec \xe0\xecm: ${oy(n.keys,", ")}`;case"invalid_key":return`Bt\xecn\xec a\xece n\xedn\xfa ${n.origin}`;case"invalid_union":default:return"bwl ae";case"invalid_element":return`Iye a\xece n\xedn\xfa ${n.origin}`}})}},"zhCN",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},r={nan:"NaN",number:"",array:"",null:"(null)"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` instanceof ${n.expected} ${i}`;return` ${e} ${i}`}case"invalid_value":if(1===n.values.length)return` ${oV(n.values[0])}`;return` ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` ${n.origin??""} ${t}${n.maximum.toString()} ${r.unit??""}`;return` ${n.origin??""} ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` ${n.origin} ${t}${n.minimum.toString()} ${r.unit}`;return` ${n.origin} ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return` "${n.prefix}" `;if("ends_with"===n.format)return` "${n.suffix}" `;if("includes"===n.format)return` "${n.includes}"`;if("regex"===n.format)return` ${n.pattern}`;return`${t[n.format]??n.format}`;case"not_multiple_of":return` ${n.divisor} `;case"unrecognized_keys":return`(key): ${oy(n.keys,", ")}`;case"invalid_key":return`${n.origin} (key)`;case"invalid_union":return"";case"invalid_element":return`${n.origin} (value)`;default:return``}})}},"zhTW",0,function(){let e,t,r;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r={nan:"NaN"},n=>{switch(n.code){case"invalid_type":{let e=r[n.expected]??n.expected,t=o7(n.input),i=r[t]??t;if(/^[A-Z]/.test(n.expected))return` instanceof ${n.expected} ${i}`;return` ${e} ${i}`}case"invalid_value":if(1===n.values.length)return` ${oV(n.values[0])}`;return` ${oy(n.values,"|")}`;case"too_big":{let t=n.inclusive?"<=":"<",r=e[n.origin]??null;if(r)return` ${n.origin??""}  ${t}${n.maximum.toString()} ${r.unit??""}`;return` ${n.origin??""}  ${t}${n.maximum.toString()}`}case"too_small":{let t=n.inclusive?">=":">",r=e[n.origin]??null;if(r)return` ${n.origin}  ${t}${n.minimum.toString()} ${r.unit}`;return` ${n.origin}  ${t}${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return` "${n.prefix}" `;if("ends_with"===n.format)return` "${n.suffix}" `;if("includes"===n.format)return` "${n.includes}"`;if("regex"===n.format)return` ${n.pattern}`;return` ${t[n.format]??n.format}`;case"not_multiple_of":return` ${n.divisor} `;case"unrecognized_keys":return`${n.keys.length>1?"":""}${oy(n.keys,"")}`;case"invalid_key":return`${n.origin} `;case"invalid_union":return"";case"invalid_element":return`${n.origin} `;default:return``}})}}],827646);var mg=e.i(827646);e.i(732084),e.i(858078),e.i(790567),e.i(482780);var my=e.i(800951);e.s(["$ZodAny",0,lI,"$ZodArray",0,lC,"$ZodAsyncError",()=>os,"$ZodBase64",0,lp,"$ZodBase64URL",0,lh,"$ZodBigInt",0,lE,"$ZodBigIntFormat",0,lx,"$ZodBoolean",0,l_,"$ZodCIDRv4",0,lc,"$ZodCIDRv6",0,lu,"$ZodCUID",0,s9,"$ZodCUID2",0,s8,"$ZodCatch",0,cn,"$ZodCheck",0,sA,"$ZodCheckBigIntFormat",0,sU,"$ZodCheckEndsWith",0,sq,"$ZodCheckGreaterThan",0,sO,"$ZodCheckIncludes",0,sF,"$ZodCheckLengthEquals",0,sj,"$ZodCheckLessThan",0,sT,"$ZodCheckLowerCase",0,sB,"$ZodCheckMaxLength",0,sD,"$ZodCheckMaxSize",0,sC,"$ZodCheckMimeType",0,sK,"$ZodCheckMinLength",0,sL,"$ZodCheckMinSize",0,sP,"$ZodCheckMultipleOf",0,sR,"$ZodCheckNumberFormat",0,s$,"$ZodCheckOverwrite",0,sG,"$ZodCheckProperty",0,sW,"$ZodCheckRegex",0,sM,"$ZodCheckSizeEquals",0,sN,"$ZodCheckStartsWith",0,sH,"$ZodCheckStringFormat",0,sz,"$ZodCheckUpperCase",0,sZ,"$ZodCodec",0,cs,"$ZodCustom",0,cg,"$ZodCustomStringFormat",0,lv,"$ZodDate",0,l$,"$ZodDefault",0,l9,"$ZodDiscriminatedUnion",0,lF,"$ZodE164",0,lm,"$ZodEmail",0,s6,"$ZodEmoji",0,s3,"$ZodEncodeError",()=>ol,"$ZodEnum",0,lX,"$ZodError",0,au,"$ZodExactOptional",0,l3,"$ZodFile",0,l1,"$ZodFunction",0,cf,"$ZodGUID",0,s1,"$ZodIPv4",0,la,"$ZodIPv6",0,ls,"$ZodISODate",0,ln,"$ZodISODateTime",0,lr,"$ZodISODuration",0,lo,"$ZodISOTime",0,li,"$ZodIntersection",0,lH,"$ZodJWT",0,ly,"$ZodKSUID",0,lt,"$ZodLazy",0,cm,"$ZodLiteral",0,l0,"$ZodMAC",0,ll,"$ZodMap",0,lG,"$ZodNaN",0,ci,"$ZodNanoID",0,s5,"$ZodNever",0,lO,"$ZodNonOptional",0,ce,"$ZodNull",0,lA,"$ZodNullable",0,l5,"$ZodNumber",0,lb,"$ZodNumberFormat",0,lw,"$ZodObject",0,lL,"$ZodObjectJIT",0,lj,"$ZodOptional",0,l2,"$ZodPipe",0,co,"$ZodPrefault",0,l7,"$ZodPromise",0,ch,"$ZodReadonly",0,cu,"$ZodRealError",0,ad,"$ZodRecord",0,lK,"$ZodRegistry",()=>cO,"$ZodSet",0,lY,"$ZodString",0,sX,"$ZodStringFormat",0,s0,"$ZodSuccess",0,cr,"$ZodSymbol",0,lS,"$ZodTemplateLiteral",0,cp,"$ZodTransform",0,l4,"$ZodTuple",0,lV,"$ZodType",0,sQ,"$ZodULID",0,s7,"$ZodURL",0,s2,"$ZodUUID",0,s4,"$ZodUndefined",0,lk,"$ZodUnion",0,lM,"$ZodUnknown",0,lT,"$ZodVoid",0,lR,"$ZodXID",0,le,"$ZodXor",0,lZ,"$brand",0,oa,"$constructor",()=>oo,"$input",0,cT,"$output",0,cI,"Doc",()=>sJ,"JSONSchema",0,my,"JSONSchemaGenerator",()=>pi,"NEVER",0,oi,"TimePrecision",0,c6,"_any",()=>uh,"_array",()=>uJ,"_base64",()=>cX,"_base64url",()=>c0,"_bigint",()=>us,"_boolean",()=>uo,"_catch",()=>da,"_check",()=>dm,"_cidrv4",()=>cY,"_cidrv6",()=>cQ,"_coercedBigint",()=>ul,"_coercedBoolean",()=>ua,"_coercedDate",()=>ub,"_coercedNumber",()=>c7,"_coercedString",()=>cC,"_cuid",()=>cF,"_cuid2",()=>cH,"_custom",()=>dp,"_date",()=>uv,"_decode",0,aI,"_decodeAsync",0,a$,"_default",()=>dr,"_discriminatedUnion",()=>uX,"_e164",()=>c1,"_email",()=>cP,"_emoji",()=>cB,"_encode",0,ak,"_encodeAsync",0,aO,"_endsWith",()=>uB,"_enum",()=>u3,"_file",()=>u8,"_float32",()=>ut,"_float64",()=>ur,"_gt",()=>ux,"_gte",()=>uS,"_guid",()=>cN,"_includes",()=>uz,"_int",()=>ue,"_int32",()=>un,"_int64",()=>uc,"_intersection",()=>u0,"_ipv4",()=>cK,"_ipv6",()=>cG,"_isoDate",()=>c3,"_isoDateTime",()=>c2,"_isoDuration",()=>c9,"_isoTime",()=>c5,"_jwt",()=>c4,"_ksuid",()=>cW,"_lazy",()=>du,"_length",()=>uN,"_literal",()=>u9,"_lowercase",()=>uL,"_lt",()=>u_,"_lte",()=>uE,"_mac",()=>cJ,"_map",()=>u6,"_max",()=>uE,"_maxLength",()=>uC,"_maxSize",()=>uR,"_mime",()=>uF,"_min",()=>uS,"_minLength",()=>uP,"_minSize",()=>u$,"_multipleOf",()=>uO,"_nan",()=>uw,"_nanoid",()=>cZ,"_nativeEnum",()=>u5,"_negative",()=>uA,"_never",()=>ug,"_nonnegative",()=>uT,"_nonoptional",()=>dn,"_nonpositive",()=>uI,"_normalize",()=>uq,"_null",()=>uf,"_nullable",()=>dt,"_number",()=>c8,"_optional",()=>de,"_overwrite",()=>uH,"_parse",0,ay,"_parseAsync",0,ab,"_pipe",()=>ds,"_positive",()=>uk,"_promise",()=>dd,"_property",()=>uZ,"_readonly",()=>dl,"_record",()=>u4,"_refine",()=>df,"_regex",()=>uD,"_safeDecode",0,aN,"_safeDecodeAsync",0,az,"_safeEncode",0,aC,"_safeEncodeAsync",0,aL,"_safeParse",0,a_,"_safeParseAsync",0,ax,"_set",()=>u2,"_size",()=>uU,"_slugify",()=>uG,"_startsWith",()=>uM,"_string",()=>cU,"_stringFormat",()=>db,"_stringbool",()=>dv,"_success",()=>di,"_superRefine",()=>dh,"_symbol",()=>ud,"_templateLiteral",()=>dc,"_toLowerCase",()=>uW,"_toUpperCase",()=>uK,"_transform",()=>u7,"_trim",()=>uV,"_tuple",()=>u1,"_uint32",()=>ui,"_uint64",()=>uu,"_ulid",()=>cq,"_undefined",()=>up,"_union",()=>uY,"_unknown",()=>um,"_uppercase",()=>uj,"_url",()=>cM,"_uuid",()=>cD,"_uuidv4",()=>cL,"_uuidv6",()=>cj,"_uuidv7",()=>cz,"_void",()=>uy,"_xid",()=>cV,"_xor",()=>uQ,"clone",()=>oF,"config",()=>ou,"createStandardJSONSchemaMethod",0,dk,"createToJSONSchemaMethod",0,dS,"decode",0,aT,"decodeAsync",0,aU,"describe",()=>dg,"encode",0,aA,"encodeAsync",0,aR,"extractDefs",()=>dE,"finalize",()=>dx,"flattenError",()=>ap,"formatError",()=>af,"globalConfig",0,oc,"globalRegistry",0,c$,"initializeContext",()=>dw,"isValidBase64",()=>ld,"isValidBase64URL",()=>lf,"isValidJWT",()=>lg,"locales",0,mg,"meta",()=>dy,"parse",0,av,"parseAsync",0,aw,"prettifyError",()=>ag,"process",()=>d_,"regexes",0,mm,"registry",()=>cR,"safeDecode",0,aD,"safeDecodeAsync",0,aM,"safeEncode",0,aP,"safeEncodeAsync",0,aj,"safeParse",0,aE,"safeParseAsync",0,aS,"toDotPath",()=>am,"toJSONSchema",()=>pn,"treeifyError",()=>ah,"util",0,mh,"version",0,sY],349415);var mv=e.i(349415);e.i(471147),e.i(676166),e.i(454733),e.s(["$brand",0,oa,"ZodFirstPartyTypeKind",()=>ec,"ZodIssueCode",0,mt,"config",()=>ou,"getErrorMap",()=>mn,"setErrorMap",()=>mr],327342),e.i(327342);var po=po,pa=pa,mb=e.i(443220);e.s(["$brand",0,oa,"$input",0,cT,"$output",0,cI,"NEVER",0,oi,"TimePrecision",0,c6,"ZodAny",0,fB,"ZodArray",0,fY,"ZodBase64",0,fs,"ZodBase64URL",0,fc,"ZodBigInt",0,fR,"ZodBigIntFormat",0,fU,"ZodBoolean",0,fT,"ZodCIDRv4",0,fn,"ZodCIDRv6",0,fo,"ZodCUID",0,pY,"ZodCUID2",0,pX,"ZodCatch",0,hD,"ZodCodec",0,hZ,"ZodCustom",0,h0,"ZodCustomStringFormat",0,fm,"ZodDate",0,fG,"ZodDefault",0,hT,"ZodDiscriminatedUnion",0,f8,"ZodE164",0,fd,"ZodEmail",0,pN,"ZodEmoji",0,pW,"ZodEnum",0,hp,"ZodError",0,pg,"ZodExactOptional",0,hx,"ZodFile",0,hy,"ZodFirstPartyTypeKind",()=>ec,"ZodFunction",0,hQ,"ZodGUID",0,pL,"ZodIPv4",0,p9,"ZodIPv6",0,ft,"ZodISODate",0,pc,"ZodISODateTime",0,ps,"ZodISODuration",0,pf,"ZodISOTime",0,pd,"ZodIntersection",0,he,"ZodIssueCode",0,mt,"ZodJWT",0,ff,"ZodKSUID",0,p3,"ZodLazy",0,hK,"ZodLiteral",0,hm,"ZodMAC",0,p7,"ZodMap",0,hl,"ZodNaN",0,hj,"ZodNanoID",0,pG,"ZodNever",0,fq,"ZodNonOptional",0,hU,"ZodNull",0,fz,"ZodNullable",0,hk,"ZodNumber",0,fw,"ZodNumberFormat",0,fE,"ZodObject",0,f0,"ZodOptional",0,h_,"ZodPipe",0,hM,"ZodPrefault",0,hR,"ZodPromise",0,hJ,"ZodReadonly",0,hH,"ZodRealError",0,py,"ZodRecord",0,hi,"ZodSet",0,hu,"ZodString",0,pU,"ZodStringFormat",0,pP,"ZodSuccess",0,hP,"ZodSymbol",0,fN,"ZodTemplateLiteral",0,hV,"ZodTransform",0,hb,"ZodTuple",0,hr,"ZodType",0,pR,"ZodULID",0,p1,"ZodURL",0,pH,"ZodUUID",0,pz,"ZodUndefined",0,fL,"ZodUnion",0,f2,"ZodUnknown",0,fF,"ZodVoid",0,fW,"ZodXID",0,p6,"ZodXor",0,f5,"_ZodString",0,p$,"_default",()=>hO,"_function",()=>hX,"any",()=>fZ,"array",()=>fQ,"base64",()=>fl,"base64url",()=>fu,"bigint",()=>f$,"boolean",()=>fO,"catch",()=>hL,"check",()=>h1,"cidrv4",()=>fi,"cidrv6",()=>fa,"clone",()=>oF,"codec",()=>hF,"coerce",0,mb,"config",()=>ou,"core",0,mv,"cuid",()=>pQ,"cuid2",()=>p0,"custom",()=>h4,"date",()=>fJ,"decode",0,px,"decodeAsync",0,pk,"describe",0,h3,"discriminatedUnion",()=>f7,"e164",()=>fp,"email",()=>pD,"emoji",()=>pK,"encode",0,pE,"encodeAsync",0,pS,"endsWith",()=>uB,"enum",()=>hf,"exactOptional",()=>hS,"file",()=>hv,"flattenError",()=>ap,"float32",()=>fS,"float64",()=>fk,"formatError",()=>af,"fromJSONSchema",()=>ml,"function",()=>hX,"getErrorMap",()=>mn,"globalRegistry",0,c$,"gt",()=>ux,"gte",()=>uS,"guid",()=>pj,"hash",()=>fb,"hex",()=>fv,"hostname",()=>fy,"httpUrl",()=>pV,"includes",()=>uz,"instanceof",()=>h9,"int",()=>fx,"int32",()=>fA,"int64",()=>fC,"intersection",()=>ht,"ipv4",()=>p8,"ipv6",()=>fr,"iso",0,mo,"json",()=>h7,"jwt",()=>fh,"keyof",()=>fX,"ksuid",()=>p5,"lazy",()=>hG,"length",()=>uN,"literal",()=>hg,"locales",0,mg,"looseObject",()=>f6,"looseRecord",()=>hs,"lowercase",()=>uL,"lt",()=>u_,"lte",()=>uE,"mac",()=>fe,"map",()=>hc,"maxLength",()=>uC,"maxSize",()=>uR,"meta",0,h5,"mime",()=>uF,"minLength",()=>uP,"minSize",()=>u$,"multipleOf",()=>uO,"nan",()=>hz,"nanoid",()=>pJ,"nativeEnum",()=>hh,"negative",()=>uA,"never",()=>fV,"nonnegative",()=>uT,"nonoptional",()=>hC,"nonpositive",()=>uI,"normalize",()=>uq,"null",()=>fM,"nullable",()=>hA,"nullish",()=>hI,"number",()=>f_,"object",()=>f1,"optional",()=>hE,"overwrite",()=>uH,"parse",0,pv,"parseAsync",0,pb,"partialRecord",()=>ha,"pipe",()=>hB,"positive",()=>uk,"prefault",()=>h$,"preprocess",()=>me,"prettifyError",()=>ag,"promise",()=>hY,"property",()=>uZ,"readonly",()=>hq,"record",()=>ho,"refine",()=>h6,"regex",()=>uD,"regexes",()=>po,"registry",()=>cR,"safeDecode",0,pI,"safeDecodeAsync",0,pO,"safeEncode",0,pA,"safeEncodeAsync",0,pT,"safeParse",0,pw,"safeParseAsync",0,p_,"set",()=>hd,"setErrorMap",()=>mr,"size",()=>uU,"slugify",()=>uG,"startsWith",()=>uM,"strictObject",()=>f4,"string",()=>pC,"stringFormat",()=>fg,"stringbool",0,h8,"success",()=>hN,"superRefine",()=>h2,"symbol",()=>fD,"templateLiteral",()=>hW,"toJSONSchema",()=>pn,"toLowerCase",()=>uW,"toUpperCase",()=>uK,"transform",()=>hw,"treeifyError",()=>ah,"trim",()=>uV,"tuple",()=>hn,"uint32",()=>fI,"uint64",()=>fP,"ulid",()=>p4,"undefined",()=>fj,"union",()=>f3,"unknown",()=>fH,"uppercase",()=>uj,"url",()=>pq,"util",()=>pa,"uuid",()=>pM,"uuidv4",()=>pB,"uuidv6",()=>pZ,"uuidv7",()=>pF,"void",()=>fK,"xid",()=>p2,"xor",()=>f9],319281);var mb=mb;let mw={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511};var m_=class extends Error{constructor(e="INTERNAL_SERVER_ERROR",t,r={},n="number"==typeof e?e:mw[e]){super(t?.message,t?.cause?{cause:t.cause}:void 0),this.status=e,this.body=t,this.headers=r,this.statusCode=n,this.name="APIError",this.status=e,this.headers=r,this.statusCode=n,this.body=t?{code:t?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...t}:void 0}},mE=class extends m_{constructor(e,t){super(400,{message:e,code:"VALIDATION_ERROR"}),this.message=e,this.issues=t,this.issues=t}},mx=class extends Error{constructor(e){super(e),this.name="BetterCallError"}};let mS=function(e,t){class r extends e{#h;constructor(...e){if(function(){let e=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return void 0===e?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(e,"writable")?e.writable:void 0!==e.set}()){const t=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...e),Error.stackTraceLimit=t}else super(...e);const t=Error().stack;t&&(this.#h=function(e){let t=e.split("\n    at ");return t.length<=1?e:(t.splice(1,1),t.join("\n    at "))}(t.replace(/^Error/,this.name)))}get errorStack(){return this.#h}}return Object.defineProperty(r.prototype,"constructor",{get:()=>t,enumerable:!1,configurable:!0}),r}(m_,Error),mk=/^application\/([a-z0-9.+-]*\+)?json/i;async function mA(e,t){let r=e.headers.get("content-type")||"",n=r.toLowerCase();if(e.body){if(t&&t.length>0&&!t.some(e=>{let t=n.split(";")[0].trim(),r=e.toLowerCase().trim();return t===r||t.includes(r)})){if(!n)throw new mS(415,{message:`Content-Type is required. Allowed types: ${t.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});throw new mS(415,{message:`Content-Type "${r}" is not allowed. Allowed types: ${t.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"})}if(mk.test(n))return await e.json();if(n.includes("application/x-www-form-urlencoded")){let t=await e.formData(),r={};return t.forEach((e,t)=>{r[t]=e.toString()}),r}if(n.includes("multipart/form-data")){let t=await e.formData(),r={};return t.forEach((e,t)=>{r[t]=e}),r}return n.includes("text/plain")?await e.text():n.includes("application/octet-stream")?await e.arrayBuffer():n.includes("application/pdf")||n.includes("image/")||n.includes("video/")?await e.blob():n.includes("application/stream")||e.body instanceof ReadableStream?e.body:await e.text()}}function mI(e){return e instanceof mS||e?.name==="APIError"}async function mT(e){try{return{data:await e,error:null}}catch(e){return{data:null,error:e}}}function mO(e,t){if(e instanceof Response)return t?.headers instanceof Headers&&t.headers.forEach((t,r)=>{e.headers.set(r,t)}),e;if(e&&"object"==typeof e&&"_flag"in e&&"json"===e._flag){let r=e.body,n=e.routerResponse;if(n instanceof Response)return n;let i=new Headers;if(n?.headers){let e=new Headers(n.headers);for(let[t,r]of e.entries())e.set(t,r)}if(e.headers)for(let[t,r]of new Headers(e.headers).entries())i.set(t,r);if(t?.headers)for(let[e,r]of new Headers(t.headers).entries())i.set(e,r);return i.set("Content-Type","application/json"),new Response(JSON.stringify(r),{...n,headers:i,status:e.status??t?.status??n?.status,statusText:t?.statusText??n?.statusText})}if(mI(e))return mO(e.body,{status:t?.status??e.statusCode,statusText:e.status.toString(),headers:t?.headers||e.headers});let r=e,n=new Headers(t?.headers);if(e){if("string"==typeof e)r=e,n.set("Content-Type","text/plain");else if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))r=e,n.set("Content-Type","application/octet-stream");else if(e instanceof Blob)r=e,n.set("Content-Type",e.type||"application/octet-stream");else if(e instanceof FormData)r=e;else if(e instanceof URLSearchParams)r=e,n.set("Content-Type","application/x-www-form-urlencoded");else if(e instanceof ReadableStream)r=e,n.set("Content-Type","application/octet-stream");else if(function(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(e)){let t,i;t=0,i=new WeakMap,r=JSON.stringify(e,(e,r)=>{if("bigint"==typeof r)return r.toString();if("object"==typeof r&&null!==r){if(i.has(r))return`[Circular ref-${i.get(r)}]`;i.set(r,t++)}return r},void 0),n.set("Content-Type","application/json")}}else null===e&&(r=JSON.stringify(null)),n.set("content-type","application/json");return new Response(r,{...t,headers:n})}let mR={name:"HMAC",hash:"SHA-256"},m$=async e=>{let t="string"==typeof e?new TextEncoder().encode(e):e;return await ix().importKey("raw",t,mR,!1,["sign","verify"])},mU=async(e,t,r)=>{try{let n=atob(e),i=new Uint8Array(n.length);for(let e=0,t=n.length;e<t;e++)i[e]=n.charCodeAt(e);return await ix().verify(mR,r,i,new TextEncoder().encode(t))}catch(e){return!1}},mC=async(e,t)=>{let r=await m$(t);return btoa(String.fromCharCode(...new Uint8Array(await ix().sign(mR.name,r,new TextEncoder().encode(e)))))},mP=async(e,t)=>{let r=await mC(e,t);return encodeURIComponent(e=`${e}.${r}`)},mN=(e,t)=>{let r=e;if(t)if("secure"===t)r="__Secure-"+e;else{if("host"!==t)return;r="__Host-"+e}return r},mD=(e,t,r={})=>{let n;if(n=r?.prefix==="secure"?`__Secure-${e}=${t}`:r?.prefix==="host"?`__Host-${e}=${t}`:`${e}=${t}`,e.startsWith("__Secure-")&&!r.secure&&(r.secure=!0),e.startsWith("__Host-")&&(r.secure||(r.secure=!0),"/"!==r.path&&(r.path="/"),r.domain&&(r.domain=void 0)),r&&"number"==typeof r.maxAge&&r.maxAge>=0){if(r.maxAge>3456e4)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");n+=`; Max-Age=${Math.floor(r.maxAge)}`}if(r.domain&&"host"!==r.prefix&&(n+=`; Domain=${r.domain}`),r.path&&(n+=`; Path=${r.path}`),r.expires){if(r.expires.getTime()-Date.now()>3456e7)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");n+=`; Expires=${r.expires.toUTCString()}`}return r.httpOnly&&(n+="; HttpOnly"),r.secure&&(n+="; Secure"),r.sameSite&&(n+=`; SameSite=${r.sameSite.charAt(0).toUpperCase()+r.sameSite.slice(1)}`),r.partitioned&&(r.secure||(r.secure=!0),n+="; Partitioned"),n},mL=async(e,t,r,n)=>mD(e,t=await mP(t,r),n);async function mj(e,t={}){let r={body:t.body,query:t.query};if(e.body){let n=await e.body["~standard"].validate(t.body);if(n.issues)return{data:null,error:mz(n.issues,"body")};r.body=n.value}if(e.query){let n=await e.query["~standard"].validate(t.query);if(n.issues)return{data:null,error:mz(n.issues,"query")};r.query=n.value}return e.requireHeaders&&!t.headers?{data:null,error:{message:"Headers is required",issues:[]}}:e.requireRequest&&!t.request?{data:null,error:{message:"Request is required",issues:[]}}:{data:r,error:null}}function mz(e,t){return{message:e.map(e=>`[${e.path?.length?`${t}.`+e.path.map(e=>"object"==typeof e?e.key:e).join("."):t}] ${e.message}`).join("; "),issues:e}}let mM=async(e,{options:t,path:r})=>{let n,i=new Headers,{data:o,error:a}=await mj(t,e);if(a)throw new mE(a.message,a.issues);let s="headers"in e?e.headers instanceof Headers?e.headers:new Headers(e.headers):"request"in e&&e.request instanceof Request?e.request.headers:null,l=s?.get("cookie"),c=l?function(e){if("string"!=typeof e)throw TypeError("argument str must be a string");let t=new Map,r=0;for(;r<e.length;){let n=e.indexOf("=",r);if(-1===n)break;let i=e.indexOf(";",r);if(-1===i)i=e.length;else if(i<n){r=e.lastIndexOf(";",n-1)+1;continue}let o=e.slice(r,n).trim();if(!t.has(o)){let r=e.slice(n+1,i).trim();34===r.codePointAt(0)&&(r=r.slice(1,-1)),t.set(o,function(e){try{return e.includes("%")?decodeURIComponent(e):e}catch{return e}}(r))}r=i+1}return t}(l):void 0,u={...e,body:o.body,query:o.query,path:e.path||r||"virtual:",context:"context"in e&&e.context?e.context:{},returned:void 0,headers:e?.headers,request:e?.request,params:"params"in e?e.params:void 0,method:e.method??(Array.isArray(t.method)?t.method[0]:"*"===t.method?"GET":t.method),setHeader:(e,t)=>{i.set(e,t)},getHeader:e=>s?s.get(e):null,getCookie:(e,t)=>{let r=mN(e,t);return r&&c?.get(r)||null},getSignedCookie:async(e,t,r)=>{let n=mN(e,r);if(!n)return null;let i=c?.get(n);if(!i)return null;let o=i.lastIndexOf(".");if(o<1)return null;let a=i.substring(0,o),s=i.substring(o+1);return 44===s.length&&s.endsWith("=")?!!await mU(s,a,await m$(t))&&a:null},setCookie:(e,t,r)=>{var n;let o=mD(e,n=encodeURIComponent(n=t),r);return i.append("set-cookie",o),o},setSignedCookie:async(e,t,r,n)=>{let o=await mL(e,t,r,n);return i.append("set-cookie",o),o},redirect:e=>(i.set("location",e),new mS("FOUND",void 0,i)),error:(e,t,r)=>new mS(e,t,r),setStatus:e=>{n=e},json:(t,r)=>e.asResponse?{body:r?.body||t,routerResponse:r,_flag:"json"}:t,responseHeaders:i,get responseStatus(){return n}};for(let e of t.use||[]){let t=await e({...u,returnHeaders:!0,asResponse:!1});t.response&&Object.assign(u.context,t.response),t.headers&&t.headers.forEach((e,t)=>{u.responseHeaders.set(t,e)})}return u};function mB(e,t,r){let n="string"==typeof e?e:void 0,i="object"==typeof t?t:e,o="function"==typeof t?t:r;if(("GET"===i.method||"HEAD"===i.method)&&i.body)throw new mx("Body is not allowed with GET or HEAD methods");if(n&&/\/{2,}/.test(n))throw new mx("Path cannot contain consecutive slashes");let a=async(...e)=>{let t=e[0]||{},{data:r,error:a}=await mT(mM(t,{options:i,path:n}));if(a){if(!(a instanceof mE))throw a;throw i.onValidationError&&await i.onValidationError({message:a.message,issues:a.issues}),new mS(400,{message:a.message,code:"VALIDATION_ERROR"})}let s=await o(r).catch(async e=>{if(mI(e)){let r=i.onAPIError;if(r&&await r(e),t.asResponse)return e}throw e}),l=r.responseHeaders,c=r.responseStatus;return t.asResponse?mO(s,{headers:l,status:c}):t.returnHeaders?t.returnStatus?{headers:l,response:s,status:c}:{headers:l,response:s}:t.returnStatus?{response:s,status:c}:s};return a.options=i,a.path=n,a}function mZ(e,t){let r=async r=>{let n="function"==typeof e?e:t,i=await mM(r,{options:"function"==typeof e?{}:e,path:"/"});if(!n)throw Error("handler must be defined");let o=await n(i),a=i.responseHeaders;return r.returnHeaders?{headers:a,response:o}:o};return r.options="function"==typeof e?{}:e,r}mB.create=e=>(t,r,n)=>mB(t,{...r,use:[...r?.use||[],...e?.use||[]]},n),mZ.create=e=>function(t,r){if("function"==typeof t)return mZ({use:e?.use},t);if(!r)throw Error("Middleware handler is required");return mZ({...t,method:"*",use:[...e?.use||[],...t.use||[]]},r)};let mF={};function mH(e){switch(e.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function mq(e){let t=[];return e.metadata?.openapi?.parameters?t.push(...e.metadata.openapi.parameters):e.query instanceof f0&&Object.entries(e.query.shape).forEach(([e,r])=>{r instanceof f0&&t.push({name:e,in:"query",schema:{type:mH(r),..."minLength"in r&&r.minLength?{minLength:r.minLength}:{},description:r.description}})}),t}function mV(e){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...e}}async function mW(e,t){return Object.entries(e).forEach(([e,t])=>{let r=t.options;if(!(!t.path||r.metadata?.SERVER_ONLY)&&("GET"===r.method&&(mF[t.path]={get:{tags:["Default",...r.metadata?.openapi?.tags||[]],description:r.metadata?.openapi?.description,operationId:r.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:mq(r),responses:mV(r.metadata?.openapi?.responses)}}),"POST"===r.method)){let e=function(e){if(e.metadata?.openapi?.requestBody)return e.metadata.openapi.requestBody;if(e.body&&(e.body instanceof f0||e.body instanceof h_)){let t=e.body.shape;if(!t)return;let r={},n=[];return Object.entries(t).forEach(([e,t])=>{t instanceof f0&&(r[e]={type:mH(t),description:t.description},t instanceof h_||n.push(e))}),{required:!(e.body instanceof h_)&&!!e.body,content:{"application/json":{schema:{type:"object",properties:r,required:n}}}}}}(r);mF[t.path]={post:{tags:["Default",...r.metadata?.openapi?.tags||[]],description:r.metadata?.openapi?.description,operationId:r.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:mq(r),...e?{requestBody:e}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:mV(r.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{schemas:{}},security:[{apiKeyCookie:[]}],servers:[{url:t?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:mF}}let mK=((d=function(){}).prototype=Object.create(null),Object.freeze(d.prototype),d);function mG(){return{root:{key:""},static:new mK}}function mJ(e){let[t,...r]=e.split("/");return""===r[r.length-1]?r.slice(0,-1):r}function mY(e,t){let r=new mK;for(let[n,i]of t){let t=n<0?e.slice(-(n+1)).join("/"):e[n];if("string"==typeof i)r[i]=t;else{let e=t.match(i);if(e)for(let t in e.groups)r[t]=e.groups[t]}}return r}function mQ(e,t="",r,n){t=t.toUpperCase(),47!==r.charCodeAt(0)&&(r=`/${r}`);let i=mJ(r=r.replace(/\\:/g,"%3A")),o=e.root,a=0,s=[],l=[];for(let e=0;e<i.length;e++){let t=i[e];if(t.startsWith("**")){o.wildcard||(o.wildcard={key:"**"}),o=o.wildcard,s.push([-(e+1),t.split(":")[1]||"_",2===t.length]);break}if("*"===t||t.includes(":")){if(o.param||(o.param={key:"*"}),o=o.param,"*"===t)s.push([e,`_${a++}`,!0]);else if(t.includes(":",1)){let r=function(e){let t=e.replace(/:(\w+)/g,(e,t)=>`(?<${t}>[^/]+)`).replace(/\./g,"\\.");return RegExp(`^${t}$`)}(t);l[e]=r,o.hasRegexParam=!0,s.push([e,r,!1])}else s.push([e,t.slice(1),!1]);continue}"\\*"===t?t=i[e]="*":"\\*\\*"===t&&(t=i[e]="**");let r=o.static?.[t];if(r)o=r;else{let e={key:t};o.static||(o.static=new mK),o.static[t]=e,o=e}}let c=s.length>0;o.methods||(o.methods=new mK),o.methods[t]??=[],o.methods[t].push({data:n||null,paramsRegexp:l,paramsMap:c?s:void 0}),c||(e.static["/"+i.join("/")]=o)}async function mX(e,t,r){let n=e.body?.callbackURL||e.context.options.baseURL;if(!n)throw new mS("BAD_REQUEST",{message:"callbackURL is required"});let i=tV(128),o=tV(32),a=e.context.oauthConfig.storeStateStrategy,s={...r||{},callbackURL:n,codeVerifier:i,errorURL:e.body?.errorCallbackURL,newUserURL:e.body?.newUserCallbackURL,link:t,expiresAt:Date.now()+6e5,requestSignUp:e.body?.requestSignUp,state:o};if(await tH(s),"cookie"===a){let t=await or({key:e.context.secret,data:JSON.stringify(s)}),r=e.context.createAuthCookie("oauth_state",{maxAge:6e5});return e.setCookie(r.name,t,r.attributes),{state:o,codeVerifier:i}}let l=e.context.createAuthCookie("state",{maxAge:3e5});await e.setSignedCookie(l.name,o,e.context.secret,l.attributes);let c=new Date;c.setMinutes(c.getMinutes()+10);let u=await e.context.internalAdapter.createVerificationValue({value:JSON.stringify(s),identifier:o,expiresAt:c});if(!u)throw e.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new mS("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:u.identifier,codeVerifier:i}}async function m0(e){let t,r=e.query.state||e.body.state,n=e.context.oauthConfig.storeStateStrategy,i=f6({callbackURL:pC(),codeVerifier:pC(),errorURL:pC().optional(),newUserURL:pC().optional(),expiresAt:f_(),link:f1({email:pC(),userId:mb.string()}).optional(),requestSignUp:fO().optional(),state:pC().optional()}),o=e.context.oauthConfig?.skipStateCookieCheck;if("cookie"===n){let n=e.context.createAuthCookie("oauth_state"),o=e.getCookie(n.name);if(!o){e.context.logger.error("State Mismatch. OAuth state cookie not found",{state:r});let t=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${t}?error=please_restart_the_process`)}try{let r=await on({key:e.context.secret,data:o});t=i.parse(JSON.parse(r))}catch(r){e.context.logger.error("Failed to decrypt or parse OAuth state cookie",{error:r});let t=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${t}?error=please_restart_the_process`)}if(!e.context.oauthConfig?.skipStateCookieCheck&&t.state&&t.state!==r){e.context.logger.error("State Mismatch. State parameter does not match",{expected:t.state,received:r});let n=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${n}?error=state_mismatch`)}e.setCookie(n.name,"",{maxAge:0})}else{let n=await e.context.internalAdapter.findVerificationValue(r);if(!n){e.context.logger.error("State Mismatch. Verification not found",{state:r});let t=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${t}?error=please_restart_the_process`)}t=i.parse(JSON.parse(n.value));let a=e.context.createAuthCookie("state"),s=await e.getSignedCookie(a.name,e.context.secret);if(!o&&(!s||s!==r)){let t=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${t}?error=state_mismatch`)}e.setCookie(a.name,"",{maxAge:0}),await e.context.internalAdapter.deleteVerificationValue(n.id)}if(t.errorURL||(t.errorURL=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`),t.expiresAt<Date.now()){let t=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${t}?error=please_restart_the_process`)}return t&&await tH(t),t}let m1={scope:"server"};var m4=id;e.i(548910);var m6=iu,m2=iu;function m3(e,t){if(t.advanced?.ipAddress?.disableIpTracking)return null;let r="headers"in e?e.headers:e;for(let e of t.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"]){let t="get"in r?r.get(e):r[e];if("string"==typeof t){var n;let e=t.split(",")[0].trim();if(n=e,p8().safeParse(n).success||fr().safeParse(n).success)return e}}return(0,m2.p)()||(0,m6.d)()?"127.0.0.1":null}let m5=mZ(async()=>({})),m9=mZ.create({use:[m5,mZ(async()=>({}))]}),m8=[m5];function m7(e,t,r){let n="string"==typeof e?e:void 0,i="object"==typeof t?t:e,o="function"==typeof t?t:r;return n?mB(n,{...i,use:[...i?.use||[],...m8]},async e=>tU(e,()=>o(e))):mB({...i,use:[...i?.use||[],...m8]},async e=>tU(e,()=>o(e)))}let ge=m9(async e=>{if(e.request?.method==="GET"||e.request?.method==="OPTIONS"||e.request?.method==="HEAD"||!e.request)return;let t=e.request?.headers,{body:r,query:n}=e,i=t?.get("origin")||t?.get("referer")||"",o=r?.callbackURL||n?.callbackURL,a=r?.redirectTo,s=r?.errorCallbackURL,l=r?.newUserCallbackURL,c=t?.has("cookie"),u=(t,r)=>{if(t&&!e.context.isTrustedOrigin(t,{allowRelativePaths:"origin"!==r}))throw e.context.logger.error(`Invalid ${r}: ${t}`),e.context.logger.info(`If it's a valid URL, please add ${t} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${e.context.trustedOrigins}`),new mS("FORBIDDEN",{message:`Invalid ${r}`})};if(c&&!e.context.skipCSRFCheck&&!e.context.skipOriginCheck){if(!i||"null"===i)throw new mS("FORBIDDEN",{message:"Missing or null Origin"});u(i,"origin")}o&&u(o,"callbackURL"),a&&u(a,"redirectURL"),s&&u(s,"errorCallbackURL"),l&&u(l,"newUserCallbackURL")}),gt=e=>m9(async t=>{if(!t.request)return;let r=e(t),n=(e,r)=>{if(e&&!t.context.isTrustedOrigin(e,{allowRelativePaths:"origin"!==r}))throw t.context.logger.error(`Invalid ${r}: ${e}`),t.context.logger.info(`If it's a valid URL, please add ${e} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${t.context.trustedOrigins}`),new mS("FORBIDDEN",{message:`Invalid ${r}`})};for(let e of Array.isArray(r)?r:[r])n(e,"callbackURL")});function gr(e){return"-"===e||"^"===e||"$"===e||"+"===e||"."===e||"("===e||")"===e||"|"===e||"["===e||"]"===e||"{"===e||"}"===e||"*"===e||"?"===e||"\\"===e?`\\${e}`:e}function gn(e,t){if("string"!=typeof t)throw TypeError(`Sample must be a string, but ${typeof t} given`);return e.test(t)}function gi(e,t){if("string"!=typeof e&&!Array.isArray(e))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof e} given`);if(("string"==typeof t||"boolean"==typeof t)&&(t={separator:t}),2==arguments.length&&!(void 0===t||"object"==typeof t&&null!==t&&!Array.isArray(t)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof t} given`);if("\\"===(t=t||{}).separator)throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let r=function e(t,r=!0){if(Array.isArray(t))return`(?:${t.map(t=>`^${e(t,r)}$`).join("|")})`;let n="",i="",o=".";!0===r?(n="/",i="[/\\\\]",o="[^/\\\\]"):r&&((i=function(e){let t="";for(let r=0;r<e.length;r++)t+=gr(e[r]);return t}(n=r)).length>1?(i=`(?:${i})`,o=`((?!${i}).)`):o=`[^${i}]`);let a=r?`${i}+?`:"",s=r?`${i}*?`:"",l=r?t.split(n):[t],c="";for(let e=0;e<l.length;e++){let t=l[e],n=l[e+1],i="";if(t||!(e>0)){if(r&&(i=e===l.length-1?s:"**"!==n?a:""),r&&"**"===t){i&&(c+=0===e?"":i,c+=`(?:${o}*?${i})*?`);continue}for(let e=0;e<t.length;e++){let r=t[e];"\\"===r?e<t.length-1&&(c+=gr(t[e+1]),e++):"?"===r?c+=o:"*"===r?c+=`${o}*?`:c+=gr(r)}c+=i}}return c}(e,t.separator),n=RegExp(`^${r}$`,t.flags),i=gn.bind(null,n);return i.options=t,i.pattern=e,i.regexp=n,i}var go=id;let ga=new Map;async function gs(e,t){if(!t.rateLimit.enabled)return;let r=new URL(e.url).pathname.replace(t.options.basePath||"/api/auth","").replace(/\/+$/,""),n=t.rateLimit.window,i=t.rateLimit.max,o=m3(e,t.options);if(!o)return;let a=o+r,s=[{pathMatcher:e=>e.startsWith("/sign-in")||e.startsWith("/sign-up")||e.startsWith("/change-password")||e.startsWith("/change-email"),window:10,max:3}].find(e=>e.pathMatcher(r));for(let e of(s&&(n=s.window,i=s.max),t.options.plugins||[]))if(e.rateLimit){let t=e.rateLimit.find(e=>e.pathMatcher(r));if(t){n=t.window,i=t.max;break}}if(t.rateLimit.customRules){let o=Object.keys(t.rateLimit.customRules).find(e=>e.includes("*")?gi(e)(r):e===r);if(o){let r=t.rateLimit.customRules[o],a="function"==typeof r?await r(e):r;if(a&&(n=a.window,i=a.max),!1===a)return}}let l=function(e,t){let r,n;if(e.options.rateLimit?.customStorage)return e.options.rateLimit.customStorage;let i=e.rateLimit.storage;return"secondary-storage"===i?{get:async t=>{let r=await e.options.secondaryStorage?.get(t);return r?(0,go.n)(r):void 0},set:async(r,n,i)=>{let o=t?.window??e.options.rateLimit?.window??10;await e.options.secondaryStorage?.set?.(r,JSON.stringify(n),o)}}:"memory"===i?{get:async e=>ga.get(e),async set(e,t,r){ga.set(e,t)}}:(r="rateLimit",n=e.adapter,{get:async e=>{let t=(await n.findMany({model:r,where:[{field:"key",value:e}]}))[0];return"bigint"==typeof t?.lastRequest&&(t.lastRequest=Number(t.lastRequest)),t},set:async(t,i,o)=>{try{o?await n.updateMany({model:r,where:[{field:"key",value:t}],update:{count:i.count,lastRequest:i.lastRequest}}):await n.create({model:r,data:{key:t,count:i.count,lastRequest:i.lastRequest}})}catch(t){e.logger.error("Error setting rate limit",t)}}})}(t,{window:n}),c=await l.get(a),u=Date.now();if(c){var d,p,f;let e=u-c.lastRequest;if(d=i,p=n,Date.now()-c.lastRequest<1e3*p&&c.count>=d)return f=Math.ceil((c.lastRequest+1e3*n-Date.now())/1e3),new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":f.toString()}});e>1e3*n?await l.set(a,{...c,count:1,lastRequest:u},!0):await l.set(a,{...c,count:c.count+1,lastRequest:u},!0)}else await l.set(a,{key:a,count:1,lastRequest:u})}let gl=(e,t="ms")=>new Date(Date.now()+("sec"===t?1e3*e:e)),gc=new WeakMap;function gu(e,t){let r=t.fields,n={};for(let t in e){let i=r[t];if(!i){n[t]=e[t];continue}!1!==i.returned&&(n[t]=e[t])}return n}function gd(e,t){gc.has(e)||gc.set(e,new Map);let r=gc.get(e);if(r.has(t))return r.get(t);let n={..."user"===t?e.user?.additionalFields:{},..."session"===t?e.session?.additionalFields:{}};for(let r of e.plugins||[])r.schema&&r.schema[t]&&(n={...n,...r.schema[t].fields});return gc.get(e).set(t,n),n}function gp(e,t){return{...gu(t,{fields:gd(e,"user")}),id:t.id}}function gf(e,t){return gu(t,{fields:gd(e,"account")})}function gh(e,t){return gu(t,{fields:gd(e,"session")})}function gm(e,t){let r=t.action||"create",n=t.fields,i=Object.assign(Object.create(null),null);for(let t in n){if(t in e){if(!1===n[t].input){if(void 0!==n[t].defaultValue&&"update"!==r){i[t]=n[t].defaultValue;continue}if(e[t])throw new mS("BAD_REQUEST",{message:`${t} is not allowed to be set`});continue}if(n[t].validator?.input&&void 0!==e[t]){let r=n[t].validator.input["~standard"].validate(e[t]);if(r instanceof Promise)throw new mS("INTERNAL_SERVER_ERROR",{message:"Async validation is not supported for additional fields"});if("issues"in r&&r.issues)throw new mS("BAD_REQUEST",{message:r.issues[0]?.message||"Validation Error"});i[t]=r.value;continue}if(n[t].transform?.input&&void 0!==e[t]){i[t]=n[t].transform?.input(e[t]);continue}i[t]=e[t];continue}if(void 0!==n[t].defaultValue&&"create"===r){if("function"==typeof n[t].defaultValue){i[t]=n[t].defaultValue();continue}i[t]=n[t].defaultValue;continue}if(n[t].required&&"create"===r)throw new mS("BAD_REQUEST",{message:`${t} is required`})}return i}function gg(e,t={},r){return gm(t,{fields:gd(e,"user"),action:r})}function gy(e,t){return gm(t||{},{fields:gd(e,"user")})}function gv(e,t){return gm(t,{fields:gd(e,"account")})}function gb(e,t){return gm(t,{fields:gd(e,"session")})}function gw(e,t){if(!t)return e;for(let r in t){let n=t[r]?.modelName;for(let i in n&&(e[r].modelName=n),e[r].fields){let n=t[r]?.fields?.[i];n&&(e[r].fields[i].fieldName=n)}}return e}var g_=Object.defineProperty,gE=Object.getOwnPropertyDescriptor,gx=Object.getOwnPropertyNames,gS=Object.prototype.hasOwnProperty,gk=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(var i,o=gx(t),a=0,s=o.length;a<s;a++)i=o[a],gS.call(e,i)||i===r||g_(e,i,{get:(e=>t[e]).bind(null,i),enumerable:!(n=gE(t,i))||n.enumerable});return e},gA=e.i(877206),mb=mb;let gI=f1({id:pC(),createdAt:fJ().default(()=>new Date),updatedAt:fJ().default(()=>new Date)}),gT=gI.extend({providerId:pC(),accountId:pC(),userId:mb.string(),accessToken:pC().nullish(),refreshToken:pC().nullish(),idToken:pC().nullish(),accessTokenExpiresAt:fJ().nullish(),refreshTokenExpiresAt:fJ().nullish(),scope:pC().nullish(),password:pC().nullish()}),gO=f1({key:pC(),count:f_(),lastRequest:f_()}),gR=gI.extend({userId:mb.string(),expiresAt:fJ(),token:pC(),ipAddress:pC().nullish(),userAgent:pC().nullish()}),g$=gI.extend({email:pC().transform(e=>e.toLowerCase()),emailVerified:fO().default(!1),name:pC(),image:pC().nullish()}),gU=gI.extend({value:pC(),expiresAt:fJ(),identifier:pC()});e.s(["accountSchema",()=>gT,"coreSchema",()=>gI,"rateLimitSchema",()=>gO,"sessionSchema",()=>gR,"userSchema",()=>g$,"verificationSchema",()=>gU],831083);var gC=gA,gP=e.i(211945);async function gN(t,r){let n;if(t.database)n="function"==typeof t.database?t.database(t):await r(t);else{let r=Object.keys((0,gC.t)(t)).reduce((e,t)=>(e[t]=[],e),{}),{memoryAdapter:i}=await e.A(855249);n=i(r)(t)}return n.transaction||(gP.logger.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),n.transaction=async e=>e(n)),n}var ih=ip;async function gD(t){return gN(t,async t=>{let{createKyselyAdapter:r}=await e.A(966919),{kysely:n,databaseType:i,transaction:o}=await r(t);if(!n)throw new ih.t("Failed to initialize database adapter");let{kyselyAdapter:a}=await e.A(966919);return a(n,{type:i||"sqlite",debugLogs:!!t.database&&"debugLogs"in t.database&&t.database.debugLogs,transaction:o})(t)})}let gL=(e,t)=>({type:e,...t});function gj(e,t){let r=t.id?{id:t.id}:{};for(let n in e){let i=e[n],o=t[n];void 0!==o&&(r[i.fieldName||n]=o)}return r}function gz(e,t){if(!t)return null;let r={id:t.id};for(let[n,i]of Object.entries(e))r[n]=t[i.fieldName||n];return r}function gM(e,t){let r=t.hooks;return{createWithHooks:async function(t,n,i){let o=await t$().catch(()=>null),a=t;for(let e of r||[]){let t=e[n]?.create?.before;if(t){let e=await t(a,o);if(!1===e)return null;"object"==typeof e&&"data"in e&&(a={...a,...e.data})}}let s=i?await i.fn(a):null,l=!i||i.executeMainFn?await (await tM(e)).create({model:n,data:a,forceAllowId:!0}):s;for(let e of r||[]){let t=e[n]?.create?.after;t&&await t(l,o)}return l},updateWithHooks:async function(t,n,i,o){let a=await t$().catch(()=>null),s=t;for(let e of r||[]){let r=e[i]?.update?.before;if(r){let e=await r(t,a);if(!1===e)return null;"object"==typeof e&&"data"in e&&(s={...s,...e.data})}}let l=o?await o.fn(s):null,c=!o||o.executeMainFn?await (await tM(e)).update({model:i,update:s,where:n}):l;for(let e of r||[]){let t=e[i]?.update?.after;t&&await t(c,a)}return c},updateManyWithHooks:async function(t,n,i,o){let a=await t$().catch(()=>null),s=t;for(let e of r||[]){let r=e[i]?.update?.before;if(r){let e=await r(t,a);if(!1===e)return null;"object"==typeof e&&"data"in e&&(s={...s,...e.data})}}let l=o?await o.fn(s):null,c=!o||o.executeMainFn?await (await tM(e)).updateMany({model:i,update:s,where:n}):l;for(let e of r||[]){let t=e[i]?.update?.after;t&&await t(c,a)}return c},deleteWithHooks:async function(t,n,i){let o=await t$().catch(()=>null),a=null;try{a=(await (await tM(e)).findMany({model:n,where:t,limit:1}))[0]||null}catch{}if(a)for(let e of r||[]){let t=e[n]?.delete?.before;if(t&&await t(a,o)===!1)return null}let s=i?await i.fn(t):null,l=!i||i.executeMainFn?await (await tM(e)).delete({model:n,where:t}):s;if(a)for(let e of r||[]){let t=e[n]?.delete?.after;t&&await t(a,o)}return l},deleteManyWithHooks:async function(t,n,i){let o=await t$().catch(()=>null),a=[];try{a=await (await tM(e)).findMany({model:n,where:t})}catch{}for(let e of a)for(let t of r||[]){let r=t[n]?.delete?.before;if(r&&await r(e,o)===!1)return null}let s=i?await i.fn(t):null,l=!i||i.executeMainFn?await (await tM(e)).deleteMany({model:n,where:t}):s;for(let e of a)for(let t of r||[]){let r=t[n]?.delete?.after;r&&await r(e,o)}return l}}}var m4=id,go=id;let gB=(e,t)=>{let r=t.logger,n=t.options,i=n.secondaryStorage,o=n.session?.expiresIn||604800,{createWithHooks:a,updateWithHooks:s,updateManyWithHooks:l,deleteWithHooks:c,deleteManyWithHooks:u}=gM(e,t);async function d(e){if(!i)return;let t=await i.get(`active-sessions-${e.id}`);if(!t)return;let r=Date.now(),n=((0,go.n)(t)||[]).filter(e=>e.expiresAt>r);await Promise.all(n.map(async({token:t})=>{let n=await i.get(t);if(!n)return;let o=(0,go.n)(n);if(!o)return;let a=Math.max(Math.floor(new Date(o.session.expiresAt).getTime()-r)/1e3,0);await i.set(t,JSON.stringify({session:o.session,user:e}),Math.floor(a))}))}return{createOAuthUser:async(t,r)=>tZ(e,async()=>{let e=await a({createdAt:new Date,updatedAt:new Date,...t},"user",void 0);return{user:e,account:await a({...r,userId:e.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}}),createUser:async e=>await a({createdAt:new Date,updatedAt:new Date,...e,email:e.email?.toLowerCase()},"user",void 0),createAccount:async e=>await a({createdAt:new Date,updatedAt:new Date,...e},"account",void 0),listSessions:async r=>{if(i){let e=await i.get(`active-sessions-${r}`);if(!e)return[];let n=(0,go.n)(e)||[],o=Date.now(),a=n.filter(e=>e.expiresAt>o),s=[];for(let e of a){let r=await i.get(e.token);if(r){let e=(0,go.n)(r);if(!e)return[];let n=gh(t.options,{...e.session,expiresAt:new Date(e.session.expiresAt)});s.push(n)}}return s}return await (await tM(e)).findMany({model:"session",where:[{field:"userId",value:r}]})},listUsers:async(t,r,n,i)=>await (await tM(e)).findMany({model:"user",limit:t,offset:r,sortBy:n,where:i}),countTotalUsers:async t=>{let r=await (await tM(e)).count({model:"user",where:t});return"string"==typeof r?parseInt(r):r},deleteUser:async e=>{(!i||n.session?.storeSessionInDatabase)&&await u([{field:"userId",value:e}],"session",void 0),await u([{field:"userId",value:e}],"account",void 0),await c([{field:"id",value:e}],"user",void 0)},createSession:async(t,r,s,l)=>{let c=await t$().catch(()=>null),u=c?.headers||c?.request?.headers,{id:d,...p}=s||{},f=gb(c?.context.options??n,{}),h={ipAddress:(c?.request||c?.headers)&&m3(c?.request||c?.headers,c?.context.options)||"",userAgent:u?.get("user-agent")||"",...p,expiresAt:r?gl(86400,"sec"):gl(o,"sec"),userId:t,token:(0,m4.r)(32),createdAt:new Date,updatedAt:new Date,...f,...l?p:{}};return await a(h,"session",i?{fn:async r=>{let n=await i.get(`active-sessions-${t}`),o=[],a=Date.now();n&&(o=(o=(0,go.n)(n)||[]).filter(e=>e.expiresAt>a));let s=o.sort((e,t)=>e.expiresAt-t.expiresAt),l=s.at(-1)?.expiresAt;s.push({token:h.token,expiresAt:h.expiresAt.getTime()}),(!l||l<h.expiresAt.getTime())&&(l=h.expiresAt.getTime());let c=Math.max(Math.floor((l-a)/1e3),0);c>0&&await i.set(`active-sessions-${t}`,JSON.stringify(s),c);let u=await e.findOne({model:"user",where:[{field:"id",value:t}]}),d=Math.max(Math.floor((h.expiresAt.getTime()-a)/1e3),0);return d>0&&await i.set(h.token,JSON.stringify({session:r,user:u}),d),r},executeMainFn:n.session?.storeSessionInDatabase}:void 0)},findSession:async r=>{if(i){let e=await i.get(r);if(!e&&!n.session?.storeSessionInDatabase)return null;if(e){let r=(0,go.n)(e);return r?{session:gh(t.options,{...r.session,expiresAt:new Date(r.session.expiresAt),createdAt:new Date(r.session.createdAt),updatedAt:new Date(r.session.updatedAt)}),user:gp(t.options,{...r.user,createdAt:new Date(r.user.createdAt),updatedAt:new Date(r.user.updatedAt)})}:null}}let o=await (await tM(e)).findOne({model:"session",where:[{value:r,field:"token"}],join:{user:!0}});if(!o)return null;let{user:a,...s}=o;return a?{session:gh(t.options,s),user:gp(t.options,a)}:null},findSessions:async t=>{if(i){let e=[];for(let r of t){let t=await i.get(r);if(t){let r=(0,go.n)(t);if(!r)return[];let n={session:{...r.session,expiresAt:new Date(r.session.expiresAt)},user:{...r.user,createdAt:new Date(r.user.createdAt),updatedAt:new Date(r.user.updatedAt)}};e.push(n)}}return e}let r=await (await tM(e)).findMany({model:"session",where:[{field:"token",value:t,operator:"in"}],join:{user:!0}});return!r.length||r.some(e=>!e.user)?[]:r.map(e=>{let{user:t,...r}=e;return{session:r,user:t}})},updateSession:async(e,t)=>await s(t,[{field:"token",value:e}],"session",i?{async fn(t){let r=await i.get(e);if(!r)return null;{let e=(0,go.n)(r);return e?{...e.session,...t}:null}},executeMainFn:n.session?.storeSessionInDatabase}:void 0),deleteSession:async e=>{if(i){let o=await i.get(e);if(o){let{session:t}=(0,go.n)(o)??{};if(!t)return void r.error("Session not found in secondary storage");let n=t.userId,a=await i.get(`active-sessions-${n}`);if(a){let t=(0,go.n)(a)||[],r=Date.now(),o=t.filter(t=>t.expiresAt>r&&t.token!==e),s=o.sort((e,t)=>e.expiresAt-t.expiresAt).at(-1)?.expiresAt;o.length>0&&s&&s>Date.now()?await i.set(`active-sessions-${n}`,JSON.stringify(o),Math.floor((s-r)/1e3)):await i.delete(`active-sessions-${n}`)}else r.error("Active sessions list not found in secondary storage")}if(await i.delete(e),!n.session?.storeSessionInDatabase||t.options.session?.preserveSessionInDatabase)return}await c([{field:"token",value:e}],"session",void 0)},deleteAccounts:async e=>{await u([{field:"userId",value:e}],"account",void 0)},deleteAccount:async e=>{await c([{field:"id",value:e}],"account",void 0)},deleteSessions:async e=>{if(i){if("string"==typeof e){let t=await i.get(`active-sessions-${e}`),r=t?(0,go.n)(t):[];if(!r)return;for(let e of r)await i.delete(e.token);await i.delete(`active-sessions-${e}`)}else for(let t of e)await i.get(t)&&await i.delete(t);if(!n.session?.storeSessionInDatabase||t.options.session?.preserveSessionInDatabase)return}await u([{field:Array.isArray(e)?"token":"userId",value:e,operator:Array.isArray(e)?"in":void 0}],"session",void 0)},findOAuthUser:async(t,r,n)=>{let i=await (await tM(e)).findMany({model:"account",where:[{value:r,field:"accountId"}],join:{user:!0}}).then(e=>e.find(e=>e.providerId===n));if(i)if(i.user)return{user:i.user,accounts:[i]};else{let r=await (await tM(e)).findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});return r?{user:r,accounts:[i]}:null}{let r=await (await tM(e)).findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});return r?{user:r,accounts:await (await tM(e)).findMany({model:"account",where:[{value:r.id,field:"userId"}]})||[]}:null}},findUserByEmail:async(t,r)=>{let n=await (await tM(e)).findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}],join:{...r?.includeAccounts?{account:!0}:{}}});if(!n)return null;let{account:i,...o}=n;return{user:o,accounts:i??[]}},findUserById:async t=>t?await (await tM(e)).findOne({model:"user",where:[{field:"id",value:t}]}):null,linkAccount:async e=>await a({createdAt:new Date,updatedAt:new Date,...e},"account",void 0),updateUser:async(e,t)=>{let r=await s(t,[{field:"id",value:e}],"user",void 0);return await d(r),await d(r),r},updateUserByEmail:async(e,t)=>{let r=await s(t,[{field:"email",value:e.toLowerCase()}],"user",void 0);return await d(r),await d(r),r},updatePassword:async(e,t)=>{await l({password:t},[{field:"userId",value:e},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async t=>await (await tM(e)).findMany({model:"account",where:[{field:"userId",value:t}]}),findAccount:async t=>await (await tM(e)).findOne({model:"account",where:[{field:"accountId",value:t}]}),findAccountByProviderId:async(t,r)=>await (await tM(e)).findOne({model:"account",where:[{field:"accountId",value:t},{field:"providerId",value:r}]}),findAccountByUserId:async t=>await (await tM(e)).findMany({model:"account",where:[{field:"userId",value:t}]}),updateAccount:async(e,t)=>await s(t,[{field:"id",value:e}],"account",void 0),createVerificationValue:async e=>await a({createdAt:new Date,updatedAt:new Date,...e},"verification",void 0),findVerificationValue:async t=>{let r=await (await tM(e)).findMany({model:"verification",where:[{field:"identifier",value:t}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return n.verification?.disableCleanup||await u([{field:"expiresAt",value:new Date,operator:"lt"}],"verification",void 0),r[0]},deleteVerificationValue:async e=>{await c([{field:"id",value:e}],"verification",void 0)},deleteVerificationByIdentifier:async e=>{await c([{field:"identifier",value:e}],"verification",void 0)},updateVerificationValue:async(e,t)=>await s(t,[{field:"id",value:e}],"verification",void 0)}};var gZ=e.i(319281);e.s(["default",0,gZ],418291),e.i(418291),e.s(["$brand",0,oa,"$input",0,cT,"$output",0,cI,"NEVER",0,oi,"TimePrecision",0,c6,"ZodAny",0,fB,"ZodArray",0,fY,"ZodBase64",0,fs,"ZodBase64URL",0,fc,"ZodBigInt",0,fR,"ZodBigIntFormat",0,fU,"ZodBoolean",0,fT,"ZodCIDRv4",0,fn,"ZodCIDRv6",0,fo,"ZodCUID",0,pY,"ZodCUID2",0,pX,"ZodCatch",0,hD,"ZodCodec",0,hZ,"ZodCustom",0,h0,"ZodCustomStringFormat",0,fm,"ZodDate",0,fG,"ZodDefault",0,hT,"ZodDiscriminatedUnion",0,f8,"ZodE164",0,fd,"ZodEmail",0,pN,"ZodEmoji",0,pW,"ZodEnum",0,hp,"ZodError",0,pg,"ZodExactOptional",0,hx,"ZodFile",0,hy,"ZodFirstPartyTypeKind",()=>ec,"ZodFunction",0,hQ,"ZodGUID",0,pL,"ZodIPv4",0,p9,"ZodIPv6",0,ft,"ZodISODate",0,pc,"ZodISODateTime",0,ps,"ZodISODuration",0,pf,"ZodISOTime",0,pd,"ZodIntersection",0,he,"ZodIssueCode",0,mt,"ZodJWT",0,ff,"ZodKSUID",0,p3,"ZodLazy",0,hK,"ZodLiteral",0,hm,"ZodMAC",0,p7,"ZodMap",0,hl,"ZodNaN",0,hj,"ZodNanoID",0,pG,"ZodNever",0,fq,"ZodNonOptional",0,hU,"ZodNull",0,fz,"ZodNullable",0,hk,"ZodNumber",0,fw,"ZodNumberFormat",0,fE,"ZodObject",0,f0,"ZodOptional",0,h_,"ZodPipe",0,hM,"ZodPrefault",0,hR,"ZodPromise",0,hJ,"ZodReadonly",0,hH,"ZodRealError",0,py,"ZodRecord",0,hi,"ZodSet",0,hu,"ZodString",0,pU,"ZodStringFormat",0,pP,"ZodSuccess",0,hP,"ZodSymbol",0,fN,"ZodTemplateLiteral",0,hV,"ZodTransform",0,hb,"ZodTuple",0,hr,"ZodType",0,pR,"ZodULID",0,p1,"ZodURL",0,pH,"ZodUUID",0,pz,"ZodUndefined",0,fL,"ZodUnion",0,f2,"ZodUnknown",0,fF,"ZodVoid",0,fW,"ZodXID",0,p6,"ZodXor",0,f5,"_ZodString",0,p$,"_default",()=>hO,"_function",()=>hX,"any",()=>fZ,"array",()=>fQ,"base64",()=>fl,"base64url",()=>fu,"bigint",()=>f$,"boolean",()=>fO,"catch",()=>hL,"check",()=>h1,"cidrv4",()=>fi,"cidrv6",()=>fa,"clone",()=>oF,"codec",()=>hF,"coerce",()=>mb,"config",()=>ou,"core",()=>mv,"cuid",()=>pQ,"cuid2",()=>p0,"custom",()=>h4,"date",()=>fJ,"decode",0,px,"decodeAsync",0,pk,"default",0,gZ,"describe",0,h3,"discriminatedUnion",()=>f7,"e164",()=>fp,"email",()=>pD,"emoji",()=>pK,"encode",0,pE,"encodeAsync",0,pS,"endsWith",()=>uB,"enum",()=>hf,"exactOptional",()=>hS,"file",()=>hv,"flattenError",()=>ap,"float32",()=>fS,"float64",()=>fk,"formatError",()=>af,"fromJSONSchema",()=>ml,"function",()=>hX,"getErrorMap",()=>mn,"globalRegistry",0,c$,"gt",()=>ux,"gte",()=>uS,"guid",()=>pj,"hash",()=>fb,"hex",()=>fv,"hostname",()=>fy,"httpUrl",()=>pV,"includes",()=>uz,"instanceof",()=>h9,"int",()=>fx,"int32",()=>fA,"int64",()=>fC,"intersection",()=>ht,"ipv4",()=>p8,"ipv6",()=>fr,"iso",()=>mo,"json",()=>h7,"jwt",()=>fh,"keyof",()=>fX,"ksuid",()=>p5,"lazy",()=>hG,"length",()=>uN,"literal",()=>hg,"locales",()=>mg,"looseObject",()=>f6,"looseRecord",()=>hs,"lowercase",()=>uL,"lt",()=>u_,"lte",()=>uE,"mac",()=>fe,"map",()=>hc,"maxLength",()=>uC,"maxSize",()=>uR,"meta",0,h5,"mime",()=>uF,"minLength",()=>uP,"minSize",()=>u$,"multipleOf",()=>uO,"nan",()=>hz,"nanoid",()=>pJ,"nativeEnum",()=>hh,"negative",()=>uA,"never",()=>fV,"nonnegative",()=>uT,"nonoptional",()=>hC,"nonpositive",()=>uI,"normalize",()=>uq,"null",()=>fM,"nullable",()=>hA,"nullish",()=>hI,"number",()=>f_,"object",()=>f1,"optional",()=>hE,"overwrite",()=>uH,"parse",0,pv,"parseAsync",0,pb,"partialRecord",()=>ha,"pipe",()=>hB,"positive",()=>uk,"prefault",()=>h$,"preprocess",()=>me,"prettifyError",()=>ag,"promise",()=>hY,"property",()=>uZ,"readonly",()=>hq,"record",()=>ho,"refine",()=>h6,"regex",()=>uD,"regexes",()=>po,"registry",()=>cR,"safeDecode",0,pI,"safeDecodeAsync",0,pO,"safeEncode",0,pA,"safeEncodeAsync",0,pT,"safeParse",0,pw,"safeParseAsync",0,p_,"set",()=>hd,"setErrorMap",()=>mr,"size",()=>uU,"slugify",()=>uG,"startsWith",()=>uM,"strictObject",()=>f4,"string",()=>pC,"stringFormat",()=>fg,"stringbool",0,h8,"success",()=>hN,"superRefine",()=>h2,"symbol",()=>fD,"templateLiteral",()=>hW,"toJSONSchema",()=>pn,"toLowerCase",()=>uW,"toUpperCase",()=>uK,"transform",()=>hw,"treeifyError",()=>ah,"trim",()=>uV,"tuple",()=>hn,"uint32",()=>fI,"uint64",()=>fP,"ulid",()=>p4,"undefined",()=>fj,"union",()=>f3,"unknown",()=>fH,"uppercase",()=>uj,"url",()=>pq,"util",()=>pa,"uuid",()=>pM,"uuidv4",()=>pB,"uuidv6",()=>pZ,"uuidv7",()=>pF,"void",()=>fK,"xid",()=>p2,"xor",()=>f9,"z",0,gZ],901577);var gF=e.i(901577);function gH({fields:e,isClientSide:t}){let r=Object.keys(e).reduce((r,n)=>{let i,o=e[n];return!o||t&&!1===o.input||(i="json"===o.type?gF.json?gF.json():gF.any():"string[]"===o.type||"number[]"===o.type?gF.array("string[]"===o.type?gF.string():gF.number()):Array.isArray(o.type)?gF.any():gF[o.type](),o?.required===!1&&(i=i.optional()),o?.returned===!1)?r:{...r,[n]:i}},{});return gF.object(r)}function gq(e){let t=(0,g1.getAuthTables)(e),r={};for(let e in t){let n=t[e],i=n.fields,o={};if(Object.entries(i).forEach(([e,r])=>{if(o[r.fieldName||e]=r,r.references){let n=t[r.references.model];n&&(o[r.fieldName||e].references={...r.references,model:n.modelName,field:r.references.field})}}),r[n.modelName]){r[n.modelName].fields={...r[n.modelName].fields,...o};continue}r[n.modelName]={fields:o,order:n.order||1/0}}return r}var gV=e.i(850162),gC=gA,gW=iu,gK=e.i(208089),gG=e.i(902316);let gJ={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};function gY(e,t,r){if("string[]"===t||"number[]"===t)return e.toLowerCase().includes("json");let n=gJ[r];return(Array.isArray(t)?n.string.map(e=>e.toLowerCase()):n[t].map(e=>e.toLowerCase())).includes(e.toLowerCase().split("(")[0].trim())}async function gQ(e){try{let t=await gK.sql`SHOW search_path`.execute(e);if(t.rows[0]?.search_path)return t.rows[0].search_path.split(",").map(e=>e.trim()).map(e=>e.replace(/^["']|["']$/g,"")).filter(e=>!e.startsWith("$"))[0]||"public"}catch{}return"public"}async function gX(e){let t=gq(e),r=(0,gW.n)(e.logger),{kysely:n,databaseType:i}=await (0,gV.createKyselyAdapter)(e);i||(r.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),i="sqlite"),n||(r.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let o="public";if("postgres"===i){o=await gQ(n),r.debug(`PostgreSQL migration: Using schema '${o}' (from search_path)`);try{(await gK.sql`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${o}
			`.execute(n)).rows[0]||r.warn(`Schema '${o}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(e){r.debug(`Could not verify schema existence: ${e instanceof Error?e.message:String(e)}`)}}let a=await n.introspection.getTables(),s=a;if("postgres"===i)try{let e=await gK.sql`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${o}
				AND table_type = 'BASE TABLE'
			`.execute(n),t=new Set(e.rows.map(e=>e.table_name));s=a.filter(e=>e.schema===o&&t.has(e.name)),r.debug(`Found ${s.length} table(s) in schema '${o}': ${s.map(e=>e.name).join(", ")||"(none)"}`)}catch(e){r.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${e instanceof Error?e.message:String(e)}`)}let l=[],c=[];for(let[e,n]of Object.entries(t)){let t=s.find(t=>t.name===e);if(!t){let t=l.findIndex(t=>t.table===e),r={table:e,fields:n.fields,order:n.order||1/0},i=l.findIndex(e=>(e.order||1/0)>r.order);-1===i?-1===t?l.push(r):l[t].fields={...l[t].fields,...n.fields}:l.splice(i,0,r);continue}let o={};for(let[a,s]of Object.entries(n.fields)){let n=t.columns.find(e=>e.name===a);if(!n){o[a]=s;continue}gY(n.dataType,s.type,i)||r.warn(`Field ${a} in table ${e} has a different type in the database. Expected ${s.type} but got ${n.dataType}.`)}Object.keys(o).length>0&&c.push({table:e,fields:o,order:n.order||1/0})}let u=[],d=e.advanced?.database?.generateId==="uuid",p=e.advanced?.database?.useNumberId||e.advanced?.database?.generateId==="serial";function f(e,t){let r=e.type,n=i||"sqlite",o={string:{sqlite:"text",postgres:"text",mysql:e.unique?"varchar(255)":e.references?"varchar(36)":e.sortable||e.index?"varchar(255)":"text",mssql:e.unique||e.sortable?"varchar(255)":e.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:e.bigint?"bigint":"integer",postgres:e.bigint?"bigint":"integer",mysql:e.bigint?"bigint":"integer",mssql:e.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:gK.sql`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:p?gK.sql`integer GENERATED BY DEFAULT AS IDENTITY`:d?"uuid":"text",mysql:p?"integer":"varchar(36)",mssql:p?"integer":"varchar(36)",sqlite:p?"integer":"text"},foreignKeyId:{postgres:p?"integer":d?"uuid":"text",mysql:p?"integer":"varchar(36)",mssql:p?"integer":"varchar(36)",sqlite:p?"integer":"text"},"string[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},"number[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"}};if("id"===t||e.references?.field==="id")return"id"===t?o.id[n]:o.foreignKeyId[n];if(Array.isArray(r))return"text";if(!(r in o))throw Error(`Unsupported field type '${String(r)}' for field '${t}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: "string") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);return o[r][n]}let h=(0,gG.initGetModelName)({schema:(0,gC.t)(e),usePlural:!1}),m=(0,gG.initGetFieldName)({schema:(0,gC.t)(e),usePlural:!1});function g(e,t){try{return`${h(e)}.${m({model:e,field:t})}`}catch{return`${e}.${t}`}}if(c.length)for(let e of c)for(let[t,r]of Object.entries(e.fields)){let o=f(r,t),a=n.schema.alterTable(e.table);if(r.index){let r=n.schema.alterTable(e.table).addIndex(`${e.table}_${t}_idx`);u.push(r)}let s=a.addColumn(t,o,e=>(e=!1!==r.required?e.notNull():e,r.references&&(e=e.references(g(r.references.model,r.references.field)).onDelete(r.references.onDelete||"cascade")),r.unique&&(e=e.unique()),"date"===r.type&&"function"==typeof r.defaultValue&&("postgres"===i||"mysql"===i||"mssql"===i)&&(e="mysql"===i?e.defaultTo(gK.sql`CURRENT_TIMESTAMP(3)`):e.defaultTo(gK.sql`CURRENT_TIMESTAMP`)),e));u.push(s)}let y=[];if(e.advanced?.database?.useNumberId&&r.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead."),l.length)for(let e of l){let t=f({type:p?"number":"string"},"id"),r=n.schema.createTable(e.table).addColumn("id",t,e=>{if(p)return"postgres"===i?e.primaryKey().notNull():"sqlite"===i?e.primaryKey().notNull():"mssql"===i?e.identity().primaryKey().notNull():e.autoIncrement().primaryKey().notNull();return d&&"postgres"===i?e.primaryKey().defaultTo(gK.sql`pg_catalog.gen_random_uuid()`).notNull():e.primaryKey().notNull()});for(let[t,o]of Object.entries(e.fields)){let a=f(o,t);if(r=r.addColumn(t,a,e=>(e=!1!==o.required?e.notNull():e,o.references&&(e=e.references(g(o.references.model,o.references.field)).onDelete(o.references.onDelete||"cascade")),o.unique&&(e=e.unique()),"date"===o.type&&"function"==typeof o.defaultValue&&("postgres"===i||"mysql"===i||"mssql"===i)&&(e="mysql"===i?e.defaultTo(gK.sql`CURRENT_TIMESTAMP(3)`):e.defaultTo(gK.sql`CURRENT_TIMESTAMP`)),e)),o.index){let r=n.schema.createIndex(`${e.table}_${t}_${o.unique?"uidx":"idx"}`).on(e.table).columns([t]);y.push(o.unique?r.unique():r)}}u.push(r)}if(y.length)for(let e of y)u.push(e);return{toBeCreated:l,toBeAdded:c,runMigrations:async function(){for(let e of u)await e.execute()},compileMigrations:async function(){return u.map(e=>e.compile().sql).join(";\n\n")+";"}}}e.i(831083),e.s(["accountSchema",()=>gT,"coreSchema",()=>gI,"getAuthTables",()=>gA.t,"rateLimitSchema",()=>gO,"sessionSchema",()=>gR,"userSchema",()=>g$,"verificationSchema",()=>gU],876372);var g0=e.i(876372),g1=((e,t)=>{let r={};for(var n in e)g_(r,n,{get:e[n],enumerable:!0});return t&&g_(r,Symbol.toStringTag,{value:"Module"}),r})({convertFromDB:()=>gz,convertToDB:()=>gj,createFieldAttribute:()=>gL,createInternalAdapter:()=>gB,getAdapter:()=>gD,getBaseAdapter:()=>gN,getMigrations:()=>gX,getSchema:()=>gq,getWithHooks:()=>gM,matchType:()=>gY,mergeSchema:()=>gw,parseAccountInput:()=>gv,parseAccountOutput:()=>gf,parseAdditionalUserInput:()=>gy,parseInputData:()=>gm,parseSessionInput:()=>gb,parseSessionOutput:()=>gh,parseUserInput:()=>gg,parseUserOutput:()=>gp,toZodSchema:()=>gH});ea&&(g_(g1,Symbol.toStringTag,{value:"Module"}),eo&&g_(eo,Symbol.toStringTag,{value:"Module"})),gk(g1,g0,"default"),eo&&gk(eo,g0,"default");var go=id,mb=mb;function g4(e){let t=e.split("."),r=parseInt(t[t.length-1]||"0",10);return isNaN(r)?0:r}function g6(e,t){let r={};for(let n in e)r[n]={name:n,value:"",options:{...t,maxAge:0}};return r}let g2=e=>(t,r,n)=>{let i=function(e,t){let r={};for(let[n,i]of Object.entries(function(e){let t=e.headers?.get("cookie");if(!t)return{};let r={};for(let e of t.split("; ")){let[t,...n]=e.split("=");t&&n.length>0&&(r[t]=n.join("="))}return r}(t)))n.startsWith(e)&&(r[n]=i);return r}(t,n),o=n.context.logger;return{getValue:()=>Object.keys(i).sort((e,t)=>g4(e)-g4(t)).map(e=>i[e]).join(""),hasChunks:()=>Object.keys(i).length>0,chunk(n,a){let s=g6(i,r);for(let e in i)delete i[e];for(let l of function(e,t,r,n){let i=Math.ceil(t.value.length/3896);if(1===i)return r[t.name]=t.value,[t];let o=[];for(let e=0;e<i;e++){let n=`${t.name}.${e}`,i=3896*e,a=t.value.substring(i,i+3896);o.push({...t,name:n,value:a}),r[n]=a}return n.debug(`CHUNKING_${e.toUpperCase()}_COOKIE`,{message:`${e} cookie exceeds allowed 4096 bytes.`,emptyCookieSize:200,valueSize:t.value.length,chunkCount:i,chunks:o.map(e=>e.value.length+200)}),o}(e,{name:t,value:n,options:{...r,...a}},i,o))s[l.name]=l;return Object.values(s)},clean(){let e=g6(i,r);for(let e in i)delete i[e];return Object.values(e)},setCookies(e){for(let t of e)n.setCookie(t.name,t.value,t.options)}}},g3=g2("Session"),g5=g2("Account");function g9(e,t){let r=e.getCookie(t);if(r)return r;let n=[],i=e.headers?.get("cookie");if(!i)return null;let o={};for(let e of i.split("; ")){let[t,...r]=e.split("=");t&&r.length>0&&(o[t]=r.join("="))}for(let[e,r]of Object.entries(o))if(e.startsWith(t+".")){let t=parseInt(e.split(".").at(-1)||"0",10);isNaN(t)||n.push({index:t,value:r})}return n.length>0?(n.sort((e,t)=>e.index-t.index),n.map(e=>e.value).join("")):null}async function g8(e,t){let r=e.context.authCookies.accountData,n={maxAge:300,...r.options},i=await il(t,e.context.secret,"better-auth-account",n.maxAge);if(i.length>4096){let t=g5(r.name,n,e),o=t.chunk(i,n);t.setCookies(o)}else{let t=g5(r.name,n,e);if(t.hasChunks()){let e=t.clean();t.setCookies(e)}e.setCookie(r.name,i,n)}}async function g7(e){let t=g9(e,e.context.authCookies.accountData.name);if(t){let r=(0,go.n)(await ic(t,e.context.secret,"better-auth-account"));if(r)return r}return null}let ye=hE(f1({disableCookieCache:mb.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:mb.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()})),yt=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;function yr(e){let t,r=yt.exec(e);if(!r||r[4]&&r[1])throw TypeError(`Invalid time string format: "${e}". Use formats like "7d", "30m", "1 hour", etc.`);let n=parseFloat(r[2]),i=r[3].toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":t=315576e5*n;break;case"months":case"month":case"mo":t=2592e6*n;break;case"weeks":case"week":case"w":t=6048e5*n;break;case"days":case"day":case"d":t=864e5*n;break;case"hours":case"hour":case"hrs":case"hr":case"h":t=36e5*n;break;case"minutes":case"minute":case"mins":case"min":case"m":t=6e4*n;break;case"seconds":case"second":case"secs":case"sec":case"s":t=1e3*n;break;default:throw TypeError(`Unknown time unit: "${i}"`)}return"-"===r[1]||"ago"===r[4]?-t:t}var yn=iu,yi=iu,ih=ip,go=id;let yo=new Map,ya={decode:(e,t="utf-8")=>(yo.has(t)||yo.set(t,new TextDecoder(t)),yo.get(t).decode(e)),encode:new TextEncoder().encode},ys=(e="SHA-256",t="none")=>{let r={importKey:async(t,r)=>ix().importKey("raw","string"==typeof t?new TextEncoder().encode(t):t,{name:"HMAC",hash:{name:e}},!1,[r]),sign:async(e,n)=>{"string"==typeof e&&(e=await r.importKey(e,"sign"));let i=await ix().sign("HMAC",e,"string"==typeof n?new TextEncoder().encode(n):n);return"hex"===t?im(i):"base64"===t||"base64url"===t||"base64urlnopad"===t?iT.encode(i,{padding:"base64urlnopad"!==t}):i},verify:async(e,n,i)=>("string"==typeof e&&(e=await r.importKey(e,"verify")),"hex"===t&&(i=(e=>{if(!e)return"";if("string"==typeof e){if(e.length%2!=0||!RegExp("^[0123456789abcdef]+$").test(e))throw Error("Invalid hexadecimal string");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.slice(r,r+2),16);return new TextDecoder().decode(t)}return new TextDecoder().decode(e)})(i)),("base64"===t||"base64url"===t||"base64urlnopad"===t)&&(i=await iI.decode(i)),ix().verify("HMAC",e,"string"==typeof i?new TextEncoder().encode(i):i,"string"==typeof n?new TextEncoder().encode(n):n))};return r};function yl(e){let t=(e.advanced?.useSecureCookies!==void 0?e.advanced?.useSecureCookies:void 0!==e.baseURL?!!e.baseURL.startsWith("https://"):yi.f)?"__Secure-":"",r=!!e.advanced?.crossSubDomainCookies?.enabled,n=r?e.advanced?.crossSubDomainCookies?.domain||(e.baseURL?new URL(e.baseURL).hostname:void 0):void 0;if(r&&!n)throw new ih.t("baseURL is required when crossSubdomainCookies are enabled");return function(i,o={}){let a=e.advanced?.cookiePrefix||"better-auth",s=e.advanced?.cookies?.[i]?.name||`${a}.${i}`,l=e.advanced?.cookies?.[i]?.attributes;return{name:`${t}${s}`,attributes:{secure:!!t,sameSite:"lax",path:"/",httpOnly:!0,...r?{domain:n}:{},...e.advanced?.defaultCookieAttributes,...o,...l}}}}async function yc(e,t,r){if(e.context.options.session?.cookieCache?.enabled){let n,i=Object.entries(t.session).reduce((t,[r,n])=>{let i=e.context.options.session?.additionalFields?.[r];return i&&!1===i.returned||(t[r]=n),t},{}),o=gp(e.context.options,t.user),a=e.context.options.session?.cookieCache?.version,s="1";if(a){if("string"==typeof a)s=a;else if("function"==typeof a){let e=a(t.session,t.user);s=e instanceof Promise?await e:e}}let l={session:i,user:o,updatedAt:Date.now(),version:s},c={...e.context.authCookies.sessionData.options,maxAge:r?void 0:e.context.authCookies.sessionData.options.maxAge},u=gl(c.maxAge||60,"sec").getTime(),d=e.context.options.session?.cookieCache?.strategy||"compact";if((n="jwe"===d?await il(l,e.context.secret,"better-auth-session",c.maxAge||300):"jwt"===d?await ii(l,e.context.secret,c.maxAge||300):iT.encode(JSON.stringify({session:l,expiresAt:u,signature:await ys("SHA-256","base64urlnopad").sign(e.context.secret,JSON.stringify({...l,expiresAt:u}))}),{padding:!1})).length>4093){let t=g3(e.context.authCookies.sessionData.name,c,e),r=t.chunk(n,c);t.setCookies(r)}else{let t=g3(e.context.authCookies.sessionData.name,c,e);if(t.hasChunks()){let e=t.clean();t.setCookies(e)}e.setCookie(e.context.authCookies.sessionData.name,n,c)}}}async function yu(e,t,r,n){let i=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);r=void 0!==r?r:!!i;let o=e.context.authCookies.sessionToken.options,a=r?void 0:e.context.sessionConfig.expiresIn;await e.setSignedCookie(e.context.authCookies.sessionToken.name,t.session.token,e.context.secret,{...o,maxAge:a,...n}),r&&await e.setSignedCookie(e.context.authCookies.dontRememberToken.name,"true",e.context.secret,e.context.authCookies.dontRememberToken.options),await yc(e,t,r),e.context.setNewSession(t),e.context.options.secondaryStorage&&await e.context.secondaryStorage?.set(t.session.token,JSON.stringify({user:t.user,session:t.session}),Math.floor((new Date(t.session.expiresAt).getTime()-Date.now())/1e3))}function yd(e,t){if(e.setCookie(e.context.authCookies.sessionToken.name,"",{...e.context.authCookies.sessionToken.options,maxAge:0}),e.setCookie(e.context.authCookies.sessionData.name,"",{...e.context.authCookies.sessionData.options,maxAge:0}),e.context.options.account?.storeAccountCookie){e.setCookie(e.context.authCookies.accountData.name,"",{...e.context.authCookies.accountData.options,maxAge:0});let t=g5(e.context.authCookies.accountData.name,e.context.authCookies.accountData.options,e),r=t.clean();t.setCookies(r)}if("cookie"===e.context.oauthConfig.storeStateStrategy){let t=e.context.createAuthCookie("oauth_state");e.setCookie(t.name,"",{...t.attributes,maxAge:0})}let r=g3(e.context.authCookies.sessionData.name,e.context.authCookies.sessionData.options,e),n=r.clean();r.setCookies(n),t||e.setCookie(e.context.authCookies.dontRememberToken.name,"",{...e.context.authCookies.dontRememberToken.options,maxAge:0})}var yp=ip,go=id;let yf=()=>m7("/get-session",{method:"GET",operationId:"getSession",query:ye,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",nullable:!0,properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async e=>{try{let t=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(!t)return null;let r=g9(e,e.context.authCookies.sessionData.name),n=null;if(r){let t=e.context.options.session?.cookieCache?.strategy||"compact";if("jwe"===t){let t=await ic(r,e.context.secret,"better-auth-session");if(t&&t.session&&t.user)n={session:{session:t.session,user:t.user,updatedAt:t.updatedAt,version:t.version},expiresAt:t.exp?1e3*t.exp:Date.now()};else{let t=e.context.authCookies.sessionData.name;return e.setCookie(t,"",{maxAge:0}),e.json(null)}}else if("jwt"===t){let t=await io(r,e.context.secret);if(t&&t.session&&t.user)n={session:{session:t.session,user:t.user,updatedAt:t.updatedAt,version:t.version},expiresAt:t.exp?1e3*t.exp:Date.now()};else{let t=e.context.authCookies.sessionData.name;return e.setCookie(t,"",{maxAge:0}),e.json(null)}}else{let t=(0,go.n)(ya.decode(iT.decode(r)));if(t)if(await ys("SHA-256","base64urlnopad").verify(e.context.secret,JSON.stringify({...t.session,expiresAt:t.expiresAt}),t.signature))n=t;else{let t=e.context.authCookies.sessionData.name;return e.setCookie(t,"",{maxAge:0}),e.json(null)}}}let i=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);if(n?.session&&e.context.options.session?.cookieCache?.enabled&&!e.query?.disableCookieCache){let t=n.session,r=e.context.options.session?.cookieCache?.version,i="1";if(r){if("string"==typeof r)i=r;else if("function"==typeof r){let e=r(t.session,t.user);i=e instanceof Promise?await e:e}}if((t.version||"1")!==i){let t=e.context.authCookies.sessionData.name;e.setCookie(t,"",{maxAge:0})}else{let r=new Date(t.session.expiresAt);if(n.expiresAt<Date.now()||r<new Date){let t=e.context.authCookies.sessionData.name;e.setCookie(t,"",{maxAge:0})}else{let r=e.context.sessionConfig.cookieRefreshCache;if(!1===r)return e.context.session=t,e.json({session:t.session,user:t.user});if(n.expiresAt-Date.now()<1e3*r.updateAge){let r=gl(e.context.options.session?.cookieCache?.maxAge||300,"sec"),n={session:{...t.session,expiresAt:r},user:t.user,updatedAt:Date.now()};await yc(e,n,!1);let i=gh(e.context.options,{...n.session,expiresAt:new Date(n.session.expiresAt),createdAt:new Date(n.session.createdAt),updatedAt:new Date(n.session.updatedAt)}),o=gp(e.context.options,{...n.user,createdAt:new Date(n.user.createdAt),updatedAt:new Date(n.user.updatedAt)});return e.context.session={session:i,user:o},e.json({session:i,user:o})}let i=gh(e.context.options,{...t.session,expiresAt:new Date(t.session.expiresAt),createdAt:new Date(t.session.createdAt),updatedAt:new Date(t.session.updatedAt)}),o=gp(e.context.options,{...t.user,createdAt:new Date(t.user.createdAt),updatedAt:new Date(t.user.updatedAt)});return e.context.session={session:i,user:o},e.json({session:i,user:o})}}}let o=await e.context.internalAdapter.findSession(t);if(e.context.session=o,!o||o.session.expiresAt<new Date)return yd(e),o&&await e.context.internalAdapter.deleteSession(o.session.token),e.json(null);if(i||e.query?.disableRefresh){let t=gh(e.context.options,o.session),r=gp(e.context.options,o.user);return e.json({session:t,user:r})}let a=e.context.sessionConfig.expiresIn,s=e.context.sessionConfig.updateAge;if(o.session.expiresAt.valueOf()-1e3*a+1e3*s<=Date.now()&&(!e.query?.disableRefresh||!e.context.options.session?.disableSessionRefresh)){let t=await e.context.internalAdapter.updateSession(o.session.token,{expiresAt:gl(e.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!t)return yd(e),e.json(null,{status:401});let r=(t.expiresAt.valueOf()-Date.now())/1e3;await yu(e,{session:t,user:o.user},!1,{maxAge:r});let n=gh(e.context.options,t),i=gp(e.context.options,o.user);return e.json({session:n,user:i})}return await yc(e,o,!!i),e.json(o)}catch(t){throw e.context.logger.error("INTERNAL_SERVER_ERROR",t),new mS("INTERNAL_SERVER_ERROR",{message:yp.n.FAILED_TO_GET_SESSION})}}),yh=async(e,t)=>{if(e.context.session)return e.context.session;let r=await yf()({...e,asResponse:!1,headers:e.headers,returnHeaders:!1,returnStatus:!1,query:{...t,...e.query}}).catch(e=>null);return e.context.session=r,r},ym=m9(async e=>{let t=await yh(e);if(!t?.session)throw new mS("UNAUTHORIZED");return{session:t}}),yg=m9(async e=>{let t=await yh(e,{disableCookieCache:!0});if(!t?.session)throw new mS("UNAUTHORIZED");return{session:t}});m9(async e=>{let t=await yh(e);if(!t?.session&&(e.request||e.headers))throw new mS("UNAUTHORIZED");return{session:t}});let yy=m9(async e=>{let t=await yh(e);if(!t?.session)throw new mS("UNAUTHORIZED");if(0===e.context.sessionConfig.freshAge)return{session:t};let r=e.context.sessionConfig.freshAge,n=new Date(t.session.updatedAt||t.session.createdAt).getTime();if(!(Date.now()-n<1e3*r))throw new mS("FORBIDDEN",{message:"Session is not fresh"});return{session:t}}),yv=m7("/revoke-session",{method:"POST",body:f1({token:pC().meta({description:"The token to revoke"})}),use:[yg],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async e=>{let t=e.body.token;if((await e.context.internalAdapter.findSession(t))?.session.userId===e.context.session.user.id)try{await e.context.internalAdapter.deleteSession(t)}catch(t){throw e.context.logger.error(t&&"object"==typeof t&&"name"in t?t.name:"",t),new mS("INTERNAL_SERVER_ERROR")}return e.json({status:!0})}),yb=m7("/revoke-sessions",{method:"POST",use:[yg],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async e=>{try{await e.context.internalAdapter.deleteSessions(e.context.session.user.id)}catch(t){throw e.context.logger.error(t&&"object"==typeof t&&"name"in t?t.name:"",t),new mS("INTERNAL_SERVER_ERROR")}return e.json({status:!0})}),yw=m7("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[yg],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async e=>{let t=e.context.session;if(!t.user)throw new mS("UNAUTHORIZED");let r=(await e.context.internalAdapter.listSessions(t.user.id)).filter(e=>e.expiresAt>new Date).filter(t=>t.token!==e.context.session.session.token);return await Promise.all(r.map(t=>e.context.internalAdapter.deleteSession(t.token))),e.json({status:!0})});function y_(e,t){return e&&t.options.account?.encryptOAuthTokens?on({key:t.secret,data:e}):e}function yE(e,t){return t.options.account?.encryptOAuthTokens&&e?or({key:t.secret,data:e}):e}var yp=ip,yx=Object.defineProperty,yS=Object.defineProperties,yk=Object.getOwnPropertyDescriptors,yA=Object.getOwnPropertySymbols,yI=Object.prototype.hasOwnProperty,yT=Object.prototype.propertyIsEnumerable,yO=(e,t,r)=>t in e?yx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yR=(e,t)=>{for(var r in t||(t={}))yI.call(t,r)&&yO(e,r,t[r]);if(yA)for(var r of yA(t))yT.call(t,r)&&yO(e,r,t[r]);return e},y$=(e,t)=>yS(e,yk(t)),yU=class extends Error{constructor(e,t,r){super(t||e.toString(),{cause:r}),this.status=e,this.statusText=t,this.error=r,Error.captureStackTrace(this,this.constructor)}},yC=async(e,t)=>{var r,n,i,o,a,s;let l=t||{},c={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:l,hooks:c};for(let u of(null==t?void 0:t.plugins)||[]){if(u.init){let n=await (null==(r=u.init)?void 0:r.call(u,e.toString(),t));l=n.options||l,e=n.url}c.onRequest.push(null==(n=u.hooks)?void 0:n.onRequest),c.onResponse.push(null==(i=u.hooks)?void 0:i.onResponse),c.onSuccess.push(null==(o=u.hooks)?void 0:o.onSuccess),c.onError.push(null==(a=u.hooks)?void 0:a.onError),c.onRetry.push(null==(s=u.hooks)?void 0:s.onRetry)}return{url:e,options:l,hooks:c}},yP=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},yN=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}},yD=async e=>{let t={},r=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth){if("Bearer"===e.auth.type){let n=await r(e.auth.token);if(!n)return t;t.authorization=`Bearer ${n}`}else if("Basic"===e.auth.type){let[n,i]=await Promise.all([r(e.auth.username),r(e.auth.password)]);if(!n||!i)return t;t.authorization=`Basic ${btoa(`${n}:${i}`)}`}else if("Custom"===e.auth.type){let[n,i]=await Promise.all([r(e.auth.prefix),r(e.auth.value)]);if(!i)return t;t.authorization=`${null!=n?n:""} ${i}`}}return t},yL=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function yj(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function yz(e){try{return JSON.parse(e)}catch(t){return e}}async function yM(e){let t=new Headers(null==e?void 0:e.headers);for(let[r,n]of Object.entries(await yD(e)||{}))t.set(r,n);if(!t.has("content-type")){let r=yj(null==e?void 0:e.body)?"application/json":null;r&&t.set("content-type",r)}return t}var yB=class e extends Error{constructor(t,r){super(r||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function yZ(e,t){let r=await e["~standard"].validate(t);if(r.issues)throw new yB(r.issues);return r.value}var yF=["get","post","put","patch","delete"],yH=async(e,t)=>{var r,n,i,o,a,s,l,c;let u,{hooks:d,url:p,options:f}=await yC(e,t),h=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("u">typeof globalThis&&"function"==typeof globalThis.fetch)return globalThis.fetch;throw Error("No fetch implementation found")}(f),m=new AbortController,g=null!=(r=f.signal)?r:m.signal,y=function(e,t){let{baseURL:r,params:n,query:i}=t||{query:{},params:{},baseURL:""},o=e.startsWith("http")?e.split("/").slice(0,3).join("/"):r||"";if(e.startsWith("@")){let t=e.toString().split("@")[1].split("/")[0];yF.includes(t)&&(e=e.replace(`@${t}/`,"/"))}o.endsWith("/")||(o+="/");let[a,s]=e.replace(o,"").split("?"),l=new URLSearchParams(s);for(let[e,t]of Object.entries(i||{})){let r;if(null!=t){if("string"==typeof t)r=t;else if(Array.isArray(t)){for(let r of t)l.append(e,r);continue}else r=JSON.stringify(t);l.set(e,r)}}if(n)if(Array.isArray(n))for(let[e,t]of a.split("/").filter(e=>e.startsWith(":")).entries()){let r=n[e];a=a.replace(t,r)}else for(let[e,t]of Object.entries(n))a=a.replace(`:${e}`,String(t));(a=a.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(a=a.slice(1));let c=l.toString();return(c=c.length>0?`?${c}`.replace(/\+/g,"%20"):"",o.startsWith("http"))?new URL(`${a}${c}`,o):`${o}${a}${c}`}(p,f),v=function(e){if(!(null==e?void 0:e.body))return null;let t=new Headers(null==e?void 0:e.headers);if(yj(e.body)&&!t.has("content-type")){for(let[t,r]of Object.entries(null==e?void 0:e.body))r instanceof Date&&(e.body[t]=r.toISOString());return JSON.stringify(e.body)}return t.has("content-type")&&"application/x-www-form-urlencoded"===t.get("content-type")&&yj(e.body)?new URLSearchParams(e.body).toString():e.body}(f),b=await yM(f),w=function(e,t){var r;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){let n=null==(r=e.split("@")[1])?void 0:r.split("/")[0];return yF.includes(n)?n.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(p,f),_=y$(yR({},f),{url:y,headers:b,body:v,method:w,signal:g});for(let e of d.onRequest)if(e){let t=await e(_);"object"==typeof t&&null!==t&&(_=t)}("pipeTo"in _&&"function"==typeof _.pipeTo||"function"==typeof(null==(n=null==t?void 0:t.body)?void 0:n.pipe))&&!("duplex"in _)&&(_.duplex="half");let{clearTimeout:E}=(!(null==f?void 0:f.signal)&&(null==f?void 0:f.timeout)&&(u=setTimeout(()=>null==m?void 0:m.abort(),null==f?void 0:f.timeout)),{abortTimeout:u,clearTimeout:()=>{u&&clearTimeout(u)}}),x=await h(_.url,_);E();let S={response:x,request:_};for(let e of d.onResponse)if(e){let r=await e(y$(yR({},S),{response:(null==(i=null==t?void 0:t.hookOptions)?void 0:i.cloneResponse)?x.clone():x}));r instanceof Response?x=r:"object"==typeof r&&null!==r&&(x=r.response)}if(x.ok){if("HEAD"===_.method)return{data:"",error:null};let e=function(e){let t=e.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let n=t.split(";").shift()||"";return yL.test(n)?"json":r.has(n)||n.startsWith("text/")?"text":"blob"}(x),r={data:null,response:x,request:_};if("json"===e||"text"===e){let e=await x.text(),t=null!=(o=_.jsonParser)?o:yz;r.data=await t(e)}else r.data=await x[e]();for(let e of((null==_?void 0:_.output)&&_.output&&!_.disableValidation&&(r.data=await yZ(_.output,r.data)),d.onSuccess))e&&await e(y$(yR({},r),{response:(null==(a=null==t?void 0:t.hookOptions)?void 0:a.cloneResponse)?x.clone():x}));return(null==t?void 0:t.throw)?r.data:{data:r.data,error:null}}let k=null!=(s=null==t?void 0:t.jsonParser)?s:yz,A=await x.text(),I=function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(A),T=I?await k(A):null,O={response:x,responseText:A,request:_,error:y$(yR({},T),{status:x.status,statusText:x.statusText})};for(let e of d.onError)e&&await e(y$(yR({},O),{response:(null==(l=null==t?void 0:t.hookOptions)?void 0:l.cloneResponse)?x.clone():x}));if(null==t?void 0:t.retry){let r=function(e){if("number"==typeof e)return new yP({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new yP(e);case"exponential":return new yN(e);default:throw Error("Invalid retry strategy")}}(t.retry),n=null!=(c=t.retryAttempt)?c:0;if(await r.shouldAttemptRetry(n,x)){for(let e of d.onRetry)e&&await e(S);let i=r.getDelay(n);return await new Promise(e=>setTimeout(e,i)),await yH(e,y$(yR({},t),{retryAttempt:n+1}))}}if(null==t?void 0:t.throw)throw new yU(x.status,x.statusText,I?T:A);return{data:null,error:y$(yR({},T),{status:x.status,statusText:x.statusText})}};function yq(e){return ny(e)}class yV{#m;#g=new WeakMap;constructor(e){if(!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(yq)}(e))throw new rF("JSON Web Key Set malformed");this.#m=structuredClone(e)}jwks(){return this.#m}async getKey(e,t){let{alg:r,kid:n}={...e,...t?.header},i=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new rL('Unsupported "alg" value for a JSON Web Key Set')}}(r),o=this.#m.keys.filter(e=>{let t=i===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&("string"==typeof e.alg||"AKP"===i)&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":case"EdDSA":t="Ed25519"===e.crv}return t}),{0:a,length:s}=o;if(0===s)throw new rH;if(1!==s){let e=new rq,t=this.#g;throw e[Symbol.asyncIterator]=async function*(){for(let e of o)try{yield await yW(t,e,r)}catch{}},e}return yW(this.#g,a,r)}}async function yW(e,t,r){let n=e.get(t)||e.set(t,{}).get(t);if(void 0===n[r]){let e=await n6({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new rF("JSON Web Key Set members must be public keys");n[r]=e}return n[r]}function yK(e){let t=new yV(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>structuredClone(t.jwks()),enumerable:!1,configurable:!1,writable:!1}}),r}function yG(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e)if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(rS.decode(rR(t)));if(!ny(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}}function yJ(e){let t=e=>new Date(new Date().getTime()+1e3*e);return{tokenType:e.token_type,accessToken:e.access_token,refreshToken:e.refresh_token,accessTokenExpiresAt:e.expires_in?t(e.expires_in):void 0,refreshTokenExpiresAt:e.refresh_token_expires_in?t(e.refresh_token_expires_in):void 0,scopes:e?.scope?"string"==typeof e.scope?e.scope.split(" "):e.scope:[],idToken:e.id_token,raw:e}}async function yY(e){let t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t);return iT.encode(new Uint8Array(r),{padding:!1})}async function yQ({id:e,options:t,authorizationEndpoint:r,state:n,codeVerifier:i,scopes:o,claims:a,redirectURI:s,duration:l,prompt:c,accessType:u,responseType:d,display:p,loginHint:f,hd:h,responseMode:m,additionalParams:g,scopeJoiner:y}){let v=new URL(r);v.searchParams.set("response_type",d||"code");let b=Array.isArray(t.clientId)?t.clientId[0]:t.clientId;if(v.searchParams.set("client_id",b),v.searchParams.set("state",n),o&&v.searchParams.set("scope",o.join(y||" ")),v.searchParams.set("redirect_uri",t.redirectURI||s),l&&v.searchParams.set("duration",l),p&&v.searchParams.set("display",p),f&&v.searchParams.set("login_hint",f),c&&v.searchParams.set("prompt",c),h&&v.searchParams.set("hd",h),u&&v.searchParams.set("access_type",u),m&&v.searchParams.set("response_mode",m),i){let e=await yY(i);v.searchParams.set("code_challenge_method","S256"),v.searchParams.set("code_challenge",e)}if(a){let e=a.reduce((e,t)=>(e[t]=null,e),{});v.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...e}}))}return g&&Object.entries(g).forEach(([e,t])=>{v.searchParams.set(e,t)}),v}async function yX({refreshToken:e,options:t,tokenEndpoint:r,authentication:n,extraParams:i}){let{body:o,headers:a}=function({refreshToken:e,options:t,authentication:r,extraParams:n,resource:i}){let o=new URLSearchParams,a={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(o.set("grant_type","refresh_token"),o.set("refresh_token",e),"basic"===r){let e=Array.isArray(t.clientId)?t.clientId[0]:t.clientId;e?a.authorization="Basic "+iI.encode(`${e}:${t.clientSecret??""}`):a.authorization="Basic "+iI.encode(`:${t.clientSecret??""}`)}else{let e=Array.isArray(t.clientId)?t.clientId[0]:t.clientId;o.set("client_id",e),t.clientSecret&&o.set("client_secret",t.clientSecret)}if(i)if("string"==typeof i)o.append("resource",i);else for(let e of i)o.append("resource",e);if(n)for(let[e,t]of Object.entries(n))o.set(e,t);return{body:o,headers:a}}({refreshToken:e,options:t,authentication:n,extraParams:i}),{data:s,error:l}=await yH(r,{method:"POST",body:o,headers:a});if(l)throw l;let c={accessToken:s.access_token,refreshToken:s.refresh_token,tokenType:s.token_type,scopes:s.scope?.split(" "),idToken:s.id_token};return s.expires_in&&(c.accessTokenExpiresAt=new Date(new Date().getTime()+1e3*s.expires_in)),c}async function y0({code:e,codeVerifier:t,redirectURI:r,options:n,tokenEndpoint:i,authentication:o,deviceId:a,headers:s,additionalParams:l={},resource:c}){let{body:u,headers:d}=function({code:e,codeVerifier:t,redirectURI:r,options:n,authentication:i,deviceId:o,headers:a,additionalParams:s={},resource:l}){let c=new URLSearchParams,u={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...a};if(c.set("grant_type","authorization_code"),c.set("code",e),t&&c.set("code_verifier",t),n.clientKey&&c.set("client_key",n.clientKey),o&&c.set("device_id",o),c.set("redirect_uri",n.redirectURI||r),l)if("string"==typeof l)c.append("resource",l);else for(let e of l)c.append("resource",e);if("basic"===i){let e=Array.isArray(n.clientId)?n.clientId[0]:n.clientId;u.authorization=`Basic ${iI.encode(`${e}:${n.clientSecret??""}`)}`}else{let e=Array.isArray(n.clientId)?n.clientId[0]:n.clientId;c.set("client_id",e),n.clientSecret&&c.set("client_secret",n.clientSecret)}for(let[e,t]of Object.entries(s))c.has(e)||c.append(e,t);return{body:c,headers:u}}({code:e,codeVerifier:t,redirectURI:r,options:n,authentication:o,deviceId:a,headers:s,additionalParams:l,resource:c}),{data:p,error:f}=await yH(i,{method:"POST",body:u,headers:d});if(f)throw f;return yJ(p)}("u"<typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(n="jose/v6.1.3");let y1=Symbol();async function y4(e,t,r,n=fetch){let i=await n(e,{method:"GET",signal:r,redirect:"manual",headers:t}).catch(e=>{if("TimeoutError"===e.name)throw new rV;throw e});if(200!==i.status)throw new rC("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await i.json()}catch{throw new rC("Failed to parse the JSON Web Key Set HTTP response as JSON")}}let y6=Symbol();class y2{#y;#v;#b;#w;#_;#E;#x;#S;#k;#A;constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this.#y=new URL(e.href),this.#v="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this.#b="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this.#w="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,this.#x=new Headers(t?.headers),n&&!this.#x.has("User-Agent")&&this.#x.set("User-Agent",n),this.#x.has("accept")||(this.#x.set("accept","application/json"),this.#x.append("accept","application/jwk-set+json")),this.#S=t?.[y1],t?.[y6]!==void 0&&(this.#A=t?.[y6],function(e,t){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&!!ny(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,ny)}(t?.[y6],this.#w)&&(this.#_=this.#A.uat,this.#k=yK(this.#A.jwks)))}pendingFetch(){return!!this.#E}coolingDown(){return"number"==typeof this.#_&&Date.now()<this.#_+this.#b}fresh(){return"number"==typeof this.#_&&Date.now()<this.#_+this.#w}jwks(){return this.#k?.jwks()}async getKey(e,t){this.#k&&this.fresh()||await this.reload();try{return await this.#k(e,t)}catch(r){if(r instanceof rH&&!1===this.coolingDown())return await this.reload(),this.#k(e,t);throw r}}async reload(){this.#E&&("u">typeof WebSocketPair||"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"u">typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this.#E=void 0),this.#E||=y4(this.#y.href,this.#x,AbortSignal.timeout(this.#v),this.#S).then(e=>{this.#k=yK(e),this.#A&&(this.#A.uat=Date.now(),this.#A.jwks=e),this.#_=Date.now(),this.#E=void 0}).catch(e=>{throw this.#E=void 0,e}),await this.#E}}function y3(e){let t,r;if("string"!=typeof e)throw new rB("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new rB("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new rB("Invalid JWT");if(!n)throw new rB("JWTs must contain a payload");try{t=rR(n)}catch{throw new rB("Failed to base64url decode the payload")}try{r=JSON.parse(rS.decode(t))}catch{throw new rB("Failed to parse the decoded payload as JSON")}if(!ny(r))throw new rB("Invalid JWT Claims Set");return r}let y5=async e=>{let{data:t}=await yH("https://appleid.apple.com/auth/keys");if(!t?.keys)throw new mS("BAD_REQUEST",{message:"Keys not found"});let r=t.keys.find(t=>t.kid===e);if(!r)throw Error(`JWK with kid ${e} not found`);return await n6(r,r.alg)},y9=async(e,t,r)=>{let n=`https://cognito-idp.${t}.amazonaws.com/${r}/.well-known/jwks.json`;try{let{data:t}=await yH(n);if(!t?.keys)throw new mS("BAD_REQUEST",{message:"Keys not found"});let r=t.keys.find(t=>t.kid===e);if(!r)throw Error(`JWK with kid ${e} not found`);return await n6(r,r.alg)}catch(e){throw iu.i.error("Failed to fetch Cognito public key:",e),e}},y8=(e="")=>e.split("://").map(e=>e.replace(/\/{2,}/g,"/")).join("://"),y7=async e=>{let{data:t}=await yH("https://www.googleapis.com/oauth2/v3/certs");if(!t?.keys)throw new mS("BAD_REQUEST",{message:"Keys not found"});let r=t.keys.find(t=>t.kid===e);if(!r)throw Error(`JWK with kid ${e} not found`);return await n6(r,r.alg)},ve={apple:e=>({id:"apple",name:"Apple",async createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["email","name"];return e.scope&&i.push(...e.scope),r&&i.push(...r),await yQ({id:"apple",options:e,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:i,state:t,redirectURI:n,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://appleid.apple.com/auth/token"}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);let{kid:n,alg:i}=yG(t);if(!n||!i)return!1;let{payload:o}=await ir(t,await y5(n),{algorithms:[i],issuer:"https://appleid.apple.com",audience:e.audience&&e.audience.length?e.audience:e.appBundleIdentifier?e.appBundleIdentifier:e.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(e=>{void 0!==o[e]&&(o[e]=!!o[e])}),(!r||o.nonce===r)&&!!o},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=y3(t.idToken);if(!r)return null;let n=t.user?`${t.user.name?.firstName} ${t.user.name?.lastName}`:r.name||r.email,i="boolean"==typeof r.email_verified?r.email_verified:"true"===r.email_verified,o={...r,name:n},a=await e.mapProfileToUser?.(o);return{user:{id:r.sub,name:o.name,emailVerified:i,email:r.email,...a},data:o}},options:e}),atlassian:e=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){if(!e.clientId||!e.clientSecret)throw iu.i.error("Client Id and Secret are required for Atlassian"),new ip.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!n)throw new ip.t("codeVerifier is required for Atlassian");let o=e.disableDefaultScope?[]:["read:jira-user","offline_access"];return e.scope&&o.push(...e.scope),r&&o.push(...r),yQ({id:"atlassian",options:e,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:o,state:t,codeVerifier:n,redirectURI:i,additionalParams:{audience:"api.atlassian.com"},prompt:e.prompt})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.accessToken)return null;try{let{data:r}=await yH("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(!r)return null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.account_id,name:r.name,email:r.email,image:r.picture,emailVerified:!1,...n},data:r}}catch(e){return iu.i.error("Failed to fetch user info from Figma:",e),null}},options:e}),cognito:e=>{if(!e.domain||!e.region||!e.userPoolId)throw iu.i.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new ip.t("DOMAIN_AND_REGION_REQUIRED");let t=e.domain.replace(/^https?:\/\//,""),r=`https://${t}/oauth2/authorize`,n=`https://${t}/oauth2/token`,i=`https://${t}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:t,scopes:n,codeVerifier:i,redirectURI:o}){if(!e.clientId)throw iu.i.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new ip.t("CLIENT_ID_AND_SECRET_REQUIRED");if(e.requireClientSecret&&!e.clientSecret)throw iu.i.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new ip.t("CLIENT_SECRET_REQUIRED");let a=e.disableDefaultScope?[]:["openid","profile","email"];e.scope&&a.push(...e.scope),n&&a.push(...n);let s=await yQ({id:"cognito",options:{...e},authorizationEndpoint:r,scopes:a,state:t,codeVerifier:i,redirectURI:o,prompt:e.prompt}),l=s.searchParams.get("scope");if(l){s.searchParams.delete("scope");let e=encodeURIComponent(l),t=s.toString(),r=t.includes("?")?"&":"?";return new URL(`${t}${r}scope=${e}`)}return s},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>y0({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:n}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:n}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);try{let{kid:n,alg:i}=yG(t);if(!n||!i)return!1;let o=await y9(n,e.region,e.userPoolId),a=`https://cognito-idp.${e.region}.amazonaws.com/${e.userPoolId}`,{payload:s}=await ir(t,o,{algorithms:[i],issuer:a,audience:e.clientId,maxTokenAge:"1h"});if(r&&s.nonce!==r)return!1;return!0}catch(e){return iu.i.error("Failed to verify ID token:",e),!1}},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(t.idToken)try{let r=y3(t.idToken);if(!r)return null;let n=r.name||r.given_name||r.username||r.email,i={...r,name:n},o=await e.mapProfileToUser?.(i);return{user:{id:r.sub,name:i.name,email:r.email,image:r.picture,emailVerified:r.email_verified,...o},data:i}}catch(e){iu.i.error("Failed to decode ID token:",e)}if(t.accessToken)try{let{data:r}=await yH(i,{headers:{Authorization:`Bearer ${t.accessToken}`}});if(r){let t=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name||r.given_name||r.username,email:r.email,image:r.picture,emailVerified:r.email_verified,...t},data:r}}}catch(e){iu.i.error("Failed to fetch user info from Cognito:",e)}return null},options:e}},discord:e=>({id:"discord",name:"Discord",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["identify","email"];r&&i.push(...r),e.scope&&i.push(...e.scope);let o=i.includes("bot")&&void 0!==e.permissions?`&permissions=${e.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${i.join("+")}&response_type=code&client_id=${e.clientId}&redirect_uri=${encodeURIComponent(e.redirectURI||n)}&state=${t}&prompt=${e.prompt||"none"}${o}`)},validateAuthorizationCode:async({code:t,redirectURI:r})=>y0({code:t,redirectURI:r,options:e,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${t.accessToken}`}});if(n)return null;if(null===r.avatar)r.image_url=`https://cdn.discordapp.com/embed/avatars/${"0"===r.discriminator?Number(BigInt(r.id)>>BigInt(22))%6:parseInt(r.discriminator)%5}.png`;else{let e=r.avatar.startsWith("a_")?"gif":"png";r.image_url=`https://cdn.discordapp.com/avatars/${r.id}/${r.avatar}.${e}`}let i=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.global_name||r.username||"",email:r.email,emailVerified:r.verified,image:r.image_url,...i},data:r}},options:e}),facebook:e=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:t,scopes:r,redirectURI:n,loginHint:i}){let o=e.disableDefaultScope?[]:["email","public_profile"];return e.scope&&o.push(...e.scope),r&&o.push(...r),await yQ({id:"facebook",options:e,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:o,state:t,redirectURI:n,loginHint:i,additionalParams:e.configId?{config_id:e.configId}:{}})},validateAuthorizationCode:async({code:t,redirectURI:r})=>y0({code:t,redirectURI:r,options:e,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);if(3===t.split(".").length)try{var n;let i,o,{payload:a}=await ir(t,(n=new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/"),i=new y2(n,void 0),o=async(e,t)=>i.getKey(e,t),Object.defineProperties(o,{coolingDown:{get:()=>i.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>i.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>i.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>i.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>i.jwks(),enumerable:!0,configurable:!1,writable:!1}}),o),{algorithms:["RS256"],audience:e.clientId,issuer:"https://www.facebook.com"});if(r&&a.nonce!==r)return!1;return!!a}catch{return!1}return!0},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(t.idToken&&3===t.idToken.split(".").length){let r=y3(t.idToken),n={id:r.sub,name:r.name,email:r.email,picture:{data:{url:r.picture,height:100,width:100,is_silhouette:!1}}},i=await e.mapProfileToUser?.({...n,email_verified:!1});return{user:{...n,emailVerified:!1,...i},data:r}}let{data:r,error:n}=await yH("https://graph.facebook.com/me?fields="+["id","name","email","picture",...e?.fields||[]].join(","),{auth:{type:"Bearer",token:t.accessToken}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name,email:r.email,image:r.picture.data.url,emailVerified:r.email_verified,...i},data:r}},options:e}),figma:e=>({id:"figma",name:"Figma",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){if(!e.clientId||!e.clientSecret)throw iu.i.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new ip.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!n)throw new ip.t("codeVerifier is required for Figma");let o=e.disableDefaultScope?[]:["file_read"];return e.scope&&o.push(...e.scope),r&&o.push(...r),await yQ({id:"figma",options:e,authorizationEndpoint:"https://www.figma.com/oauth",scopes:o,state:t,codeVerifier:n,redirectURI:i})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://www.figma.com/api/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);try{let{data:r}=await yH("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(!r)return iu.i.error("Failed to fetch user from Figma"),null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.handle,email:r.email,image:r.img_url,emailVerified:!1,...n},data:r}}catch(e){return iu.i.error("Failed to fetch user info from Figma:",e),null}},options:e}),github:e=>({id:"github",name:"GitHub",createAuthorizationURL({state:t,scopes:r,loginHint:n,codeVerifier:i,redirectURI:o}){let a=e.disableDefaultScope?[]:["read:user","user:email"];return e.scope&&a.push(...e.scope),r&&a.push(...r),yQ({id:"github",options:e,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:a,state:t,codeVerifier:i,redirectURI:o,loginHint:n,prompt:e.prompt})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://github.com/login/oauth/access_token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${t.accessToken}`}});if(n)return null;let{data:i}=await yH("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${t.accessToken}`,"User-Agent":"better-auth"}});!r.email&&i&&(r.email=(i.find(e=>e.primary)??i[0])?.email);let o=i?.find(e=>e.email===r.email)?.verified??!1,a=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name||r.login,email:r.email,image:r.avatar_url,emailVerified:o,...a},data:r}},options:e}),microsoft:e=>{let t=e.tenantId||"common",r=e.authority||"https://login.microsoftonline.com",n=`${r}/${t}/oauth2/v2.0/authorize`,i=`${r}/${t}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(t){let r=e.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return e.scope&&r.push(...e.scope),t.scopes&&r.push(...t.scopes),yQ({id:"microsoft",options:e,authorizationEndpoint:n,state:t.state,codeVerifier:t.codeVerifier,scopes:r,redirectURI:t.redirectURI,prompt:e.prompt,loginHint:t.loginHint})},validateAuthorizationCode:({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:i}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=y3(t.idToken),n=e.profilePhotoSize||48;await yH(`https://graph.microsoft.com/v1.0/me/photos/${n}x${n}/$value`,{headers:{Authorization:`Bearer ${t.accessToken}`},async onResponse(t){if(!e.disableProfilePhoto&&t.response.ok)try{let e=await t.response.clone().arrayBuffer();r.picture=`data:image/jpeg;base64, ${iI.encode(e)}`}catch(e){iu.i.error(e&&"object"==typeof e&&"name"in e?e.name:"",e)}}});let i=await e.mapProfileToUser?.(r),o=void 0!==r.email_verified?r.email_verified:!!(r.email&&(r.verified_primary_email?.includes(r.email)||r.verified_secondary_email?.includes(r.email)));return{user:{id:r.sub,name:r.name,email:r.email,image:r.picture,emailVerified:o,...i},data:r}},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>{let r=e.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return e.scope&&r.push(...e.scope),yX({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},extraParams:{scope:r.join(" ")},tokenEndpoint:i})},options:e}},google:e=>({id:"google",name:"Google",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i,loginHint:o,display:a}){if(!e.clientId||!e.clientSecret)throw iu.i.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new ip.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!n)throw new ip.t("codeVerifier is required for Google");let s=e.disableDefaultScope?[]:["email","profile","openid"];return e.scope&&s.push(...e.scope),r&&s.push(...r),await yQ({id:"google",options:e,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:s,state:t,codeVerifier:n,redirectURI:i,prompt:e.prompt,accessType:e.accessType,display:a||e.display,loginHint:o,hd:e.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);let{kid:n,alg:i}=yG(t);if(!n||!i)return!1;let{payload:o}=await ir(t,await y7(n),{algorithms:[i],issuer:["https://accounts.google.com","accounts.google.com"],audience:e.clientId,maxTokenAge:"1h"});return!r||o.nonce===r},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=y3(t.idToken),n=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,image:r.picture,emailVerified:r.email_verified,...n},data:r}},options:e}),huggingface:e=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){let o=e.disableDefaultScope?[]:["openid","profile","email"];return e.scope&&o.push(...e.scope),r&&o.push(...r),yQ({id:"huggingface",options:e,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:o,state:t,codeVerifier:n,redirectURI:i})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name||r.preferred_username,email:r.email,image:r.picture,emailVerified:r.email_verified??!1,...i},data:r}},options:e}),slack:e=>({id:"slack",name:"Slack",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["openid","profile","email"];r&&i.push(...r),e.scope&&i.push(...e.scope);let o=new URL("https://slack.com/openid/connect/authorize");return o.searchParams.set("scope",i.join(" ")),o.searchParams.set("response_type","code"),o.searchParams.set("client_id",e.clientId),o.searchParams.set("redirect_uri",e.redirectURI||n),o.searchParams.set("state",t),o},validateAuthorizationCode:async({code:t,redirectURI:r})=>y0({code:t,redirectURI:r,options:e,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r["https://slack.com/user_id"],name:r.name||"",email:r.email,emailVerified:r.email_verified,image:r.picture||r["https://slack.com/user_image_512"],...i},data:r}},options:e}),spotify:e=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){let o=e.disableDefaultScope?[]:["user-read-email"];return e.scope&&o.push(...e.scope),r&&o.push(...r),yQ({id:"spotify",options:e,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:o,state:t,codeVerifier:n,redirectURI:i})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.display_name,email:r.email,image:r.images[0]?.url,emailVerified:!1,...i},data:r}},options:e}),twitch:e=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["user:read:email","openid"];return e.scope&&i.push(...e.scope),r&&i.push(...r),yQ({id:"twitch",redirectURI:n,options:e,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:i,state:t,claims:e.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:t,redirectURI:r})=>y0({code:t,redirectURI:r,options:e,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let r=t.idToken;if(!r)return iu.i.error("No idToken found in token"),null;let n=y3(r),i=await e.mapProfileToUser?.(n);return{user:{id:n.sub,name:n.preferred_username,email:n.email,image:n.picture,emailVerified:n.email_verified,...i},data:n}},options:e}),twitter:e=>({id:"twitter",name:"Twitter",createAuthorizationURL(t){let r=e.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return e.scope&&r.push(...e.scope),t.scopes&&r.push(...t.scopes),yQ({id:"twitter",options:e,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:r,state:t.state,codeVerifier:t.codeVerifier,redirectURI:t.redirectURI})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,authentication:"basic",redirectURI:n,options:e,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let{data:i,error:o}=await yH("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}}),a=!1;!o&&i?.data?.confirmed_email&&(r.data.email=i.data.confirmed_email,a=!0);let s=await e.mapProfileToUser?.(r);return{user:{id:r.data.id,name:r.data.name,email:r.data.email||r.data.username||null,image:r.data.profile_image_url,emailVerified:a,...s},data:r}},options:e}),dropbox:e=>({id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:t,scopes:r,codeVerifier:n,redirectURI:i})=>{let o=e.disableDefaultScope?[]:["account_info.read"];e.scope&&o.push(...e.scope),r&&o.push(...r);let a={};return e.accessType&&(a.token_access_type=e.accessType),await yQ({id:"dropbox",options:e,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:o,state:t,redirectURI:i,codeVerifier:n,additionalParams:a})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>await y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.account_id,name:r.name?.display_name,email:r.email,emailVerified:r.email_verified||!1,image:r.profile_photo_url,...i},data:r}},options:e}),kick:e=>({id:"kick",name:"Kick",createAuthorizationURL({state:t,scopes:r,redirectURI:n,codeVerifier:i}){let o=e.disableDefaultScope?[]:["user:read"];return e.scope&&o.push(...e.scope),r&&o.push(...r),yQ({id:"kick",redirectURI:n,options:e,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:o,codeVerifier:i,state:t})},validateAuthorizationCode:async({code:t,redirectURI:r,codeVerifier:n})=>y0({code:t,redirectURI:r,options:e,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:n}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:"https://id.kick.com/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=r.data[0],o=await e.mapProfileToUser?.(i);return{user:{id:i.user_id,name:i.name,email:i.email,image:i.profile_picture,emailVerified:!1,...o},data:i}},options:e}),linear:e=>{let t="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:t,scopes:r,loginHint:n,redirectURI:i}){let o=e.disableDefaultScope?[]:["read"];return e.scope&&o.push(...e.scope),r&&o.push(...r),yQ({id:"linear",options:e,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:o,state:t,redirectURI:i,loginHint:n})},validateAuthorizationCode:async({code:r,redirectURI:n})=>y0({code:r,redirectURI:n,options:e,tokenEndpoint:t}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>yX({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:t}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(n||!r?.data?.viewer)return null;let i=r.data.viewer,o=await e.mapProfileToUser?.(i);return{user:{id:r.data.viewer.id,name:r.data.viewer.name,email:r.data.viewer.email,image:r.data.viewer.avatarUrl,emailVerified:!1,...o},data:i}},options:e}},linkedin:e=>{let t="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:t,scopes:r,redirectURI:n,loginHint:i})=>{let o=e.disableDefaultScope?[]:["profile","email","openid"];return e.scope&&o.push(...e.scope),r&&o.push(...r),await yQ({id:"linkedin",options:e,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:o,state:t,loginHint:i,redirectURI:n})},validateAuthorizationCode:async({code:r,redirectURI:n})=>await y0({code:r,redirectURI:n,options:e,tokenEndpoint:t}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>yX({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:t}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,emailVerified:r.email_verified||!1,image:r.picture,...i},data:r}},options:e}},gitlab:e=>{let t,{authorizationEndpoint:r,tokenEndpoint:n,userinfoEndpoint:i}=(t=e.issuer||"https://gitlab.com",{authorizationEndpoint:y8(`${t}/oauth/authorize`),tokenEndpoint:y8(`${t}/oauth/token`),userinfoEndpoint:y8(`${t}/api/v4/user`)}),o="gitlab";return{id:o,name:"Gitlab",createAuthorizationURL:async({state:t,scopes:n,codeVerifier:i,loginHint:a,redirectURI:s})=>{let l=e.disableDefaultScope?[]:["read_user"];return e.scope&&l.push(...e.scope),n&&l.push(...n),await yQ({id:o,options:e,authorizationEndpoint:r,scopes:l,state:t,redirectURI:s,codeVerifier:i,loginHint:a})},validateAuthorizationCode:async({code:t,redirectURI:r,codeVerifier:i})=>y0({code:t,redirectURI:r,options:e,codeVerifier:i,tokenEndpoint:n}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:n}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH(i,{headers:{authorization:`Bearer ${t.accessToken}`}});if(n||"active"!==r.state||r.locked)return null;let o=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name??r.username,email:r.email,image:r.avatar_url,emailVerified:r.email_verified??!1,...o},data:r}},options:e}},tiktok:e=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["user.info.profile"];return e.scope&&i.push(...e.scope),r&&i.push(...r),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${i.join(",")}&response_type=code&client_key=${e.clientKey}&redirect_uri=${encodeURIComponent(e.redirectURI||n)}&state=${t}`)},validateAuthorizationCode:async({code:t,redirectURI:r})=>y0({code:t,redirectURI:e.redirectURI||r,options:{clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientSecret:e.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:e.clientKey}}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://open.tiktokapis.com/v2/user/info/?fields=open_id,avatar_large_url,display_name,username",{headers:{authorization:`Bearer ${t.accessToken}`}});return n?null:{user:{email:r.data.user.email||r.data.user.username,id:r.data.user.open_id,name:r.data.user.display_name||r.data.user.username,image:r.data.user.avatar_large_url,emailVerified:!1},data:r}},options:e}),reddit:e=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["identity"];return e.scope&&i.push(...e.scope),r&&i.push(...r),yQ({id:"reddit",options:e,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:i,state:t,redirectURI:n,duration:e.duration})},validateAuthorizationCode:async({code:t,redirectURI:r})=>{let n=new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:e.redirectURI||r}),{data:i,error:o}=await yH("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${iI.encode(`${e.clientId}:${e.clientSecret}`)}`},body:n.toString()});if(o)throw o;return yJ(i)},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${t.accessToken}`,"User-Agent":"better-auth"}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name,email:r.oauth_client_id,emailVerified:r.has_verified_email,image:r.icon_img?.split("?")[0],...i},data:r}},options:e}),roblox:e=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["openid","profile"];return e.scope&&i.push(...e.scope),r&&i.push(...r),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${i.join("+")}&response_type=code&client_id=${e.clientId}&redirect_uri=${encodeURIComponent(e.redirectURI||n)}&state=${t}&prompt=${e.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:t,redirectURI:r})=>y0({code:t,redirectURI:e.redirectURI||r,options:e,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.nickname||r.preferred_username||"",image:r.picture,email:r.preferred_username||null,emailVerified:!1,...i},data:{...r}}},options:e}),salesforce:e=>{let t=(e.environment??"production")==="sandbox",r=e.loginUrl?`https://${e.loginUrl}/services/oauth2/authorize`:t?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",n=e.loginUrl?`https://${e.loginUrl}/services/oauth2/token`:t?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",i=e.loginUrl?`https://${e.loginUrl}/services/oauth2/userinfo`:t?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:t,scopes:n,codeVerifier:i,redirectURI:o}){if(!e.clientId||!e.clientSecret)throw iu.i.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new ip.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new ip.t("codeVerifier is required for Salesforce");let a=e.disableDefaultScope?[]:["openid","email","profile"];return e.scope&&a.push(...e.scope),n&&a.push(...n),yQ({id:"salesforce",options:e,authorizationEndpoint:r,scopes:a,state:t,codeVerifier:i,redirectURI:e.redirectURI||o})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>y0({code:t,codeVerifier:r,redirectURI:e.redirectURI||i,options:e,tokenEndpoint:n}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:n}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);try{let{data:r}=await yH(i,{headers:{Authorization:`Bearer ${t.accessToken}`}});if(!r)return iu.i.error("Failed to fetch user info from Salesforce"),null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.user_id,name:r.name,email:r.email,image:r.photos?.picture||r.photos?.thumbnail,emailVerified:r.email_verified??!1,...n},data:r}}catch(e){return iu.i.error("Failed to fetch user info from Salesforce:",e),null}},options:e}},vk:e=>({id:"vk",name:"VK",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){let o=e.disableDefaultScope?[]:["email","phone"];return e.scope&&o.push(...e.scope),r&&o.push(...r),yQ({id:"vk",options:e,authorizationEndpoint:"https://id.vk.com/authorize",scopes:o,state:t,redirectURI:i,codeVerifier:n})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n,deviceId:i})=>y0({code:t,codeVerifier:r,redirectURI:e.redirectURI||n,options:e,deviceId:i,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.accessToken)return null;let r=new URLSearchParams({access_token:t.accessToken,client_id:e.clientId}).toString(),{data:n,error:i}=await yH("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(i)return null;let o=await e.mapProfileToUser?.(n);return n.user.email||o?.email?{user:{id:n.user.user_id,first_name:n.user.first_name,last_name:n.user.last_name,email:n.user.email,image:n.user.avatar,emailVerified:!1,birthday:n.user.birthday,sex:n.user.sex,name:`${n.user.first_name} ${n.user.last_name}`,...o},data:n}:null},options:e}),zoom:e=>{let t={pkce:!0,...e};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:e,redirectURI:r,codeVerifier:n})=>{let i=new URLSearchParams({response_type:"code",redirect_uri:t.redirectURI?t.redirectURI:r,client_id:t.clientId,state:e});if(t.pkce){let e=await yY(n);i.set("code_challenge_method","S256"),i.set("code_challenge",e)}let o=new URL("https://zoom.us/oauth/authorize");return o.search=i.toString(),o},validateAuthorizationCode:async({code:e,redirectURI:r,codeVerifier:n})=>y0({code:e,redirectURI:t.redirectURI||r,codeVerifier:n,options:t,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>yX({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:n}=await yH("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${e.accessToken}`}});if(n)return null;let i=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.display_name,image:r.pic_url,email:r.email,emailVerified:!!r.verified,...i},data:{...r}}}}},notion:e=>{let t="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:t,scopes:r,loginHint:n,redirectURI:i}){let o=(e.disableDefaultScope,[]);return e.scope&&o.push(...e.scope),r&&o.push(...r),yQ({id:"notion",options:e,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:o,state:t,redirectURI:i,loginHint:n,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:r,redirectURI:n})=>y0({code:r,redirectURI:n,options:e,tokenEndpoint:t,authentication:"basic"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>yX({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:t}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${t.accessToken}`,"Notion-Version":"2022-06-28"}});if(n||!r)return null;let i=r.bot?.owner?.user;if(!i)return null;let o=await e.mapProfileToUser?.(i);return{user:{id:i.id,name:i.name||"Notion User",email:i.person?.email||null,image:i.avatar_url,emailVerified:!1,...o},data:i}},options:e}},kakao:e=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return e.scope&&i.push(...e.scope),r&&i.push(...r),yQ({id:"kakao",options:e,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:i,state:t,redirectURI:n})},validateAuthorizationCode:async({code:t,redirectURI:r})=>y0({code:t,redirectURI:r,options:e,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(n||!r)return null;let i=await e.mapProfileToUser?.(r),o=r.kakao_account||{},a=o.profile||{};return{user:{id:String(r.id),name:a.nickname||o.name||void 0,email:o.email,image:a.profile_image_url||a.thumbnail_image_url,emailVerified:!!o.is_email_valid&&!!o.is_email_verified,...i},data:r}},options:e}),naver:e=>({id:"naver",name:"Naver",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["profile","email"];return e.scope&&i.push(...e.scope),r&&i.push(...r),yQ({id:"naver",options:e,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:i,state:t,redirectURI:n})},validateAuthorizationCode:async({code:t,redirectURI:r})=>y0({code:t,redirectURI:r,options:e,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(n||!r||"00"!==r.resultcode)return null;let i=await e.mapProfileToUser?.(r),o=r.response||{};return{user:{id:o.id,name:o.name||o.nickname,email:o.email,image:o.profile_image,emailVerified:!1,...i},data:r}},options:e}),line:e=>{let t="https://api.line.me/oauth2/v2.1/token";return{id:"line",name:"LINE",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i,loginHint:o}){let a=e.disableDefaultScope?[]:["openid","profile","email"];return e.scope&&a.push(...e.scope),r&&a.push(...r),await yQ({id:"line",options:e,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:a,state:t,codeVerifier:n,redirectURI:i,loginHint:o})},validateAuthorizationCode:async({code:r,codeVerifier:n,redirectURI:i})=>y0({code:r,codeVerifier:n,redirectURI:i,options:e,tokenEndpoint:t}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>yX({refreshToken:r,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:t}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);let n=new URLSearchParams;n.set("id_token",t),n.set("client_id",e.clientId),r&&n.set("nonce",r);let{data:i,error:o}=await yH("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:n});return!o&&!!i&&i.aud===e.clientId&&(!i.nonce||i.nonce===r)},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let r=null;if(t.idToken)try{r=y3(t.idToken)}catch{}if(!r){let{data:e}=await yH("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${t.accessToken}`}});r=e||null}if(!r)return null;let n=await e.mapProfileToUser?.(r),i=r.sub||r.userId,o=r.name||r.displayName,a=r.picture||r.pictureUrl||void 0;return{user:{id:i,name:o,email:r.email,image:a,emailVerified:!1,...n},data:r}},options:e}},paybin:e=>{let t=e.issuer||"https://idp.paybin.io",r=`${t}/oauth2/authorize`,n=`${t}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:t,scopes:n,codeVerifier:i,redirectURI:o,loginHint:a}){if(!e.clientId||!e.clientSecret)throw iu.i.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new ip.t("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new ip.t("codeVerifier is required for Paybin");let s=e.disableDefaultScope?[]:["openid","email","profile"];return e.scope&&s.push(...e.scope),n&&s.push(...n),await yQ({id:"paybin",options:e,authorizationEndpoint:r,scopes:s,state:t,codeVerifier:i,redirectURI:o,prompt:e.prompt,loginHint:a})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>y0({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:n}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:n}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=y3(t.idToken),n=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name||r.preferred_username||(r.email?r.email.split("@")[0]:"User")||"User",email:r.email,image:r.picture,emailVerified:r.email_verified||!1,...n},data:r}},options:e}},paypal:e=>{let t="sandbox"===(e.environment||"sandbox"),r=t?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",n=t?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",i=t?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:t,codeVerifier:n,redirectURI:i}){if(!e.clientId||!e.clientSecret)throw iu.i.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new ip.t("CLIENT_ID_AND_SECRET_REQUIRED");return await yQ({id:"paypal",options:e,authorizationEndpoint:r,scopes:[],state:t,codeVerifier:n,redirectURI:i,prompt:e.prompt})},validateAuthorizationCode:async({code:t,redirectURI:r})=>{let i=iI.encode(`${e.clientId}:${e.clientSecret}`);try{let e=await yH(n,{method:"POST",headers:{Authorization:`Basic ${i}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:r}).toString()});if(!e.data)throw new ip.t("FAILED_TO_GET_ACCESS_TOKEN");let o=e.data;return{accessToken:o.access_token,refreshToken:o.refresh_token,accessTokenExpiresAt:o.expires_in?new Date(Date.now()+1e3*o.expires_in):void 0,idToken:o.id_token}}catch(e){throw iu.i.error("PayPal token exchange failed:",e),new ip.t("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>{let r=iI.encode(`${e.clientId}:${e.clientSecret}`);try{let e=await yH(n,{method:"POST",headers:{Authorization:`Basic ${r}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:t}).toString()});if(!e.data)throw new ip.t("FAILED_TO_REFRESH_ACCESS_TOKEN");let i=e.data;return{accessToken:i.access_token,refreshToken:i.refresh_token,accessTokenExpiresAt:i.expires_in?new Date(Date.now()+1e3*i.expires_in):void 0}}catch(e){throw iu.i.error("PayPal token refresh failed:",e),new ip.t("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);try{return!!y3(t).sub}catch(e){return iu.i.error("Failed to verify PayPal ID token:",e),!1}},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.accessToken)return iu.i.error("Access token is required to fetch PayPal user info"),null;try{let r=await yH(`${i}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${t.accessToken}`,Accept:"application/json"}});if(!r.data)return iu.i.error("Failed to fetch user info from PayPal"),null;let n=r.data,o=await e.mapProfileToUser?.(n);return{user:{id:n.user_id,name:n.name,email:n.email,image:n.picture,emailVerified:n.email_verified,...o},data:n}}catch(e){return iu.i.error("Failed to fetch user info from PayPal:",e),null}},options:e}},polar:e=>({id:"polar",name:"Polar",createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){let o=e.disableDefaultScope?[]:["openid","profile","email"];return e.scope&&o.push(...e.scope),r&&o.push(...r),yQ({id:"polar",options:e,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:o,state:t,codeVerifier:n,redirectURI:i,prompt:e.prompt})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>yX({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.public_name||r.username,email:r.email,image:r.avatar_url,emailVerified:r.email_verified??!1,...i},data:r}},options:e}),vercel:e=>({id:"vercel",name:"Vercel",createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){let o;if(!n)throw new ip.t("codeVerifier is required for Vercel");return(void 0!==e.scope||void 0!==r)&&(o=[],e.scope&&o.push(...e.scope),r&&o.push(...r)),yQ({id:"vercel",options:e,authorizationEndpoint:"https://vercel.com/oauth/authorize",scopes:o,state:t,codeVerifier:n,redirectURI:i})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>y0({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://api.vercel.com/login/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await yH("https://api.vercel.com/login/oauth/userinfo",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(n||!r)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name??r.preferred_username,email:r.email,image:r.picture,emailVerified:r.email_verified??!1,...i},data:r}},options:e})},vt=hf(Object.keys(ve)).or(pC()),vr=m7("/list-accounts",{method:"GET",use:[ym],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async e=>{let t=e.context.session,r=await e.context.internalAdapter.findAccounts(t.user.id);return e.json(r.map(e=>({id:e.id,providerId:e.providerId,createdAt:e.createdAt,updatedAt:e.updatedAt,accountId:e.accountId,userId:e.userId,scopes:e.scope?.split(",")||[]})))}),vn=m7("/link-social",{method:"POST",requireHeaders:!0,body:f1({callbackURL:pC().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:vt,idToken:f1({token:pC(),nonce:pC().optional(),accessToken:pC().optional(),refreshToken:pC().optional(),scopes:fQ(pC()).optional()}).optional(),requestSignUp:fO().optional(),scopes:fQ(pC()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:pC().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:fO().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:ho(pC(),fZ()).optional()}),use:[ym],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async e=>{let t=e.context.session,r=e.context.socialProviders.find(t=>t.id===e.body.provider);if(!r)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new mS("NOT_FOUND",{message:yp.n.PROVIDER_NOT_FOUND});if(e.body.idToken){if(!r.verifyIdToken)throw e.context.logger.error("Provider does not support id token verification",{provider:e.body.provider}),new mS("NOT_FOUND",{message:yp.n.ID_TOKEN_NOT_SUPPORTED});let{token:n,nonce:i}=e.body.idToken;if(!await r.verifyIdToken(n,i))throw e.context.logger.error("Invalid id token",{provider:e.body.provider}),new mS("UNAUTHORIZED",{message:yp.n.INVALID_TOKEN});let o=await r.getUserInfo({idToken:n,accessToken:e.body.idToken.accessToken,refreshToken:e.body.idToken.refreshToken});if(!o||!o?.user)throw e.context.logger.error("Failed to get user info",{provider:e.body.provider}),new mS("UNAUTHORIZED",{message:yp.n.FAILED_TO_GET_USER_INFO});let a=String(o.user.id);if(!o.user.email)throw e.context.logger.error("User email not found",{provider:e.body.provider}),new mS("UNAUTHORIZED",{message:yp.n.USER_EMAIL_NOT_FOUND});if((await e.context.internalAdapter.findAccounts(t.user.id)).find(e=>e.providerId===r.id&&e.accountId===a))return e.json({url:"",status:!0,redirect:!1});if(!e.context.options.account?.accountLinking?.trustedProviders?.includes(r.id)&&!o.user.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)throw new mS("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(o.user.email!==t.user.email&&e.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new mS("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await e.context.internalAdapter.createAccount({userId:t.user.id,providerId:r.id,accountId:a,accessToken:e.body.idToken.accessToken,idToken:n,refreshToken:e.body.idToken.refreshToken,scope:e.body.idToken.scopes?.join(",")})}catch{throw new mS("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(e.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await e.context.internalAdapter.updateUser(t.user.id,{name:o.user?.name,image:o.user?.image})}catch(e){console.warn("Could not update user - "+e.toString())}return e.json({url:"",status:!0,redirect:!1})}let n=await mX(e,{userId:t.user.id,email:t.user.email},e.body.additionalData),i=await r.createAuthorizationURL({state:n.state,codeVerifier:n.codeVerifier,redirectURI:`${e.context.baseURL}/callback/${r.id}`,scopes:e.body.scopes});return e.json({url:i.toString(),redirect:!e.body.disableRedirect})}),vi=m7("/unlink-account",{method:"POST",body:f1({providerId:pC(),accountId:pC().optional()}),use:[yy],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{let{providerId:t,accountId:r}=e.body,n=await e.context.internalAdapter.findAccounts(e.context.session.user.id);if(1===n.length&&!e.context.options.account?.accountLinking?.allowUnlinkingAll)throw new mS("BAD_REQUEST",{message:yp.n.FAILED_TO_UNLINK_LAST_ACCOUNT});let i=n.find(e=>r?e.accountId===r&&e.providerId===t:e.providerId===t);if(!i)throw new mS("BAD_REQUEST",{message:yp.n.ACCOUNT_NOT_FOUND});return await e.context.internalAdapter.deleteAccount(i.id),e.json({status:!0})}),vo=m7("/get-access-token",{method:"POST",body:f1({providerId:pC().meta({description:"The provider ID for the OAuth provider"}),accountId:pC().meta({description:"The account ID associated with the refresh token"}).optional(),userId:pC().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async e=>{let t,{providerId:r,accountId:n,userId:i}=e.body||{},o=e.request,a=await yh(e);if(o&&!a)throw e.error("UNAUTHORIZED");let s=a?.user?.id||i;if(!s)throw e.error("UNAUTHORIZED");if(!e.context.socialProviders.find(e=>e.id===r))throw new mS("BAD_REQUEST",{message:`Provider ${r} is not supported.`});let l=await g7(e);if(!(t=l&&r===l.providerId&&(!n||l.id===n)?l:(await e.context.internalAdapter.findAccounts(s)).find(e=>n?e.id===n&&e.providerId===r:e.providerId===r)))throw new mS("BAD_REQUEST",{message:"Account not found"});let c=e.context.socialProviders.find(e=>e.id===r);if(!c)throw new mS("BAD_REQUEST",{message:`Provider ${r} not found.`});try{let r=null,n=t.accessTokenExpiresAt&&new Date(t.accessTokenExpiresAt).getTime()-Date.now()<5e3;if(t.refreshToken&&n&&c.refreshAccessToken){let n=await y_(t.refreshToken,e.context);r=await c.refreshAccessToken(n);let i={accessToken:await yE(r.accessToken,e.context),accessTokenExpiresAt:r.accessTokenExpiresAt,refreshToken:await yE(r.refreshToken,e.context),refreshTokenExpiresAt:r.refreshTokenExpiresAt},o=null;t.id&&(o=await e.context.internalAdapter.updateAccount(t.id,i)),e.context.options.account?.storeAccountCookie&&await g8(e,{...t,...o??i})}let i={accessToken:r?.accessToken??await y_(t.accessToken??"",e.context),accessTokenExpiresAt:r?.accessTokenExpiresAt??t.accessTokenExpiresAt??void 0,scopes:t.scope?.split(",")??[],idToken:r?.idToken??t.idToken??void 0};return e.json(i)}catch(e){throw new mS("BAD_REQUEST",{message:"Failed to get a valid access token",cause:e})}}),va=m7("/refresh-token",{method:"POST",body:f1({providerId:pC().meta({description:"The provider ID for the OAuth provider"}),accountId:pC().meta({description:"The account ID associated with the refresh token"}).optional(),userId:pC().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async e=>{let t,r,{providerId:n,accountId:i,userId:o}=e.body,a=e.request,s=await yh(e);if(a&&!s)throw e.error("UNAUTHORIZED");let l=s?.user?.id||o;if(!l)throw new mS("BAD_REQUEST",{message:"Either userId or session is required"});let c=e.context.socialProviders.find(e=>e.id===n);if(!c)throw new mS("BAD_REQUEST",{message:`Provider ${n} not found.`});if(!c.refreshAccessToken)throw new mS("BAD_REQUEST",{message:`Provider ${n} does not support token refreshing.`});let u=await g7(e);if(!(t=u&&(!n||n===u?.providerId)?u:(await e.context.internalAdapter.findAccounts(l)).find(e=>i?e.id===i&&e.providerId===n:e.providerId===n)))throw new mS("BAD_REQUEST",{message:"Account not found"});if(!(r=u&&n===u.providerId?u.refreshToken??void 0:t.refreshToken??void 0))throw new mS("BAD_REQUEST",{message:"Refresh token not found"});try{let i=await y_(r,e.context),o=await c.refreshAccessToken(i);if(t.id){let r={...t||{},accessToken:await yE(o.accessToken,e.context),refreshToken:await yE(o.refreshToken,e.context),accessTokenExpiresAt:o.accessTokenExpiresAt,refreshTokenExpiresAt:o.refreshTokenExpiresAt,scope:o.scopes?.join(",")||t.scope,idToken:o.idToken||t.idToken};await e.context.internalAdapter.updateAccount(t.id,r)}return u&&n===u.providerId&&e.context.options.account?.storeAccountCookie&&await g8(e,{...u,accessToken:await yE(o.accessToken,e.context),refreshToken:await yE(o.refreshToken,e.context),accessTokenExpiresAt:o.accessTokenExpiresAt,refreshTokenExpiresAt:o.refreshTokenExpiresAt,scope:o.scopes?.join(",")||u.scope,idToken:o.idToken||u.idToken}),e.json({accessToken:o.accessToken,refreshToken:o.refreshToken,accessTokenExpiresAt:o.accessTokenExpiresAt,refreshTokenExpiresAt:o.refreshTokenExpiresAt,scope:o.scopes?.join(",")||t.scope,idToken:o.idToken||t.idToken,providerId:t.providerId,accountId:t.accountId})}catch(e){throw new mS("BAD_REQUEST",{message:"Failed to refresh access token",cause:e})}}),vs=m7("/account-info",{method:"GET",use:[ym],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:hE(f1({accountId:pC().meta({description:"The provider given account id for which to get the account info"}).optional()}))},async e=>{let t,r=e.query?.accountId;if(r){let n=await e.context.internalAdapter.findAccount(r);n&&(t=n)}else if(e.context.options.account?.storeAccountCookie){let r=await g7(e);r&&(t=r)}if(!t||t.userId!==e.context.session.user.id)throw new mS("BAD_REQUEST",{message:"Account not found"});let n=e.context.socialProviders.find(e=>e.id===t.providerId);if(!n)throw new mS("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${t.providerId} but it is not configured`});let i=await vo({...e,method:"POST",body:{accountId:t.id,providerId:t.providerId},returnHeaders:!1,returnStatus:!1});if(!i.accessToken)throw new mS("BAD_REQUEST",{message:"Access token not found"});let o=await n.getUserInfo({...i,accessToken:i.accessToken});return e.json(o)});async function vl(e,t,r,n=3600,i){return await ii({email:t.toLowerCase(),updateTo:r,...i},e,n)}async function vc(e,t){if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new mS("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await vl(e.context.secret,t.email,void 0,e.context.options.emailVerification?.expiresIn),n=e.body.callbackURL?encodeURIComponent(e.body.callbackURL):encodeURIComponent("/"),i=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${n}`;await e.context.runInBackgroundOrAwait(e.context.options.emailVerification.sendVerificationEmail({user:t,url:i,token:r},e.request))}let vu=m7("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:f1({email:pD().meta({description:"The email to send the verification email to"}),callbackURL:pC().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async e=>{if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new mS("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:t}=e.body,r=await yh(e);if(!r){let r=await e.context.internalAdapter.findUserByEmail(t);return r?await vc(e,r.user):await vl(e.context.secret,t,void 0,e.context.options.emailVerification?.expiresIn),e.json({status:!0})}if(r?.user.emailVerified)throw new mS("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(r?.user.email!==t)throw new mS("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await vc(e,r.user),e.json({status:!0})}),vd=m7("/verify-email",{method:"GET",operationId:"verifyEmail",query:f1({token:pC().meta({description:"The token to verify the email"}),callbackURL:pC().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[gt(e=>e.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async e=>{let t;function r(t){if(e.query.callbackURL){if(e.query.callbackURL.includes("?"))throw e.redirect(`${e.query.callbackURL}&error=${t}`);throw e.redirect(`${e.query.callbackURL}?error=${t}`)}throw new mS("UNAUTHORIZED",{message:t})}let{token:n}=e.query;try{t=await ir(n,new TextEncoder().encode(e.context.secret),{algorithms:["HS256"]})}catch(e){if(e instanceof rN)return r("token_expired");return r("invalid_token")}let i=f1({email:pD(),updateTo:pC().optional(),requestType:pC().optional()}).parse(t.payload),o=await e.context.internalAdapter.findUserByEmail(i.email);if(!o)return r("user_not_found");if(i.updateTo){let t=await yh(e);if(t&&t.user.email!==i.email)return r("unauthorized");if("change-email-confirmation"===i.requestType){let t=await vl(e.context.secret,i.email,i.updateTo,e.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),r=e.query.callbackURL?encodeURIComponent(e.query.callbackURL):encodeURIComponent("/"),n=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${r}`;if(e.context.options.emailVerification?.sendVerificationEmail&&await e.context.runInBackgroundOrAwait(e.context.options.emailVerification.sendVerificationEmail({user:{...o.user,email:i.updateTo},url:n,token:t},e.request)),e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0})}if(!t){let r=await e.context.internalAdapter.createSession(o.user.id);if(!r)throw new mS("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});t={session:r,user:o.user}}if("change-email-verification"===i.requestType){let r=await e.context.internalAdapter.updateUserByEmail(i.email,{email:i.updateTo,emailVerified:!0});if(await yu(e,{session:t.session,user:{...t.user,email:i.updateTo,emailVerified:!0}}),e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:r})}let n=await e.context.internalAdapter.updateUserByEmail(i.email,{email:i.updateTo,emailVerified:!1}),a=await vl(e.context.secret,i.updateTo),s=e.query.callbackURL?encodeURIComponent(e.query.callbackURL):encodeURIComponent("/");if(e.context.options.emailVerification?.sendVerificationEmail&&await e.context.runInBackgroundOrAwait(e.context.options.emailVerification.sendVerificationEmail({user:n,url:`${e.context.baseURL}/verify-email?token=${a}&callbackURL=${s}`,token:a},e.request)),await yu(e,{session:t.session,user:{...t.user,email:i.updateTo,emailVerified:!1}}),e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:{id:n.id,email:n.email,name:n.name,image:n.image,emailVerified:n.emailVerified,createdAt:n.createdAt,updatedAt:n.updatedAt}})}if(o.user.emailVerified){if(e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:null})}e.context.options.emailVerification?.onEmailVerification&&await e.context.options.emailVerification.onEmailVerification(o.user,e.request);let a=await e.context.internalAdapter.updateUserByEmail(i.email,{emailVerified:!0});if(e.context.options.emailVerification?.afterEmailVerification&&await e.context.options.emailVerification.afterEmailVerification(a,e.request),e.context.options.emailVerification?.autoSignInAfterVerification){let t=await yh(e);if(t&&t.user.email===i.email)await yu(e,{session:t.session,user:{...t.user,emailVerified:!0}});else{let t=await e.context.internalAdapter.createSession(o.user.id);if(!t)throw new mS("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await yu(e,{session:t,user:{...o.user,emailVerified:!0}})}}if(e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:null})});var m6=iu;async function vp(e,t){let{userInfo:r,account:n,callbackURL:i,disableSignUp:o,overrideUserInfo:a}=t,s=await e.context.internalAdapter.findOAuthUser(r.email.toLowerCase(),n.accountId,n.providerId).catch(t=>{gP.logger.error("Better auth was unable to query your database.\nError: ",t);let r=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${r}?error=internal_server_error`)}),l=s?.user,c=!l;if(s){let i=s.accounts.find(e=>e.providerId===n.providerId&&e.accountId===n.accountId);if(i){if(e.context.options.account?.updateAccountOnSignIn!==!1){let t=Object.fromEntries(Object.entries({idToken:n.idToken,accessToken:await yE(n.accessToken,e.context),refreshToken:await yE(n.refreshToken,e.context),accessTokenExpiresAt:n.accessTokenExpiresAt,refreshTokenExpiresAt:n.refreshTokenExpiresAt,scope:n.scope}).filter(([e,t])=>void 0!==t));e.context.options.account?.storeAccountCookie&&await g8(e,{...n,...t}),Object.keys(t).length>0&&await e.context.internalAdapter.updateAccount(i.id,t)}r.emailVerified&&!s.user.emailVerified&&r.email.toLowerCase()===s.user.email&&await e.context.internalAdapter.updateUser(s.user.id,{emailVerified:!0})}else{let i=e.context.options.account?.accountLinking?.trustedProviders;if(!(t.isTrustedProvider||i?.includes(n.providerId))&&!r.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)return(0,m6.d)()&&gP.logger.warn(`User already exist but account isn't linked to ${n.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await e.context.internalAdapter.linkAccount({providerId:n.providerId,accountId:r.id.toString(),userId:s.user.id,accessToken:await yE(n.accessToken,e.context),refreshToken:await yE(n.refreshToken,e.context),idToken:n.idToken,accessTokenExpiresAt:n.accessTokenExpiresAt,refreshTokenExpiresAt:n.refreshTokenExpiresAt,scope:n.scope})}catch(e){return gP.logger.error("Unable to link account",e),{error:"unable to link account",data:null}}r.emailVerified&&!s.user.emailVerified&&r.email.toLowerCase()===s.user.email&&await e.context.internalAdapter.updateUser(s.user.id,{emailVerified:!0})}if(a){let{id:t,...n}=r;l=await e.context.internalAdapter.updateUser(s.user.id,{...n,email:r.email.toLowerCase(),emailVerified:r.email.toLowerCase()===s.user.email&&s.user.emailVerified||r.emailVerified})}}else{if(o)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:t,...o}=r,a={accessToken:await yE(n.accessToken,e.context),refreshToken:await yE(n.refreshToken,e.context),idToken:n.idToken,accessTokenExpiresAt:n.accessTokenExpiresAt,refreshTokenExpiresAt:n.refreshTokenExpiresAt,scope:n.scope,providerId:n.providerId,accountId:r.id.toString()},{user:s,account:c}=await e.context.internalAdapter.createOAuthUser({...o,email:r.email.toLowerCase()},a);if(l=s,e.context.options.account?.storeAccountCookie&&await g8(e,c),!r.emailVerified&&l&&e.context.options.emailVerification?.sendOnSignUp&&e.context.options.emailVerification?.sendVerificationEmail){let t=await vl(e.context.secret,l.email,void 0,e.context.options.emailVerification?.expiresIn),r=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${i}`;await e.context.runInBackgroundOrAwait(e.context.options.emailVerification.sendVerificationEmail({user:l,url:r,token:t},e.request))}}catch(e){if(gP.logger.error(e),e instanceof mS)return{error:e.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!l)return{error:"unable to create user",data:null,isRegister:!1};let u=await e.context.internalAdapter.createSession(l.id);return u?{data:{session:u,user:l},error:null,isRegister:c}:{error:"unable to create session",data:null,isRegister:!1}}var go=id;let vf=f1({code:pC().optional(),error:pC().optional(),device_id:pC().optional(),error_description:pC().optional(),state:pC().optional(),user:pC().optional()}),vh=m7("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:vf.optional(),query:vf.optional(),metadata:{...m1,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async e=>{let t,r,n,i=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;if("POST"===e.method){let t=e.body?vf.parse(e.body):{},r=e.query?vf.parse(e.query):{},n=vf.parse({...t,...r}),i=new URLSearchParams;for(let[e,t]of Object.entries(n))null!=t&&i.set(e,String(t));let o=`${e.context.baseURL}/callback/${e.params.id}?${i.toString()}`;throw e.redirect(o)}try{if("GET"===e.method)t=vf.parse(e.query);else if("POST"===e.method)t=vf.parse(e.body);else throw Error("Unsupported method")}catch(t){throw e.context.logger.error("INVALID_CALLBACK_REQUEST",t),e.redirect(`${i}?error=invalid_callback_request`)}let{code:o,error:a,state:s,error_description:l,device_id:c}=t;if(!s){e.context.logger.error("State not found",a);let t=`${i}${i.includes("?")?"&":"?"}state=state_not_found`;throw e.redirect(t)}let{codeVerifier:u,callbackURL:d,link:p,errorURL:f,newUserURL:h,requestSignUp:m}=await m0(e);function g(t,r){let n=f??i,o=new URLSearchParams({error:t});r&&o.set("error_description",r);let a=`${n}${n.includes("?")?"&":"?"}${o.toString()}`;throw e.redirect(a)}if(a&&g(a,l),!o)throw e.context.logger.error("Code not found"),g("no_code");let y=e.context.socialProviders.find(t=>t.id===e.params.id);if(!y)throw e.context.logger.error("Oauth provider with id",e.params.id,"not found"),g("oauth_provider_not_found");try{r=await y.validateAuthorizationCode({code:o,codeVerifier:u,deviceId:c,redirectURI:`${e.context.baseURL}/callback/${y.id}`})}catch(t){throw e.context.logger.error("",t),g("invalid_code")}let v=await y.getUserInfo({...r,user:e.body?.user?(0,go.n)(e.body.user):void 0}).then(e=>e?.user);if(!v)return e.context.logger.error("Unable to get user info"),g("unable_to_get_user_info");if(!d)throw e.context.logger.error("No callback URL found"),g("no_callback_url");if(p){let t;if(!e.context.options.account?.accountLinking?.trustedProviders?.includes(y.id)&&!v.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)return e.context.logger.error("Unable to link account - untrusted provider"),g("unable_to_link_account");if(v.email!==p.email&&e.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return g("email_doesn't_match");let n=await e.context.internalAdapter.findAccount(String(v.id));if(n){if(n.userId.toString()!==p.userId.toString())return g("account_already_linked_to_different_user");let t=Object.fromEntries(Object.entries({accessToken:await yE(r.accessToken,e.context),refreshToken:await yE(r.refreshToken,e.context),idToken:r.idToken,accessTokenExpiresAt:r.accessTokenExpiresAt,refreshTokenExpiresAt:r.refreshTokenExpiresAt,scope:r.scopes?.join(",")}).filter(([e,t])=>void 0!==t));await e.context.internalAdapter.updateAccount(n.id,t)}else if(!await e.context.internalAdapter.createAccount({userId:p.userId,providerId:y.id,accountId:String(v.id),...r,accessToken:await yE(r.accessToken,e.context),refreshToken:await yE(r.refreshToken,e.context),scope:r.scopes?.join(",")}))return g("unable_to_link_account");try{t=d.toString()}catch{t=d}throw e.redirect(t)}if(!v.email)return e.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),g("email_not_found");let b={providerId:y.id,accountId:String(v.id),...r,scope:r.scopes?.join(",")},w=await vp(e,{userInfo:{...v,id:String(v.id),email:v.email,name:v.name||v.email},account:b,callbackURL:d,disableSignUp:y.disableImplicitSignUp&&!m||y.options?.disableSignUp,overrideUserInfo:y.options?.overrideUserInfoOnSignIn});if(w.error)return e.context.logger.error(w.error.split(" ").join("_")),g(w.error.split(" ").join("_"));let{session:_,user:E}=w.data;await yu(e,{session:_,user:E});try{n=(w.isRegister&&h||d).toString()}catch{n=w.isRegister&&h||d}throw e.redirect(n)});var yi=iu;function vm(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}let vg=m7("/error",{method:"GET",metadata:{...m1,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async e=>{let t=new URL(e.request?.url||""),r=t.searchParams.get("error")||"UNKNOWN",n=t.searchParams.get("error_description")||null,i=/^[\'A-Za-z0-9_-]+$/.test(r||"")?r:"UNKNOWN",o=n?vm(n):null,a=new URLSearchParams;a.set("error",i),n&&a.set("error_description",n);let s=e.context.options,l=s.onAPIError?.errorURL;return l?new Response(null,{status:302,headers:{Location:`${l}${l.includes("?")?"&":"?"}${a.toString()}`}}):yi.f&&!s.onAPIError?.customizeDefaultErrorPage?new Response(null,{status:302,headers:{Location:`/?${a.toString()}`}}):new Response(((e,t="Unknown",r=null)=>{let n=e.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${n?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${n?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${n?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${n?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${n?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${n?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${n?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${n?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${n?.colors?.primary||"black"};
        --primary-foreground: ${n?.colors?.primaryForeground||"white"};
        --background: ${n?.colors?.background||"white"};
        --foreground: ${n?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${n?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${n?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${n?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${n?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${n?.colors?.primary||"white"};
          --primary-foreground: ${n?.colors?.primaryForeground||"black"};
          --background: ${n?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${n?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${n?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${n?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${n?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${n?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${n?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${n?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${n?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${n?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${n?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${n?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${n?.disableTitleBorder?"transparent":n?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${n?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${vm(t)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${!r?`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/errors/${encodeURIComponent(t)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`:r}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/errors/${encodeURIComponent(t)}?askai=${encodeURIComponent(`What does the error code ${t} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`})(e.context.options,i,o),{headers:{"Content-Type":"text/html"}})}),vy=m7("/ok",{method:"GET",metadata:{...m1,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async e=>e.json({ok:!0}));var m4=id,yp=ip;function vv(e,t,r){let n=t?new URL(t,e.baseURL):new URL(`${e.baseURL}/error`);return r&&Object.entries(r).forEach(([e,t])=>n.searchParams.set(e,t)),n.href}let vb=m7("/request-password-reset",{method:"POST",body:f1({email:pD().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:pC().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"requestPasswordReset",description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async e=>{if(!e.context.options.emailAndPassword?.sendResetPassword)throw e.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new mS("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:t,redirectTo:r}=e.body,n=await e.context.internalAdapter.findUserByEmail(t,{includeAccounts:!0});if(!n)return(0,m4.r)(24),await e.context.internalAdapter.findVerificationValue("dummy-verification-token"),e.context.logger.error("Reset Password: User not found",{email:t}),e.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let i=gl(e.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),o=(0,m4.r)(24);await e.context.internalAdapter.createVerificationValue({value:n.user.id,identifier:`reset-password:${o}`,expiresAt:i});let a=r?encodeURIComponent(r):"",s=`${e.context.baseURL}/reset-password/${o}?callbackURL=${a}`;return await e.context.runInBackgroundOrAwait(e.context.options.emailAndPassword.sendResetPassword({user:n.user,url:s,token:o},e.request)),e.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),vw=m7("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:f1({callbackURL:pC().meta({description:"The URL to redirect the user to reset their password"})}),use:[gt(e=>e.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async e=>{var t,r;let n,{token:i}=e.params,{callbackURL:o}=e.query;if(!i||!o)throw e.redirect(vv(e.context,o,{error:"INVALID_TOKEN"}));let a=await e.context.internalAdapter.findVerificationValue(`reset-password:${i}`);if(!a||a.expiresAt<new Date)throw e.redirect(vv(e.context,o,{error:"INVALID_TOKEN"}));throw e.redirect((t=e.context,r={token:i},n=new URL(o,t.baseURL),r&&Object.entries(r).forEach(([e,t])=>n.searchParams.set(e,t)),n.href))}),v_=m7("/reset-password",{method:"POST",operationId:"resetPassword",query:f1({token:pC().optional()}).optional(),body:f1({newPassword:pC().meta({description:"The new password to set"}),token:pC().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{let t=e.body.token||e.query?.token;if(!t)throw new mS("BAD_REQUEST",{message:yp.n.INVALID_TOKEN});let{newPassword:r}=e.body,n=e.context.password?.config.minPasswordLength,i=e.context.password?.config.maxPasswordLength;if(r.length<n)throw new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_SHORT});if(r.length>i)throw new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_LONG});let o=`reset-password:${t}`,a=await e.context.internalAdapter.findVerificationValue(o);if(!a||a.expiresAt<new Date)throw new mS("BAD_REQUEST",{message:yp.n.INVALID_TOKEN});let s=a.value,l=await e.context.password.hash(r);if((await e.context.internalAdapter.findAccounts(s)).find(e=>"credential"===e.providerId)?await e.context.internalAdapter.updatePassword(s,l):await e.context.internalAdapter.createAccount({userId:s,providerId:"credential",password:l,accountId:s}),await e.context.internalAdapter.deleteVerificationValue(a.id),e.context.options.emailAndPassword?.onPasswordReset){let t=await e.context.internalAdapter.findUserById(s);t&&await e.context.options.emailAndPassword.onPasswordReset({user:t},e.request)}return e.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await e.context.internalAdapter.deleteSessions(s),e.json({status:!0})});var yp=ip;let vE=f1({callbackURL:pC().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:pC().optional(),errorCallbackURL:pC().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:vt,disableRedirect:fO().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:hE(f1({token:pC().meta({description:"ID token from the provider"}),nonce:pC().meta({description:"Nonce used to generate the token"}).optional(),accessToken:pC().meta({description:"Access token from the provider"}).optional(),refreshToken:pC().meta({description:"Refresh token from the provider"}).optional(),expiresAt:f_().meta({description:"Expiry date of the token"}).optional()})),scopes:fQ(pC()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:fO().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:pC().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:ho(pC(),fZ()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),vx=m7("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async e=>{let t=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(t)try{await e.context.internalAdapter.deleteSession(t)}catch(t){e.context.logger.error("Failed to delete session from database",t)}return yd(e),e.json({success:!0})});var m6=iu,yp=ip;let vS=f1({name:pC().nonempty(),email:pD(),password:pC().nonempty(),image:pC().optional(),callbackURL:pC().optional(),rememberMe:fO().optional()}).and(ho(pC(),fZ()));var yp=ip;let vk=ho(pC().meta({description:"Field name must be a string"}),fZ()),vA=m7("/change-password",{method:"POST",operationId:"changePassword",body:f1({newPassword:pC().meta({description:"The new password to set"}),currentPassword:pC().meta({description:"The current password is required"}),revokeOtherSessions:fO().meta({description:"Must be a boolean value"}).optional()}),use:[yg],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async e=>{let{newPassword:t,currentPassword:r,revokeOtherSessions:n}=e.body,i=e.context.session,o=e.context.password.config.minPasswordLength;if(t.length<o)throw e.context.logger.error("Password is too short"),new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_SHORT});let a=e.context.password.config.maxPasswordLength;if(t.length>a)throw e.context.logger.error("Password is too long"),new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_LONG});let s=(await e.context.internalAdapter.findAccounts(i.user.id)).find(e=>"credential"===e.providerId&&e.password);if(!s||!s.password)throw new mS("BAD_REQUEST",{message:yp.n.CREDENTIAL_ACCOUNT_NOT_FOUND});let l=await e.context.password.hash(t);if(!await e.context.password.verify({hash:s.password,password:r}))throw new mS("BAD_REQUEST",{message:yp.n.INVALID_PASSWORD});await e.context.internalAdapter.updateAccount(s.id,{password:l});let c=null;if(n){await e.context.internalAdapter.deleteSessions(i.user.id);let t=await e.context.internalAdapter.createSession(i.user.id);if(!t)throw new mS("INTERNAL_SERVER_ERROR",{message:yp.n.FAILED_TO_GET_SESSION});await yu(e,{session:t,user:i.user}),c=t.token}return e.json({token:c,user:{id:i.user.id,email:i.user.email,name:i.user.name,image:i.user.image,emailVerified:i.user.emailVerified,createdAt:i.user.createdAt,updatedAt:i.user.updatedAt}})}),vI=m7({method:"POST",body:f1({newPassword:pC().meta({description:"The new password to set is required"})}),use:[yg]},async e=>{let{newPassword:t}=e.body,r=e.context.session,n=e.context.password.config.minPasswordLength;if(t.length<n)throw e.context.logger.error("Password is too short"),new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_SHORT});let i=e.context.password.config.maxPasswordLength;if(t.length>i)throw e.context.logger.error("Password is too long"),new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_LONG});let o=(await e.context.internalAdapter.findAccounts(r.user.id)).find(e=>"credential"===e.providerId&&e.password),a=await e.context.password.hash(t);if(!o)return await e.context.internalAdapter.linkAccount({userId:r.user.id,providerId:"credential",accountId:r.user.id,password:a}),e.json({status:!0});throw new mS("BAD_REQUEST",{message:"user already has a password"})}),vT=m7("/delete-user",{method:"POST",use:[yg],body:f1({callbackURL:pC().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:pC().meta({description:"The password of the user is required to delete the user"}).optional(),token:pC().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options"),new mS("NOT_FOUND");let t=e.context.session;if(e.body.password){let r=(await e.context.internalAdapter.findAccounts(t.user.id)).find(e=>"credential"===e.providerId&&e.password);if(!r||!r.password)throw new mS("BAD_REQUEST",{message:yp.n.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await e.context.password.verify({hash:r.password,password:e.body.password}))throw new mS("BAD_REQUEST",{message:yp.n.INVALID_PASSWORD})}if(e.body.token)return await vO({...e,query:{token:e.body.token}}),e.json({success:!0,message:"User deleted"});if(e.context.options.user.deleteUser?.sendDeleteAccountVerification){let r=tV(32,"0-9","a-z");await e.context.internalAdapter.createVerificationValue({value:t.user.id,identifier:`delete-account-${r}`,expiresAt:new Date(Date.now()+1e3*(e.context.options.user.deleteUser?.deleteTokenExpiresIn||86400))});let n=`${e.context.baseURL}/delete-user/callback?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;return await e.context.runInBackgroundOrAwait(e.context.options.user.deleteUser.sendDeleteAccountVerification({user:t.user,url:n,token:r},e.request)),e.json({success:!0,message:"Verification email sent"})}if(!e.body.password&&0!==e.context.sessionConfig.freshAge){let r=new Date(t.session.createdAt).getTime(),n=1e3*e.context.sessionConfig.freshAge;if(Date.now()-r>1e3*n)throw new mS("BAD_REQUEST",{message:yp.n.SESSION_EXPIRED})}let r=e.context.options.user.deleteUser?.beforeDelete;r&&await r(t.user,e.request),await e.context.internalAdapter.deleteUser(t.user.id),await e.context.internalAdapter.deleteSessions(t.user.id),yd(e);let n=e.context.options.user.deleteUser?.afterDelete;return n&&await n(t.user,e.request),e.json({success:!0,message:"User deleted"})}),vO=m7("/delete-user/callback",{method:"GET",query:f1({token:pC().meta({description:"The token to verify the deletion request"}),callbackURL:pC().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[gt(e=>e.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options"),new mS("NOT_FOUND");let t=await yh(e);if(!t)throw new mS("NOT_FOUND",{message:yp.n.FAILED_TO_GET_USER_INFO});let r=await e.context.internalAdapter.findVerificationValue(`delete-account-${e.query.token}`);if(!r||r.expiresAt<new Date||r.value!==t.user.id)throw new mS("NOT_FOUND",{message:yp.n.INVALID_TOKEN});let n=e.context.options.user.deleteUser?.beforeDelete;n&&await n(t.user,e.request),await e.context.internalAdapter.deleteUser(t.user.id),await e.context.internalAdapter.deleteSessions(t.user.id),await e.context.internalAdapter.deleteAccounts(t.user.id),await e.context.internalAdapter.deleteVerificationValue(r.id),yd(e);let i=e.context.options.user.deleteUser?.afterDelete;if(i&&await i(t.user,e.request),e.query.callbackURL)throw e.redirect(e.query.callbackURL||"/");return e.json({success:!0,message:"User deleted"})}),vR=m7("/change-email",{method:"POST",body:f1({newEmail:pD().meta({description:"The new email address to set must be a valid email address"}),callbackURL:pC().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[yg],metadata:{openapi:{operationId:"changeEmail",responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async e=>{if(!e.context.options.user?.changeEmail?.enabled)throw e.context.logger.error("Change email is disabled."),new mS("BAD_REQUEST",{message:"Change email is disabled"});let t=e.body.newEmail.toLowerCase();if(t===e.context.session.user.email)throw e.context.logger.error("Email is the same"),new mS("BAD_REQUEST",{message:"Email is the same"});if(await e.context.internalAdapter.findUserByEmail(t))throw e.context.logger.error("Email already exists"),new mS("UNPROCESSABLE_ENTITY",{message:yp.n.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(!0!==e.context.session.user.emailVerified&&e.context.options.user.changeEmail.updateEmailWithoutVerification){if(await e.context.internalAdapter.updateUserByEmail(e.context.session.user.email,{email:t}),await yu(e,{session:e.context.session.session,user:{...e.context.session.user,email:t}}),e.context.options.emailVerification?.sendVerificationEmail){let r=await vl(e.context.secret,t,void 0,e.context.options.emailVerification?.expiresIn),n=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;await e.context.runInBackgroundOrAwait(e.context.options.emailVerification.sendVerificationEmail({user:{...e.context.session.user,email:t},url:n,token:r},e.request))}return e.json({status:!0})}if(e.context.session.user.emailVerified&&(e.context.options.user.changeEmail.sendChangeEmailConfirmation||e.context.options.user.changeEmail.sendChangeEmailVerification)){let r=await vl(e.context.secret,e.context.session.user.email,t,e.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),n=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${e.body.callbackURL||"/"}`,i=e.context.options.user.changeEmail.sendChangeEmailConfirmation||e.context.options.user.changeEmail.sendChangeEmailVerification;return i&&await e.context.runInBackgroundOrAwait(i({user:e.context.session.user,newEmail:t,url:n,token:r},e.request)),e.json({status:!0})}if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new mS("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await vl(e.context.secret,e.context.session.user.email,t,e.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),n=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;return await e.context.runInBackgroundOrAwait(e.context.options.emailVerification.sendVerificationEmail({user:{...e.context.session.user,email:t},url:n,token:r},e.request)),e.json({status:!0})});function v$(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e))}function vU(e){return(...t)=>t.reduce((t,r)=>(function e(t,r,n=".",i){if(!v$(r))return e(t,{},n,i);let o=Object.assign({},r);for(let r in t){if("__proto__"===r||"constructor"===r)continue;let a=t[r];null!=a&&(i&&i(o,r,a,n)||(Array.isArray(a)&&Array.isArray(o[r])?o[r]=[...a,...o[r]]:v$(a)&&v$(o[r])?o[r]=e(a,o[r],(n?`${n}.`:"")+r.toString(),i):o[r]=a))}return o})(t,r,"",e),{})}let vC=vU();vU((e,t,r)=>{if(void 0!==e[t]&&"function"==typeof r)return e[t]=r(e[t]),!0}),vU((e,t,r)=>{if(Array.isArray(e[t])&&"function"==typeof r)return e[t]=r(e[t]),!0});let vP=vU((e,t,r)=>{if(Array.isArray(e[t])&&Array.isArray(r))return e[t]=r,!0});async function vN(e,t){let r={};for(let n of t)if(n.matcher(e)){let t=await n.handler({...e,returnHeaders:!1}).catch(t=>{throw t instanceof mS&&(0,iu.a)(e.context.logger.level,"debug")&&(t.stack=t.errorStack),t});if(t&&"object"==typeof t){if("context"in t&&"object"==typeof t.context){let{headers:e,...n}=t.context;e instanceof Headers&&(r.headers?e.forEach((e,t)=>{r.headers?.set(t,e)}):r.headers=e),r=vP(n,r);continue}return t}}return{context:r}}async function vD(e,t){for(let r of t)if(r.matcher(e)){let t=await r.handler(e).catch(t=>{if(t instanceof mS)return(0,iu.a)(e.context.logger.level,"debug")&&(t.stack=t.errorStack),{response:t,headers:t.headers?new Headers(t.headers):null};throw t});t.headers&&t.headers.forEach((t,r)=>{e.context.responseHeaders?"set-cookie"===r.toLowerCase()?e.context.responseHeaders.append(r,t):e.context.responseHeaders.set(r,t):e.context.responseHeaders=new Headers({[r]:t})}),t.response&&(e.context.returned=t.response)}return{response:e.context.returned,headers:e.context.responseHeaders}}function vL(e,t){let r=t.plugins?.reduce((e,t)=>({...e,...t.endpoints}),{})??{},n=t.plugins?.map(t=>t.middlewares?.map(t=>{let r=async r=>{let n=await e;return t.middleware({...r,context:{...n,...r.context}})};return r.options=t.middleware.options,{path:t.path,middleware:r}})).filter(e=>void 0!==e).flat()||[];return{api:function(e,t){let r={};for(let[n,i]of Object.entries(e))r[n]=async e=>{let r=async()=>{let r=await t,n={...e,context:{...r,returned:void 0,responseHeaders:void 0,session:null},path:i.path,headers:e?.headers?new Headers(e?.headers):void 0};return tU(n,async()=>{let{beforeHooks:t,afterHooks:o}=function(e){let t=e.options.plugins||[],r=[],n=[];e.options.hooks?.before&&r.push({matcher:()=>!0,handler:e.options.hooks.before}),e.options.hooks?.after&&n.push({matcher:()=>!0,handler:e.options.hooks.after});let i=t.map(e=>{if(e.hooks?.before)return e.hooks.before}).filter(e=>void 0!==e).flat(),o=t.map(e=>{if(e.hooks?.after)return e.hooks.after}).filter(e=>void 0!==e).flat();return i.length&&r.push(...i),o.length&&n.push(...o),{beforeHooks:r,afterHooks:n}}(r),a=await vN(n,t);if("context"in a&&a.context&&"object"==typeof a.context){let{headers:e,...t}=a.context;e&&e.forEach((e,t)=>{n.headers.set(t,e)}),n=vP(t,n)}else if(a)return e?.asResponse?mO(a,{headers:e?.headers}):e?.returnHeaders?{headers:e?.headers,response:a}:a;n.asResponse=!1,n.returnHeaders=!0,n.returnStatus=!0;let s=await tU(n,()=>i(n)).catch(e=>{if(e instanceof mS)return{response:e,status:e.statusCode,headers:e.headers?new Headers(e.headers):null};throw e});if(s&&s instanceof Response)return s;n.context.returned=s.response,n.context.responseHeaders=s.headers;let l=await vD(n,o);if(l.response&&(s.response=l.response),s.response instanceof mS&&(0,iu.a)(r.logger.level,"debug")&&(s.response.stack=s.response.errorStack),s.response instanceof mS&&!e?.asResponse)throw s.response;return e?.asResponse?mO(s.response,{headers:s.headers,status:s.status}):e?.returnHeaders?e?.returnStatus?{headers:s.headers,response:s.response,status:s.status}:{headers:s.headers,response:s.response}:e?.returnStatus?{response:s.response,status:s.status}:s.response})};return await tN()?r():tL(new WeakMap,r)},r[n].path=i.path,r[n].options=i.options;return r}({signInSocial:m7("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:vE,metadata:{$Infer:{body:{},returned:{}},openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async e=>{let t=e.context.socialProviders.find(t=>t.id===e.body.provider);if(!t)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new mS("NOT_FOUND",{message:yp.n.PROVIDER_NOT_FOUND});if(e.body.idToken){if(!t.verifyIdToken)throw e.context.logger.error("Provider does not support id token verification",{provider:e.body.provider}),new mS("NOT_FOUND",{message:yp.n.ID_TOKEN_NOT_SUPPORTED});let{token:r,nonce:n}=e.body.idToken;if(!await t.verifyIdToken(r,n))throw e.context.logger.error("Invalid id token",{provider:e.body.provider}),new mS("UNAUTHORIZED",{message:yp.n.INVALID_TOKEN});let i=await t.getUserInfo({idToken:r,accessToken:e.body.idToken.accessToken,refreshToken:e.body.idToken.refreshToken});if(!i||!i?.user)throw e.context.logger.error("Failed to get user info",{provider:e.body.provider}),new mS("UNAUTHORIZED",{message:yp.n.FAILED_TO_GET_USER_INFO});if(!i.user.email)throw e.context.logger.error("User email not found",{provider:e.body.provider}),new mS("UNAUTHORIZED",{message:yp.n.USER_EMAIL_NOT_FOUND});let o=await vp(e,{userInfo:{...i.user,email:i.user.email,id:String(i.user.id),name:i.user.name||"",image:i.user.image,emailVerified:i.user.emailVerified||!1},account:{providerId:t.id,accountId:String(i.user.id),accessToken:e.body.idToken.accessToken},callbackURL:e.body.callbackURL,disableSignUp:t.disableImplicitSignUp&&!e.body.requestSignUp||t.disableSignUp});if(o.error)throw new mS("UNAUTHORIZED",{message:o.error});return await yu(e,o.data),e.json({redirect:!1,token:o.data.session.token,url:void 0,user:gp(e.context.options,o.data.user)})}let{codeVerifier:r,state:n}=await mX(e,void 0,e.body.additionalData),i=await t.createAuthorizationURL({state:n,codeVerifier:r,redirectURI:`${e.context.baseURL}/callback/${t.id}`,scopes:e.body.scopes,loginHint:e.body.loginHint});return e.json({url:i.toString(),redirect:!e.body.disableRedirect})}),callbackOAuth:vh,getSession:yf(),signOut:vx,signUpEmail:m7("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",body:vS,metadata:{$Infer:{body:{},returned:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async e=>tZ(e.context.adapter,async()=>{let t;if(!e.context.options.emailAndPassword?.enabled||e.context.options.emailAndPassword?.disableSignUp)throw new mS("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let r=e.body,{name:n,email:i,password:o,image:a,callbackURL:s,rememberMe:l,...c}=r;if(!pD().safeParse(i).success)throw new mS("BAD_REQUEST",{message:yp.n.INVALID_EMAIL});let u=e.context.password.config.minPasswordLength;if(o.length<u)throw e.context.logger.error("Password is too short"),new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_SHORT});let d=e.context.password.config.maxPasswordLength;if(o.length>d)throw e.context.logger.error("Password is too long"),new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_LONG});if((await e.context.internalAdapter.findUserByEmail(i))?.user)throw e.context.logger.info(`Sign-up attempt for existing email: ${i}`),new mS("UNPROCESSABLE_ENTITY",{message:yp.n.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let p=await e.context.password.hash(o);try{let r=gg(e.context.options,c,"create");if(!(t=await e.context.internalAdapter.createUser({email:i.toLowerCase(),name:n,image:a,...r,emailVerified:!1})))throw new mS("BAD_REQUEST",{message:yp.n.FAILED_TO_CREATE_USER})}catch(t){if((0,m6.d)()&&e.context.logger.error("Failed to create user",t),t instanceof mS)throw t;throw e.context.logger?.error("Failed to create user",t),new mS("UNPROCESSABLE_ENTITY",{message:yp.n.FAILED_TO_CREATE_USER})}if(!t)throw new mS("UNPROCESSABLE_ENTITY",{message:yp.n.FAILED_TO_CREATE_USER});if(await e.context.internalAdapter.linkAccount({userId:t.id,providerId:"credential",accountId:t.id,password:p}),e.context.options.emailVerification?.sendOnSignUp||e.context.options.emailAndPassword.requireEmailVerification){let n=await vl(e.context.secret,t.email,void 0,e.context.options.emailVerification?.expiresIn),i=r.callbackURL?encodeURIComponent(r.callbackURL):encodeURIComponent("/"),o=`${e.context.baseURL}/verify-email?token=${n}&callbackURL=${i}`;e.context.options.emailVerification?.sendVerificationEmail&&await e.context.runInBackgroundOrAwait(e.context.options.emailVerification.sendVerificationEmail({user:t,url:o,token:n},e.request))}if(!1===e.context.options.emailAndPassword.autoSignIn||e.context.options.emailAndPassword.requireEmailVerification)return e.json({token:null,user:gp(e.context.options,t)});let f=await e.context.internalAdapter.createSession(t.id,!1===l);if(!f)throw new mS("BAD_REQUEST",{message:yp.n.FAILED_TO_CREATE_SESSION});return await yu(e,{session:f,user:t},!1===l),e.json({token:f.token,user:gp(e.context.options,t)})})),signInEmail:m7("/sign-in/email",{method:"POST",operationId:"signInEmail",body:f1({email:pC().meta({description:"Email of the user"}),password:pC().meta({description:"Password of the user"}),callbackURL:pC().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:fO().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{$Infer:{body:{},returned:{}},openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"string",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async e=>{if(!e.context.options?.emailAndPassword?.enabled)throw e.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new mS("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:t,password:r}=e.body;if(!pD().safeParse(t).success)throw new mS("BAD_REQUEST",{message:yp.n.INVALID_EMAIL});let n=await e.context.internalAdapter.findUserByEmail(t,{includeAccounts:!0});if(!n)throw await e.context.password.hash(r),e.context.logger.error("User not found",{email:t}),new mS("UNAUTHORIZED",{message:yp.n.INVALID_EMAIL_OR_PASSWORD});let i=n.accounts.find(e=>"credential"===e.providerId);if(!i)throw await e.context.password.hash(r),e.context.logger.error("Credential account not found",{email:t}),new mS("UNAUTHORIZED",{message:yp.n.INVALID_EMAIL_OR_PASSWORD});let o=i?.password;if(!o)throw await e.context.password.hash(r),e.context.logger.error("Password not found",{email:t}),new mS("UNAUTHORIZED",{message:yp.n.INVALID_EMAIL_OR_PASSWORD});if(!await e.context.password.verify({hash:o,password:r}))throw e.context.logger.error("Invalid password"),new mS("UNAUTHORIZED",{message:yp.n.INVALID_EMAIL_OR_PASSWORD});if(e.context.options?.emailAndPassword?.requireEmailVerification&&!n.user.emailVerified){if(!e.context.options?.emailVerification?.sendVerificationEmail)throw new mS("FORBIDDEN",{message:yp.n.EMAIL_NOT_VERIFIED});if(e.context.options?.emailVerification?.sendOnSignIn){let t=await vl(e.context.secret,n.user.email,void 0,e.context.options.emailVerification?.expiresIn),r=e.body.callbackURL?encodeURIComponent(e.body.callbackURL):encodeURIComponent("/"),i=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${r}`;await e.context.runInBackgroundOrAwait(e.context.options.emailVerification.sendVerificationEmail({user:n.user,url:i,token:t},e.request))}throw new mS("FORBIDDEN",{message:yp.n.EMAIL_NOT_VERIFIED})}let a=await e.context.internalAdapter.createSession(n.user.id,!1===e.body.rememberMe);if(!a)throw e.context.logger.error("Failed to create session"),new mS("UNAUTHORIZED",{message:yp.n.FAILED_TO_CREATE_SESSION});return await yu(e,{session:a,user:n.user},!1===e.body.rememberMe),e.json({redirect:!!e.body.callbackURL,token:a.token,url:e.body.callbackURL,user:gp(e.context.options,n.user)})}),resetPassword:v_,verifyEmail:vd,sendVerificationEmail:vu,changeEmail:vR,changePassword:vA,setPassword:vI,updateUser:m7("/update-user",{method:"POST",operationId:"updateUser",body:vk,use:[ym],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user",nullable:!0}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async e=>{let t=e.body;if("object"!=typeof t||Array.isArray(t))throw new mS("BAD_REQUEST",{message:"Body must be an object"});if(t.email)throw new mS("BAD_REQUEST",{message:yp.n.EMAIL_CAN_NOT_BE_UPDATED});let{name:r,image:n,...i}=t,o=e.context.session,a=gg(e.context.options,i,"update");if(void 0===n&&void 0===r&&0===Object.keys(a).length)throw new mS("BAD_REQUEST",{message:"No fields to update"});let s=await e.context.internalAdapter.updateUser(o.user.id,{name:r,image:n,...a})??{...o.user,...void 0!==r&&{name:r},...void 0!==n&&{image:n},...a};return await yu(e,{session:o.session,user:s}),e.json({status:!0})}),deleteUser:vT,requestPasswordReset:vb,requestPasswordResetCallback:vw,listSessions:m7("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[ym],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async e=>{try{let t=(await e.context.internalAdapter.listSessions(e.context.session.user.id)).filter(e=>e.expiresAt>new Date);return e.json(t)}catch(t){throw e.context.logger.error(t),e.error("INTERNAL_SERVER_ERROR")}}),revokeSession:yv,revokeSessions:yb,revokeOtherSessions:yw,linkSocialAccount:vn,listUserAccounts:vr,deleteUserCallback:vO,unlinkAccount:vi,refreshToken:va,getAccessToken:vo,accountInfo:vs,...r,ok:vy,error:vg},e),middlewares:n}}var m4=id;function vj(e,t="/api/auth"){try{let t=new URL(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw new ih.t(`Invalid base URL: ${e}. URL must include 'http://' or 'https://'`)}catch(t){if(t instanceof ih.t)throw t;throw new ih.t(`Invalid base URL: ${e}. Please provide a valid base URL.`,String(t))}if(function(e){try{return"/"!==(new URL(e).pathname.replace(/\/+$/,"")||"/")}catch{throw new ih.t(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}(e))return e;let r=e.replace(/\/+$/,"");return t&&"/"!==t?(t=t.startsWith("/")?t:`/${t}`,`${r}${t}`):r}function vz(e,t){return!!e&&""!==e.trim()&&("proto"===t?"http"===e||"https"===e:"host"===t&&![/\.\./,/\0/,/[\s]/,/^[.]/,/[<>'"]/,/javascript:/i,/file:/i,/data:/i].some(t=>t.test(e))&&(/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(e)||/^(\d{1,3}\.){3}\d{1,3}(:[0-9]{1,5})?$/.test(e)||/^\[[0-9a-fA-F:]+\](:[0-9]{1,5})?$/.test(e)||/^localhost(:[0-9]{1,5})?$/i.test(e)))}function vM(e,t,r,n,i){if(e)return vj(e,t);if(!1!==n){let e=yn.c.BETTER_AUTH_URL||yn.c.NEXT_PUBLIC_BETTER_AUTH_URL||yn.c.PUBLIC_BETTER_AUTH_URL||yn.c.NUXT_PUBLIC_BETTER_AUTH_URL||yn.c.NUXT_PUBLIC_AUTH_URL||("/"!==yn.c.BASE_URL?yn.c.BASE_URL:void 0);if(e)return vj(e,t)}let o=r?.headers.get("x-forwarded-host"),a=r?.headers.get("x-forwarded-proto");if(o&&a&&i&&vz(a,"proto")&&vz(o,"host"))try{return vj(`${a}://${o}`,t)}catch(e){}if(r){let e=vB(r.url);if(!e)throw new ih.t("Could not get origin from request. Please provide a valid base URL.");return vj(e,t)}}function vB(e){try{let t=new URL(e);return"null"===t.origin?null:t.origin}catch{return null}}let vZ="better-auth-secret-12345678901234567890";function vF(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}async function vH(e,t){let r=(await t.context.internalAdapter.findAccounts(e))?.find(e=>"credential"===e.providerId),n=r?.password;if(!r||!n||!t.body.password)throw new mS("BAD_REQUEST",{message:"No password credential found"});if(!await t.context.password.verify({hash:n,password:t.body.password}))throw new mS("BAD_REQUEST",{message:"Invalid password"});return!0}var yn=iu;async function vq(e){let t=e.options,r=t.plugins||[],n=e,i=[];for(let e of r)if(e.init){let r,o=e.init(n);if("object"==typeof(r=vF(o)?await o:o)){if(r.options){let{databaseHooks:e,...n}=r.options;e&&i.push(e),t=vC(t,n)}r.context&&(n={...n,...r.context})}}return i.push(t.databaseHooks),n.internalAdapter=gB(n.adapter,{options:t,logger:n.logger,hooks:i.filter(e=>void 0!==e),generateId:n.generateId}),n.options=t,{context:n}}async function vV(e,t){let r=vM(e.baseURL,e.basePath),n=r?[new URL(r).origin]:[];e.trustedOrigins&&(Array.isArray(e.trustedOrigins)&&n.push(...e.trustedOrigins),"function"==typeof e.trustedOrigins&&n.push(...await e.trustedOrigins(t)));let i=yn.c.BETTER_AUTH_TRUSTED_ORIGINS;if(i&&n.push(...i.split(",")),n.filter(e=>!e).length)throw new ih.t("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return n}var gC=gA,gW=iu,yn=iu,yi=iu,m2=iu,yn=iu,m2=iu;async function vW(){if(i)return i;try{let e="u">typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!e)return;let[{default:t},{default:r}]=await Promise.all([Function("mm","return import(mm)")("fs/promises"),Function("mm","return import(mm)")("path")]),n=await t.readFile(r.join(e,"package.json"),"utf-8");return i=JSON.parse(n)}catch{}}async function vK(e){if(i)return i.dependencies?.[e]||i.devDependencies?.[e]||i.peerDependencies?.[e];try{let t="u">typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!t)throw Error("no-cwd");let[{default:r},{default:n}]=await Promise.all([Function("mm","return import(mm)")("fs/promises"),Function("mm","return import(mm)")("path")]),i=n.join(t,"node_modules",e,"package.json"),o=await r.readFile(i,"utf-8");return JSON.parse(o).version||await vG(e)||void 0}catch{}return await vG(e)}async function vG(e){let t=await vW();if(t)return({...t.dependencies,...t.devDependencies,...t.peerDependencies})[e]}async function vJ(){return(await vW())?.name}let vY={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function vQ(){for(let[e,t]of Object.entries(vY)){let r=await vK(e);if(r)return{name:t,version:r}}}let vX={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function v0(){for(let[e,t]of Object.entries(vX)){let r=await vK(e);if(r)return{name:t,version:r}}}function v1(){let e=(...e)=>e.some(e=>!!yn.c[e]);return e("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent?"cloudflare":e("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":e("NETLIFY","NETLIFY_URL")?"netlify":e("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":e("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":e("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":e("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":e("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":e("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":e("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":e("DYNO","HEROKU_APP_NAME")?"heroku":e("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":e("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function v4(){try{if("cloudflare"===v1())return"cloudflare";let e=await Function("mm","return import(mm)")("os"),t=e.cpus();return{deploymentVendor:v1(),systemPlatform:e.platform(),systemRelease:e.release(),systemArchitecture:e.arch(),cpuCount:t.length,cpuModel:t.length?t[0].model:null,cpuSpeed:t.length?t[0].speed:null,memory:e.totalmem(),isWSL:await v5(),isDocker:await v3(),isTTY:"u">typeof process&&process.stdout?process.stdout.isTTY:null}}catch{return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}async function v6(){if("cloudflare"===v1())return!1;try{return(await Function("mm","return import(mm)")("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function v2(){if("cloudflare"===v1())return!1;try{return(await Function("mm","return import(mm)")("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function v3(){return"cloudflare"!==v1()&&(void 0===o&&(o=await v6()||await v2()),o)}async function v5(){try{if("cloudflare"===v1()||"u"<typeof process||process?.platform!=="linux")return!1;let e=await Function("mm","return import(mm)")("fs");if((await Function("mm","return import(mm)")("os")).release().toLowerCase().includes("microsoft")){if(await v8())return!1;return!0}return!!e.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!await v8()}catch{return!1}}let v9=async()=>{if("cloudflare"===v1())return!1;try{return(await Function("mm","return import(mm)")("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function v8(){return void 0===a&&(a=await v9()||await v3()),a}async function v7(e){let t=await iO("SHA-256").digest(e);return iI.encode(t)}let be=null;async function bt(e){if(be)return be;let t=await vJ();return t?be=await v7(e?e+t:t):e?be=await v7(e):be=(0,tq.createRandomStringGenerator)("a-z","A-Z","0-9")(32)}async function br(e,t){let r,n=e.telemetry?.debug||(0,iu.l)("BETTER_AUTH_TELEMETRY_DEBUG",!1),i=iu.s.BETTER_AUTH_TELEMETRY_ENDPOINT,o=async e=>{t?.customTrack?await t.customTrack(e).catch(gP.logger.error):n?gP.logger.info("telemetry event",JSON.stringify(e,null,2)):await yH(i,{method:"POST",body:e}).catch(gP.logger.error)},a=async()=>{let r=e.telemetry?.enabled!==void 0&&e.telemetry.enabled;return((0,iu.l)("BETTER_AUTH_TELEMETRY",!1)||r)&&(t?.skipTestCheck||!(0,m2.p)())},s=await a();s&&(r=await bt(e.baseURL),o({type:"init",payload:{config:{database:t?.database,adapter:t?.adapter,emailVerification:{sendVerificationEmail:!!e.emailVerification?.sendVerificationEmail,sendOnSignUp:!!e.emailVerification?.sendOnSignUp,sendOnSignIn:!!e.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!e.emailVerification?.autoSignInAfterVerification,expiresIn:e.emailVerification?.expiresIn,onEmailVerification:!!e.emailVerification?.onEmailVerification,afterEmailVerification:!!e.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!e.emailAndPassword?.enabled,disableSignUp:!!e.emailAndPassword?.disableSignUp,requireEmailVerification:!!e.emailAndPassword?.requireEmailVerification,maxPasswordLength:e.emailAndPassword?.maxPasswordLength,minPasswordLength:e.emailAndPassword?.minPasswordLength,sendResetPassword:!!e.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:e.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!e.emailAndPassword?.onPasswordReset,password:{hash:!!e.emailAndPassword?.password?.hash,verify:!!e.emailAndPassword?.password?.verify},autoSignIn:!!e.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!e.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(e.socialProviders||{}).map(t=>{let r=e.socialProviders?.[t];return r?{id:t,mapProfileToUser:!!r.mapProfileToUser,disableDefaultScope:!!r.disableDefaultScope,disableIdTokenSignIn:!!r.disableIdTokenSignIn,disableImplicitSignUp:r.disableImplicitSignUp,disableSignUp:r.disableSignUp,getUserInfo:!!r.getUserInfo,overrideUserInfoOnSignIn:!!r.overrideUserInfoOnSignIn,prompt:r.prompt,verifyIdToken:!!r.verifyIdToken,scope:r.scope,refreshAccessToken:!!r.refreshAccessToken}:{}}),plugins:e.plugins?.map(e=>e.id.toString()),user:{modelName:e.user?.modelName,fields:e.user?.fields,additionalFields:e.user?.additionalFields,changeEmail:{enabled:e.user?.changeEmail?.enabled,sendChangeEmailVerification:!!e.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:e.verification?.modelName,disableCleanup:e.verification?.disableCleanup,fields:e.verification?.fields},session:{modelName:e.session?.modelName,additionalFields:e.session?.additionalFields,cookieCache:{enabled:e.session?.cookieCache?.enabled,maxAge:e.session?.cookieCache?.maxAge,strategy:e.session?.cookieCache?.strategy},disableSessionRefresh:e.session?.disableSessionRefresh,expiresIn:e.session?.expiresIn,fields:e.session?.fields,freshAge:e.session?.freshAge,preserveSessionInDatabase:e.session?.preserveSessionInDatabase,storeSessionInDatabase:e.session?.storeSessionInDatabase,updateAge:e.session?.updateAge},account:{modelName:e.account?.modelName,fields:e.account?.fields,encryptOAuthTokens:e.account?.encryptOAuthTokens,updateAccountOnSignIn:e.account?.updateAccountOnSignIn,accountLinking:{enabled:e.account?.accountLinking?.enabled,trustedProviders:e.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:e.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:e.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!e.hooks?.after,before:!!e.hooks?.before},secondaryStorage:!!e.secondaryStorage,advanced:{cookiePrefix:!!e.advanced?.cookiePrefix,cookies:!!e.advanced?.cookies,crossSubDomainCookies:{domain:!!e.advanced?.crossSubDomainCookies?.domain,enabled:e.advanced?.crossSubDomainCookies?.enabled,additionalCookies:e.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!e.advanced?.database?.useNumberId||e.advanced?.database?.generateId==="serial",generateId:e.advanced?.database?.generateId,defaultFindManyLimit:e.advanced?.database?.defaultFindManyLimit},useSecureCookies:e.advanced?.useSecureCookies,ipAddress:{disableIpTracking:e.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:e.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:e.advanced?.disableCSRFCheck,cookieAttributes:{expires:e.advanced?.defaultCookieAttributes?.expires,secure:e.advanced?.defaultCookieAttributes?.secure,sameSite:e.advanced?.defaultCookieAttributes?.sameSite,domain:!!e.advanced?.defaultCookieAttributes?.domain,path:e.advanced?.defaultCookieAttributes?.path,httpOnly:e.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:e.trustedOrigins?.length,rateLimit:{storage:e.rateLimit?.storage,modelName:e.rateLimit?.modelName,window:e.rateLimit?.window,customStorage:!!e.rateLimit?.customStorage,enabled:e.rateLimit?.enabled,max:e.rateLimit?.max},onAPIError:{errorURL:e.onAPIError?.errorURL,onError:!!e.onAPIError?.onError,throw:e.onAPIError?.throw},logger:{disabled:e.logger?.disabled,level:e.logger?.level,log:!!e.logger?.log},databaseHooks:{user:{create:{after:!!e.databaseHooks?.user?.create?.after,before:!!e.databaseHooks?.user?.create?.before},update:{after:!!e.databaseHooks?.user?.update?.after,before:!!e.databaseHooks?.user?.update?.before}},session:{create:{after:!!e.databaseHooks?.session?.create?.after,before:!!e.databaseHooks?.session?.create?.before},update:{after:!!e.databaseHooks?.session?.update?.after,before:!!e.databaseHooks?.session?.update?.before}},account:{create:{after:!!e.databaseHooks?.account?.create?.after,before:!!e.databaseHooks?.account?.create?.before},update:{after:!!e.databaseHooks?.account?.update?.after,before:!!e.databaseHooks?.account?.update?.before}},verification:{create:{after:!!e.databaseHooks?.verification?.create?.after,before:!!e.databaseHooks?.verification?.create?.before},update:{after:!!e.databaseHooks?.verification?.update?.after,before:!!e.databaseHooks?.verification?.update?.before}}}},runtime:"u">typeof Deno?{name:"deno",version:Deno?.version?.deno??null}:"u">typeof Bun?{name:"bun",version:Bun?.version??null}:"u">typeof process&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null},database:await vQ(),framework:await v0(),environment:"production"===(0,iu.u)("NODE_ENV")?"production":"false"!==yn.c.CI&&("BUILD_ID"in yn.c||"BUILD_NUMBER"in yn.c||"CI"in yn.c||"CI_APP_ID"in yn.c||"CI_BUILD_ID"in yn.c||"CI_BUILD_NUMBER"in yn.c||"CI_NAME"in yn.c||"CONTINUOUS_INTEGRATION"in yn.c||"RUN_ID"in yn.c)?"ci":(0,m2.p)()?"test":"development",systemInfo:await v4(),packageManager:function(){let e=yn.c.npm_config_user_agent;if(!e)return;let t=e.split(" ")[0],r=t.lastIndexOf("/"),n=t.substring(0,r);return{name:"npminstall"===n?"cnpm":n,version:t.substring(r+1)}}()},anonymousId:r}));return{publish:async t=>{s&&(r||(r=await bt(e.baseURL)),await o({type:t.type,payload:t.payload,anonymousId:r}))}}}async function bn(e,t,r){var n,i;let o,a,s,l,c,u,d,p;t.database||(t=vC(t,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}}));let f=t.plugins||[],h=(n=t,n.advanced?.crossSubDomainCookies?.enabled,[]),m=(0,gW.n)(t.logger),g=vM(t.baseURL,t.basePath);g||m.warn("[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.");let y=t.secret||yn.c.BETTER_AUTH_SECRET||yn.c.AUTH_SECRET||vZ,v=y===vZ;if(!(0,m2.p)()){let e;if(v&&yi.f)throw new ih.t("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.");if(!y)throw new ih.t("BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).");if(y.length<32)throw new ih.t("Invalid BETTER_AUTH_SECRET: must be at least 32 characters long for adequate security. Generate one with `npx @better-auth/cli secret` or `openssl rand -base64 32`.");120>(0===(e=new Set(y).size)?0:Math.log2(Math.pow(e,y.length)))&&m.warn("[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.")}!function(e,t){let r=new Map;e.plugins?.forEach(e=>{if(e.endpoints){for(let[t,n]of Object.entries(e.endpoints))if(n&&"path"in n&&"string"==typeof n.path){let i=n.path,o=[];n.options&&"method"in n.options&&(Array.isArray(n.options.method)?o=n.options.method:"string"==typeof n.options.method&&(o=[n.options.method])),0===o.length&&(o=["*"]),r.has(i)||r.set(i,[]),r.get(i).push({pluginId:e.id,endpointKey:t,methods:o})}}});let n=[];for(let[e,t]of r.entries())if(t.length>1){let r=new Map,i=!1;for(let e of t)for(let n of e.methods)r.has(n)||r.set(n,[]),r.get(n).push(e.pluginId),r.get(n).length>1&&(i=!0),"*"===n&&t.length>1?i=!0:"*"!==n&&r.has("*")&&(i=!0);if(i){let i=[...new Set(t.map(e=>e.pluginId))],o=[];for(let[e,n]of r.entries())(n.length>1||"*"===e&&t.length>1||"*"!==e&&r.has("*"))&&o.push(e);n.push({path:e,plugins:i,conflictingMethods:o})}}if(n.length>0){let e=n.map(e=>`  - "${e.path}" [${e.conflictingMethods.join(", ")}] used by plugins: ${e.plugins.join(", ")}`).join("\n");t.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${e}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}(t={...t,secret:y,baseURL:g?new URL(g).origin:"",basePath:t.basePath||"/api/auth",plugins:f.concat(h)},m);let b=(s=(a=yl(i=t))("session_token",{maxAge:i.session?.expiresIn||Math.round(yr("7d")/1e3)}),l=a("session_data",{maxAge:i.session?.cookieCache?.maxAge||300}),c=a("account_data",{maxAge:i.session?.cookieCache?.maxAge||300}),u=a("dont_remember"),{sessionToken:{name:s.name,options:s.attributes},sessionData:{name:l.name,options:l.attributes},dontRememberToken:{name:u.name,options:u.attributes},accountData:{name:c.name,options:c.attributes}}),w=(0,gC.t)(t),_=Object.entries(t.socialProviders||{}).map(([e,t])=>{if(null==t||!1===t.enabled)return null;t.clientId||m.warn(`Social provider ${e} is missing clientId or clientSecret`);let r=ve[e](t);return r.disableImplicitSignUp=t.disableImplicitSignUp,r}).filter(e=>null!==e),E=({model:e,size:r})=>"function"==typeof t.advanced?.generateId?t.advanced.generateId({model:e,size:r}):"function"==typeof t?.advanced?.database?.generateId?t.advanced.database.generateId({model:e,size:r}):(0,m4.r)(r),{publish:x}=await br(t,{adapter:e.id,database:"function"==typeof t.database?"adapter":r(t.database)}),S={appName:t.appName||"Better Auth",socialProviders:_,options:t,oauthConfig:{storeStateStrategy:t.account?.storeStateStrategy||(t.database?"database":"cookie"),skipStateCookieCheck:!!t.account?.skipStateCookieCheck},tables:w,trustedOrigins:await vV(t),isTrustedOrigin:(e,t)=>S.trustedOrigins.some(r=>((e,t,r)=>{if(e.startsWith("/"))return!!r?.allowRelativePaths&&e.startsWith("/")&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(e);if(t.includes("*")||t.includes("?")){if(t.includes("://"))return gi(t)(vB(e)||e);let r=function(e){try{return new URL(e).host}catch{return null}}(e);return!!r&&gi(t)(r)}let n=function(e){try{return new URL(e).protocol}catch{return null}}(e);return"http:"!==n&&"https:"!==n&&n?e.startsWith(t):t===vB(e)})(e,r,t)),baseURL:g||"",sessionConfig:{updateAge:t.session?.updateAge!==void 0?t.session.updateAge:86400,expiresIn:t.session?.expiresIn||604800,freshAge:t.session?.freshAge===void 0?86400:t.session.freshAge,cookieRefreshCache:(d=t.session?.cookieCache?.refreshCache,p=t.session?.cookieCache?.maxAge||300,(t.database||t.secondaryStorage)&&d?(m.warn("[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache`  remove it from your config to silence this warning."),!1):!1!==d&&void 0!==d&&(!0===d?{enabled:!0,updateAge:Math.floor(.2*p)}:{enabled:!0,updateAge:void 0!==d.updateAge?d.updateAge:Math.floor(.2*p)}))},secret:y,rateLimit:{...t.rateLimit,enabled:t.rateLimit?.enabled??yi.f,window:t.rateLimit?.window||10,max:t.rateLimit?.max||100,storage:t.rateLimit?.storage||(t.secondaryStorage?"secondary-storage":"memory")},authCookies:b,logger:m,generateId:E,session:null,secondaryStorage:t.secondaryStorage,password:{hash:t.emailAndPassword?.password?.hash||i_,verify:t.emailAndPassword?.password?.verify||iE,config:{minPasswordLength:t.emailAndPassword?.minPasswordLength||8,maxPasswordLength:t.emailAndPassword?.maxPasswordLength||128},checkPassword:vH},setNewSession(e){this.newSession=e},newSession:null,adapter:e,internalAdapter:gB(e,{options:t,logger:m,hooks:t.databaseHooks?[t.databaseHooks]:[],generateId:E}),createAuthCookie:yl(t),async runMigrations(){throw new ih.t("runMigrations will be set by the specific init implementation")},publishTelemetry:x,skipCSRFCheck:!!t.advanced?.disableCSRFCheck,skipOriginCheck:t.advanced?.disableOriginCheck!==void 0?t.advanced.disableOriginCheck:!!(0,m2.p)(),runInBackground:t.advanced?.backgroundTasks?.handler??(e=>{e.catch(()=>{})}),async runInBackgroundOrAwait(e){try{t.advanced?.backgroundTasks?.handler?e instanceof Promise&&t.advanced.backgroundTasks.handler(e.catch(e=>{m.error("Failed to run background task:",e)})):await e}catch(e){m.error("Failed to run background task:",e)}}},k=vq(S);return vF(k)?{context:o}=await k:{context:o}=k,o}var ih=ip;let bi=async e=>{let t=await gD(e),r=await bn(t,e,e=>(0,gV.getKyselyDatabaseType)(e)||"unknown");return r.runMigrations=async function(){if(!e.database||"updateMany"in e.database)throw new ih.t("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:t}=await gX(e);await t()},r};var yp=ip,ih=ip;function bo(e){return{newRole:e=>{var t;return{authorize(e,r="AND"){let n=!1;for(let[i,o]of Object.entries(e)){let e=t[i];if(!e)return{success:!1,error:`You are not allowed to access resource: ${i}`};if(Array.isArray(o))n=o.every(t=>e.includes(t));else if("object"==typeof o)n="OR"===o.connector?o.actions.some(t=>e.includes(t)):o.actions.every(t=>e.includes(t));else throw new ih.t("Invalid access control request");if(n&&"OR"===r)return{success:n};if(!n&&"AND"===r)return{success:!1,error:`unauthorized to access resource "${i}"`}}return n?{success:n}:{success:!1,error:"Not authorized"}},statements:t=e}},statements:e}}let ba=bo({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]}),bs={admin:ba.newRole({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]}),user:ba.newRole({user:[],session:[]})},bl=async e=>{let t=e.context.returned;return t?t instanceof Response?200!==t.status?null:await t.clone().json():t instanceof mS?null:t:null};var bc=id;let bu=(0,bc.i)({FAILED_TO_CREATE_USER:"Failed to create user",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",YOU_CANNOT_BAN_YOURSELF:"You cannot ban yourself",YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE:"You are not allowed to change users role",YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS:"You are not allowed to create users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS:"You are not allowed to list users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS:"You are not allowed to list users sessions",YOU_ARE_NOT_ALLOWED_TO_BAN_USERS:"You are not allowed to ban users",YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS:"You are not allowed to impersonate users",YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS:"You are not allowed to revoke users sessions",YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS:"You are not allowed to delete users",YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD:"You are not allowed to set users password",BANNED_USER:"You have been banned from this application",YOU_ARE_NOT_ALLOWED_TO_GET_USER:"You are not allowed to get user",NO_DATA_TO_UPDATE:"No data to update",YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS:"You are not allowed to update users",YOU_CANNOT_REMOVE_YOURSELF:"You cannot remove yourself",YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE:"You are not allowed to set a non-existent role value",YOU_CANNOT_IMPERSONATE_ADMINS:"You cannot impersonate admins",INVALID_ROLE_TYPE:"Invalid role type"}),bd=e=>{if(e.userId&&e.options?.adminUserIds?.includes(e.userId))return!0;if(!e.permissions&&!e.permission)return!1;let t=(e.role||e.options?.defaultRole||"user").split(","),r=e.options?.roles||bs;for(let n of t)if(r[n]?.authorize(e.permission??e.permissions)?.success)return!0;return!1};var yp=ip,mb=mb;let bp=m9(async e=>{let t=await yh(e);if(!t)throw new mS("UNAUTHORIZED");return{session:t}});function bf(e){return Array.isArray(e)?e.join(","):e}let bh=f1({userId:mb.string().meta({description:"The user id"}),role:f3([pC().meta({description:"The role to set. `admin` or `user` by default"}),fQ(pC().meta({description:"The roles to set. `admin` or `user` by default"}))]).meta({description:"The role to set, this can be a string or an array of strings. Eg: `admin` or `[admin, user]`"})}),bm=f1({id:pC().meta({description:"The id of the User"})}),bg=f1({email:pC().meta({description:"The email of the user"}),password:pC().meta({description:"The password of the user"}),name:pC().meta({description:"The name of the user"}),role:f3([pC().meta({description:"The role of the user"}),fQ(pC().meta({description:"The roles of user"}))]).optional().meta({description:'A string or array of strings representing the roles to apply to the new user. Eg: "user"'}),data:ho(pC(),fZ()).optional().meta({description:"Extra fields for the user. Including custom additional fields."})}),by=f1({userId:mb.string().meta({description:"The user id"}),data:ho(fZ(),fZ()).meta({description:"The user data to update"})}),bv=f1({searchValue:pC().optional().meta({description:'The value to search for. Eg: "some name"'}),searchField:hf(["email","name"]).meta({description:'The field to search in, defaults to email. Can be `email` or `name`. Eg: "name"'}).optional(),searchOperator:hf(["contains","starts_with","ends_with"]).meta({description:'The operator to use for the search. Can be `contains`, `starts_with` or `ends_with`. Eg: "contains"'}).optional(),limit:pC().meta({description:"The number of users to return"}).or(f_()).optional(),offset:pC().meta({description:"The offset to start from"}).or(f_()).optional(),sortBy:pC().meta({description:"The field to sort by"}).optional(),sortDirection:hf(["asc","desc"]).meta({description:"The direction to sort by"}).optional(),filterField:pC().meta({description:"The field to filter by"}).optional(),filterValue:pC().meta({description:"The value to filter by"}).or(f_()).or(fO()).optional(),filterOperator:hf(["eq","ne","lt","lte","gt","gte","contains"]).meta({description:"The operator to use for the filter"}).optional()}),bb=f1({userId:mb.string().meta({description:"The user id"})}),bw=f1({userId:mb.string().meta({description:"The user id"})}),b_=f1({userId:mb.string().meta({description:"The user id"}),banReason:pC().meta({description:"The reason for the ban"}).optional(),banExpiresIn:f_().meta({description:"The number of seconds until the ban expires"}).optional()}),bE=f1({userId:mb.string().meta({description:"The user id"})}),bx=f1({sessionToken:pC().meta({description:"The session token"})}),bS=f1({userId:mb.string().meta({description:"The user id"})}),bk=f1({userId:mb.string().meta({description:"The user id"})}),bA=f1({newPassword:pC().nonempty("newPassword cannot be empty").meta({description:"The new password"}),userId:mb.string().nonempty("userId cannot be empty").meta({description:"The user id"})}),bI=f1({userId:mb.string().optional().meta({description:'The user id. Eg: "user-id"'}),role:pC().optional().meta({description:'The role to check permission for. Eg: "admin"'})}).and(f3([f1({permission:ho(pC(),fQ(pC())),permissions:fj()}),f1({permission:fj(),permissions:ho(pC(),fQ(pC()))})])),bT={user:{fields:{role:{type:"string",required:!1,input:!1},banned:{type:"boolean",defaultValue:!1,required:!1,input:!1},banReason:{type:"string",required:!1,input:!1},banExpires:{type:"date",required:!1,input:!1}}},session:{fields:{impersonatedBy:{type:"string",required:!1}}}};var ih=ip,bc=id;(0,bc.i)({INVALID_EMAIL_FORMAT:"Email was not generated in a valid format",FAILED_TO_CREATE_USER:"Failed to create user",COULD_NOT_CREATE_SESSION:"Could not create session",ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY:"Anonymous users cannot sign in again anonymously"});var m4=id,go=id;f1({key:pC().meta({description:"The key to verify"}),permissions:ho(pC(),fQ(pC())).meta({description:"The permissions to verify."}).optional()});var m4=id,go=id,mb=mb;f1({name:pC().meta({description:"Name of the Api Key"}).optional(),expiresIn:f_().meta({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable().default(null),userId:mb.string().meta({description:'User Id of the user that the Api Key belongs to. server-only. Eg: "user-id"'}).optional(),prefix:pC().meta({description:"Prefix of the Api Key"}).regex(/^[a-zA-Z0-9_-]+$/,{message:"Invalid prefix format, must be alphanumeric and contain only underscores and hyphens."}).optional(),remaining:f_().meta({description:"Remaining number of requests. Server side only"}).min(0).optional().nullable().default(null),metadata:fZ().optional(),refillAmount:f_().meta({description:"Amount to refill the remaining count of the Api Key. server-only. Eg: 100"}).min(1).optional(),refillInterval:f_().meta({description:"Interval to refill the Api Key in milliseconds. server-only. Eg: 1000"}).optional(),rateLimitTimeWindow:f_().meta({description:"The duration in milliseconds where each request is counted. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 1000"}).optional(),rateLimitMax:f_().meta({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100"}).optional(),rateLimitEnabled:fO().meta({description:"Whether the key has rate limiting enabled. server-only. Eg: true"}).optional(),permissions:ho(pC(),fQ(pC())).meta({description:"Permissions of the Api Key."}).optional()}),f1({keyId:pC().meta({description:"The id of the Api Key"})});var go=id;f1({id:pC().meta({description:"The id of the Api Key"})});var go=id,mb=mb;f1({keyId:pC().meta({description:"The id of the Api Key"}),userId:mb.string().meta({description:'The id of the user which the api key belongs to. server-only. Eg: "some-user-id"'}).optional(),name:pC().meta({description:"The name of the key"}).optional(),enabled:fO().meta({description:"Whether the Api Key is enabled or not"}).optional(),remaining:f_().meta({description:"The number of remaining requests"}).min(1).optional(),refillAmount:f_().meta({description:"The refill amount"}).optional(),refillInterval:f_().meta({description:"The refill interval"}).optional(),metadata:fZ().optional(),expiresIn:f_().meta({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable(),rateLimitEnabled:fO().meta({description:"Whether the key has rate limiting enabled."}).optional(),rateLimitTimeWindow:f_().meta({description:"The duration in milliseconds where each request is counted. server-only. Eg: 1000"}).optional(),rateLimitMax:f_().meta({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100"}).optional(),permissions:ho(pC(),fQ(pC())).meta({description:"Update the permissions on the API Key. server-only."}).optional().nullable()});var bc=id;(0,bc.i)({INVALID_METADATA_TYPE:"metadata must be an object or undefined",REFILL_AMOUNT_AND_INTERVAL_REQUIRED:"refillAmount is required when refillInterval is provided",REFILL_INTERVAL_AND_AMOUNT_REQUIRED:"refillInterval is required when refillAmount is provided",USER_BANNED:"User is banned",UNAUTHORIZED_SESSION:"Unauthorized or invalid session",KEY_NOT_FOUND:"API Key not found",KEY_DISABLED:"API Key is disabled",KEY_EXPIRED:"API Key has expired",USAGE_EXCEEDED:"API Key has reached its usage limit",KEY_NOT_RECOVERABLE:"API Key is not recoverable",EXPIRES_IN_IS_TOO_SMALL:"The expiresIn is smaller than the predefined minimum value.",EXPIRES_IN_IS_TOO_LARGE:"The expiresIn is larger than the predefined maximum value.",INVALID_REMAINING:"The remaining count is either too large or too small.",INVALID_PREFIX_LENGTH:"The prefix length is either too large or too small.",INVALID_NAME_LENGTH:"The name length is either too large or too small.",METADATA_DISABLED:"Metadata is disabled.",RATE_LIMIT_EXCEEDED:"Rate limit exceeded.",NO_VALUES_TO_UPDATE:"No values to update.",KEY_DISABLED_EXPIRATION:"Custom key expiration values are disabled.",INVALID_API_KEY:"Invalid API key.",INVALID_USER_ID_FROM_API_KEY:"The user id from the API key is invalid.",INVALID_API_KEY_GETTER_RETURN_TYPE:"API Key getter returned an invalid key type. Expected string.",SERVER_ONLY_PROPERTY:"The property you're trying to set can only be set from the server auth instance only.",FAILED_TO_UPDATE_API_KEY:"Failed to update API key",NAME_REQUIRED:"API Key name is required."});var bc=id;(0,bc.i)({VERIFICATION_FAILED:"Captcha verification failed",MISSING_RESPONSE:"Missing CAPTCHA response",UNKNOWN_ERROR:"Something went wrong"}),(0,bc.i)({MISSING_SECRET_KEY:"Missing secret key",SERVICE_UNAVAILABLE:"CAPTCHA service unavailable"}),hE(f1({disableCookieCache:fO().meta({description:"Disable cookie cache and fetch session from database"}).or(pC().transform(e=>"true"===e)).optional(),disableRefresh:fO().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));var bc=id;let bO=(0,bc.i)({INVALID_DEVICE_CODE:"Invalid device code",EXPIRED_DEVICE_CODE:"Device code has expired",EXPIRED_USER_CODE:"User code has expired",AUTHORIZATION_PENDING:"Authorization pending",ACCESS_DENIED:"Access denied",INVALID_USER_CODE:"Invalid user code",DEVICE_CODE_ALREADY_PROCESSED:"Device code already processed",POLLING_TOO_FREQUENTLY:"Polling too frequently",USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_SESSION:"Failed to create session",INVALID_DEVICE_CODE_STATUS:"Invalid device code status",AUTHENTICATION_REQUIRED:"Authentication required"});f1({client_id:pC().meta({description:"The client ID of the application"}),scope:pC().meta({description:"Space-separated list of scopes"}).optional()}),f1({error:hf(["invalid_request","invalid_client"]).meta({description:"Error code"}),error_description:pC().meta({description:"Detailed error description"})}),f1({grant_type:hg("urn:ietf:params:oauth:grant-type:device_code").meta({description:"The grant type for device flow"}),device_code:pC().meta({description:"The device verification code"}),client_id:pC().meta({description:"The client ID of the application"})}),f1({error:hf(["authorization_pending","slow_down","expired_token","access_denied","invalid_request","invalid_grant"]).meta({description:"Error code"}),error_description:pC().meta({description:"Detailed error description"})}),m7("/device",{method:"GET",query:f1({user_code:pC().meta({description:"The user code to verify"})}),error:f1({error:hf(["invalid_request"]).meta({description:"Error code"}),error_description:pC().meta({description:"Detailed error description"})}),metadata:{openapi:{description:"Verify user code and get device authorization status",responses:{200:{description:"Device authorization status",content:{"application/json":{schema:{type:"object",properties:{user_code:{type:"string",description:"The user code to verify"},status:{type:"string",enum:["pending","approved","denied"],description:"Current status of the device authorization"}}}}}}}}}},async e=>{let{user_code:t}=e.query,r=t.replace(/-/g,""),n=await e.context.adapter.findOne({model:"deviceCode",where:[{field:"userCode",value:r}]});if(!n)throw new mS("BAD_REQUEST",{error:"invalid_request",error_description:bO.INVALID_USER_CODE});if(n.expiresAt<new Date)throw new mS("BAD_REQUEST",{error:"expired_token",error_description:bO.EXPIRED_USER_CODE});return e.json({user_code:t,status:n.status})}),m7("/device/approve",{method:"POST",body:f1({userCode:pC().meta({description:"The user code to approve"})}),error:f1({error:hf(["invalid_request","expired_token","device_code_already_processed"]).meta({description:"Error code"}),error_description:pC().meta({description:"Detailed error description"})}),requireHeaders:!0,metadata:{openapi:{description:"Approve device authorization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async e=>{let t=await yh(e);if(!t)throw new mS("UNAUTHORIZED",{error:"unauthorized",error_description:bO.AUTHENTICATION_REQUIRED});let{userCode:r}=e.body,n=r.replace(/-/g,""),i=await e.context.adapter.findOne({model:"deviceCode",where:[{field:"userCode",value:n}]});if(!i)throw new mS("BAD_REQUEST",{error:"invalid_request",error_description:bO.INVALID_USER_CODE});if(i.expiresAt<new Date)throw new mS("BAD_REQUEST",{error:"expired_token",error_description:bO.EXPIRED_USER_CODE});if("pending"!==i.status)throw new mS("BAD_REQUEST",{error:"invalid_request",error_description:bO.DEVICE_CODE_ALREADY_PROCESSED});return await e.context.adapter.update({model:"deviceCode",where:[{field:"id",value:i.id}],update:{status:"approved",userId:t.user.id}}),e.json({success:!0})}),m7("/device/deny",{method:"POST",body:f1({userCode:pC().meta({description:"The user code to deny"})}),error:f1({error:hf(["invalid_request","expired_token"]).meta({description:"Error code"}),error_description:pC().meta({description:"Detailed error description"})}),metadata:{openapi:{description:"Deny device authorization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async e=>{let{userCode:t}=e.body,r=t.replace(/-/g,""),n=await e.context.adapter.findOne({model:"deviceCode",where:[{field:"userCode",value:r}]});if(!n)throw new mS("BAD_REQUEST",{error:"invalid_request",error_description:bO.INVALID_USER_CODE});if(n.expiresAt<new Date)throw new mS("BAD_REQUEST",{error:"expired_token",error_description:bO.EXPIRED_USER_CODE});if("pending"!==n.status)throw new mS("BAD_REQUEST",{error:"invalid_request",error_description:bO.DEVICE_CODE_ALREADY_PROCESSED});return await e.context.adapter.update({model:"deviceCode",where:[{field:"id",value:n.id}],update:{status:"denied"}}),e.json({success:!0})}),f1({id:pC(),deviceCode:pC(),userCode:pC(),userId:pC().optional(),expiresAt:fJ(),status:pC(),lastPolledAt:fJ().optional(),pollingInterval:f_().optional(),clientId:pC().optional(),scope:pC().optional()});let bR=h4(e=>{if("string"!=typeof e)return!1;try{return yr(e),!0}catch{return!1}},{message:"Invalid time string format. Use formats like '30m', '5s', '1h', etc."});f1({expiresIn:bR.default("30m").describe("Time in seconds until the device code expires. Use formats like '30m', '5s', '1h', etc."),interval:bR.default("5s").describe("Time in seconds between polling attempts. Use formats like '30m', '5s', '1h', etc."),deviceCodeLength:f_().int().positive().default(40).describe("Length of the device code to be generated. Default is 40 characters."),userCodeLength:f_().int().positive().default(8).describe("Length of the user code to be generated. Default is 8 characters."),generateDeviceCode:h4(e=>"function"==typeof e,{message:"generateDeviceCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a device code. If not provided, a default random string generator will be used."),generateUserCode:h4(e=>"function"==typeof e,{message:"generateUserCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a user code. If not provided, a default random string generator will be used."),validateClient:h4(e=>"function"==typeof e,{message:"validateClient must be a function that returns a boolean or a promise that resolves to a boolean."}).optional().describe("Function to validate the client ID. If not provided, no validation will be performed."),onDeviceAuthRequest:h4(e=>"function"==typeof e,{message:"onDeviceAuthRequest must be a function that returns void or a promise that resolves to void."}).optional().describe("Function to handle device authorization requests. If not provided, no additional actions will be taken."),verificationUri:pC().optional().describe("The URI where users verify their device code. Can be an absolute URL (https://example.com/device) or relative path (/custom-path). This will be returned as verification_uri in the device code response. If not provided, defaults to /device."),schema:h4(()=>!0)});var yp=ip,bc=id;let b$=["email-verification","sign-in","forget-password"];(0,bc.i)({OTP_EXPIRED:"OTP expired",INVALID_OTP:"Invalid OTP",TOO_MANY_ATTEMPTS:"Too many attempts"}),f1({email:pC({}).meta({description:"Email address to send the OTP"}),type:hf(b$).meta({description:"Type of the OTP"})}),f1({email:pC({}).meta({description:"Email address to send the OTP"}),type:hf(b$).meta({required:!0,description:"Type of the OTP"})}),f1({email:pC({}).meta({description:"Email address the OTP was sent to"}),type:hf(b$).meta({required:!0,description:"Type of the OTP"})}),f1({email:pC().meta({description:"Email address the OTP was sent to"}),type:hf(b$).meta({required:!0,description:"Type of the OTP"}),otp:pC().meta({required:!0,description:"OTP to verify"})}),f1({email:pC({}).meta({description:"Email address to verify"}),otp:pC().meta({required:!0,description:"OTP to verify"})}),f1({email:pC({}).meta({description:"Email address to sign in"}),otp:pC().meta({required:!0,description:"OTP sent to the email"})}),f1({email:pC().meta({description:"Email address to send the OTP"})}),f1({email:pC().meta({description:"Email address to reset the password"}),otp:pC().meta({description:"OTP sent to the email"}),password:pC().meta({description:"New password"})});var bc=id;(0,bc.i)({INVALID_OAUTH_CONFIGURATION:"Invalid OAuth configuration",TOKEN_URL_NOT_FOUND:"Invalid OAuth configuration. Token URL not found.",PROVIDER_CONFIG_NOT_FOUND:"No config found for provider",PROVIDER_ID_REQUIRED:"Provider ID is required",INVALID_OAUTH_CONFIG:"Invalid OAuth configuration.",SESSION_REQUIRED:"Session is required"});var yp=ip;f1({providerId:pC().meta({description:"The provider ID for the OAuth provider"}),callbackURL:pC().meta({description:"The URL to redirect to after sign in"}).optional(),errorCallbackURL:pC().meta({description:"The URL to redirect to if an error occurs"}).optional(),newUserCallbackURL:pC().meta({description:'The URL to redirect to after login if the user is new. Eg: "/welcome"'}).optional(),disableRedirect:fO().meta({description:"Disable redirect"}).optional(),scopes:fQ(pC()).meta({description:"Scopes to be passed to the provider authorization request."}).optional(),requestSignUp:fO().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider. Eg: false"}).optional(),additionalData:ho(pC(),fZ()).optional()}),f1({code:pC().meta({description:"The OAuth2 code"}).optional(),error:pC().meta({description:"The error message, if any"}).optional(),error_description:pC().meta({description:"The error description, if any"}).optional(),state:pC().meta({description:"The state parameter from the OAuth2 request"}).optional()}),f1({providerId:pC(),callbackURL:pC(),scopes:fQ(pC()).meta({description:"Additional scopes to request when linking the account"}).optional(),errorCallbackURL:pC().meta({description:"The URL to redirect to if there is an error during the link process"}).optional()});var bc=id;(0,bc.i)({PASSWORD_COMPROMISED:"The password you entered has been compromised. Please choose a different password."});var ih=ip;f1({payload:ho(pC(),fZ()),overrideOptions:ho(pC(),fZ()).optional()}),f1({token:pC(),issuer:pC().optional()}),f1({email:pD().meta({description:"Email address to send the magic link"}),name:pC().meta({description:'User display name. Only used if the user is registering for the first time. Eg: "my-name"'}).optional(),callbackURL:pC().meta({description:"URL to redirect after magic link verification"}).optional(),newUserCallbackURL:pC().meta({description:"URL to redirect after new user signup. Only used if the user is registering for the first time."}).optional(),errorCallbackURL:pC().meta({description:"URL to redirect after error."}).optional()}),f1({token:pC().meta({description:"Verification token"}),callbackURL:pC().meta({description:'URL to redirect after magic link verification, if not provided the user will be redirected to the root URL. Eg: "/dashboard"'}).optional(),errorCallbackURL:pC().meta({description:"URL to redirect after error."}).optional(),newUserCallbackURL:pC().meta({description:"URL to redirect after new user signup. Only used if the user is registering for the first time."}).optional()}),f1({clientId:pC(),clientSecret:pC().optional(),type:hf(["web","native","user-agent-based","public"]),name:pC(),icon:pC().optional(),metadata:pC().optional(),disabled:fO().optional().default(!1),redirectUrls:pC(),userId:pC().optional(),createdAt:fJ(),updatedAt:fJ()}),f1({accept:fO(),consent_code:pC().optional().nullish()}),ho(fZ(),fZ()),f1({redirect_uris:fQ(pC()).meta({description:'A list of redirect URIs. Eg: ["https://client.example.com/callback"]'}),token_endpoint_auth_method:hf(["none","client_secret_basic","client_secret_post"]).meta({description:'The authentication method for the token endpoint. Eg: "client_secret_basic"'}).default("client_secret_basic").optional(),grant_types:fQ(hf(["authorization_code","implicit","password","client_credentials","refresh_token","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])).meta({description:'The grant types supported by the application. Eg: ["authorization_code"]'}).default(["authorization_code"]).optional(),response_types:fQ(hf(["code","token"])).meta({description:'The response types supported by the application. Eg: ["code"]'}).default(["code"]).optional(),client_name:pC().meta({description:'The name of the application. Eg: "My App"'}).optional(),client_uri:pC().meta({description:'The URI of the application. Eg: "https://client.example.com"'}).optional(),logo_uri:pC().meta({description:'The URI of the application logo. Eg: "https://client.example.com/logo.png"'}).optional(),scope:pC().meta({description:'The scopes supported by the application. Separated by spaces. Eg: "profile email"'}).optional(),contacts:fQ(pC()).meta({description:'The contact information for the application. Eg: ["admin@example.com"]'}).optional(),tos_uri:pC().meta({description:'The URI of the application terms of service. Eg: "https://client.example.com/tos"'}).optional(),policy_uri:pC().meta({description:'The URI of the application privacy policy. Eg: "https://client.example.com/policy"'}).optional(),jwks_uri:pC().meta({description:'The URI of the application JWKS. Eg: "https://client.example.com/jwks"'}).optional(),jwks:ho(fZ(),fZ()).meta({description:'The JWKS of the application. Eg: {"keys": [{"kty": "RSA", "alg": "RS256", "use": "sig", "n": "...", "e": "..."}]}'}).optional(),metadata:ho(fZ(),fZ()).meta({description:'The metadata of the application. Eg: {"key": "value"}'}).optional(),software_id:pC().meta({description:'The software ID of the application. Eg: "my-software"'}).optional(),software_version:pC().meta({description:'The software version of the application. Eg: "1.0.0"'}).optional(),software_statement:pC().meta({description:"The software statement of the application."}).optional()});var yi=iu;f1({redirect_uris:fQ(pC()),token_endpoint_auth_method:hf(["none","client_secret_basic","client_secret_post"]).default("client_secret_basic").optional(),grant_types:fQ(hf(["authorization_code","implicit","password","client_credentials","refresh_token","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])).default(["authorization_code"]).optional(),response_types:fQ(hf(["code","token"])).default(["code"]).optional(),client_name:pC().optional(),client_uri:pC().optional(),logo_uri:pC().optional(),scope:pC().optional(),contacts:fQ(pC()).optional(),tos_uri:pC().optional(),policy_uri:pC().optional(),jwks_uri:pC().optional(),jwks:ho(pC(),fZ()).optional(),metadata:ho(fZ(),fZ()).optional(),software_id:pC().optional(),software_version:pC().optional(),software_statement:pC().optional()}),ho(fZ(),fZ());var bc=id;(0,bc.i)({INVALID_SESSION_TOKEN:"Invalid session token"}),f1({sessionToken:pC().meta({description:"The session token to set as active"})}),f1({sessionToken:pC().meta({description:"The session token to revoke"})});var yn=iu;f1({callbackURL:pC().meta({description:"The URL to redirect to after the proxy"}),cookies:pC().meta({description:"The cookies to set after the proxy"})}),f1({idToken:pC().meta({description:"Google ID token, which the client obtains from the One Tap API"})}),f1({token:pC().meta({description:'The token to verify. Eg: "some-token"'})});var ih=ip;let bU=bo({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]});bU.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"],ac:["create","read","update","delete"]}),bU.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]}),bU.newRole({organization:[],member:[],invitation:[],team:[],ac:["read"]}),m9(async()=>({})),m9({use:[ym]},async e=>({session:e.context.session}));var bc=id;(0,bc.i)({YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION:"You are not allowed to create a new organization",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS:"You have reached the maximum number of organizations",ORGANIZATION_ALREADY_EXISTS:"Organization already exists",ORGANIZATION_SLUG_ALREADY_TAKEN:"Organization slug already taken",ORGANIZATION_NOT_FOUND:"Organization not found",USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION:"User is not a member of the organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION:"You are not allowed to update this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION:"You are not allowed to delete this organization",NO_ACTIVE_ORGANIZATION:"No active organization",USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION:"User is already a member of this organization",MEMBER_NOT_FOUND:"Member not found",ROLE_NOT_FOUND:"Role not found",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM:"You are not allowed to create a new team",TEAM_ALREADY_EXISTS:"Team already exists",TEAM_NOT_FOUND:"Team not found",YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER:"You cannot leave the organization as the only owner",YOU_CANNOT_LEAVE_THE_ORGANIZATION_WITHOUT_AN_OWNER:"You cannot leave the organization without an owner",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER:"You are not allowed to delete this member",YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION:"You are not allowed to invite users to this organization",USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION:"User is already invited to this organization",INVITATION_NOT_FOUND:"Invitation not found",YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION:"You are not the recipient of the invitation",EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION:"Email verification required before accepting or rejecting invitation",YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION:"You are not allowed to cancel this invitation",INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION:"Inviter is no longer a member of the organization",YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE:"You are not allowed to invite a user with this role",FAILED_TO_RETRIEVE_INVITATION:"Failed to retrieve invitation",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS:"You have reached the maximum number of teams",UNABLE_TO_REMOVE_LAST_TEAM:"Unable to remove last team",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER:"You are not allowed to update this member",ORGANIZATION_MEMBERSHIP_LIMIT_REACHED:"Organization membership limit reached",YOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to create teams in this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to delete teams in this organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM:"You are not allowed to update this team",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_TEAM:"You are not allowed to delete this team",INVITATION_LIMIT_REACHED:"Invitation limit reached",TEAM_MEMBER_LIMIT_REACHED:"Team member limit reached",USER_IS_NOT_A_MEMBER_OF_THE_TEAM:"User is not a member of the team",YOU_CAN_NOT_ACCESS_THE_MEMBERS_OF_THIS_TEAM:"You are not allowed to list the members of this team",YOU_DO_NOT_HAVE_AN_ACTIVE_TEAM:"You do not have an active team",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM_MEMBER:"You are not allowed to create a new member",YOU_ARE_NOT_ALLOWED_TO_REMOVE_A_TEAM_MEMBER:"You are not allowed to remove a team member",YOU_ARE_NOT_ALLOWED_TO_ACCESS_THIS_ORGANIZATION:"You are not allowed to access this organization as an owner",YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION:"You are not a member of this organization",MISSING_AC_INSTANCE:"Dynamic Access Control requires a pre-defined ac instance on the server auth plugin. Read server logs for more information",YOU_MUST_BE_IN_AN_ORGANIZATION_TO_CREATE_A_ROLE:"You must be in an organization to create a role",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE:"You are not allowed to create a role",YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE:"You are not allowed to update a role",YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE:"You are not allowed to delete a role",YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE:"You are not allowed to read a role",YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE:"You are not allowed to list a role",YOU_ARE_NOT_ALLOWED_TO_GET_A_ROLE:"You are not allowed to get a role",TOO_MANY_ROLES:"This organization has too many roles",INVALID_RESOURCE:"The provided permission includes an invalid resource",ROLE_NAME_IS_ALREADY_TAKEN:"That role name is already taken",CANNOT_DELETE_A_PRE_DEFINED_ROLE:"Cannot delete a pre-defined role"}),f1({organizationId:pC().optional().meta({description:"The id of the organization to create the role in. If not provided, the user's active organization will be used."}),role:pC().meta({description:"The name of the role to create"}),permission:ho(pC(),fQ(pC())).meta({description:"The permission to assign to the role"})}),f1({organizationId:pC().optional().meta({description:"The id of the organization to create the role in. If not provided, the user's active organization will be used."})}).and(f3([f1({roleName:pC().nonempty().meta({description:"The name of the role to delete"})}),f1({roleId:pC().nonempty().meta({description:"The id of the role to delete"})})])),f1({organizationId:pC().optional().meta({description:"The id of the organization to list roles for. If not provided, the user's active organization will be used."})}).optional(),f1({organizationId:pC().optional().meta({description:"The id of the organization to read a role for. If not provided, the user's active organization will be used."})}).and(f3([f1({roleName:pC().nonempty().meta({description:"The name of the role to read"})}),f1({roleId:pC().nonempty().meta({description:"The id of the role to read"})})])).optional(),f3([f1({roleName:pC().nonempty().meta({description:"The name of the role to update"})}),f1({roleId:pC().nonempty().meta({description:"The id of the role to update"})})]);var yp=ip;f1({email:pC().meta({description:"The email address of the user to invite"}),role:f3([pC().meta({description:"The role to assign to the user"}),fQ(pC().meta({description:"The roles to assign to the user"}))]).meta({description:'The role(s) to assign to the user. It can be `admin`, `member`, owner. Eg: "member"'}),organizationId:pC().meta({description:"The organization ID to invite the user to"}).optional(),resend:fO().meta({description:"Resend the invitation email, if the user is already invited. Eg: true"}).optional(),teamId:f3([pC().meta({description:"The team ID to invite the user to"}).optional(),fQ(pC()).meta({description:"The team IDs to invite the user to"}).optional()])}),f1({invitationId:pC().meta({description:"The ID of the invitation to accept"})}),f1({invitationId:pC().meta({description:"The ID of the invitation to reject"})}),f1({invitationId:pC().meta({description:"The ID of the invitation to cancel"})}),f1({id:pC().meta({description:"The ID of the invitation to get"})}),f1({organizationId:pC().meta({description:"The ID of the organization to list invitations for"}).optional()}).optional();var yp=ip,mb=mb;f1({userId:mb.string().meta({description:'The user Id which represents the user to be added as a member. If `null` is provided, then it\'s expected to provide session headers. Eg: "user-id"'}),role:f3([pC(),fQ(pC())]).meta({description:'The role(s) to assign to the new member. Eg: ["admin", "sale"]'}),organizationId:pC().meta({description:'An optional organization ID to pass. If not provided, will default to the user\'s active organization. Eg: "org-id"'}).optional(),teamId:pC().meta({description:'An optional team ID to add the member to. Eg: "team-id"'}).optional()}),f1({memberIdOrEmail:pC().meta({description:"The ID or email of the member to remove"}),organizationId:pC().meta({description:'The ID of the organization to remove the member from. If not provided, the active organization will be used. Eg: "org-id"'}).optional()}),f1({role:f3([pC(),fQ(pC())]).meta({description:'The new role to be applied. This can be a string or array of strings representing the roles. Eg: ["admin", "sale"]'}),memberId:pC().meta({description:'The member id to apply the role update to. Eg: "member-id"'}),organizationId:pC().meta({description:'An optional organization ID which the member is a part of to apply the role update. If not provided, you must provide session headers to get the active organization. Eg: "organization-id"'}).optional()}),f1({organizationId:pC().meta({description:'The organization Id for the member to leave. Eg: "organization-id"'})}),f1({userId:pC().meta({description:"The user ID to get the role for. If not provided, will default to the current user's"}).optional(),organizationId:pC().meta({description:'The organization ID to list members for. If not provided, will default to the user\'s active organization. Eg: "organization-id"'}).optional(),organizationSlug:pC().meta({description:'The organization slug to list members for. If not provided, will default to the user\'s active organization. Eg: "organization-slug"'}).optional()}).optional();var mb=mb;f1({name:pC().min(1).meta({description:"The name of the organization"}),slug:pC().min(1).meta({description:"The slug of the organization"}),userId:mb.string().meta({description:'The user id of the organization creator. If not provided, the current user will be used. Should only be used by admins or when called by the server. server-only. Eg: "user-id"'}).optional(),logo:pC().meta({description:"The logo of the organization"}).optional(),metadata:ho(pC(),fZ()).meta({description:"The metadata of the organization"}).optional(),keepCurrentActiveOrganization:fO().meta({description:"Whether to keep the current active organization active after creating a new one. Eg: true"}).optional()}),f1({slug:pC().meta({description:'The organization slug to check. Eg: "my-org"'})}),f1({name:pC().min(1).meta({description:"The name of the organization"}).optional(),slug:pC().min(1).meta({description:"The slug of the organization"}).optional(),logo:pC().meta({description:"The logo of the organization"}).optional(),metadata:ho(pC(),fZ()).meta({description:"The metadata of the organization"}).optional()}),f1({organizationId:pC().meta({description:"The organization id to delete"})}),hE(f1({organizationId:pC().meta({description:"The organization id to get"}).optional(),organizationSlug:pC().meta({description:"The organization slug to get"}).optional(),membersLimit:f_().or(pC().transform(e=>parseInt(e))).meta({description:"The limit of members to get. By default, it uses the membershipLimit option which defaults to 100."}).optional()})),f1({organizationId:pC().meta({description:'The organization id to set as active. It can be null to unset the active organization. Eg: "org-id"'}).nullable().optional(),organizationSlug:pC().meta({description:'The organization slug to set as active. It can be null to unset the active organization if organizationId is not provided. Eg: "org-slug"'}).optional()});var m4=id,mb=mb;let bC=pC(),bP=hf(["pending","accepted","rejected","canceled"]).default("pending");f1({id:pC().default(m4.r),name:pC(),slug:pC(),logo:pC().nullish().optional(),metadata:ho(pC(),fH()).or(pC().transform(e=>JSON.parse(e))).optional(),createdAt:fJ()}),f1({id:pC().default(m4.r),organizationId:pC(),userId:mb.string(),role:bC,createdAt:fJ().default(()=>new Date)}),f1({id:pC().default(m4.r),organizationId:pC(),email:pC(),role:bC,status:bP,teamId:pC().nullish(),inviterId:pC(),expiresAt:fJ(),createdAt:fJ().default(()=>new Date)}),f1({id:pC().default(m4.r),name:pC().min(1),organizationId:pC(),createdAt:fJ(),updatedAt:fJ().optional()}),f1({id:pC().default(m4.r),teamId:pC(),userId:pC(),createdAt:fJ().default(()=>new Date)}),f1({id:pC().default(m4.r),organizationId:pC(),role:pC(),permission:ho(pC(),fQ(pC())),createdAt:fJ().default(()=>new Date),updatedAt:fJ().optional()});let bN=["admin","member","owner"];f3([hf(bN),fQ(hf(bN))]);var mb=mb;f1({name:pC().meta({description:'The name of the team. Eg: "my-team"'}),organizationId:pC().meta({description:'The organization ID which the team will be created in. Defaults to the active organization. Eg: "organization-id"'}).optional()}),f1({teamId:pC().meta({description:'The team ID of the team to remove. Eg: "team-id"'}),organizationId:pC().meta({description:'The organization ID which the team falls under. If not provided, it will default to the user\'s active organization. Eg: "organization-id"'}).optional()}),hE(f1({organizationId:pC().meta({description:'The organization ID which the teams are under to list. Defaults to the users active organization. Eg: "organization-id"'}).optional()})),f1({teamId:pC().meta({description:"The team id to set as active. It can be null to unset the active team"}).nullable().optional()}),hE(f1({teamId:pC().optional().meta({description:"The team whose members we should return. If this is not provided the members of the current active team get returned."})})),f1({teamId:pC().meta({description:"The team the user should be a member of."}),userId:mb.string().meta({description:"The user Id which represents the user to be added as a member."})}),f1({teamId:pC().meta({description:"The team the user should be removed from."}),userId:mb.string().meta({description:"The user which should be removed from the team."})}),f1({organizationId:pC().optional()}).and(f3([f1({permission:ho(pC(),fQ(pC())),permissions:fj()}),f1({permission:fj(),permissions:ho(pC(),fQ(pC()))})]));var bc=id;(0,bc.i)({INVALID_PHONE_NUMBER:"Invalid phone number",PHONE_NUMBER_EXIST:"Phone number already exists",PHONE_NUMBER_NOT_EXIST:"phone number isn't registered",INVALID_PHONE_NUMBER_OR_PASSWORD:"Invalid phone number or password",UNEXPECTED_ERROR:"Unexpected error",OTP_NOT_FOUND:"OTP not found",OTP_EXPIRED:"OTP expired",INVALID_OTP:"Invalid OTP",PHONE_NUMBER_NOT_VERIFIED:"Phone number not verified",PHONE_NUMBER_CANNOT_BE_UPDATED:"Phone number cannot be updated",SEND_OTP_NOT_IMPLEMENTED:"sendOTP not implemented",TOO_MANY_ATTEMPTS:"Too many attempts"});var yp=ip;f1({phoneNumber:pC().meta({description:'Phone number to sign in. Eg: "+1234567890"'}),password:pC().meta({description:"Password to use for sign in."}),rememberMe:fO().meta({description:"Remember the session. Eg: true"}).optional()}),f1({phoneNumber:pC().meta({description:'Phone number to send OTP. Eg: "+1234567890"'})}),f1({phoneNumber:pC().meta({description:'Phone number to verify. Eg: "+1234567890"'}),code:pC().meta({description:'OTP code. Eg: "123456"'}),disableSession:fO().meta({description:"Disable session creation after verification. Eg: false"}).optional(),updatePhoneNumber:fO().meta({description:"Check if there is a session and update the phone number. Eg: true"}).optional()}),f1({phoneNumber:pC()}),f1({otp:pC().meta({description:'The one time password to reset the password. Eg: "123456"'}),phoneNumber:pC().meta({description:'The phone number to the account which intends to reset the password for. Eg: "+1234567890"'}),newPassword:pC().meta({description:'The new password. Eg: "new-and-secure-password"'})});let bD=BigInt(0),bL=BigInt(1),bj=BigInt(2),bz=BigInt(7),bM=BigInt(256),bB=BigInt(113),bZ=[],bF=[],bH=[];for(let e=0,t=bL,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],bZ.push(2*(5*n+r)),bF.push((e+1)*(e+2)/2%64);let i=bD;for(let e=0;e<7;e++)(t=(t<<bL^(t>>bz)*bB)%bM)&bj&&(i^=bL<<(bL<<BigInt(e))-bL);bH.push(i)}let bq=rp(bH,!0),bV=bq[0],bW=bq[1];f1({walletAddress:pC().regex(/^0[xX][a-fA-F0-9]{40}$/i).length(42),chainId:f_().int().positive().max(0x7fffffff).optional().default(1)});var bc=id;(0,bc.i)({OTP_NOT_ENABLED:"OTP not enabled",OTP_HAS_EXPIRED:"OTP has expired",TOTP_NOT_ENABLED:"TOTP not enabled",TWO_FACTOR_NOT_ENABLED:"Two factor isn't enabled",BACKUP_CODES_NOT_ENABLED:"Backup codes aren't enabled",INVALID_BACKUP_CODE:"Invalid backup code",INVALID_CODE:"Invalid code",TOO_MANY_ATTEMPTS_REQUEST_NEW_CODE:"Too many attempts. Please request a new code.",INVALID_TWO_FACTOR_COOKIE:"Invalid two factor cookie"});var go=id,mb=mb;f1({code:pC().meta({description:'A backup code to verify. Eg: "123456"'}),disableSession:fO().meta({description:"If true, the session cookie will not be set."}).optional(),trustDevice:fO().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"}).optional()}),f1({userId:mb.string().meta({description:'The user ID to view all backup codes. Eg: "user-id"'})}),f1({password:pC().meta({description:"The users password."})});var yp=ip;f1({code:pC().meta({description:'The otp code to verify. Eg: "012345"'}),trustDevice:fO().optional().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"})}),f1({trustDevice:fO().optional().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"})}).optional();var yp=ip;f1({secret:pC().meta({description:"The secret to generate the TOTP code"})}),f1({password:pC().meta({description:"User password"})}),f1({code:pC().meta({description:'The otp code to verify. Eg: "012345"'}),trustDevice:fO().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"}).optional()});var yp=ip;f1({password:pC().meta({description:"User password"}),issuer:pC().meta({description:"Custom issuer for the TOTP URI"}).optional()}),f1({password:pC().meta({description:"User password"})});var bc=id;(0,bc.i)({INVALID_USERNAME_OR_PASSWORD:"Invalid username or password",EMAIL_NOT_VERIFIED:"Email not verified",UNEXPECTED_ERROR:"Unexpected error",USERNAME_IS_ALREADY_TAKEN:"Username is already taken. Please try another.",USERNAME_TOO_SHORT:"Username is too short",USERNAME_TOO_LONG:"Username is too long",INVALID_USERNAME:"Username is invalid",INVALID_DISPLAY_USERNAME:"Display username is invalid"});var yp=ip;f1({username:pC().meta({description:"The username of the user"}),password:pC().meta({description:"The password of the user"}),rememberMe:fO().meta({description:"Remember the user session"}).optional(),callbackURL:pC().meta({description:"The URL to redirect to after email verification"}).optional()}),f1({username:pC().meta({description:"The username to check"})});var ih=ip,bK=e.i(463021);let bG=globalThis.prisma_fox??new bK.PrismaClient({log:["error"]}).$extends({query:{$allModels:{async $allOperations({operation:e,model:t,args:r,query:n}){let i=performance.now(),o=await n(r),a=performance.now();return a-i>1e3&&console.warn(`Slow query: ${t}.${e} took ${(a-i).toFixed(2)}ms`),o}}}}),bJ=((e,t)=>{let r=t(e),{api:n}=vL(r,e);return{handler:async t=>{let n=await r,i=n.options.basePath||"/api/auth";if(!n.options.baseURL){let e=vM(void 0,i,t,void 0,n.options.advanced?.trustedProxyHeaders);if(e)n.baseURL=e,n.options.baseURL=vB(n.baseURL)||void 0;else throw new ih.t("Could not get base URL from request. Please provide a valid base URL.")}n.trustedOrigins=await vV(n.options,t);let{handler:o}=((e,t)=>{let{api:r,middlewares:n}=vL(e,t),i=new URL(e.baseURL).pathname;return((e,t)=>{if(!t?.openapi?.disabled){let r={path:"/api/reference",...t?.openapi};e.openapi=mB(r.path,{method:"GET"},async t=>{let n,i;return new Response((n=await mW(e),i=r.scalar,`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(n)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${i?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(i.logo)}`:void 0} ,
	   	theme: ${i?.theme||"saturn"},
        metaData: {
			title: ${i?.title||"Open API Reference"},
			description: ${i?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`),{headers:{"Content-Type":"text/html"}})})}let r=mG(),n=mG();for(let t of Object.values(e))if(!(!t.options||!t.path||t.options?.metadata?.SERVER_ONLY))for(let e of Array.isArray(t.options?.method)?t.options.method:[t.options?.method])mQ(r,e,t.path,t);if(t?.routerMiddleware?.length)for(let{path:e,middleware:r}of t.routerMiddleware)mQ(n,"*",e,r);let i=async e=>{let i=new URL(e.url),o=i.pathname,a=t?.basePath&&"/"!==t.basePath?o.split(t.basePath).reduce((e,r,n)=>(0!==n&&(n>1?e.push(`${t.basePath}${r}`):e.push(r)),e),[]).join(""):i.pathname;if(!a?.length||/\/{2,}/.test(a))return new Response(null,{status:404,statusText:"Not Found"});let s=function(e,t="",r,n){47===r.charCodeAt(r.length-1)&&(r=r.slice(0,-1));let i=e.static[r];if(i&&i.methods){let e=i.methods[t]||i.methods[""];if(void 0!==e)return e[0]}let o=mJ(r),a=function e(t,r,n,i,o){if(o===i.length){if(r.methods){let e=r.methods[n]||r.methods[""];if(e)return e}if(r.param&&r.param.methods){let e=r.param.methods[n]||r.param.methods[""];if(e){let t=e[0].paramsMap;if(t?.[t?.length-1]?.[2])return e}}if(r.wildcard&&r.wildcard.methods){let e=r.wildcard.methods[n]||r.wildcard.methods[""];if(e){let t=e[0].paramsMap;if(t?.[t?.length-1]?.[2])return e}}return}let a=i[o];if(r.static){let s=r.static[a];if(s){let r=e(t,s,n,i,o+1);if(r)return r}}if(r.param){let s=e(t,r.param,n,i,o+1);if(s){if(r.param.hasRegexParam){let e=s.find(e=>e.paramsRegexp[o]?.test(a))||s.find(e=>!e.paramsRegexp[o]);return e?[e]:void 0}return s}}if(r.wildcard&&r.wildcard.methods)return r.wildcard.methods[n]||r.wildcard.methods[""]}(e,e.root,t,o,0)?.[0];if(void 0!==a)return{data:a.data,params:a.paramsMap?mY(o,a.paramsMap):void 0}}(r,e.method,a);if(a.endsWith("/")!==s?.data?.path?.endsWith("/")&&!t?.skipTrailingSlashes||!s?.data)return new Response(null,{status:404,statusText:"Not Found"});let l={};i.searchParams.forEach((e,t)=>{t in l?Array.isArray(l[t])?l[t].push(e):l[t]=[l[t],e]:l[t]=e});let c=s.data;try{let r=c.options.metadata?.allowedMediaTypes||t?.allowedMediaTypes,i={path:a,method:e.method,headers:e.headers,params:s.params?JSON.parse(JSON.stringify(s.params)):{},request:e,body:c.options.disableBody?void 0:await mA(c.options.cloneRequest?e.clone():e,r),query:l,_flag:"router",asResponse:!0,context:t?.routerContext},o=function(e,t="",r,n){47===r.charCodeAt(r.length-1)&&(r=r.slice(0,-1));let i=mJ(r);return(function e(t,r,n,i,o,a=[]){let s=i[o];if(r.wildcard&&r.wildcard.methods){let e=r.wildcard.methods[n]||r.wildcard.methods[""];e&&a.push(...e)}if(r.param&&(e(t,r.param,n,i,o+1,a),o===i.length&&r.param.methods)){let e=r.param.methods[n]||r.param.methods[""];if(e){let t=e[0].paramsMap;t?.[t?.length-1]?.[2]&&a.push(...e)}}let l=r.static?.[s];if(l&&e(t,l,n,i,o+1,a),o===i.length&&r.methods){let e=r.methods[n]||r.methods[""];e&&a.push(...e)}return a})(e,e.root,t,i,0).map(e=>({data:e.data,params:e.paramsMap?mY(i,e.paramsMap):void 0}))}(n,"*",a);if(o?.length)for(let{data:e,params:t}of o){let r=await e({...i,params:t,asResponse:!1});if(r instanceof Response)return r}return await c(i)}catch(e){if(t?.onError)try{let r=await t.onError(e);if(r instanceof Response)return mO(r)}catch(e){if(mI(e))return mO(e);throw e}if(t?.throwError)throw e;if(mI(e))return mO(e);return console.error("# SERVER_ERROR: ",e),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async e=>{let r=await t?.onRequest?.(e);if(r instanceof Response)return r;let n=await i(r instanceof Request?r:e),o=await t?.onResponse?.(n);return o instanceof Response?o:n},endpoints:e}})(r,{routerContext:e,openapi:{disabled:!0},basePath:i,routerMiddleware:[{path:"/**",middleware:ge},...n],allowedMediaTypes:["application/json"],async onRequest(t){let r=e.options.disabledPaths||[],n=new URL(t.url).pathname.replace(/\/+$/,"")||"/",o="/"===i?n:n.startsWith(i)?n.slice(i.length).replace(/\/+$/,"")||"/":n;if(r.includes(o))return new Response("Not Found",{status:404});for(let r of e.options.plugins||[])if(r.onRequest){let n=await r.onRequest(t,e);if(n&&"response"in n)return n.response;if(n&&"request"in n){let t=await gs(n.request,e);if(t)return t;return n.request}}return gs(t,e)},async onResponse(t){for(let r of e.options.plugins||[])if(r.onResponse){let n=await r.onResponse(t,e);if(n)return n.response}return t},onError(r){if(r instanceof mS&&"FOUND"===r.status)return;if(t.onAPIError?.throw)throw r;if(t.onAPIError?.onError)return void t.onAPIError.onError(r,e);let n=t.logger?.level,i="error"===n||"warn"===n||"debug"===n?gP.logger:void 0;if(t.logger?.disabled!==!0){if(r&&"object"==typeof r&&"message"in r&&"string"==typeof r.message&&(r.message.includes("no column")||r.message.includes("column")||r.message.includes("relation")||r.message.includes("table")||r.message.includes("does not exist")))return void e.logger?.error(r.message);r instanceof mS?("INTERNAL_SERVER_ERROR"===r.status&&e.logger.error(r.status,r),i?.error(r.message)):e.logger?.error(r&&"object"==typeof r&&"name"in r?r.name:"",r)}}})})(n,e);return tB(n.adapter,()=>o(t))},api:n,options:e,$context:r,$ERROR_CODES:{...e.plugins?.reduce((e,t)=>t.$ERROR_CODES?{...e,...t.$ERROR_CODES}:e,{}),...yp.n}}})({database:(es={provider:"postgresql"},p=null,f=e=>({getFieldName:t,getModelName:r,getFieldAttributes:n,getDefaultModelName:i,schema:o})=>{let a=(e,n,a)=>{if(!e&&!a)return;let l={};if(e)for(let r of e)l[t({model:n,field:r})]=!0;if(a){if(!e){let e=o[i(n)]?.fields||{};for(let r of(e.id={type:"string"},Object.keys(e)))l[t({model:n,field:r})]=!0}for(let[e,t]of Object.entries(a)){let i=s(n,r(e),o);"one-to-one"===t.relation?l[i]=!0:l[i]={take:t.limit}}}return l},s=(e,t,n)=>{try{let o=i(e),a=i(t),s=r(t).toLowerCase(),l=Object.entries(n[a]?.fields||{}).filter(([e,t])=>t.references&&i(t.references.model)===o);if(l.length>0){let[e,t]=l[0];return t?.unique===!0||!0===es.usePlural?s:`${s}s`}if((l=Object.entries(n[o]?.fields||{}).filter(([e,t])=>t.references&&i(t.references.model)===a)).length>0)return s}catch{}return`${r(t).toLowerCase()}s`};function l(e){switch(e){case"starts_with":return"startsWith";case"ends_with":return"endsWith";case"ne":return"not";case"not_in":return"notIn";default:return e}}let c=({action:e,model:r,where:n})=>{if(!n||!n.length)return{};let i=e=>{let n=t({model:r,field:e.field});if("ne"===e.operator&&null===e.value)return{};if(("in"===e.operator||"not_in"===e.operator)&&Array.isArray(e.value)){let t=e.value.filter(e=>null!=e);if(0===t.length)if("in"===e.operator)return{AND:[{[n]:{equals:"__never__"}},{[n]:{not:"__never__"}}]};else return{};return{[n]:{[l(e.operator)]:t}}}return"eq"!==e.operator&&e.operator?{[n]:{[l(e.operator)]:e.value}}:{[n]:e.value}};if("delete"===e){let e=n.find(e=>"id"===e.field);if(e){let o=t({model:r,field:"id"}),a=i(e),s=n.filter(e=>"id"!==e.field);if(0===s.length)return a;let l=s.filter(e=>"AND"===e.connector||!e.connector),c=s.filter(e=>"OR"===e.connector),u=l.map(e=>i(e)),d=c.map(e=>i(e)),p={};return o in a?p[o]=a[o]:Object.assign(p,a),u.length>0&&(p.AND=u),d.length>0&&(p.OR=d),p}}if(1===n.length){let e=n[0];if(!e)return;return i(e)}let o=n.filter(e=>"AND"===e.connector||!e.connector),a=n.filter(e=>"OR"===e.connector),s=o.map(e=>i(e)),c=a.map(e=>i(e));return{...s.length?{AND:s}:{},...c.length?{OR:c}:{}}};return{async create({model:t,data:r,select:n}){if(!e[t])throw new ih.t(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await e[t].create({data:r,select:a(n,t)})},async findOne({model:t,where:n,select:i,join:l}){let u=c({model:t,where:n,action:"findOne"});if(!e[t])throw new ih.t(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let d=new Map;for(let e of Object.keys(l??{})){let n=s(t,e,o);d.set(n,r(e))}let p=a(i,t,l),f=await e[t].findFirst({where:u,select:p});if(l&&f)for(let[e,t]of d.entries())e!==t&&e in f&&(f[t]=f[e],delete f[e]);return f},async findMany({model:n,where:i,limit:l,offset:u,sortBy:d,join:p}){let f=c({model:n,where:i,action:"findMany"});if(!e[n])throw new ih.t(`Model ${n} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let h=new Map;if(p)for(let[e,t]of Object.entries(p)){let t=s(n,e,o);h.set(t,r(e))}let m=a(void 0,n,p),g=await e[n].findMany({where:f,take:l||100,skip:u||0,...d?.field?{orderBy:{[t({model:n,field:d.field})]:"desc"===d.direction?"desc":"asc"}}:{},select:m});if(p&&Array.isArray(g))for(let e of g)for(let[t,r]of h.entries())t!==r&&t in e&&(e[r]=e[t],delete e[t]);return g},async count({model:t,where:r}){let n=c({model:t,where:r,action:"count"});if(!e[t])throw new ih.t(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await e[t].count({where:n})},async update({model:t,where:r,update:n}){if(!e[t])throw new ih.t(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let i=c({model:t,where:r,action:"update"});return await e[t].update({where:i,data:n})},async updateMany({model:t,where:r,update:n}){if(!e[t])throw new ih.t(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let i=c({model:t,where:r,action:"updateMany"}),o=await e[t].updateMany({where:i,data:n});return o?o.count:0},async delete({model:t,where:r}){if(!e[t])throw new ih.t(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let n=c({model:t,where:r,action:"delete"});try{await e[t].delete({where:n})}catch(e){if(e?.meta?.cause==="Record to delete does not exist.")return;console.log(e)}},async deleteMany({model:t,where:r}){let n=c({model:t,where:r,action:"deleteMany"}),i=await e[t].deleteMany({where:n});return i?i.count:0},options:es}},h=null,h={config:{adapterId:"prisma",adapterName:"Prisma Adapter",usePlural:es.usePlural??!1,debugLogs:es.debugLogs??!1,supportsUUIDs:"postgresql"===es.provider,supportsArrays:"postgresql"===es.provider||"mongodb"===es.provider,transaction:!!es.transaction&&(e=>bG.$transaction(t=>e((0,gG.createAdapterFactory)({config:h.config,adapter:f(t)})(p))))},adapter:f(bG)},m=(0,gG.createAdapterFactory)(h),e=>(p=e,m(e))),emailAndPassword:{enabled:!0,disableSignUp:!0},socialProviders:{google:{enabled:!0,clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET},microsoft:{enabled:!0,clientId:process.env.MICROSOFT_CLIENT_ID,clientSecret:process.env.MICROSOFT_CLIENT_SECRET}},user:{additionalFields:{role:{type:"string",required:!1,defaultValue:"STUDENT"},institutionId:{type:"string",required:!1},onboardingCompleted:{type:"boolean",required:!1,defaultValue:!1,input:!1}}},plugins:[(e=>{let t={defaultRole:e?.defaultRole??"user",adminRoles:e?.adminRoles??["admin"],bannedUserMessage:e?.bannedUserMessage??"You have been banned from this application. Please contact support if you believe this is an error.",...e};if(e?.adminRoles){let t=(Array.isArray(e.adminRoles)?e.adminRoles:[...e.adminRoles.split(",")]).filter(t=>!Object.keys(e?.roles||bs).map(e=>e.toLowerCase()).includes(t.toLowerCase()));if(t.length>0)throw new ih.t(`Invalid admin roles: ${t.join(", ")}. Admin roles must be defined in the 'roles' configuration.`)}return{id:"admin",init:()=>({options:{databaseHooks:{user:{create:{before:async t=>({data:{role:e?.defaultRole??"user",...t}})}},session:{create:{async before(e,r){if(!r)return;let n=await r.context.internalAdapter.findUserById(e.userId);if(n.banned){if(n.banExpires&&new Date(n.banExpires).getTime()<Date.now())return void await r.context.internalAdapter.updateUser(e.userId,{banned:!1,banReason:null,banExpires:null});if(r&&(r.path.startsWith("/callback")||r.path.startsWith("/oauth2/callback"))){let e=r.context.options.onAPIError?.errorURL||`${r.context.baseURL}/error`;throw r.redirect(`${e}?error=banned&error_description=${t.bannedUserMessage}`)}throw new mS("FORBIDDEN",{message:t.bannedUserMessage,code:"BANNED_USER"})}}}}}}}),hooks:{after:[{matcher:e=>"/list-sessions"===e.path,handler:m9(async e=>{let t=await bl(e);if(!t)return;let r=t.filter(e=>!e.impersonatedBy);return e.json(r)})}]},endpoints:{setRole:m7("/admin/set-role",{method:"POST",body:bh,requireHeaders:!0,use:[bp],metadata:{openapi:{operationId:"setUserRole",summary:"Set the role of a user",description:"Set the role of a user",responses:{200:{description:"User role updated",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},async e=>{if(!bd({userId:e.context.session.user.id,role:e.context.session.user.role,options:t,permissions:{user:["set-role"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE});let r=t.roles;if(r){for(let t of Array.isArray(e.body.role)?e.body.role:[e.body.role])if(!r[t])throw new mS("BAD_REQUEST",{message:bu.YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE})}let n=await e.context.internalAdapter.updateUser(e.body.userId,{role:bf(e.body.role)});return e.json({user:n})}),getUser:m7("/admin/get-user",{method:"GET",query:bm,use:[bp],metadata:{openapi:{operationId:"getUser",summary:"Get an existing user",description:"Get an existing user",responses:{200:{description:"User",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async e=>{let{id:r}=e.query;if(!bd({userId:e.context.session.user.id,role:e.context.session.user.role,options:t,permissions:{user:["get"]}}))throw e.error("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_GET_USER,code:"YOU_ARE_NOT_ALLOWED_TO_GET_USER"});let n=await e.context.internalAdapter.findUserById(r);if(!n)throw new mS("NOT_FOUND",{message:yp.n.USER_NOT_FOUND});return gp(e.context.options,n)}),createUser:m7("/admin/create-user",{method:"POST",body:bg,metadata:{openapi:{operationId:"createUser",summary:"Create a new user",description:"Create a new user",responses:{200:{description:"User created",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},async e=>{let r=await yh(e);if(!r&&(e.request||e.headers))throw e.error("UNAUTHORIZED");if(r&&!bd({userId:r.user.id,role:r.user.role,options:t,permissions:{user:["create"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS});let n=e.body.email.toLowerCase();if(!pD().safeParse(n).success)throw new mS("BAD_REQUEST",{message:yp.n.INVALID_EMAIL});if(await e.context.internalAdapter.findUserByEmail(n))throw new mS("BAD_REQUEST",{message:bu.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let i=await e.context.internalAdapter.createUser({email:n,name:e.body.name,role:(e.body.role&&bf(e.body.role))??t?.defaultRole??"user",...e.body.data});if(!i)throw new mS("INTERNAL_SERVER_ERROR",{message:bu.FAILED_TO_CREATE_USER});let o=await e.context.password.hash(e.body.password);return await e.context.internalAdapter.linkAccount({accountId:i.id,providerId:"credential",password:o,userId:i.id}),e.json({user:i})}),adminUpdateUser:m7("/admin/update-user",{method:"POST",body:by,use:[bp],metadata:{openapi:{operationId:"updateUser",summary:"Update a user",description:"Update a user's details",responses:{200:{description:"User updated",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async e=>{if(!bd({userId:e.context.session.user.id,role:e.context.session.user.role,options:t,permissions:{user:["update"]}}))throw e.error("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS,code:"YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS"});if(0===Object.keys(e.body.data).length)throw new mS("BAD_REQUEST",{message:bu.NO_DATA_TO_UPDATE});if(Object.prototype.hasOwnProperty.call(e.body.data,"role")){if(!bd({userId:e.context.session.user.id,role:e.context.session.user.role,options:t,permissions:{user:["set-role"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE});let r=e.body.data.role,n=Array.isArray(r)?r:[r];for(let e of n){if("string"!=typeof e)throw new mS("BAD_REQUEST",{message:bu.INVALID_ROLE_TYPE});if(t.roles&&!t.roles[e])throw new mS("BAD_REQUEST",{message:bu.YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE})}e.body.data.role=bf(n)}let r=await e.context.internalAdapter.updateUser(e.body.userId,e.body.data);return e.json(r)}),listUsers:m7("/admin/list-users",{method:"GET",use:[bp],query:bv,metadata:{openapi:{operationId:"listUsers",summary:"List users",description:"List users",responses:{200:{description:"List of users",content:{"application/json":{schema:{type:"object",properties:{users:{type:"array",items:{$ref:"#/components/schemas/User"}},total:{type:"number"},limit:{type:"number"},offset:{type:"number"}},required:["users","total"]}}}}}}}},async e=>{let r=e.context.session;if(!bd({userId:e.context.session.user.id,role:r.user.role,options:t,permissions:{user:["list"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS});let n=[];e.query?.searchValue&&n.push({field:e.query.searchField||"email",operator:e.query.searchOperator||"contains",value:e.query.searchValue}),e.query?.filterValue&&n.push({field:e.query.filterField||"email",operator:e.query.filterOperator||"eq",value:e.query.filterValue});try{let t=await e.context.internalAdapter.listUsers(Number(e.query?.limit)||void 0,Number(e.query?.offset)||void 0,e.query?.sortBy?{field:e.query.sortBy,direction:e.query.sortDirection||"asc"}:void 0,n.length?n:void 0),r=await e.context.internalAdapter.countTotalUsers(n.length?n:void 0);return e.json({users:t,total:r,limit:Number(e.query?.limit)||void 0,offset:Number(e.query?.offset)||void 0})}catch{return e.json({users:[],total:0})}}),listUserSessions:m7("/admin/list-user-sessions",{method:"POST",use:[bp],body:bb,metadata:{openapi:{operationId:"listUserSessions",summary:"List user sessions",description:"List user sessions",responses:{200:{description:"List of user sessions",content:{"application/json":{schema:{type:"object",properties:{sessions:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}}}},async e=>{let r=e.context.session;if(!bd({userId:e.context.session.user.id,role:r.user.role,options:t,permissions:{session:["list"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS});return{sessions:await e.context.internalAdapter.listSessions(e.body.userId)}}),unbanUser:m7("/admin/unban-user",{method:"POST",body:bw,use:[bp],metadata:{openapi:{operationId:"unbanUser",summary:"Unban a user",description:"Unban a user",responses:{200:{description:"User unbanned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async e=>{let r=e.context.session;if(!bd({userId:e.context.session.user.id,role:r.user.role,options:t,permissions:{user:["ban"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});let n=await e.context.internalAdapter.updateUser(e.body.userId,{banned:!1,banExpires:null,banReason:null,updatedAt:new Date});return e.json({user:n})}),banUser:m7("/admin/ban-user",{method:"POST",body:b_,use:[bp],metadata:{openapi:{operationId:"banUser",summary:"Ban a user",description:"Ban a user",responses:{200:{description:"User banned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async e=>{let r=e.context.session;if(!bd({userId:e.context.session.user.id,role:r.user.role,options:t,permissions:{user:["ban"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});if(!await e.context.internalAdapter.findUserById(e.body.userId))throw new mS("NOT_FOUND",{message:yp.n.USER_NOT_FOUND});if(e.body.userId===e.context.session.user.id)throw new mS("BAD_REQUEST",{message:bu.YOU_CANNOT_BAN_YOURSELF});let n=await e.context.internalAdapter.updateUser(e.body.userId,{banned:!0,banReason:e.body.banReason||t?.defaultBanReason||"No reason",banExpires:e.body.banExpiresIn?gl(e.body.banExpiresIn,"sec"):t?.defaultBanExpiresIn?gl(t.defaultBanExpiresIn,"sec"):void 0,updatedAt:new Date});return await e.context.internalAdapter.deleteSessions(e.body.userId),e.json({user:n})}),impersonateUser:m7("/admin/impersonate-user",{method:"POST",body:bE,use:[bp],metadata:{openapi:{operationId:"impersonateUser",summary:"Impersonate a user",description:"Impersonate a user",responses:{200:{description:"Impersonation session created",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}}}}}}}}}},async e=>{if(!bd({userId:e.context.session.user.id,role:e.context.session.user.role,options:t,permissions:{user:["impersonate"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS});let r=await e.context.internalAdapter.findUserById(e.body.userId);if(!r)throw new mS("NOT_FOUND",{message:"User not found"});let n=(Array.isArray(t.adminRoles)?t.adminRoles:t.adminRoles?.split(",")||[]).map(e=>e.trim()),i=(r.role||t.defaultRole||"user").split(",");if(!0!==t.allowImpersonatingAdmins&&(i.some(e=>n.includes(e))||t.adminUserIds?.includes(r.id)))throw new mS("FORBIDDEN",{message:bu.YOU_CANNOT_IMPERSONATE_ADMINS});let o=await e.context.internalAdapter.createSession(r.id,!0,{impersonatedBy:e.context.session.user.id,expiresAt:t?.impersonationSessionDuration?gl(t.impersonationSessionDuration,"sec"):gl(3600,"sec")},!0);if(!o)throw new mS("INTERNAL_SERVER_ERROR",{message:bu.FAILED_TO_CREATE_USER});let a=e.context.authCookies;yd(e);let s=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret),l=e.context.createAuthCookie("admin_session");return await e.setSignedCookie(l.name,`${e.context.session.session.token}:${s||""}`,e.context.secret,a.sessionToken.options),await yu(e,{session:o,user:r},!0),e.json({session:o,user:r})}),stopImpersonating:m7("/admin/stop-impersonating",{method:"POST",requireHeaders:!0},async e=>{let t=await yh(e);if(!t)throw new mS("UNAUTHORIZED");if(!t.session.impersonatedBy)throw new mS("BAD_REQUEST",{message:"You are not impersonating anyone"});let r=await e.context.internalAdapter.findUserById(t.session.impersonatedBy);if(!r)throw new mS("INTERNAL_SERVER_ERROR",{message:"Failed to find user"});let n=e.context.createAuthCookie("admin_session").name,i=await e.getSignedCookie(n,e.context.secret);if(!i)throw new mS("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});let[o,a]=i?.split(":"),s=await e.context.internalAdapter.findSession(o);if(!s||s.session.userId!==r.id)throw new mS("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});return await e.context.internalAdapter.deleteSession(t.session.token),await yu(e,s,!!a),await e.setSignedCookie(n,"",e.context.secret,{...e.context.authCookies.sessionToken.options,maxAge:0}),e.json(s)}),revokeUserSession:m7("/admin/revoke-user-session",{method:"POST",body:bx,use:[bp],metadata:{openapi:{operationId:"revokeUserSession",summary:"Revoke a user session",description:"Revoke a user session",responses:{200:{description:"Session revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async e=>{let r=e.context.session;if(!bd({userId:e.context.session.user.id,role:r.user.role,options:t,permissions:{session:["revoke"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await e.context.internalAdapter.deleteSession(e.body.sessionToken),e.json({success:!0})}),revokeUserSessions:m7("/admin/revoke-user-sessions",{method:"POST",body:bS,use:[bp],metadata:{openapi:{operationId:"revokeUserSessions",summary:"Revoke all user sessions",description:"Revoke all user sessions",responses:{200:{description:"Sessions revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async e=>{let r=e.context.session;if(!bd({userId:e.context.session.user.id,role:r.user.role,options:t,permissions:{session:["revoke"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await e.context.internalAdapter.deleteSessions(e.body.userId),e.json({success:!0})}),removeUser:m7("/admin/remove-user",{method:"POST",body:bk,use:[bp],metadata:{openapi:{operationId:"removeUser",summary:"Remove a user",description:"Delete a user and all their sessions and accounts. Cannot be undone.",responses:{200:{description:"User removed",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async e=>{let r=e.context.session;if(!bd({userId:e.context.session.user.id,role:r.user.role,options:t,permissions:{user:["delete"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS});if(e.body.userId===e.context.session.user.id)throw new mS("BAD_REQUEST",{message:bu.YOU_CANNOT_REMOVE_YOURSELF});if(!await e.context.internalAdapter.findUserById(e.body.userId))throw new mS("NOT_FOUND",{message:"User not found"});return await e.context.internalAdapter.deleteUser(e.body.userId),e.json({success:!0})}),setUserPassword:m7("/admin/set-user-password",{method:"POST",body:bA,use:[bp],metadata:{openapi:{operationId:"setUserPassword",summary:"Set a user's password",description:"Set a user's password",responses:{200:{description:"Password set",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{if(!bd({userId:e.context.session.user.id,role:e.context.session.user.role,options:t,permissions:{user:["set-password"]}}))throw new mS("FORBIDDEN",{message:bu.YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD});let{newPassword:r,userId:n}=e.body,i=e.context.password.config.minPasswordLength;if(r.length<i)throw e.context.logger.error("Password is too short"),new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_SHORT});let o=e.context.password.config.maxPasswordLength;if(r.length>o)throw e.context.logger.error("Password is too long"),new mS("BAD_REQUEST",{message:yp.n.PASSWORD_TOO_LONG});let a=await e.context.password.hash(r);return await e.context.internalAdapter.updatePassword(n,a),e.json({status:!0})}),userHasPermission:m7("/admin/has-permission",{method:"POST",body:bI,metadata:{openapi:{description:"Check if the user has permission",requestBody:{content:{"application/json":{schema:{type:"object",properties:{permission:{type:"object",description:"The permission to check",deprecated:!0},permissions:{type:"object",description:"The permission to check"}},required:["permissions"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{error:{type:"string"},success:{type:"boolean"}},required:["success"]}}}}}},$Infer:{body:{}}}},async e=>{if(!e.body?.permission&&!e.body?.permissions)throw new mS("BAD_REQUEST",{message:"invalid permission check. no permission(s) were passed."});let r=await yh(e);if(!r&&(e.request||e.headers))throw new mS("UNAUTHORIZED");if(!r&&!e.body.userId&&!e.body.role)throw new mS("BAD_REQUEST",{message:"user id or role is required"});let n=r?.user||(e.body.role?{id:e.body.userId||"",role:e.body.role}:null)||await e.context.internalAdapter.findUserById(e.body.userId);if(!n)throw new mS("BAD_REQUEST",{message:"user not found"});let i=bd({userId:n.id,role:n.role,options:t,permissions:e.body.permissions??e.body.permission});return e.json({error:null,success:i})})},$ERROR_CODES:bu,schema:gw(bT,t.schema),options:e}})({adminRoles:["ADMIN"],defaultRole:"STUDENT",adminUserIds:["jvp0LDpaCm0Y2VpUVP75vCNQnDioEdpm"]})]},bi),bY={"/api":{requests:200,window:60},"/problems":{requests:100,window:60}};async function bQ(e){let t=e.nextUrl.pathname,r="ready"===tA.status?"Redis":"Inbuilt";if(console.log(`[Cache: ${r}] ${e.method} ${t}`),t.startsWith("/admin")||t.startsWith("/dashboard/institution")||t.startsWith("/dashboard/teacher")||t.startsWith("/dashboard/contests"))try{let r=await bJ.api.getSession({headers:e.headers});if(!r)return tk.NextResponse.redirect(new URL("/signin",e.url));let n=r.user.role;if(t.startsWith("/admin")&&"ADMIN"!==n||t.startsWith("/dashboard/institution")&&"INSTITUTION_MANAGER"!==n||(t.startsWith("/dashboard/teacher")||t.startsWith("/dashboard/contests"))&&!["TEACHER","ADMIN","INSTITUTION_MANAGER","CONTEST_MANAGER"].includes(n))return tk.NextResponse.redirect(new URL("/",e.url))}catch(t){return console.error("Auth middleware error:",t),tk.NextResponse.redirect(new URL("/signin",e.url))}let n=e.headers.get("x-forwarded-for")??e.headers.get("x-real-ip")??"unknown",i=Object.entries(bY).find(([e])=>t.startsWith(e));if(!i)return tk.NextResponse.next();let[,o]=i,a=`rate-limit:${n}:${t.split("/").slice(0,3).join("/")}`;try{let e=await tA.incr(a);if(1===e&&await tA.expire(a,o.window),e>o.requests)return tk.NextResponse.json({error:"Rate limit exceeded",retryAfter:o.window},{status:429,headers:{"Retry-After":o.window.toString(),"X-RateLimit-Limit":o.requests.toString(),"X-RateLimit-Remaining":"0","X-RateLimit-Reset":(Date.now()+1e3*o.window).toString()}});let t=tk.NextResponse.next();return t.headers.set("X-RateLimit-Limit",o.requests.toString()),t.headers.set("X-RateLimit-Remaining",(o.requests-e).toString()),t}catch(e){return console.error("Rate limiting error:",e),tk.NextResponse.next()}}e.s(["config",0,{matcher:["/api/:path*","/problems/:path*","/admin/:path*","/dashboard/institution/:path*","/dashboard/teacher/:path*","/dashboard/contests/:path*"]},"default",()=>bQ],294824);var bX=e.i(294824);Object.values({NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401});let b0={...bX},b1="/proxy",b4=b0.proxy||b0.default;if("function"!=typeof b4)throw new class extends Error{constructor(e){super(e),this.stack=""}}(`The Proxy file "${b1}" must export a function named \`proxy\` or a default function.`);e.s(["default",0,e=>tS({...e,page:b1,handler:async(...e)=>{try{return await b4(...e)}catch(i){let t=e[0],r=new URL(t.url),n=r.pathname+r.search;throw await b(i,{path:n,method:t.method,headers:Object.fromEntries(t.headers.entries())},{routerKind:"Pages Router",routePath:"/proxy",routeType:"proxy",revalidateReason:void 0}),i}}})],62395)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fb0cf5ee._.js.map